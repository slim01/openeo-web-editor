(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0322b59b"],{"00b8":function(e,t,i){"use strict";var n=i("58a9"),r=i.n(n);r.a},"0354":function(e,t,i){"use strict";e.exports=r,e.exports.default=r;var n=i("61ca");function r(e,t){if(!(this instanceof r))return new r(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function s(e,t,i){if(!i)return t.indexOf(e);for(var n=0;n<t.length;n++)if(i(e,t[n]))return n;return-1}function a(e,t){o(e,0,e.children.length,t,e)}function o(e,t,i,n,r){r||(r=b(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var s,a=t;a<i;a++)s=e.children[a],l(r,e.leaf?n(s):s);return r}function l(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function c(e,t){return e.minX-t.minX}function u(e,t){return e.minY-t.minY}function h(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function d(e){return e.maxX-e.minX+(e.maxY-e.minY)}function p(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function f(e,t){var i=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),r=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,r-i)*Math.max(0,s-n)}function v(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function m(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function b(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,t,i,r,s){var a,o=[t,i];while(o.length)i=o.pop(),t=o.pop(),i-t<=r||(a=t+Math.ceil((i-t)/r/2)*r,n(e,a,t,i,s),o.push(t,a,a,i))}r.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],n=this.toBBox;if(!m(e,t))return i;var r,s,a,o,l=[];while(t){for(r=0,s=t.children.length;r<s;r++)a=t.children[r],o=t.leaf?n(a):a,m(e,o)&&(t.leaf?i.push(a):v(e,o)?this._all(a,i):l.push(a));t=l.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!m(e,t))return!1;var n,r,s,a,o=[];while(t){for(n=0,r=t.children.length;n<r;n++)if(s=t.children[n],a=t.leaf?i(s):s,m(e,a)){if(t.leaf||v(e,a))return!0;o.push(s)}t=o.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=b([]),this},remove:function(e,t){if(!e)return this;var i,n,r,a,o=this.data,l=this.toBBox(e),c=[],u=[];while(o||c.length){if(o||(o=c.pop(),n=c[c.length-1],i=u.pop(),a=!0),o.leaf&&(r=s(e,o.children,t),-1!==r))return o.children.splice(r,1),c.push(o),this._condense(c),this;a||o.leaf||!v(o,l)?n?(i++,o=n.children[i],a=!1):o=null:(c.push(o),u.push(i),i=0,n=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:c,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){var i=[];while(e)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,n){var r,s=i-t+1,o=this._maxEntries;if(s<=o)return r=b(e.slice(t,i+1)),a(r,this.toBBox),r;n||(n=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,n-1))),r=b([]),r.leaf=!1,r.height=n;var l,c,u,h,d=Math.ceil(s/o),p=d*Math.ceil(Math.sqrt(o));for(g(e,t,i,p,this.compareMinX),l=t;l<=i;l+=p)for(u=Math.min(l+p-1,i),g(e,l,u,d,this.compareMinY),c=l;c<=u;c+=d)h=Math.min(c+d-1,u),r.children.push(this._build(e,c,h,n-1));return a(r,this.toBBox),r},_chooseSubtree:function(e,t,i,n){var r,s,a,o,l,c,u,d;while(1){if(n.push(t),t.leaf||n.length-1===i)break;for(u=d=1/0,r=0,s=t.children.length;r<s;r++)a=t.children[r],l=h(a),c=p(e,a)-l,c<d?(d=c,u=l<u?l:u,o=a):c===d&&l<u&&(u=l,o=a);t=o||t.children[0]}return t},_insert:function(e,t,i){var n=this.toBBox,r=i?e:n(e),s=[],a=this._chooseSubtree(r,this.data,t,s);a.children.push(e),l(a,r);while(t>=0){if(!(s[t].children.length>this._maxEntries))break;this._split(s,t),t--}this._adjustParentBBoxes(r,s,t)},_split:function(e,t){var i=e[t],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var s=this._chooseSplitIndex(i,r,n),o=b(i.children.splice(s,i.children.length-s));o.height=i.height,o.leaf=i.leaf,a(i,this.toBBox),a(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(e,t){this.data=b([e,t]),this.data.height=e.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var n,r,s,a,l,c,u,d;for(c=u=1/0,n=t;n<=i-t;n++)r=o(e,0,n,this.toBBox),s=o(e,n,i,this.toBBox),a=f(r,s),l=h(r)+h(s),a<c?(c=a,d=n,u=l<u?l:u):a===c&&l<u&&(u=l,d=n);return d},_chooseSplitAxis:function(e,t,i){var n=e.leaf?this.compareMinX:c,r=e.leaf?this.compareMinY:u,s=this._allDistMargin(e,t,i,n),a=this._allDistMargin(e,t,i,r);s<a&&e.children.sort(n)},_allDistMargin:function(e,t,i,n){e.children.sort(n);var r,s,a=this.toBBox,c=o(e,0,t,a),u=o(e,i-t,i,a),h=d(c)+d(u);for(r=t;r<i-t;r++)s=e.children[r],l(c,e.leaf?a(s):s),h+=d(c);for(r=i-t-1;r>=t;r--)s=e.children[r],l(u,e.leaf?a(s):s),h+=d(u);return h},_adjustParentBBoxes:function(e,t,i){for(var n=i;n>=0;n--)l(t[n],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)0===e[i].children.length?i>0?(t=e[i-1].children,t.splice(t.indexOf(e[i]),1)):this.clear():a(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}},"0791":function(e,t,i){"use strict";var n=i("22f1"),r=i.n(n);r.a},"0b46":function(e,t,i){},"0df61":function(e,t,i){"use strict";var n=i("10b5"),r=i.n(n);r.a},"10b5":function(e,t,i){},1190:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sourceHeader"},[e.scriptName?i("h3",[e._v(e._s(e.scriptName))]):e._e(),i("div",{staticClass:"sourceToolbar"},[e._t("default"),e.enableLocalStorage||e.enableClear?i("span",{staticClass:"sepl"},[e.enableClear&&e.editable?i("button",{attrs:{type:"button",title:"Clear current script / New script"},on:{click:e.newScript}},[i("i",{staticClass:"fas fa-file"})]):e._e(),e.enableLocalStorage&&e.editable?i("button",{attrs:{type:"button",title:"Load script from local storage"},on:{click:e.openScriptChooser}},[i("i",{staticClass:"fas fa-folder-open"})]):e._e(),e.enableLocalStorage?i("button",{attrs:{type:"button",title:"Save script to local storage"},on:{click:e.saveScript}},[i("i",{staticClass:"fas fa-save"})]):e._e()]):e._e(),e.enableExecute&&e.supports("computeResult")?i("button",{staticClass:"sepl",attrs:{type:"button",title:"Run current process graph and view results"},on:{click:e.executeProcessGraph}},[i("i",{staticClass:"fas fa-play"})]):e._e()],2)])},r=[],s=(i("8e6e"),i("ac6a"),i("456d"),i("7f7f"),i("bd86")),a=i("4877"),o=i("025e");function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(i,!0).forEach(function(t){Object(s["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var u={name:"EditorToolbar",mixins:[a["a"]],props:{editable:{type:Boolean,default:!0},onClear:{type:Function,required:!0},onInsert:{type:Function,required:!0},onStore:{type:Function,required:!0},enableClear:{type:Boolean,default:!0},enableLocalStorage:{type:Boolean,default:!0},enableExecute:{type:Boolean,default:!0}},computed:c({},o["a"].mapState("server",["connection"]),{},o["a"].mapState("editor",["storedScripts","scriptName"]),{},o["a"].mapGetters("server",["supports"])),methods:c({},o["a"].mapMutations("editor",["addScript","removeScript","setScriptName"]),{newScript:function(){var e=confirm("Do you really want to clear the existing script to create a new one?");e&&(this.onClear(),this.setScriptName(null))},loadScript:function(e){var t=this.storedScripts[e];return t?(this.onInsert(t),this.setScriptName(e),!0):(o["a"].info(this,'No script with the name "'+e+'" found.'),!1)},openScriptChooser:function(){var e=this;this.emit("showListModal","Select script to load",this.storedScripts,[{callback:function(t){return e.loadScript(t)}},{callback:function(t){return e.removeScript(t)},icon:"trash",title:"Delete script"}])},saveScript:function(){var e=this,t=prompt("Name for the script:","string"===typeof this.scriptName?this.scriptName:"");t&&this.onStore(function(i){e.addScript({name:t,script:i}),e.setScriptName(t)})},executeProcessGraph:function(){var e=this;this.emit("getProcessGraph",function(t){o["a"].info(e,"Data requested. Please wait..."),e.emit("viewSyncResult",t)})}})},h=u,d=(i("f196"),i("2877")),p=Object(d["a"])(h,n,r,!1,null,null,null);t["a"]=p.exports},"14c0":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{ref:"__modal",attrs:{minWidth:"60%",maxWidth:"90%"},scopedSlots:e._u([{key:"main",fn:function(){return[0===e.editableFields.length?i("p",[e._v("No editable parameters available.")]):i("form",{attrs:{id:"parameterModal"},on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[e._l(e.editableFields,function(t,n){return i("div",{key:n,staticClass:"fieldRow"},[i("label",{class:{fieldLabel:!0,highlight:t.name===e.selectFieldName}},[e._v("\n\t\t\t\t\t"+e._s(t.label)),t.isRequired?i("strong",{staticClass:"required",attrs:{title:"required"}},[e._v("*")]):e._e(),t.description?i("div",{staticClass:"description"},[i("Description",{attrs:{description:t.description}})],1):e._e()]),i("ParameterFields",{ref:t.name,refInFor:!0,attrs:{uid:e.uid,editable:e.editable,field:t,pass:t.getValue(),processId:e.processId}})],1)}),i("button",{staticStyle:{display:"none"},attrs:{type:"submit"}})],2)]},proxy:!0},"function"===typeof e.saveCallback?{key:"footer",fn:function(){return[i("div",{staticClass:"footer"},[i("button",{staticClass:"save",on:{click:e.save}},[e._v("Save")])])]},proxy:!0}:null],null,!0)})},r=[],s=(i("6b54"),i("025e")),a=i("714b"),o=i("8088"),l=i("5fd6"),c={name:"ParameterModal",components:{Modal:a["a"],Description:o["a"],ParameterFields:l["a"]},data:function(){return{uid:"_"+Math.random().toString(36).substr(2,9),editableFields:[],editable:!0,selectFieldName:null,saveCallback:null,processId:null}},methods:{save:function(){try{if("function"===typeof this.saveCallback){var e={};for(var t in this.$refs)Array.isArray(this.$refs[t])&&this.$refs[t].length>0&&s["a"].isObject(this.$refs[t][0])&&"function"==typeof this.$refs[t][0].getValue&&(e[t]=this.$refs[t][0].getValue());this.saveCallback(e)}this.$refs.__modal.close()}catch(i){s["a"].exception(this,i)}},show:function(e,t){var i=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.editableFields=t,this.editable=n,this.saveCallback=r,this.processId=a,this.selectFieldName=o,this.$refs.__modal.show(e,s),setTimeout(function(){i.selectFieldName&&Array.isArray(i.$refs[i.selectFieldName])&&i.$refs[i.selectFieldName][0]&&i.$refs[i.selectFieldName][0].$el.scrollIntoView()},100)}}},u=c,h=(i("cf2f"),i("e0b0"),i("2877")),d=Object(h["a"])(u,n,r,!1,null,"efa4af42",null);t["a"]=d.exports},"15dd":function(e,t,i){"use strict";var n=i("4a22"),r=i.n(n);r.a},1887:function(e,t,i){},"22f1":function(e,t,i){},"2bd0":function(e,t,i){"use strict";var n=i("bfcb"),r=i.n(n);r.a},"310e":function(e,t,i){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="fb15")}({"02f4":function(e,t,i){var n=i("4588"),r=i("be13");e.exports=function(e){return function(t,i){var s,a,o=String(r(t)),l=n(i),c=o.length;return l<0||l>=c?e?"":void 0:(s=o.charCodeAt(l),s<55296||s>56319||l+1===c||(a=o.charCodeAt(l+1))<56320||a>57343?e?o.charAt(l):s:e?o.slice(l,l+2):a-56320+(s-55296<<10)+65536)}}},"0390":function(e,t,i){"use strict";var n=i("02f4")(!0);e.exports=function(e,t,i){return t+(i?n(e,t).length:1)}},"07e3":function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},"0bfb":function(e,t,i){"use strict";var n=i("cb7c");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"0fc9":function(e,t,i){var n=i("3a38"),r=Math.max,s=Math.min;e.exports=function(e,t){return e=n(e),e<0?r(e+t,0):s(e,t)}},1654:function(e,t,i){"use strict";var n=i("71c1")(!0);i("30f1")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=n(t,i),this._i+=e.length,{value:e,done:!1})})},1691:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"1af6":function(e,t,i){var n=i("63b6");n(n.S,"Array",{isArray:i("9003")})},"1bc3":function(e,t,i){var n=i("f772");e.exports=function(e,t){if(!n(e))return e;var i,r;if(t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;if("function"==typeof(i=e.valueOf)&&!n(r=i.call(e)))return r;if(!t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},"1ec9":function(e,t,i){var n=i("f772"),r=i("e53d").document,s=n(r)&&n(r.createElement);e.exports=function(e){return s?r.createElement(e):{}}},"20fd":function(e,t,i){"use strict";var n=i("d9f6"),r=i("aebd");e.exports=function(e,t,i){t in e?n.f(e,t,r(0,i)):e[t]=i}},"214f":function(e,t,i){"use strict";i("b0c5");var n=i("2aba"),r=i("32e9"),s=i("79e5"),a=i("be13"),o=i("2b4c"),l=i("520a"),c=o("species"),u=!s(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),h=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();e.exports=function(e,t,i){var d=o(e),p=!s(function(){var t={};return t[d]=function(){return 7},7!=""[e](t)}),f=p?!s(function(){var t=!1,i=/a/;return i.exec=function(){return t=!0,null},"split"===e&&(i.constructor={},i.constructor[c]=function(){return i}),i[d](""),!t}):void 0;if(!p||!f||"replace"===e&&!u||"split"===e&&!h){var v=/./[d],m=i(a,d,""[e],function(e,t,i,n,r){return t.exec===l?p&&!r?{done:!0,value:v.call(t,i,n)}:{done:!0,value:e.call(i,t,n)}:{done:!1}}),b=m[0],g=m[1];n(String.prototype,e,b),r(RegExp.prototype,d,2==t?function(e,t){return g.call(e,this,t)}:function(e){return g.call(e,this)})}}},"230e":function(e,t,i){var n=i("d3f4"),r=i("7726").document,s=n(r)&&n(r.createElement);e.exports=function(e){return s?r.createElement(e):{}}},"23c6":function(e,t,i){var n=i("2d95"),r=i("2b4c")("toStringTag"),s="Arguments"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(i){}};e.exports=function(e){var t,i,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=a(t=Object(e),r))?i:s?n(t):"Object"==(o=n(t))&&"function"==typeof t.callee?"Arguments":o}},"241e":function(e,t,i){var n=i("25eb");e.exports=function(e){return Object(n(e))}},"25eb":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},"294c":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"2aba":function(e,t,i){var n=i("7726"),r=i("32e9"),s=i("69a8"),a=i("ca5a")("src"),o=i("fa5b"),l="toString",c=(""+o).split(l);i("8378").inspectSource=function(e){return o.call(e)},(e.exports=function(e,t,i,o){var l="function"==typeof i;l&&(s(i,"name")||r(i,"name",t)),e[t]!==i&&(l&&(s(i,a)||r(i,a,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=i:o?e[t]?e[t]=i:r(e,t,i):(delete e[t],r(e,t,i)))})(Function.prototype,l,function(){return"function"==typeof this&&this[a]||o.call(this)})},"2b4c":function(e,t,i){var n=i("5537")("wks"),r=i("ca5a"),s=i("7726").Symbol,a="function"==typeof s,o=e.exports=function(e){return n[e]||(n[e]=a&&s[e]||(a?s:r)("Symbol."+e))};o.store=n},"2d00":function(e,t){e.exports=!1},"2d95":function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},"2fdb":function(e,t,i){"use strict";var n=i("5ca1"),r=i("d2c8"),s="includes";n(n.P+n.F*i("5147")(s),"String",{includes:function(e){return!!~r(this,e,s).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"30f1":function(e,t,i){"use strict";var n=i("b8e3"),r=i("63b6"),s=i("9138"),a=i("35e8"),o=i("481b"),l=i("8f60"),c=i("45f2"),u=i("53e2"),h=i("5168")("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",f="keys",v="values",m=function(){return this};e.exports=function(e,t,i,b,g,y,w){l(i,t,b);var k,x,S,C=function(e){if(!d&&e in j)return j[e];switch(e){case f:return function(){return new i(this,e)};case v:return function(){return new i(this,e)}}return function(){return new i(this,e)}},_=t+" Iterator",P=g==v,O=!1,j=e.prototype,D=j[h]||j[p]||g&&j[g],E=D||C(g),T=g?P?C("entries"):E:void 0,M="Array"==t&&j.entries||D;if(M&&(S=u(M.call(new e)),S!==Object.prototype&&S.next&&(c(S,_,!0),n||"function"==typeof S[h]||a(S,h,m))),P&&D&&D.name!==v&&(O=!0,E=function(){return D.call(this)}),n&&!w||!d&&!O&&j[h]||a(j,h,E),o[t]=E,o[_]=m,g)if(k={values:P?E:C(v),keys:y?E:C(f),entries:T},w)for(x in k)x in j||s(j,x,k[x]);else r(r.P+r.F*(d||O),t,k);return k}},"32a6":function(e,t,i){var n=i("241e"),r=i("c3a1");i("ce7e")("keys",function(){return function(e){return r(n(e))}})},"32e9":function(e,t,i){var n=i("86cc"),r=i("4630");e.exports=i("9e1e")?function(e,t,i){return n.f(e,t,r(1,i))}:function(e,t,i){return e[t]=i,e}},"32fc":function(e,t,i){var n=i("e53d").document;e.exports=n&&n.documentElement},"335c":function(e,t,i){var n=i("6b4c");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},"355d":function(e,t){t.f={}.propertyIsEnumerable},"35e8":function(e,t,i){var n=i("d9f6"),r=i("aebd");e.exports=i("8e60")?function(e,t,i){return n.f(e,t,r(1,i))}:function(e,t,i){return e[t]=i,e}},"36c3":function(e,t,i){var n=i("335c"),r=i("25eb");e.exports=function(e){return n(r(e))}},3702:function(e,t,i){var n=i("481b"),r=i("5168")("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||s[r]===e)}},"3a38":function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},"40c3":function(e,t,i){var n=i("6b4c"),r=i("5168")("toStringTag"),s="Arguments"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(i){}};e.exports=function(e){var t,i,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=a(t=Object(e),r))?i:s?n(t):"Object"==(o=n(t))&&"function"==typeof t.callee?"Arguments":o}},4588:function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},"45f2":function(e,t,i){var n=i("d9f6").f,r=i("07e3"),s=i("5168")("toStringTag");e.exports=function(e,t,i){e&&!r(e=i?e:e.prototype,s)&&n(e,s,{configurable:!0,value:t})}},4630:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"469f":function(e,t,i){i("6c1c"),i("1654"),e.exports=i("7d7b")},"481b":function(e,t){e.exports={}},"4aa6":function(e,t,i){e.exports=i("dc62")},"4bf8":function(e,t,i){var n=i("be13");e.exports=function(e){return Object(n(e))}},"4ee1":function(e,t,i){var n=i("5168")("iterator"),r=!1;try{var s=[7][n]();s["return"]=function(){r=!0},Array.from(s,function(){throw 2})}catch(a){}e.exports=function(e,t){if(!t&&!r)return!1;var i=!1;try{var s=[7],o=s[n]();o.next=function(){return{done:i=!0}},s[n]=function(){return o},e(s)}catch(a){}return i}},"50ed":function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},5147:function(e,t,i){var n=i("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[n]=!1,!"/./"[e](t)}catch(r){}}return!0}},5168:function(e,t,i){var n=i("dbdb")("wks"),r=i("62a0"),s=i("e53d").Symbol,a="function"==typeof s,o=e.exports=function(e){return n[e]||(n[e]=a&&s[e]||(a?s:r)("Symbol."+e))};o.store=n},5176:function(e,t,i){e.exports=i("51b6")},"51b6":function(e,t,i){i("a3c3"),e.exports=i("584a").Object.assign},"520a":function(e,t,i){"use strict";var n=i("0bfb"),r=RegExp.prototype.exec,s=String.prototype.replace,a=r,o="lastIndex",l=function(){var e=/a/,t=/b*/g;return r.call(e,"a"),r.call(t,"a"),0!==e[o]||0!==t[o]}(),c=void 0!==/()??/.exec("")[1],u=l||c;u&&(a=function(e){var t,i,a,u,h=this;return c&&(i=new RegExp("^"+h.source+"$(?!\\s)",n.call(h))),l&&(t=h[o]),a=r.call(h,e),l&&a&&(h[o]=h.global?a.index+a[0].length:t),c&&a&&a.length>1&&s.call(a[0],i,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(a[u]=void 0)}),a}),e.exports=a},"53e2":function(e,t,i){var n=i("07e3"),r=i("241e"),s=i("5559")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),n(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},"549b":function(e,t,i){"use strict";var n=i("d864"),r=i("63b6"),s=i("241e"),a=i("b0dc"),o=i("3702"),l=i("b447"),c=i("20fd"),u=i("7cd6");r(r.S+r.F*!i("4ee1")(function(e){Array.from(e)}),"Array",{from:function(e){var t,i,r,h,d=s(e),p="function"==typeof this?this:Array,f=arguments.length,v=f>1?arguments[1]:void 0,m=void 0!==v,b=0,g=u(d);if(m&&(v=n(v,f>2?arguments[2]:void 0,2)),void 0==g||p==Array&&o(g))for(t=l(d.length),i=new p(t);t>b;b++)c(i,b,m?v(d[b],b):d[b]);else for(h=g.call(d),i=new p;!(r=h.next()).done;b++)c(i,b,m?a(h,v,[r.value,b],!0):r.value);return i.length=b,i}})},"54a1":function(e,t,i){i("6c1c"),i("1654"),e.exports=i("95d5")},5537:function(e,t,i){var n=i("8378"),r=i("7726"),s="__core-js_shared__",a=r[s]||(r[s]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:i("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},5559:function(e,t,i){var n=i("dbdb")("keys"),r=i("62a0");e.exports=function(e){return n[e]||(n[e]=r(e))}},"584a":function(e,t){var i=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=i)},"5b4e":function(e,t,i){var n=i("36c3"),r=i("b447"),s=i("0fc9");e.exports=function(e){return function(t,i,a){var o,l=n(t),c=r(l.length),u=s(a,c);if(e&&i!=i){while(c>u)if(o=l[u++],o!=o)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===i)return e||u||0;return!e&&-1}}},"5ca1":function(e,t,i){var n=i("7726"),r=i("8378"),s=i("32e9"),a=i("2aba"),o=i("9b43"),l="prototype",c=function(e,t,i){var u,h,d,p,f=e&c.F,v=e&c.G,m=e&c.S,b=e&c.P,g=e&c.B,y=v?n:m?n[t]||(n[t]={}):(n[t]||{})[l],w=v?r:r[t]||(r[t]={}),k=w[l]||(w[l]={});for(u in v&&(i=t),i)h=!f&&y&&void 0!==y[u],d=(h?y:i)[u],p=g&&h?o(d,n):b&&"function"==typeof d?o(Function.call,d):d,y&&a(y,u,d,e&c.U),w[u]!=d&&s(w,u,p),b&&k[u]!=d&&(k[u]=d)};n.core=r,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},"5d73":function(e,t,i){e.exports=i("469f")},"5f1b":function(e,t,i){"use strict";var n=i("23c6"),r=RegExp.prototype.exec;e.exports=function(e,t){var i=e.exec;if("function"===typeof i){var s=i.call(e,t);if("object"!==typeof s)throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},"626a":function(e,t,i){var n=i("2d95");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},"62a0":function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},"63b6":function(e,t,i){var n=i("e53d"),r=i("584a"),s=i("d864"),a=i("35e8"),o=i("07e3"),l="prototype",c=function(e,t,i){var u,h,d,p=e&c.F,f=e&c.G,v=e&c.S,m=e&c.P,b=e&c.B,g=e&c.W,y=f?r:r[t]||(r[t]={}),w=y[l],k=f?n:v?n[t]:(n[t]||{})[l];for(u in f&&(i=t),i)h=!p&&k&&void 0!==k[u],h&&o(y,u)||(d=h?k[u]:i[u],y[u]=f&&"function"!=typeof k[u]?i[u]:b&&h?s(d,n):g&&k[u]==d?function(e){var t=function(t,i,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,n)}return e.apply(this,arguments)};return t[l]=e[l],t}(d):m&&"function"==typeof d?s(Function.call,d):d,m&&((y.virtual||(y.virtual={}))[u]=d,e&c.R&&w&&!w[u]&&a(w,u,d)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},6762:function(e,t,i){"use strict";var n=i("5ca1"),r=i("c366")(!0);n(n.P,"Array",{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")("includes")},6821:function(e,t,i){var n=i("626a"),r=i("be13");e.exports=function(e){return n(r(e))}},"69a8":function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},"6a99":function(e,t,i){var n=i("d3f4");e.exports=function(e,t){if(!n(e))return e;var i,r;if(t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;if("function"==typeof(i=e.valueOf)&&!n(r=i.call(e)))return r;if(!t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},"6b4c":function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},"6c1c":function(e,t,i){i("c367");for(var n=i("e53d"),r=i("35e8"),s=i("481b"),a=i("5168")("toStringTag"),o="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<o.length;l++){var c=o[l],u=n[c],h=u&&u.prototype;h&&!h[a]&&r(h,a,c),s[c]=s.Array}},"71c1":function(e,t,i){var n=i("3a38"),r=i("25eb");e.exports=function(e){return function(t,i){var s,a,o=String(r(t)),l=n(i),c=o.length;return l<0||l>=c?e?"":void 0:(s=o.charCodeAt(l),s<55296||s>56319||l+1===c||(a=o.charCodeAt(l+1))<56320||a>57343?e?o.charAt(l):s:e?o.slice(l,l+2):a-56320+(s-55296<<10)+65536)}}},7726:function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},"774e":function(e,t,i){e.exports=i("d2d5")},"77f1":function(e,t,i){var n=i("4588"),r=Math.max,s=Math.min;e.exports=function(e,t){return e=n(e),e<0?r(e+t,0):s(e,t)}},"794b":function(e,t,i){e.exports=!i("8e60")&&!i("294c")(function(){return 7!=Object.defineProperty(i("1ec9")("div"),"a",{get:function(){return 7}}).a})},"79aa":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"79e5":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"7cd6":function(e,t,i){var n=i("40c3"),r=i("5168")("iterator"),s=i("481b");e.exports=i("584a").getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||s[n(e)]}},"7d7b":function(e,t,i){var n=i("e4ae"),r=i("7cd6");e.exports=i("584a").getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},"7e90":function(e,t,i){var n=i("d9f6"),r=i("e4ae"),s=i("c3a1");e.exports=i("8e60")?Object.defineProperties:function(e,t){r(e);var i,a=s(t),o=a.length,l=0;while(o>l)n.f(e,i=a[l++],t[i]);return e}},8378:function(e,t){var i=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=i)},8436:function(e,t){e.exports=function(){}},"86cc":function(e,t,i){var n=i("cb7c"),r=i("c69a"),s=i("6a99"),a=Object.defineProperty;t.f=i("9e1e")?Object.defineProperty:function(e,t,i){if(n(e),t=s(t,!0),n(i),r)try{return a(e,t,i)}catch(o){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},"8aae":function(e,t,i){i("32a6"),e.exports=i("584a").Object.keys},"8e60":function(e,t,i){e.exports=!i("294c")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"8f60":function(e,t,i){"use strict";var n=i("a159"),r=i("aebd"),s=i("45f2"),a={};i("35e8")(a,i("5168")("iterator"),function(){return this}),e.exports=function(e,t,i){e.prototype=n(a,{next:r(1,i)}),s(e,t+" Iterator")}},9003:function(e,t,i){var n=i("6b4c");e.exports=Array.isArray||function(e){return"Array"==n(e)}},9138:function(e,t,i){e.exports=i("35e8")},9306:function(e,t,i){"use strict";var n=i("c3a1"),r=i("9aa9"),s=i("355d"),a=i("241e"),o=i("335c"),l=Object.assign;e.exports=!l||i("294c")(function(){var e={},t={},i=Symbol(),n="abcdefghijklmnopqrst";return e[i]=7,n.split("").forEach(function(e){t[e]=e}),7!=l({},e)[i]||Object.keys(l({},t)).join("")!=n})?function(e,t){var i=a(e),l=arguments.length,c=1,u=r.f,h=s.f;while(l>c){var d,p=o(arguments[c++]),f=u?n(p).concat(u(p)):n(p),v=f.length,m=0;while(v>m)h.call(p,d=f[m++])&&(i[d]=p[d])}return i}:l},9427:function(e,t,i){var n=i("63b6");n(n.S,"Object",{create:i("a159")})},"95d5":function(e,t,i){var n=i("40c3"),r=i("5168")("iterator"),s=i("481b");e.exports=i("584a").isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||s.hasOwnProperty(n(t))}},"9aa9":function(e,t){t.f=Object.getOwnPropertySymbols},"9b43":function(e,t,i){var n=i("d8e8");e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,r){return e.call(t,i,n,r)}}return function(){return e.apply(t,arguments)}}},"9c6c":function(e,t,i){var n=i("2b4c")("unscopables"),r=Array.prototype;void 0==r[n]&&i("32e9")(r,n,{}),e.exports=function(e){r[n][e]=!0}},"9def":function(e,t,i){var n=i("4588"),r=Math.min;e.exports=function(e){return e>0?r(n(e),9007199254740991):0}},"9e1e":function(e,t,i){e.exports=!i("79e5")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},a159:function(e,t,i){var n=i("e4ae"),r=i("7e90"),s=i("1691"),a=i("5559")("IE_PROTO"),o=function(){},l="prototype",c=function(){var e,t=i("1ec9")("iframe"),n=s.length,r="<",a=">";t.style.display="none",i("32fc").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(r+"script"+a+"document.F=Object"+r+"/script"+a),e.close(),c=e.F;while(n--)delete c[l][s[n]];return c()};e.exports=Object.create||function(e,t){var i;return null!==e?(o[l]=n(e),i=new o,o[l]=null,i[a]=e):i=c(),void 0===t?i:r(i,t)}},a352:function(e,t){e.exports=i("53fe")},a3c3:function(e,t,i){var n=i("63b6");n(n.S+n.F,"Object",{assign:i("9306")})},a481:function(e,t,i){"use strict";var n=i("cb7c"),r=i("4bf8"),s=i("9def"),a=i("4588"),o=i("0390"),l=i("5f1b"),c=Math.max,u=Math.min,h=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,f=function(e){return void 0===e?e:String(e)};i("214f")("replace",2,function(e,t,i,v){return[function(n,r){var s=e(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,s,r):i.call(String(s),n,r)},function(e,t){var r=v(i,e,this,t);if(r.done)return r.value;var h=n(e),d=String(this),p="function"===typeof t;p||(t=String(t));var b=h.global;if(b){var g=h.unicode;h.lastIndex=0}var y=[];while(1){var w=l(h,d);if(null===w)break;if(y.push(w),!b)break;var k=String(w[0]);""===k&&(h.lastIndex=o(d,s(h.lastIndex),g))}for(var x="",S=0,C=0;C<y.length;C++){w=y[C];for(var _=String(w[0]),P=c(u(a(w.index),d.length),0),O=[],j=1;j<w.length;j++)O.push(f(w[j]));var D=w.groups;if(p){var E=[_].concat(O,P,d);void 0!==D&&E.push(D);var T=String(t.apply(void 0,E))}else T=m(_,d,P,O,D,t);P>=S&&(x+=d.slice(S,P)+T,S=P+_.length)}return x+d.slice(S)}];function m(e,t,n,s,a,o){var l=n+e.length,c=s.length,u=p;return void 0!==a&&(a=r(a),u=d),i.call(o,u,function(i,r){var o;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(l);case"<":o=a[r.slice(1,-1)];break;default:var u=+r;if(0===u)return i;if(u>c){var d=h(u/10);return 0===d?i:d<=c?void 0===s[d-1]?r.charAt(1):s[d-1]+r.charAt(1):i}o=s[u-1]}return void 0===o?"":o})}})},a4bb:function(e,t,i){e.exports=i("8aae")},a745:function(e,t,i){e.exports=i("f410")},aae3:function(e,t,i){var n=i("d3f4"),r=i("2d95"),s=i("2b4c")("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==r(e))}},aebd:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},b0c5:function(e,t,i){"use strict";var n=i("520a");i("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},b0dc:function(e,t,i){var n=i("e4ae");e.exports=function(e,t,i,r){try{return r?t(n(i)[0],i[1]):t(i)}catch(a){var s=e["return"];throw void 0!==s&&n(s.call(e)),a}}},b447:function(e,t,i){var n=i("3a38"),r=Math.min;e.exports=function(e){return e>0?r(n(e),9007199254740991):0}},b8e3:function(e,t){e.exports=!0},be13:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},c366:function(e,t,i){var n=i("6821"),r=i("9def"),s=i("77f1");e.exports=function(e){return function(t,i,a){var o,l=n(t),c=r(l.length),u=s(a,c);if(e&&i!=i){while(c>u)if(o=l[u++],o!=o)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===i)return e||u||0;return!e&&-1}}},c367:function(e,t,i){"use strict";var n=i("8436"),r=i("50ed"),s=i("481b"),a=i("36c3");e.exports=i("30f1")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])},"values"),s.Arguments=s.Array,n("keys"),n("values"),n("entries")},c3a1:function(e,t,i){var n=i("e6f3"),r=i("1691");e.exports=Object.keys||function(e){return n(e,r)}},c649:function(e,t,i){"use strict";(function(e){i.d(t,"c",function(){return h}),i.d(t,"a",function(){return c}),i.d(t,"b",function(){return a}),i.d(t,"d",function(){return u});i("a481");var n=i("4aa6"),r=i.n(n);function s(){return"undefined"!==typeof window?window.console:e.console}var a=s();function o(e){var t=r()(null);return function(i){var n=t[i];return n||(t[i]=e(i))}}var l=/-(\w)/g,c=o(function(e){return e.replace(l,function(e,t){return t?t.toUpperCase():""})});function u(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function h(e,t,i){var n=0===i?e.children[0]:e.children[i-1].nextSibling;e.insertBefore(t,n)}}).call(this,i("c8ba"))},c69a:function(e,t,i){e.exports=!i("9e1e")&&!i("79e5")(function(){return 7!=Object.defineProperty(i("230e")("div"),"a",{get:function(){return 7}}).a})},c8ba:function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){"object"===typeof window&&(i=window)}e.exports=i},c8bb:function(e,t,i){e.exports=i("54a1")},ca5a:function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},cb7c:function(e,t,i){var n=i("d3f4");e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},ce7e:function(e,t,i){var n=i("63b6"),r=i("584a"),s=i("294c");e.exports=function(e,t){var i=(r.Object||{})[e]||Object[e],a={};a[e]=t(i),n(n.S+n.F*s(function(){i(1)}),"Object",a)}},d2c8:function(e,t,i){var n=i("aae3"),r=i("be13");e.exports=function(e,t,i){if(n(t))throw TypeError("String#"+i+" doesn't accept regex!");return String(r(e))}},d2d5:function(e,t,i){i("1654"),i("549b"),e.exports=i("584a").Array.from},d3f4:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},d864:function(e,t,i){var n=i("79aa");e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,r){return e.call(t,i,n,r)}}return function(){return e.apply(t,arguments)}}},d8e8:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},d9f6:function(e,t,i){var n=i("e4ae"),r=i("794b"),s=i("1bc3"),a=Object.defineProperty;t.f=i("8e60")?Object.defineProperty:function(e,t,i){if(n(e),t=s(t,!0),n(i),r)try{return a(e,t,i)}catch(o){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},dbdb:function(e,t,i){var n=i("584a"),r=i("e53d"),s="__core-js_shared__",a=r[s]||(r[s]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:i("b8e3")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},dc62:function(e,t,i){i("9427");var n=i("584a").Object;e.exports=function(e,t){return n.create(e,t)}},e4ae:function(e,t,i){var n=i("f772");e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},e53d:function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},e6f3:function(e,t,i){var n=i("07e3"),r=i("36c3"),s=i("5b4e")(!1),a=i("5559")("IE_PROTO");e.exports=function(e,t){var i,o=r(e),l=0,c=[];for(i in o)i!=a&&n(o,i)&&c.push(i);while(t.length>l)n(o,i=t[l++])&&(~s(c,i)||c.push(i));return c}},f410:function(e,t,i){i("1af6"),e.exports=i("584a").Array.isArray},f559:function(e,t,i){"use strict";var n=i("5ca1"),r=i("9def"),s=i("d2c8"),a="startsWith",o=""[a];n(n.P+n.F*i("5147")(a),"String",{startsWith:function(e){var t=s(this,e,a),i=r(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return o?o.call(t,n,i):t.slice(i,i+n.length)===n}})},f772:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},fa5b:function(e,t,i){e.exports=i("5537")("native-function-to-string",Function.toString)},fb15:function(e,t,i){"use strict";var n;(i.r(t),"undefined"!==typeof window)&&((n=window.document.currentScript)&&(n=n.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(i.p=n[1]));var r=i("5176"),s=i.n(r),a=(i("f559"),i("a4bb")),o=i.n(a),l=i("a745"),c=i.n(l);function u(e){if(c()(e))return e}var h=i("5d73"),d=i.n(h);function p(e,t){var i=[],n=!0,r=!1,s=void 0;try{for(var a,o=d()(e);!(n=(a=o.next()).done);n=!0)if(i.push(a.value),t&&i.length===t)break}catch(l){r=!0,s=l}finally{try{n||null==o["return"]||o["return"]()}finally{if(r)throw s}}return i}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function v(e,t){return u(e)||p(e,t)||f()}i("6762"),i("2fdb");function m(e){if(c()(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}var b=i("774e"),g=i.n(b),y=i("c8bb"),w=i.n(y);function k(e){if(w()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return g()(e)}function x(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function S(e){return m(e)||k(e)||x()}var C=i("a352"),_=i.n(C),P=i("c649");function O(e,t,i){return void 0===i?e:(e=e||{},e[t]=i,e)}function j(e,t){return e.map(function(e){return e.elm}).indexOf(t)}function D(e,t,i,n){if(!e)return[];var r=e.map(function(e){return e.elm}),s=t.length-n,a=S(t).map(function(e,t){return t>=s?r.length:r.indexOf(e)});return i?a.filter(function(e){return-1!==e}):a}function E(e,t){var i=this;this.$nextTick(function(){return i.$emit(e.toLowerCase(),t)})}function T(e){var t=this;return function(i){null!==t.realList&&t["onDrag"+e](i),E.call(t,e,i)}}function M(e){return["transition-group","TransitionGroup"].includes(e)}function F(e){if(!e||1!==e.length)return!1;var t=v(e,1),i=t[0].componentOptions;return!!i&&M(i.tag)}function I(e,t,i){return e[i]||(t[i]?t[i]():void 0)}function A(e,t,i){var n=0,r=0,s=I(t,i,"header");s&&(n=s.length,e=e?[].concat(S(s),S(e)):S(s));var a=I(t,i,"footer");return a&&(r=a.length,e=e?[].concat(S(e),S(a)):S(a)),{children:e,headerOffset:n,footerOffset:r}}function B(e,t){var i=null,n=function(e,t){i=O(i,e,t)},r=o()(e).filter(function(e){return"id"===e||e.startsWith("data-")}).reduce(function(t,i){return t[i]=e[i],t},{});if(n("attrs",r),!t)return i;var a=t.on,l=t.props,c=t.attrs;return n("on",a),n("props",l),s()(i.attrs,c),i}var N=["Start","Add","Remove","Update","End"],L=["Choose","Unchoose","Sort","Filter","Clone"],G=["Move"].concat(N,L).map(function(e){return"on"+e}),V=null,$={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(e){return e}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},J={name:"draggable",inheritAttrs:!1,props:$,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(e){var t=this.$slots.default;this.transitionMode=F(t);var i=A(t,this.$slots,this.$scopedSlots),n=i.children,r=i.headerOffset,s=i.footerOffset;this.headerOffset=r,this.footerOffset=s;var a=B(this.$attrs,this.componentData);return e(this.getTag(),a,n)},created:function(){null!==this.list&&null!==this.value&&P["b"].error("Value and list props are mutually exclusive! Please set one or another."),"div"!==this.element&&P["b"].warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),void 0!==this.options&&P["b"].warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var e=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var t={};N.forEach(function(i){t["on"+i]=T.call(e,i)}),L.forEach(function(i){t["on"+i]=E.bind(e,i)});var i=o()(this.$attrs).reduce(function(t,i){return t[Object(P["a"])(i)]=e.$attrs[i],t},{}),n=s()({},this.options,i,t,{onMove:function(t,i){return e.onDragMove(t,i)}});!("draggable"in n)&&(n.draggable=">*"),this._sortable=new _.a(this.rootContainer,n),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(e){this.updateOptions(e)},deep:!0},$attrs:{handler:function(e){this.updateOptions(e)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var e=this._vnode.fnOptions;return e&&e.functional},getTag:function(){return this.tag||this.element},updateOptions:function(e){for(var t in e){var i=Object(P["a"])(t);-1===G.indexOf(i)&&this._sortable.option(i,e[t])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var e=this.$slots.default;return this.transitionMode?e[0].child.$slots.default:e},computeIndexes:function(){var e=this;this.$nextTick(function(){e.visibleIndexes=D(e.getChildrenNodes(),e.rootContainer.children,e.transitionMode,e.footerOffset)})},getUnderlyingVm:function(e){var t=j(this.getChildrenNodes()||[],e);if(-1===t)return null;var i=this.realList[t];return{index:t,element:i}},getUnderlyingPotencialDraggableComponent:function(e){var t=e.__vue__;return t&&t.$options&&M(t.$options._componentTag)?t.$parent:!("realList"in t)&&1===t.$children.length&&"realList"in t.$children[0]?t.$children[0]:t},emitChanges:function(e){var t=this;this.$nextTick(function(){t.$emit("change",e)})},alterList:function(e){if(this.list)e(this.list);else{var t=S(this.value);e(t),this.$emit("input",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,S(e))};this.alterList(t)},updatePosition:function(e,t){var i=function(i){return i.splice(t,0,i.splice(e,1)[0])};this.alterList(i)},getRelatedContextFromMoveEvent:function(e){var t=e.to,i=e.related,n=this.getUnderlyingPotencialDraggableComponent(t);if(!n)return{component:n};var r=n.realList,a={list:r,component:n};if(t!==i&&r&&n.getUnderlyingVm){var o=n.getUnderlyingVm(i);if(o)return s()(o,a)}return a},getVmIndex:function(e){var t=this.visibleIndexes,i=t.length;return e>i-1?i:t[e]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(e){if(this.noTransitionOnDrag&&this.transitionMode){var t=this.getChildrenNodes();t[e].data=null;var i=this.getComponent();i.children=[],i.kept=void 0}},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),V=e.item},onDragAdd:function(e){var t=e.item._underlying_vm_;if(void 0!==t){Object(P["d"])(e.item);var i=this.getVmIndex(e.newIndex);this.spliceList(i,0,t),this.computeIndexes();var n={element:t,newIndex:i};this.emitChanges({added:n})}},onDragRemove:function(e){if(Object(P["c"])(this.rootContainer,e.item,e.oldIndex),"clone"!==e.pullMode){var t=this.context.index;this.spliceList(t,1);var i={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:i})}else Object(P["d"])(e.clone)},onDragUpdate:function(e){Object(P["d"])(e.item),Object(P["c"])(e.from,e.item,e.oldIndex);var t=this.context.index,i=this.getVmIndex(e.newIndex);this.updatePosition(t,i);var n={element:this.context.element,oldIndex:t,newIndex:i};this.emitChanges({moved:n})},updateProperty:function(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},computeFutureIndex:function(e,t){if(!e.element)return 0;var i=S(t.to.children).filter(function(e){return"none"!==e.style["display"]}),n=i.indexOf(t.related),r=e.component.getVmIndex(n),s=-1!==i.indexOf(V);return s||!t.willInsertAfter?r:r+1},onDragMove:function(e,t){var i=this.move;if(!i||!this.realList)return!0;var n=this.getRelatedContextFromMoveEvent(e),r=this.context,a=this.computeFutureIndex(n,e);s()(r,{futureIndex:a});var o=s()({},e,{relatedContext:n,draggedContext:r});return i(o,t)},onDragEnd:function(){this.computeIndexes(),V=null}}};"undefined"!==typeof window&&"Vue"in window&&window.Vue.component("draggable",J);var R=J;t["default"]=R}})["default"]},"352f":function(e,t,i){"use strict";var n=i("82a7"),r=i.n(n);r.a},"3b8b":function(e,t,i){"use strict";var n=i("420f"),r=i.n(n);r.a},"3c4e":function(e,t,i){},"420f":function(e,t,i){},"468d":function(e,t,i){},"4a22":function(e,t,i){},"4d982":function(e,t,i){"use strict";var n=i("7b23"),r=i.n(n);r.a},"53d5":function(e,t,i){},"53fe":function(e,t,i){var n,r;
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
(function(s){"use strict";n=s,r="function"===typeof n?n.call(t,i,t,e):n,void 0===r||(e.exports=r)})(function(){"use strict";if("undefined"===typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var e,t,i,n,r,s,a,o,l,c,u,h,d,p,f,v,m,b,g,y,w,k,x,S,C,_,P,O,j=[],D=!1,E=!1,T=!1,M=[],F=!1,I=!1,A=[],B=/\s+/g,N="Sortable"+(new Date).getTime(),L=window,G=L.document,V=L.parseInt,$=L.setTimeout,J=L.jQuery||L.Zepto,R=L.Polymer,Y={capture:!1,passive:!1},X=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),U=!!navigator.userAgent.match(/Edge/i),H=!!navigator.userAgent.match(/firefox/i),q=!(!navigator.userAgent.match(/safari/i)||navigator.userAgent.match(/chrome/i)||navigator.userAgent.match(/android/i)),z=!!navigator.userAgent.match(/iP(ad|od|hone)/i),W=z,K=U||X?"cssFloat":"float",Z="draggable"in G.createElement("div"),Q=function(){if(X)return!1;var e=G.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),ee=!1,te=!1,ie=Math.abs,ne=Math.min,re=Math.max,se=[],ae=function(e,t){var i=je(e),n=V(i.width)-V(i.paddingLeft)-V(i.paddingRight)-V(i.borderLeftWidth)-V(i.borderRightWidth),r=Ae(e,0,t),s=Ae(e,1,t),a=r&&je(r),o=s&&je(s),l=a&&V(a.marginLeft)+V(a.marginRight)+We(r).width,c=o&&V(o.marginLeft)+V(o.marginRight)+We(s).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&"none"!==a.float){var u="left"===a.float?"left":"right";return!s||"both"!==o.clear&&o.clear!==u?"horizontal":"vertical"}return r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=n&&"none"===i[K]||s&&"none"===i[K]&&l+c>n)?"vertical":"horizontal"},oe=function(e,t){for(var i=0;i<M.length;i++)if(!Be(M[i])){var n=We(M[i]),r=M[i][N].options.emptyInsertThreshold,s=e>=n.left-r&&e<=n.right+r,a=t>=n.top-r&&t<=n.bottom+r;if(r&&s&&a)return M[i]}},le=function(e,t,i,n,r){var s=We(i),a="vertical"===n?s.left:s.top,o="vertical"===n?s.right:s.bottom,l="vertical"===n?e:t;return a<l&&l<o},ce=function(t,i,n){var r=t===e&&O||We(t),s=i===e&&O||We(i),a="vertical"===n?r.left:r.top,o="vertical"===n?r.right:r.bottom,l="vertical"===n?r.width:r.height,c="vertical"===n?s.left:s.top,u="vertical"===n?s.right:s.bottom,h="vertical"===n?s.width:s.height;return a===c||o===u||a+l/2===c+h/2},ue=function(e,t){if(!e||!e.getBoundingClientRect)return he();var i=e,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var r=je(i);if(i.clientWidth<i.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!i||!i.getBoundingClientRect||i===G.body)return he();if(n||t)return i;n=!0}}}while(i=i.parentNode);return he()},he=function(){return X?G.documentElement:G.scrollingElement},de=function(e,t,i){e.scrollLeft+=t,e.scrollTop+=i},pe=Re(function(e,t,i,n){if(t.scroll){var r=i?i[N]:window,s=t.scrollSensitivity,a=t.scrollSpeed,u=e.clientX,h=e.clientY,d=he(),p=!1;l!==i&&(fe(),o=t.scroll,c=t.scrollFn,!0===o&&(o=ue(i,!0),l=o));var f=0,v=o;do{var m,b,g,y,k,x,S,C,_,P=v,O=We(P),E=O.top,T=O.bottom,M=O.left,F=O.right,I=O.width,A=O.height;if(m=P.scrollWidth,b=P.scrollHeight,g=je(P),C=P.scrollLeft,_=P.scrollTop,P===d?(x=I<m&&("auto"===g.overflowX||"scroll"===g.overflowX||"visible"===g.overflowX),S=A<b&&("auto"===g.overflowY||"scroll"===g.overflowY||"visible"===g.overflowY)):(x=I<m&&("auto"===g.overflowX||"scroll"===g.overflowX),S=A<b&&("auto"===g.overflowY||"scroll"===g.overflowY)),y=x&&(ie(F-u)<=s&&C+I<m)-(ie(M-u)<=s&&!!C),k=S&&(ie(T-h)<=s&&_+A<b)-(ie(E-h)<=s&&!!_),!j[f])for(var B=0;B<=f;B++)j[B]||(j[B]={});j[f].vx==y&&j[f].vy==k&&j[f].el===P||(j[f].el=P,j[f].vx=y,j[f].vy=k,clearInterval(j[f].pid),!P||0==y&&0==k||(p=!0,j[f].pid=setInterval(function(){n&&0===this.layer&&(ke.active._emulateDragOver(!0),ke.active._onTouchMove(w,!0));var t=j[this.layer].vy?j[this.layer].vy*a:0,i=j[this.layer].vx?j[this.layer].vx*a:0;"function"===typeof c&&"continue"!==c.call(r,i,t,e,w,j[this.layer].el)||de(j[this.layer].el,i,t)}.bind({layer:f}),24))),f++}while(t.bubbleScroll&&v!==d&&(v=ue(v,!1)));D=p}},30),fe=function(){j.forEach(function(e){clearInterval(e.pid)}),j=[]},ve=function(e){function t(e,i){return function(n,r,s,a){var o=n.options.group.name&&r.options.group.name&&n.options.group.name===r.options.group.name;if(null==e&&(i||o))return!0;if(null==e||!1===e)return!1;if(i&&"clone"===e)return e;if("function"===typeof e)return t(e(n,r,s,a),i)(n,r,s,a);var l=(i?n:r).options.group.name;return!0===e||"string"===typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var i={},n=e.group;n&&"object"==typeof n||(n={name:n}),i.name=n.name,i.checkPull=t(n.pull,!0),i.checkPut=t(n.put),i.revertClone=n.revertClone,e.group=i},me=function(t){e&&e.parentNode&&e.parentNode[N]&&e.parentNode[N]._computeIsAligned(t)},be=function(){!Q&&i&&je(i,"display","none")},ge=function(){!Q&&i&&je(i,"display","")};G.addEventListener("click",function(e){if(T)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),T=!1,!1},!0);var ye,we=function(t){if(e){t=t.touches?t.touches[0]:t;var i=oe(t.clientX,t.clientY);if(i){var n={};for(var r in t)n[r]=t[r];n.target=n.rootEl=i,n.preventDefault=void 0,n.stopPropagation=void 0,i[N]._onDragOver(n)}}};function ke(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=t=Xe({},t),e[N]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ae(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:V(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ke.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var n in i)!(n in t)&&(t[n]=i[n]);for(var r in ve(t),this)"_"===r.charAt(0)&&"function"===typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&Z,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?_e(e,"pointerdown",this._onTapStart):(_e(e,"mousedown",this._onTapStart),_e(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(_e(e,"dragover",this),_e(e,"dragenter",this)),M.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[])}function xe(e,t,i,n){if(e){i=i||G;do{if(null!=t&&(">"===t[0]?e.parentNode===i&&Je(e,t):Je(e,t))||n&&e===i)return e;if(e===i)break}while(e=Se(e))}return null}function Se(e){return e.host&&e!==G&&e.host.nodeType?e.host:e.parentNode}function Ce(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function _e(e,t,i){e.addEventListener(t,i,!X&&Y)}function Pe(e,t,i){e.removeEventListener(t,i,!X&&Y)}function Oe(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(B," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(B," ")}}function je(e,t,i){var n=e&&e.style;if(n){if(void 0===i)return G.defaultView&&G.defaultView.getComputedStyle?i=G.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in n||-1!==t.indexOf("webkit")||(t="-webkit-"+t),n[t]=i+("string"===typeof i?"":"px")}}function De(e){var t="";do{var i=je(e,"transform");i&&"none"!==i&&(t=i+" "+t)}while(e=e.parentNode);return window.DOMMatrix?new DOMMatrix(t):window.WebKitCSSMatrix?new WebKitCSSMatrix(t):window.CSSMatrix?new CSSMatrix(t):void 0}function Ee(e,t,i){if(e){var n=e.getElementsByTagName(t),r=0,s=n.length;if(i)for(;r<s;r++)i(n[r],r);return n}return[]}function Te(e,t,i,r,s,a,o,l,c,u,h){e=e||t[N];var d,p=e.options,f="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||X||U?(d=G.createEvent("Event"),d.initEvent(i,!0,!0)):d=new CustomEvent(i,{bubbles:!0,cancelable:!0}),d.to=s||t,d.from=a||t,d.item=r||t,d.clone=n,d.oldIndex=o,d.newIndex=l,d.oldDraggableIndex=c,d.newDraggableIndex=u,d.originalEvent=h,d.pullMode=v?v.lastPutMode:void 0,t&&t.dispatchEvent(d),p[f]&&p[f].call(e,d)}function Me(e,t,i,n,r,s,a,o){var l,c,u=e[N],h=u.options.onMove;return!window.CustomEvent||X||U?(l=G.createEvent("Event"),l.initEvent("move",!0,!0)):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=i,l.draggedRect=n,l.related=r||t,l.relatedRect=s||We(t),l.willInsertAfter=o,l.originalEvent=a,e.dispatchEvent(l),h&&(c=h.call(u,l,a)),c}function Fe(e){e.draggable=!1}function Ie(){ee=!1}function Ae(t,n,r){var s=0,a=0,o=t.children;while(a<o.length){if("none"!==o[a].style.display&&o[a]!==i&&o[a]!==e&&xe(o[a],r.draggable,t,!1)){if(s===n)return o[a];s++}a++}return null}function Be(e){var t=e.lastElementChild;while(t&&(t===i||"none"===je(t,"display")))t=t.previousElementSibling;return t||null}function Ne(e,t,i){var n=We(Be(i)),r="vertical"===t?e.clientY:e.clientX,s="vertical"===t?e.clientX:e.clientY,a="vertical"===t?n.bottom:n.right,o="vertical"===t?n.left:n.top,l="vertical"===t?n.right:n.bottom,c=10;return"vertical"===t?s>l+c||s<=l&&r>a&&s>=o:r>a&&s>o||r<=a&&s>l+c}function Le(t,i,n,r,s,a,o){var l=We(i),c="vertical"===n?t.clientY:t.clientX,u="vertical"===n?l.height:l.width,h="vertical"===n?l.top:l.left,d="vertical"===n?l.bottom:l.right,p=We(e),f=!1;if(!a)if(o&&_<u*r)if(!F&&(1===S?c>h+u*s/2:c<d-u*s/2)&&(F=!0),F)f=!0;else{"vertical"===n?p.top:p.left,"vertical"===n?p.bottom:p.right;if(1===S?c<h+_:c>d-_)return-1*S}else if(c>h+u*(1-r)/2&&c<d-u*(1-r)/2)return Ge(i);return f=f||a,f&&(c<h+u*s/2||c>d-u*s/2)?c>h+u/2?1:-1:0}function Ge(t){var i=$e(e),n=$e(t);return i<n?1:-1}function Ve(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;while(i--)n+=t.charCodeAt(i);return n.toString(36)}function $e(e,t){var i=0;if(!e||!e.parentNode)return-1;while(e&&(e=e.previousElementSibling))"TEMPLATE"===e.nodeName.toUpperCase()||e===n||t&&!Je(e,t)||i++;return i}function Je(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(i){return!1}return!1}}function Re(e,t){return function(){if(!ye){var i=arguments,n=this;ye=$(function(){1===i.length?e.call(n,i[0]):e.apply(n,i),ye=void 0},t)}}}function Ye(){clearTimeout(ye),ye=void 0}function Xe(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function Ue(e){return R&&R.dom?R.dom(e).cloneNode(!0):J?J(e).clone(!0)[0]:e.cloneNode(!0)}function He(e){se.length=0;var t=e.getElementsByTagName("input"),i=t.length;while(i--){var n=t[i];n.checked&&se.push(n)}}function qe(e){return $(e,0)}function ze(e){return clearTimeout(e)}function We(e,t,i,n){if(e.getBoundingClientRect||e===L){var r,s,a,o,l,c,u;if(e!==L&&e!==he()?(r=e.getBoundingClientRect(),s=r.top,a=r.left,o=r.bottom,l=r.right,c=r.height,u=r.width):(s=0,a=0,o=window.innerHeight,l=window.innerWidth,c=window.innerHeight,u=window.innerWidth),n&&e!==L&&(i=i||e.parentNode,!X))do{if(i&&i.getBoundingClientRect&&"none"!==je(i,"transform")){var h=i.getBoundingClientRect();s-=h.top+V(je(i,"border-top-width")),a-=h.left+V(je(i,"border-left-width")),o=s+r.height,l=a+r.width;break}}while(i=i.parentNode);if(t&&e!==L){var d=De(i||e),p=d&&d.a,f=d&&d.d;d&&(s/=f,a/=p,u/=p,c/=f,o=s+c,l=a+u)}return{top:s,left:a,bottom:o,right:l,width:u,height:c}}}function Ke(e,t){var i=ue(e,!0),n=We(e)[t];while(i){var r,s=We(i)[t];if(r="top"===t||"left"===t?n>=s:n<=s,!r)return i;if(i===he())break;i=ue(i,!1)}return!1}function Ze(e){var t=0,i=0,n=he();if(e)do{var r=De(e),s=r.a,a=r.d;t+=e.scrollLeft*s,i+=e.scrollTop*a}while(e!==n&&(e=e.parentNode));return[t,i]}return ke.prototype={constructor:ke,_computeIsAligned:function(t){var n;if(i&&!Q?(be(),n=G.elementFromPoint(t.clientX,t.clientY),ge()):n=t.target,n=xe(n,this.options.draggable,this.el,!1),!te&&e&&e.parentNode===this.el){for(var r=this.el.children,s=0;s<r.length;s++)xe(r[s],this.options.draggable,this.el,!1)&&r[s]!==n&&(r[s].sortableMouseAligned=le(t.clientX,t.clientY,r[s],this._getDirection(t,null),this.options));xe(n,this.options.draggable,this.el,!0)||(x=null),te=!0,$(function(){te=!1},30)}},_getDirection:function(t,i){return"function"===typeof this.options.direction?this.options.direction.call(this,t,i,e):this.options.direction},_onTapStart:function(t){if(t.cancelable){var i,n,r=this,s=this.el,o=this.options,l=o.preventOnFilter,c=t.type,u=t.touches&&t.touches[0],h=(u||t).target,d=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||h,p=o.filter;if(He(s),!e&&!(/mousedown|pointerdown/.test(c)&&0!==t.button||o.disabled)&&!d.isContentEditable&&(h=xe(h,o.draggable,s,!1),a!==h)){if(i=$e(h),n=$e(h,o.draggable),"function"===typeof p){if(p.call(this,t,h,this))return Te(r,d,"filter",h,s,s,i,void 0,n),void(l&&t.cancelable&&t.preventDefault())}else if(p&&(p=p.split(",").some(function(e){if(e=xe(d,e.trim(),s,!1),e)return Te(r,e,"filter",h,s,s,i,void 0,n),!0}),p))return void(l&&t.cancelable&&t.preventDefault());o.handle&&!xe(d,o.handle,s,!1)||this._prepareDragStart(t,u,h,i,n)}}},_handleAutoScroll:function(t,i){if(e&&this.options.scroll){var n=t.clientX,r=t.clientY,s=G.elementFromPoint(n,r),a=this;if(i||U||X||q){pe(t,a.options,s,i);var o=ue(s,!0);!D||m&&n===b&&r===g||(m&&clearInterval(m),m=setInterval(function(){if(e){var s=ue(G.elementFromPoint(n,r),!0);s!==o&&(o=s,fe(),pe(t,a.options,o,i))}},10),b=n,g=r)}else{if(!a.options.bubbleScroll||ue(s,!0)===he())return void fe();pe(t,a.options,ue(s,!1),!1)}}},_prepareDragStart:function(i,n,o,l,c){var h,p=this,v=p.el,m=p.options,b=v.ownerDocument;o&&!e&&o.parentNode===v&&(r=v,e=o,t=e.parentNode,s=e.nextSibling,a=o,f=m.group,u=l,d=c,y={target:e,clientX:(n||i).clientX,clientY:(n||i).clientY},this._lastX=(n||i).clientX,this._lastY=(n||i).clientY,e.style["will-change"]="all",e.style.transition="",e.style.transform="",h=function(){p._disableDelayedDragEvents(),!H&&p.nativeDraggable&&(e.draggable=!0),p._triggerDragStart(i,n),Te(p,r,"choose",e,r,r,u,void 0,d),Oe(e,m.chosenClass,!0)},m.ignore.split(",").forEach(function(t){Ee(e,t.trim(),Fe)}),_e(b,"dragover",we),_e(b,"mousemove",we),_e(b,"touchmove",we),_e(b,"mouseup",p._onDrop),_e(b,"touchend",p._onDrop),_e(b,"touchcancel",p._onDrop),H&&this.nativeDraggable&&(this.options.touchStartThreshold=4,e.draggable=!0),!m.delay||m.delayOnTouchOnly&&!n||this.nativeDraggable&&(U||X)?h():(_e(b,"mouseup",p._disableDelayedDrag),_e(b,"touchend",p._disableDelayedDrag),_e(b,"touchcancel",p._disableDelayedDrag),_e(b,"mousemove",p._delayedDragTouchMoveHandler),_e(b,"touchmove",p._delayedDragTouchMoveHandler),m.supportPointer&&_e(b,"pointermove",p._delayedDragTouchMoveHandler),p._dragStartTimer=$(h,m.delay)))},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;re(ie(t.clientX-this._lastX),ie(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){e&&Fe(e),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Pe(e,"mouseup",this._disableDelayedDrag),Pe(e,"touchend",this._disableDelayedDrag),Pe(e,"touchcancel",this._disableDelayedDrag),Pe(e,"mousemove",this._delayedDragTouchMoveHandler),Pe(e,"touchmove",this._delayedDragTouchMoveHandler),Pe(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,i){i=i||("touch"==t.pointerType?t:null),!this.nativeDraggable||i?this.options.supportPointer?_e(G,"pointermove",this._onTouchMove):_e(G,i?"touchmove":"mousemove",this._onTouchMove):(_e(e,"dragend",this),_e(r,"dragstart",this._onDragStart));try{G.selection?qe(function(){G.selection.empty()}):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(t,i){if(E=!1,r&&e){this.nativeDraggable&&(_e(G,"dragover",this._handleAutoScroll),_e(G,"dragover",me));var n=this.options;!t&&Oe(e,n.dragClass,!1),Oe(e,n.ghostClass,!0),je(e,"transform",""),ke.active=this,t&&this._appendGhost(),Te(this,r,"start",e,r,r,u,void 0,d,void 0,i)}else this._nulling()},_emulateDragOver:function(t){if(w){if(this._lastX===w.clientX&&this._lastY===w.clientY&&!t)return;this._lastX=w.clientX,this._lastY=w.clientY,be();var i=G.elementFromPoint(w.clientX,w.clientY),n=i;while(i&&i.shadowRoot){if(i=i.shadowRoot.elementFromPoint(w.clientX,w.clientY),i===n)break;n=i}if(n)do{var r;if(n[N])if(r=n[N]._onDragOver({clientX:w.clientX,clientY:w.clientY,target:i,rootEl:n}),r&&!this.options.dragoverBubble)break;i=n}while(n=n.parentNode);e.parentNode[N]._computeIsAligned(w),ge()}},_onTouchMove:function(e,t){if(y){var n=this.options,r=n.fallbackTolerance,s=n.fallbackOffset,a=e.touches?e.touches[0]:e,o=i&&De(i),l=i&&o&&o.a,c=i&&o&&o.d,u=W&&P&&Ze(P),h=(a.clientX-y.clientX+s.x)/(l||1)+(u?u[0]-A[0]:0)/(l||1),d=(a.clientY-y.clientY+s.y)/(c||1)+(u?u[1]-A[1]:0)/(c||1),p=e.touches?"translate3d("+h+"px,"+d+"px,0)":"translate("+h+"px,"+d+"px)";if(!ke.active&&!E){if(r&&ne(ie(a.clientX-this._lastX),ie(a.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}!t&&this._handleAutoScroll(a,!0),k=!0,w=a,je(i,"webkitTransform",p),je(i,"mozTransform",p),je(i,"msTransform",p),je(i,"transform",p),e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!i){var t=this.options.fallbackOnBody?G.body:r,n=We(e,!0,t,!W),s=(je(e),this.options);if(W){P=t;while("static"===je(P,"position")&&"none"===je(P,"transform")&&P!==G)P=P.parentNode;if(P!==G){var a=We(P,!0);n.top-=a.top,n.left-=a.left}P!==G.body&&P!==G.documentElement?(P===G&&(P=he()),n.top+=P.scrollTop,n.left+=P.scrollLeft):P=he(),A=Ze(P)}i=e.cloneNode(!0),Oe(i,s.ghostClass,!1),Oe(i,s.fallbackClass,!0),Oe(i,s.dragClass,!0),je(i,"box-sizing","border-box"),je(i,"margin",0),je(i,"top",n.top),je(i,"left",n.left),je(i,"width",n.width),je(i,"height",n.height),je(i,"opacity","0.8"),je(i,"position",W?"absolute":"fixed"),je(i,"zIndex","100000"),je(i,"pointerEvents","none"),t.appendChild(i)}},_onDragStart:function(t,i){var s=this,a=t.dataTransfer,o=s.options;n=Ue(e),n.draggable=!1,n.style["will-change"]="",this._hideClone(),Oe(n,s.options.chosenClass,!1),s._cloneId=qe(function(){s.options.removeCloneOnHide||r.insertBefore(n,e),Te(s,r,"clone",e)}),!i&&Oe(e,o.dragClass,!0),i?(T=!0,s._loopId=setInterval(s._emulateDragOver,50)):(Pe(G,"mouseup",s._onDrop),Pe(G,"touchend",s._onDrop),Pe(G,"touchcancel",s._onDrop),a&&(a.effectAllowed="move",o.setData&&o.setData.call(s,a,e)),_e(G,"drop",s),je(e,"transform","translateZ(0)")),E=!0,s._dragStartId=qe(s._dragStarted.bind(s,i,t)),_e(G,"selectstart",s),q&&je(G.body,"user-select","none")},_onDragOver:function(i){var n,a,o,l=this.el,c=i.target,h=this.options,p=h.group,m=ke.active,b=f===p,g=h.sort,y=this;if(!ee){if(void 0!==i.preventDefault&&i.cancelable&&i.preventDefault(),k=!0,c=xe(c,h.draggable,l,!0),e.contains(i.target)||c.animated)return Y(!1);if(c!==e&&(T=!1),m&&!h.disabled&&(b?g||(o=!r.contains(e)):v===this||(this.lastPutMode=f.checkPull(this,m,e,i))&&p.checkPut(this,m,e,i))){var w=this._getDirection(i,c);if(n=We(e),o)return this._hideClone(),t=r,s?r.insertBefore(e,s):r.appendChild(e),Y(!0);var P=Be(l);if(!P||Ne(i,w,l)&&!P.animated){if(P&&l===i.target&&(c=P),c&&(a=We(c)),b?m._hideClone():m._showClone(this),!1!==Me(r,l,e,n,c,a,i,!!c))return l.appendChild(e),t=l,O=null,X(),Y(!0)}else if(c&&c!==e&&c.parentNode===l){var j,D=0,E=c.sortableMouseAligned,M=e.parentNode!==l,A="vertical"===w?"top":"left",B=Ke(c,"top")||Ke(e,"top"),L=B?B.scrollTop:void 0;if(x!==c&&(C=null,j=We(c)[A],F=!1),ce(e,c,w)&&E||M||B||h.invertSwap||"insert"===C||"swap"===C?("swap"!==C&&(I=h.invertSwap||M),D=Le(i,c,w,h.swapThreshold,null==h.invertedSwapThreshold?h.swapThreshold:h.invertedSwapThreshold,I,x===c),C="swap"):(D=Ge(c),C="insert"),0===D)return Y(!1);O=null,x=c,S=D,a=We(c);var V=c.nextElementSibling,J=!1;J=1===D;var R=Me(r,l,e,n,c,a,i,J);if(!1!==R)return 1!==R&&-1!==R||(J=1===R),ee=!0,$(Ie,30),b?m._hideClone():m._showClone(this),J&&!V?l.appendChild(e):c.parentNode.insertBefore(e,J?V:c),B&&de(B,0,L-B.scrollTop),t=e.parentNode,void 0===j||I||(_=ie(j-We(c)[A])),X(),Y(!0)}if(l.contains(e))return Y(!1)}return!1}function Y(t){return t&&(b?m._hideClone():m._showClone(y),m&&(Oe(e,v?v.options.ghostClass:m.options.ghostClass,!1),Oe(e,h.ghostClass,!0)),v!==y&&y!==ke.active?v=y:y===ke.active&&(v=null),n&&y._animate(n,e),c&&a&&y._animate(a,c)),(c===e&&!e.animated||c===l&&!c.animated)&&(x=null),h.dragoverBubble||i.rootEl||c===G||(y._handleAutoScroll(i),e.parentNode[N]._computeIsAligned(i),!t&&we(i)),!h.dragoverBubble&&i.stopPropagation&&i.stopPropagation(),!0}function X(){Te(y,r,"change",c,l,r,u,$e(e),d,$e(e,h.draggable),i)}},_animate:function(t,i){var n=this.options.animation;if(n){var r=We(i);if(i===e&&(O=r),1===t.nodeType&&(t=We(t)),t.left+t.width/2!==r.left+r.width/2||t.top+t.height/2!==r.top+r.height/2){var s=De(this.el),a=s&&s.a,o=s&&s.d;je(i,"transition","none"),je(i,"transform","translate3d("+(t.left-r.left)/(a||1)+"px,"+(t.top-r.top)/(o||1)+"px,0)"),this._repaint(i),je(i,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),je(i,"transform","translate3d(0,0,0)")}"number"===typeof i.animated&&clearTimeout(i.animated),i.animated=$(function(){je(i,"transition",""),je(i,"transform",""),i.animated=!1},n)}},_repaint:function(e){return e.offsetWidth},_offMoveEvents:function(){Pe(G,"touchmove",this._onTouchMove),Pe(G,"pointermove",this._onTouchMove),Pe(G,"dragover",we),Pe(G,"mousemove",we),Pe(G,"touchmove",we)},_offUpEvents:function(){var e=this.el.ownerDocument;Pe(e,"mouseup",this._onDrop),Pe(e,"touchend",this._onDrop),Pe(e,"pointerup",this._onDrop),Pe(e,"touchcancel",this._onDrop),Pe(G,"selectstart",this)},_onDrop:function(a){var o=this.el,l=this.options;E=!1,D=!1,I=!1,F=!1,clearInterval(this._loopId),clearInterval(m),fe(),Ye(),clearTimeout(this._dragStartTimer),ze(this._cloneId),ze(this._dragStartId),Pe(G,"mousemove",this._onTouchMove),this.nativeDraggable&&(Pe(G,"drop",this),Pe(o,"dragstart",this._onDragStart),Pe(G,"dragover",this._handleAutoScroll),Pe(G,"dragover",me)),q&&je(G.body,"user-select",""),this._offMoveEvents(),this._offUpEvents(),a&&(k&&(a.cancelable&&a.preventDefault(),!l.dropBubble&&a.stopPropagation()),i&&i.parentNode&&i.parentNode.removeChild(i),(r===t||v&&"clone"!==v.lastPutMode)&&n&&n.parentNode&&n.parentNode.removeChild(n),e&&(this.nativeDraggable&&Pe(e,"dragend",this),Fe(e),e.style["will-change"]="",Oe(e,v?v.options.ghostClass:this.options.ghostClass,!1),Oe(e,this.options.chosenClass,!1),Te(this,r,"unchoose",e,t,r,u,null,d,null,a),r!==t?(h=$e(e),p=$e(e,l.draggable),h>=0&&(Te(null,t,"add",e,t,r,u,h,d,p,a),Te(this,r,"remove",e,t,r,u,h,d,p,a),Te(null,t,"sort",e,t,r,u,h,d,p,a),Te(this,r,"sort",e,t,r,u,h,d,p,a)),v&&v.save()):e.nextSibling!==s&&(h=$e(e),p=$e(e,l.draggable),h>=0&&(Te(this,r,"update",e,t,r,u,h,d,p,a),Te(this,r,"sort",e,t,r,u,h,d,p,a))),ke.active&&(null!=h&&-1!==h||(h=u,p=d),Te(this,r,"end",e,t,r,u,h,d,p,a),this.save()))),this._nulling()},_nulling:function(){r=e=t=i=s=n=a=o=l=j.length=m=b=g=y=w=k=h=u=x=S=O=v=f=ke.active=null,se.forEach(function(e){e.checked=!0}),se.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":e&&(this._onDragOver(t),Ce(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var e,t=[],i=this.el.children,n=0,r=i.length,s=this.options;n<r;n++)e=i[n],xe(e,s.draggable,this.el,!1)&&t.push(e.getAttribute(s.dataIdAttr)||Ve(e));return t},sort:function(e){var t={},i=this.el;this.toArray().forEach(function(e,n){var r=i.children[n];xe(r,this.options.draggable,i,!1)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(i.removeChild(t[e]),i.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return xe(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];i[e]=t,"group"===e&&ve(i)},destroy:function(){var e=this.el;e[N]=null,Pe(e,"mousedown",this._onTapStart),Pe(e,"touchstart",this._onTapStart),Pe(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Pe(e,"dragover",this),Pe(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),M.splice(M.indexOf(this.el),1),this.el=e=null},_hideClone:function(){n.cloneHidden||(je(n,"display","none"),n.cloneHidden=!0,n.parentNode&&this.options.removeCloneOnHide&&n.parentNode.removeChild(n))},_showClone:function(t){"clone"===t.lastPutMode?n.cloneHidden&&(r.contains(e)&&!this.options.group.revertClone?r.insertBefore(n,e):s?r.insertBefore(n,s):r.appendChild(n),this.options.group.revertClone&&this._animate(e,n),je(n,"display",""),n.cloneHidden=!1):this._hideClone()}},_e(G,"touchmove",function(e){(ke.active||E)&&e.cancelable&&e.preventDefault()}),ke.utils={on:_e,off:Pe,css:je,find:Ee,is:function(e,t){return!!xe(e,t,e,!1)},extend:Xe,throttle:Re,closest:xe,toggleClass:Oe,clone:Ue,index:$e,nextTick:qe,cancelNextTick:ze,detectDirection:ae,getChild:Ae},ke.create=function(e,t){return new ke(e,t)},ke.version="1.9.0",ke})},"58a9":function(e,t,i){},"5fd6":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return null!==e.selectedType?i("div",{staticClass:"fieldContainer"},[e.allowedSchemas.length>1?i("div",{staticClass:"dataTypeChooser"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedType,expression:"selectedType"}],attrs:{name:"dataType",disabled:!e.editable},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedType=t.target.multiple?i:i[0]}}},e._l(e.allowedSchemas,function(t,n){return i("option",{key:n,domProps:{value:n}},[e._v(e._s(t.title()))])}),0)]):e._e(),e.allowedSchemas[e.selectedType].description()?i("div",{staticClass:"description"},[i("i",{staticClass:"fas fa-info-circle"}),e._v(" "+e._s(e.allowedSchemas[e.selectedType].description())+"\n\t")]):e._e(),i("ParameterField",{ref:"field",attrs:{uid:e.uid,editable:e.editable,field:e.field,schema:e.allowedSchemas[e.selectedType],pass:e.pass,processId:e.processId}})],1):e._e()},r=[],s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fieldEditorContainer"},[e.isResult?[i("div",{staticClass:"fieldValue externalData fromNode"},[i("span",[e._v("Output of "),i("tt",[e._v("#"+e._s(e.value.from_node))])],1)]),e.isArrayType?i("button",{attrs:{type:"button"},on:{click:function(t){return e.convertToArray()}}},[i("i",{staticClass:"fas fa-list"}),e._v(" Convert to Array")]):e._e()]:e.isCallbackArgument?[i("div",{staticClass:"fieldValue externalData fromArgument"},[i("span",[e._v("Value of callback argument "),i("tt",[e._v(e._s(e.value.from_argument))])],1)]),e.isArrayType?i("button",{attrs:{type:"button"},on:{click:function(t){return e.convertToArray()}}},[i("i",{staticClass:"fas fa-list"}),e._v(" Convert to array")]):e._e()]:e.schema.isEnum()?i("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"selectFirst",staticClass:"fieldValue",attrs:{name:e.fieldName,disabled:!e.editable},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.value=t.target.multiple?i:i[0]}}},e._l(e.schema.getEnumChoices(),function(t,n){return i("option",{key:n,domProps:{value:t}},[e._v(e._s(t))])}),0):"collection-id"===e.type?i("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"selectFirst",staticClass:"fieldValue",attrs:{name:e.fieldName,disabled:!e.editable},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.value=t.target.multiple?i:i[0]}}},e._l(e.collections,function(t){return i("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.id))])}),0):"epsg-code"===e.type?i("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"fieldValue",attrs:{name:e.fieldName,disabled:!e.editable},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.value=t.target.multiple?i:i[0]}}},e._l(e.epsgCodes,function(t,n){return i("option",{key:n,domProps:{value:n}},[e._v(e._s(n)+": "+e._s(t))])}),0):"output-format"===e.type?i("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"selectFirst",staticClass:"fieldValue",attrs:{name:e.fieldName,disabled:!e.editable},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.value=t.target.multiple?i:i[0]}}},e._l(e.outputFormats,function(t,n){return i("option",{key:n,domProps:{value:n.toUpperCase()}},[e._v(e._s(n.toUpperCase()))])}),0):"service-type"===e.type?i("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"selectFirst",staticClass:"fieldValue",attrs:{name:e.fieldName,disabled:!e.editable},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.value=t.target.multiple?i:i[0]}}},e._l(e.serviceTypes,function(t,n){return i("option",{key:n,domProps:{value:n.toUpperCase()}},[e._v(e._s(n.toUpperCase()))])}),0):"billing-plan"===e.type?i("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"selectFirst",staticClass:"fieldValue",attrs:{name:e.fieldName,disabled:!e.editable},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.value=t.target.multiple?i:i[0]}}},e._l(e.capabilities.listPlans(),function(t){return i("option",{key:t.name,domProps:{value:t.name}},[e._v(e._s(t.name)+" ("+e._s(t.paid?"paid":"free")+")")])}),0):"temporal-interval"===e.type?i("VueCtkDateTimePicker",{key:e.type,attrs:{disabled:!e.editable,range:!0,label:"Select start and end time",format:"YYYY-MM-DD[T]HH:mm:ss[Z]",locale:"en-gb"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):"date-time"===e.type?i("VueCtkDateTimePicker",{key:e.type,attrs:{disabled:!e.editable,label:"Select date and time",format:"YYYY-MM-DD[T]HH:mm:ss[Z]","no-button":!0,locale:"en-gb"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):"date"===e.type?i("VueCtkDateTimePicker",{key:e.type,attrs:{disabled:!e.editable,label:"Select date","only-date":!0,format:"YYYY-MM-DD",formatted:"ll","no-button":!0,locale:"en-gb"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):"time"===e.type?i("VueCtkDateTimePicker",{key:e.type,attrs:{disabled:!e.editable,label:"Select time","only-time":!0,format:"HH:mm:ss[Z]",formatted:"LT","no-button":!0,locale:"en-gb"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):"bounding-box"===e.type?i("MapViewer",{key:e.type,ref:"bboxMap",staticClass:"areaSelector",attrs:{id:e.fieldName+"_bbox",showAreaSelector:!0,editable:e.editable,center:[0,0],zoom:1}}):"geojson"===e.type?i("MapViewer",{key:e.type,ref:"geojson",staticClass:"geoJsonEditor",attrs:{id:e.fieldName+"_geojson",showGeoJson:e.value||!0,editable:e.editable,center:[0,0],zoom:1}}):"callback"===e.type?i("div",{staticClass:"border"},[i("VisualEditor",{ref:"callbackBuilder",staticClass:"callbackEditor",attrs:{id:"inlinePgEditor",editable:e.editable,callbackArguments:e.schema.getCallbackParameters(),value:e.value,enableExecute:!1,enableLocalStorage:!1}})],1):"null"===e.type?void 0:e.isArrayType?i("div",{staticClass:"arrayEditor"},[i("draggable",{model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[i("transition-group",{attrs:{name:"arrayElements"}},e._l(e.value,function(t,n){return i("div",{key:t.id,staticClass:"fieldValue arrayElement"},[i("ParameterField",{ref:t.id,refInFor:!0,attrs:{editable:e.editable,field:e.field,schema:e.schema,pass:t.value,isItem:!0}}),e.editable?i("button",{staticClass:"arrayElementDelete",attrs:{type:"button"},on:{click:function(t){return e.removeField(n)}}},[i("i",{staticClass:"fas fa-trash"})]):e._e(),e.editable?i("div",{staticClass:"mover"},[i("i",{staticClass:"fas fa-arrows-alt"})]):e._e()],1)}),0)],1),e.editable?i("button",{attrs:{type:"button"},on:{click:function(t){return e.addField()}}},[i("i",{staticClass:"fas fa-plus"}),e._v(" Add")]):e._e()],1):"output-format-options"===e.type?i("OutputFormatOptionsEditor",{ref:"outputFormatOptionsEditor",attrs:{value:e.value,format:this.context}}):"budget"===e.type?[i("input",{directives:[{name:"model",rawName:"v-model",value:e.hasBudget,expression:"hasBudget"}],attrs:{type:"checkbox",value:"1"},domProps:{checked:Array.isArray(e.hasBudget)?e._i(e.hasBudget,"1")>-1:e.hasBudget},on:{change:function(t){var i=e.hasBudget,n=t.target,r=!!n.checked;if(Array.isArray(i)){var s="1",a=e._i(i,s);n.checked?a<0&&(e.hasBudget=i.concat([s])):a>-1&&(e.hasBudget=i.slice(0,a).concat(i.slice(a+1)))}else e.hasBudget=r}}}),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.value,expression:"value",modifiers:{number:!0}}],attrs:{type:"number",min:"0.00",step:"0.01",disabled:!e.hasBudget||!e.editable,name:e.fieldName},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e._v(" "+e._s(e.capabilities.currency())+"\n\t\t")]:e.useTextarea?i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"fieldValue textarea",attrs:{name:e.fieldName,disabled:!e.editable},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}):"boolean"===e.type?i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"fieldValue",attrs:{type:"checkbox",name:e.fieldName,disabled:!e.editable},domProps:{checked:!!e.value,checked:Array.isArray(e.value)?e._i(e.value,null)>-1:e.value},on:{change:function(t){var i=e.value,n=t.target,r=!!n.checked;if(Array.isArray(i)){var s=null,a=e._i(i,s);n.checked?a<0&&(e.value=i.concat([s])):a>-1&&(e.value=i.slice(0,a).concat(i.slice(a+1)))}else e.value=r}}}):"integer"===e.type?i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.value,expression:"value",modifiers:{number:!0}}],staticClass:"fieldValue",attrs:{type:"number",min:e.numericMin,max:e.numericMax,step:1,name:e.fieldName,disabled:!e.editable},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}):"number"===e.type?i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.value,expression:"value",modifiers:{number:!0}}],staticClass:"fieldValue",attrs:{type:"number",min:e.numericMin,max:e.numericMax,step:.01,name:e.fieldName,disabled:!e.editable},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}):"url"===e.type||"uri"===e.type?i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"fieldValue",attrs:{type:"url",name:e.fieldName,disabled:!e.editable},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"fieldValue",attrs:{type:"text",name:e.fieldName,disabled:!e.editable},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})],2)},a=[],o=(i("8e6e"),i("04ff"),i("c5f6"),i("ee1d"),i("7618")),l=(i("ac6a"),i("456d"),i("7f7f"),i("bd86")),c=i("310e"),u=i.n(c),h=i("e30a"),d=i.n(h),p=(i("b40d"),i("a5c1")),f=i("4877"),v=i("fbdae"),m=i("025e");function b(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?b(i,!0).forEach(function(t){Object(l["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var y={name:"ParameterField",mixins:[f["a"]],components:{draggable:u.a,MapViewer:p["a"],VueCtkDateTimePicker:d.a,OutputFormatOptionsEditor:function(){return i.e("chunk-33c1822d").then(i.bind(null,"d058"))},VisualEditor:function(){return Promise.resolve().then(i.bind(null,"8c66"))}},props:{field:Object,editable:{type:Boolean,default:!0},schema:Object,pass:{},uid:String,processId:String,isItem:{type:Boolean,default:!1}},data:function(){return{value:null,hasBudget:!1,epsgCodes:[],context:null}},computed:g({},m["a"].mapState("server",["collections","outputFormats","serviceTypes"]),{},m["a"].mapGetters("server",["capabilities","processRegistry"]),{type:function(){return this.isItem?this.schema.arrayOf():this.schema.dataType()},useTextarea:function(){return"object"===this.type||"proj-definition"===this.type||"service-type-parameters"===this.type||"process-graph-variables"===this.type||"commonmark"===this.type},fieldName:function(){return this.field.name+(Array.isArray(this.field.value)?"[]":"")},isResult:function(){return m["a"].isObject(this.value)&&this.value.from_node},isCallbackArgument:function(){return m["a"].isObject(this.value)&&this.value.from_argument},isArrayType:function(){return"array"===this.type||"temporal-intervals"===this.type},numericMin:function(){return"number"===typeof this.schema.minimum?this.schema.minimum:""},numericMax:function(){return"number"===typeof this.schema.maximum?this.schema.maximum:""}}),watch:{schema:function(){this.value=this.initValue(this.value),this.$nextTick(this.initView)},value:function(e,t){this.mounted&&this.uid&&this.emit("processParameterValueChanged",this.uid,this.processId,this.field,this.type,e,t)}},created:function(){this.value=this.initValue(this.pass)},mounted:function(){this.$nextTick(this.initView),this.listen("processParameterValueChanged",this.processParameterValueChanged),this.listen("processParameterTypeChanged",this.processParameterTypeChanged)},methods:{processParameterValueChanged:function(e,t,i,n,r,s){this.uid===e&&"output-format"===n&&"output-format-options"===this.type&&(this.context=r)},processParameterTypeChanged:function(e,t,i,n,r){this.uid},initView:function(){"bounding-box"===this.type?m["a"].isObject(this.value)&&Object.keys(this.value).length>=4&&this.$refs.bboxMap.areaSelect.setBounds(this.value):"epsg-code"===this.type&&this.loadEpsgCodes(),this.$refs.selectFirst&&0===this.$refs.selectFirst.selectedOptions.length&&(this.$refs.selectFirst.selectedIndex=0,this.value=this.$refs.selectFirst.value),this.mounted=!0,this.emit("processParameterValueChanged",this.uid,this.processId,this.field,this.type,this.value,this.value,void 0)},initValue:function(e){if("temporal-interval"===this.type)Array.isArray(e)&&e.length>=2?e={start:e[0],end:e[1]}:m["a"].isObject(e)&&e.start&&e.end||(e=null);else if("geojson"===this.type)m["a"].isObject(e)&&e.type||(e=null);else if("output-format"===this.type||"service-type"===this.type)e="string"===typeof e?e.toUpperCase():null;else if("callback"===this.type)m["a"].isObject(e)&&e.callback?e=e.callback:e instanceof v["ProcessGraph"]||(e=null);else if("billing-plan"!==this.type||e)"budget"===this.type?this.hasBudget="number"===typeof e:this.isArrayType?e=this.initArray(e):this.useTextarea&&"object"===Object(o["a"])(e)&&(e="object"===Object(o["a"])(this.pass)&&null!==this.pass?JSON.stringify(e,null,2):"");else{var t=this.capabilities.listPlans().filter(function(e){return e.default});e||1!==t.length||(e=t[0].name)}return e},loadEpsgCodes:function(){var e=this;this.epsgCodes.length||i.e("chunk-2d0d07c4").then(i.t.bind(null,"67d1",3)).then(function(t){var i=t.default;e.epsgCodes=i})},getValue:function(){if(this.isCallbackArgument||this.isResult)return this.value;if("output-format-options"===this.type)return this.$refs.outputFormatOptionsEditor.getValue();if("temporal-interval"===this.type)return[this.value.start,this.value.end];if("callback"===this.type){var e=this.$refs.callbackBuilder.makeProcessGraph(),t=new v["ProcessGraph"](e,this.processRegistry);return t.setParent(this.processId,this.field.name),t.parse(),{callback:t}}if("bounding-box"===this.type)return this.$refs.bboxMap.areaSelect.getBounds();if("geojson"===this.type)return this.$refs.geojson.getGeoJson();if(this.isArrayType){var i=[],n=this.schema.arrayOf();for(var r in this.value){var s=this.value[r].id,a=this.$refs[s][0].getValue();("band-name"!==n||"string"===typeof a&&0!==a.length)&&i.push(a)}return i}if("number"===this.type||"budget"===this.type)return Number.isNaN(this.value)?null:this.value;if("integer"===this.type||"epsg-code"===this.type){var l=Number.parseInt(this.value);return Number.isNaN(l)?null:l}if("null"===this.type)return null;if(this.useTextarea)return"string"===typeof this.value&&this.value.length>0?"object"===this.type||"object"===Object(o["a"])(this.pass)&&null!==this.pass?JSON.parse(this.value):this.value:null;if("string"===typeof this.value&&this.value.length>0&&("any"===this.type||"mixed"===this.type)){l=Number(this.value);return Number.isNaN(l)?this.value:l}return this.value},initArray:function(e){var t=[];if(Array.isArray(e))for(var i in e)m["a"].isObject(e[i])&&e[i].id?t.push(e[i]):t.push({id:"arrayElement"+i,value:e[i]});return t},convertToArray:function(){this.value=this.initArray([this.value])},addField:function(){Array.isArray(this.value)||(this.value=[]);var e=null,t=this.schema.arrayOf();return"string"===t||"band-name"===t?e="":"number"===t||"integer"===t?e=0:"array"===t&&(e=[]),this.value.push({id:this.value.length,value:e}),!1},removeField:function(e){return this.value.splice(e,1),!1}}},w=y,k=(i("e6ae"),i("9e49"),i("2877")),x=Object(k["a"])(w,s,a,!1,null,"7079b458",null),S=x.exports,C=i("caa7"),_=new C["a"]({anyOf:[{type:"null"},{type:"string"},{type:"number"},{type:"integer"},{type:"array"},{type:"object"},{type:"string",format:"band-name"},{type:"object",format:"bounding-box"},{type:"object",format:"callback"},{type:"string",format:"collection-id"},{type:"string",format:"date"},{type:"string",format:"date-time"},{type:"integer",format:"epsg-code"},{type:"object",format:"geojson"},{type:"string",format:"job-id"},{type:"string",format:"output-format"},{type:"string",format:"process-graph-id"},{type:"string",format:"proj-definition"},{type:"array",format:"temporal-interval"},{type:"array",format:"temporal-intervals"},{type:"string",format:"time"}]}),P={name:"ParameterFields",mixins:[f["a"]],components:{ParameterField:S},props:{field:Object,editable:{type:Boolean,default:!0},processId:String,pass:{},uid:String},data:function(){return{selectedType:null}},created:function(){var e=this;this.field.schemas.length>1?v["JsonSchemaValidator"].getTypeForValue(this.field.schemas.map(function(e){return e.schema}),this.pass).then(function(t){"undefined"===typeof t?e.guessType():Array.isArray(t)?(Utils.info("Data type can't be detected, please select it yourself."),console.warn("Parameter schema is ambiguous. Potential types: "+t.join(", ")+". Value: "+JSON.stringify(e.pass)),e.setSelectedType(t[0])):e.setSelectedType(t)}).catch(function(t){return e.guessType()}):this.setSelectedType(0)},computed:{allowedSchemas:function(){var e=this.field.dataType();return"any"===e?_.schemas:this.field.schemas}},watch:{type:function(e,t){this.uid&&this.emit("processParameterTypeChanged",this.uid,this.processId,this.field,e,t)}},methods:{setSelectedType:function(e){this.selectedType=String(e)},guessType:function(){for(var e in this.field.schemas)if(this.field.schemas[e].isNull())return void this.setSelectedType(e);this.setSelectedType(0)},getValue:function(){return this.$refs.field.getValue()}}},O=P,j=(i("c5a7"),Object(k["a"])(O,n,r,!1,null,"7da9592a",null));t["a"]=j.exports},"61ca":function(e,t,i){(function(t,i){e.exports=i()})(0,function(){"use strict";function e(e,i,r,s,a){t(e,i,r||0,s||e.length-1,a||n)}function t(e,n,r,s,a){while(s>r){if(s-r>600){var o=s-r+1,l=n-r+1,c=Math.log(o),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(o-u)/o)*(l-o/2<0?-1:1),d=Math.max(r,Math.floor(n-l*u/o+h)),p=Math.min(s,Math.floor(n+(o-l)*u/o+h));t(e,n,d,p,a)}var f=e[n],v=r,m=s;i(e,r,n),a(e[s],f)>0&&i(e,r,s);while(v<m){i(e,v,m),v++,m--;while(a(e[v],f)<0)v++;while(a(e[m],f)>0)m--}0===a(e[r],f)?i(e,r,m):(m++,i(e,m,s)),m<=n&&(r=m+1),n<=m&&(s=m-1)}}function i(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function n(e,t){return e<t?-1:e>t?1:0}return e})},6224:function(e,t,i){"use strict";var n=i("468d"),r=i.n(n);r.a},"7b23":function(e,t,i){},"7bde":function(e,t,i){"use strict";var n=i("0b46"),r=i.n(n);r.a},"82a7":function(e,t,i){},8893:function(e,t,i){},"8c66":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"visualEditor",staticClass:"visualEditor"},[i("EditorToolbar",{attrs:{editable:e.editable,onStore:e.getProcessGraph,onInsert:e.insertProcessGraph,onClear:e.clearProcessGraph,enableClear:e.enableClear,enableExecute:e.enableExecute,enableLocalStorage:e.enableLocalStorage}},[i("button",{directives:[{name:"show",rawName:"v-show",value:e.editable&&e.blocks.canDelete(),expression:"editable && blocks.canDelete()"}],attrs:{type:"button",title:"Delete selected elements"},on:{click:function(t){return e.blocks.deleteEvent()}}},[i("i",{staticClass:"fas fa-trash"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.editable&&e.blocks.hasUndo(),expression:"editable && blocks.hasUndo()"}],attrs:{type:"button",title:"Undo last change"},on:{click:function(t){return e.blocks.undo()}}},[i("i",{staticClass:"fas fa-undo-alt"})]),i("button",{class:{compactActive:e.blocks.compactMode},attrs:{type:"button",title:"Compact Mode"},on:{click:function(t){return e.blocks.toggleCompact()}}},[i("i",{staticClass:"fas fa-compress-arrows-alt"})]),i("button",{attrs:{type:"button",title:"Scale to perfect size"},on:{click:function(t){return e.perfectScale()}}},[i("i",{staticClass:"fas fa-arrows-alt"})]),i("button",{attrs:{type:"button",title:e.isFullScreen?"Close fullscreen":"Show fullscreen"},on:{click:function(t){return e.toggleFullScreen()}}},[i("span",{directives:[{name:"show",rawName:"v-show",value:e.isFullScreen,expression:"isFullScreen"}]},[i("i",{staticClass:"fas fa-compress"})]),i("span",{directives:[{name:"show",rawName:"v-show",value:!e.isFullScreen,expression:"!isFullScreen"}]},[i("i",{staticClass:"fas fa-expand"})])])]),i("div",{staticClass:"editorSplitter"},[e.showDiscoveryToolbar&&e.editable?i("DiscoveryToolbar",{staticClass:"discoveryToolbar",attrs:{onAddCollection:e.insertCollection,onAddProcess:e.insertProcess,onAddProcessGraph:e.insertProcessGraph}}):e._e(),i("div",{staticClass:"graphBuilder",attrs:{id:e.id},on:{drop:function(t){return e.onDrop(t)},dragover:function(t){return e.allowDrop(t)}}})],1),i("SchemaModal",{ref:"schemaModal"}),i("ParameterModal",{ref:"parameterModal"})],1)},r=[],s=(i("8e6e"),i("ac6a"),i("456d"),i("7f7f"),i("bd86")),a=(i("8615"),i("7618")),o=(i("ac4d"),i("8a81"),function(e){this.historySize=30,this.blocks=e,this.history=[],this.enabled=!0});o.prototype.enable=function(e){this.enabled=e},o.prototype.save=function(){this.enabled&&(this.history.push(this.blocks.export()),this.history.length>this.historySize&&this.history.shift())},o.prototype.size=function(){return this.history.length},o.prototype.restoreLast=function(){if(this.history.length){var e=this.history.pop();this.blocks.import(e)}};var l=o,c=(i("6b54"),i("e270")),u=i("00e5"),h=i("60a2"),d=i("fbdae"),p=i("025e"),f=function(e,t,i,n,r){this.blocks=e,this.meta=n,this.name=t,this.type=i,this.defaultFont=10,this.historySaved=!1,this.id=r,this.isHovered=!1,this.div=null,this.drag=null,this.lastScale=null,this.x=0,this.y=0,this.focusedField=null,this.result=!1,this.comment=null,this.output=null,this.inputs=[],this.editables=[],this.fields={},this._createOutputField(n.returns),this._createInputFields(n.parameters,n.parameter_order),this.jsonSchemaValidator=null};f.prototype._createOutputField=function(e){p["a"].isObject(e)&&(this.output=new c["a"]("output",this.getDefaultOutputLabel(),e.schema,e.description,e.required,!0),this.output.setBlock(this),this.fields.output=this.output)},f.prototype._createInputFields=function(e,t){if(p["a"].isObject(e)){var i=Object.keys(e);for(var n in Array.isArray(t)&&t.length===i.length||(t=i),t){var r=t[n],s=e[r],a=new c["a"](r,r,s.schema,s.description,s.required,!1,s.experimental,s.deprecated);a.setBlock(this),this.inputs.push(a),a.isEditable()&&this.editables.push(a),this.fields[a.name]=a}}},f.prototype.setResult=function(e){this.result=e,this.render()},f.prototype.getHeight=function(){return 20+15*this.inputs.length},f.prototype.getWidth=function(){return this.hasInputs()?this.blocks.compactMode?110:200:this.blocks.compactMode?60:110},f.prototype.hasInputs=function(){return this.inputs.length>0},f.prototype.hasOutputEdges=function(){return this.output.getEdgeCount()>0},f.prototype.getDefaultOutputLabel=function(){return this.isCallbackArgument()?"Callback Argument":"Output"},f.prototype.setValues=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var i in e){var n=this.getField(i);null!==n&&n.setValue(t?JSON.parse(e[i]):e[i])}},f.prototype.getValue=function(e){var t=this.getField(e);return t?t.getValue():null},f.prototype.isCollection=function(){return"load_collection"===this.name},f.prototype.isCallbackArgument=function(){return"callback-argument"===this.type},f.prototype.getCollectionName=function(){return this.getField("id").getValue()},f.prototype.setComment=function(e){this.comment="string"===typeof e?e:null,this.render()},f.prototype.getComment=function(){var e=this.div.querySelector(".editComment");return e&&"string"===typeof e.value&&e.value.length>0?this.comment=e.value:this.comment=null,this.comment},f.prototype.formatCallback=function(e){return 1===p["a"].size(e.getNodes())?e.getResultNode().process_id:"Callback"},f.prototype.formatArray=function(e,t){var i=e.map(function(e){return"string"===typeof e?e:JSON.stringify(e)}).join(", "),n=h["a"].htmlentities(i);return i.length<=t?n:'<span title="'+n+'">List('+e.length+")</span>"},f.prototype.formatObject=function(e){if(0===Object.keys(e).length)return"None";if("string"===typeof e.variable_id)return"Variable";if("undefined"!==typeof e.west&&"undefined"!==typeof e.east&&"undefined"!==typeof e.south&&"undefined"!==typeof e.north)return"Bounding Box";try{return null===this.jsonSchemaValidator&&(this.jsonSchemaValidator=new d["JsonSchemaValidator"]),this.jsonSchemaValidator.validateGeoJsonSimple(e),e.type}catch(t){}return'<span title="'+h["a"].htmlentities(JSON.stringify(e))+'">Object</span>'},f.prototype.getHtml=function(){var e=this,t=this.name;this.isCollection()&&(t=this.getCollectionName());var i=t,n=t;this.isCallbackArgument()||(i+=' <span class="blockId">#'+this.id+"</span>",n+=" #"+this.id);var r='<div class="blockTitle"><span class="titleText" title="'+n+'">'+i+"</span>";r+='<div class="blockicon">',this.blocks.compactMode||(this.blocks.editable&&(null===this.comment&&(r+='<span class="addComment" title="Add comment"><i class="fas fa-comment-medical"></i></span>'),this.isCallbackArgument()||(r+='<span class="delete" title="Remove (DEL)"><i class="fas fa-trash"></i></span>')),r+='<span class="info" title="Details"><i class="fas fa-info"></i></span>'),this.canChangeParameters()&&(r+='<span class="settings" title="Change parameter values"><i class="fas fa-sliders-h"></i></span>'),r+="</div></div>",r+='<div class="inout">';var s=function(t,i){for(var n in r+='<div class="'+t+'s">',i){var s=i[n],o=25-s.getLabel().length,l=null;if(s&&s.isEditable()&&!e.blocks.compactMode){var c=s.getValue();"object"===Object(a["a"])(c)?null===c?l="N/A":Array.isArray(c)?l=e.formatArray(c,o):c.callback instanceof d["ProcessGraph"]?l=e.formatCallback(c.callback):c.from_argument||c.from_node||(l=e.formatObject(c)):"string"===typeof c?l=c.length>o?'<span title="'+h["a"].htmlentities(c)+'">'+c.substr(0,o)+"…</span>":c:"boolean"===typeof c?l=c?"✔️":"❌":"number"===typeof c&&(l=c.toString())}l="string"===typeof l?l.length>0?": "+l:": <em>Empty</em>":"";var u='<div class="circle"></div>',p="";s.isOutput()&&(p=u,u="");var f,v=[t,"connector","field_"+s.name,s.hasValue||!s.isRequired||s.isOutput()?"hasValue":"noValue"];e.isCollection()&&"id"===s.name&&v.push("hide_collection_id"),f=s.isOutput()&&e.blocks.compactMode?"":s.isOutput()&&e.result?"Result":h["a"].htmlentities(s.getLabel()),r+='<div class="'+v.join(" ")+'" rel="'+s.name+'">'+u+f+l+p+"</div>"}r+="</div>"};return s("input",this.inputs),s("output",[this.output]),r+="</div>",this.blocks.compactMode||null===this.comment||(r+='<textarea class="editComment" placeholder="Type comment here...">'+h["a"].htmlentities(this.comment)+"</textarea>"),r},f.prototype.render=function(){this.div&&(this.lastScale=null,this.isHovered=!1,this.div.innerHTML=this.getHtml(),this.initListeners(),this.redraw(this.blocks.selectedBlock===this))},f.prototype.create=function(e){this.div=document.createElement("div"),this.div.id="block"+this.id,this.div.classList.add("block"),this.isCollection()?this.div.classList.add("block_collection"):this.isCallbackArgument()&&this.div.classList.add("block_argument"),e.appendChild(this.div),this.render()},f.prototype.redraw=function(e){for(var t in this.div.style.marginLeft=this.blocks.center.x+this.x*this.blocks.scale+"px",this.div.style.marginTop=this.blocks.center.y+this.y*this.blocks.scale+"px",this.blocks.showIcons&&this.blocks.scale>.8?this.div.querySelector(".blockicon").style.display="":this.div.querySelector(".blockicon").style.display="none",this.lastScale!=this.blocks.scale&&(this.div.style.fontSize=Math.round(this.blocks.scale*this.defaultFont)+"px",this.div.style.width=Math.round(this.blocks.scale*this.getWidth())+"px",this.lastScale=this.blocks.scale),this.fields){var i=this.fields[t],n=this.div.querySelector(".field_"+t);if(n){var r=n.querySelector(".circle");if(r.classList.remove("io_active"),r.classList.remove("io_selected"),r.classList.remove("result"),n.classList.contains("hasValue")||n.classList.add("noValue"),i.getEdgeCount()>0){r.classList.add("io_active"),n.classList.remove("noValue");var s=i.getEdges();for(var a in s)s[a].selected&&r.classList.add("io_selected")}i.isLinking()&&r.classList.add("io_selected"),i.isOutput()&&this.result&&r.classList.add("result")}}this.div.classList.remove("block_selected"),e&&this.div.classList.add("block_selected")},f.prototype.initListeners=function(){var e=this;this.div.querySelector(".blockTitle").addEventListener("mousedown",function(t){1==t.which&&(e.historySaved=!1,e.drag=[e.blocks.mouseX/e.blocks.scale-e.x,e.blocks.mouseY/e.blocks.scale-e.y])});var t=document.querySelector("html");t.addEventListener("mousemove",function(){e.drag&&(e.historySaved||(e.blocks.history.save(),e.historySaved=!0),e.x=e.blocks.mouseX/e.blocks.scale-e.drag[0],e.y=e.blocks.mouseY/e.blocks.scale-e.drag[1],e.blocks.redraw())}),t.addEventListener("mouseup",function(){return e.drag=null}),this.div.addEventListener("mouseover",function(){return e.isHovered=!0}),this.div.addEventListener("mouseout",function(){return e.isHovered=!1});var i=this.div.querySelectorAll(".connector"),n=!0,r=!1,s=void 0;try{for(var a,o=function(){var t=a.value,i=t.getAttribute("rel"),n=e.getField(i);n&&n.isInput()&&e.canChangeParameters()&&t.addEventListener("dblclick",function(){return e.blocks.showParameters(e,i)});var r=t.getElementsByClassName("circle"),s=r.length>0?t.getElementsByClassName("circle")[0]:null;if(!s)return"continue";e.blocks.editable&&(s.addEventListener("mousedown",function(t){1==t.which&&(e.blocks.beginLink(e,i),t.preventDefault(),t.stopPropagation())}),s.addEventListener("click",function(t){if(1==t.which){if(e.hasOutputEdges())return void e.blocks.showError("A result node can't have outgoing edges.");e.blocks.setResultNode(e)}})),s.addEventListener("mouseover",function(){e.blocks.linking&&(e.focusedField=i)}),s.addEventListener("mouseout",function(){return e.focusedField=null})},l=i[Symbol.iterator]();!(n=(a=l.next()).done);n=!0)o()}catch(v){r=!0,s=v}finally{try{n||null==l.return||l.return()}finally{if(r)throw s}}var c=this.div.querySelector(".settings");c&&c.addEventListener("click",function(t){e.blocks.showParameters(e),t.preventDefault(),t.stopPropagation()});var h=this.div.querySelector(".delete");h&&h.addEventListener("click",function(t){e.blocks.removeBlock(e.id),t.preventDefault(),t.stopPropagation()});var d=this.div.querySelector(".addComment");d&&d.addEventListener("click",function(t){e.blocks.selectedBlock=e,e.setComment(""),e.div.querySelector(".editComment").focus(),t.preventDefault(),t.stopPropagation()});var p=this.div.querySelector(".editComment");p&&(p.addEventListener("blur",function(t){"string"===typeof t.target.value&&0!==t.target.value.length||e.setComment(null)}),p.addEventListener("change",function(t){"string"===typeof t.target.value&&t.target.value.length>0?e.setComment(t.target.value):e.setComment(null)}));var f=this.div.querySelector(".info");f&&f.addEventListener("click",function(t){e.isCallbackArgument()?e.blocks.showSchema(e.name,e.meta.returns.schema):e.isCollection()?u["a"].$emit("showCollectionInfo",e.getCollectionName()):u["a"].$emit("showProcessInfo",e.name),t.preventDefault(),t.stopPropagation()})},f.prototype.canChangeParameters=function(){return this.blocks.canShowParameters()&&this.editables.length>0&&!this.isCallbackArgument()},f.prototype.linkPositionFor=function(e){try{var t=this.div.querySelector(".field_"+e+" .circle"),i=p["a"].domBoundingBox(t),n=p["a"].domBoundingBox(this.blocks.div),r=i.offsetLeft-n.offsetLeft+i.width/2,s=i.offsetTop-n.offsetTop+i.height/2}catch(a){throw"Unable to find link position for "+e+" ("+a+")"}return{x:r,y:s}},f.prototype.erase=function(){this.div.parentNode.removeChild(this.div)},f.prototype.allSuccessors=function(){var e={},t=[this],i=[this.id];e[this.id]=!0;while(t.length>0){var n=t.pop();for(var r in n.edges)for(var s in n.edges[r]){var a=n.edges[r][s],o=a.fromTo();if(o[0]==n){var l=o[1];l.id in e||(e[l.id]=!0,t.push(l),i.push(l.id))}}}return i},f.prototype.export=function(){var e={};for(var t in this.editables){var i=this.editables[t];e[i.name]=JSON.stringify(i.getValue())}return{id:this.id,x:this.x,y:this.y,type:this.type,name:this.name,values:e,result:this.result,comment:this.getComment()}},f.prototype.exportProcessGraph=function(){if(this.isCallbackArgument())return null;var e={};for(var t in this.inputs){var i=this.inputs[t];if(i.hasValue){if(!i.isRequired&&i.isDefaultValue())continue;e[i.name]=i.getValue()}}var n={process_id:this.name,arguments:e};return"string"===typeof this.comment&&this.comment.length>0&&(n.description=this.getComment()),this.result&&(n.result=!0),n},f.prototype.getField=function(e){return e in this.fields?this.fields[e]:null},f.prototype.save=function(e){var t={};for(var i in this.fields)"boolean"==this.fields[i].type&&(t[i]=this.fields[i]);for(var n in e){var r=n,s=!1;"[]"==r.substr(r.length-2,2)&&(r=r.substr(0,r.length-2),s=!0),null==e[n]&&s&&(e[n]=[]),r in t&&delete t[r],this.getField(r).setValue(e[n])}for(var n in t)this.getField(n).setValue(!1);this.render()};var v=f,m=function(e,t,i,n){this.x=e,this.y=t,this.dx=i,this.dy=n};m.prototype.distance=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},m.prototype.distanceP=function(e){var t=this.normal();t.x=e.x,t.y=e.y;var i=this.intersection(t);return[i[0],this.distance(t.alpha(i[1]),e)]},m.prototype.normal=function(){return new m(this.x,this.y,this.dy,-this.dx)},m.prototype.intersection=function(e){var t=this.dx,i=-e.dx,n=this.dy,r=-e.dy,s=e.x-this.x,a=e.y-this.y,o=t*r-i*n;if(0==o)return null;var l=(r*s-i*a)/o,c=(-n*s+t*a)/o;return[l,c]},m.prototype.alpha=function(e){var t={};return t.x=this.x+this.dx*e,t.y=this.y+this.dy*e,t};var b=m,g=function(e,t,i,n,r,s){if(this.blocks=s,this.id=parseInt(e),this.block1=t,this.field1=i,this.block2=n,this.field2=r,this.selected=!1,this.defaultSize=3,this.defaultFontSize=10,this.position1=null,this.position2=null,this.segment=null,!t.getField(i.name)||!n.getField(r.name))throw"Can't create edge because the field doesn't exist"};g.prototype.fromTo=function(){return[this.block1,this.block2]},g.prototype.getOtherBlock=function(e){return e===this.block1?this.block2:e===this.block2?this.block1:null},g.prototype.getOtherField=function(e){return e===this.field1?this.field2:e===this.field2?this.field1:null},g.prototype.draw=function(e){this.position1=this.block1.linkPositionFor(this.field1.name),this.position2=this.block2.linkPositionFor(this.field2.name),this.segment=new b(this.position1.x,this.position1.y,this.position2.x-this.position1.x,this.position2.y-this.position1.y);var t=this.defaultSize*this.blocks.scale;if(this.selected)var i="rgba(0, 200, 0, 1)";else i="rgba(255, 200, 0, 1)";e.line(this.position1.x,this.position1.y,this.position2.x,this.position2.y,{stroke:i,"stroke-width":t});var n=(this.position1.x+this.position2.x)/2,r=(this.position1.y+this.position2.y)/2,s=Math.sqrt(Math.pow(this.position1.x-this.position2.x,2)+Math.pow(this.position1.y-this.position2.y,2)),a=30;a=a*Math.PI/180;var o=Math.cos(a),l=Math.sin(a),c=Math.cos(-a),u=Math.sin(-a),h=(this.position1.x-n)*this.blocks.scale*10/(s/2),d=(this.position1.y-r)*this.blocks.scale*10/(s/2);t=this.defaultSize*this.blocks.scale/3;e.line(n,r,n+(h*o-d*l),r+(d*o+h*l),{stroke:i,"stroke-width":t}),e.line(n,r,n+(h*c-d*u),r+(d*c+h*u),{stroke:i,"stroke-width":t})},g.prototype.collide=function(e,t){if(!this.segment)return!1;var i=this.segment.distanceP({x:e,y:t});return i[0]>=0&&i[0]<=1&&i[1]<this.defaultSize*this.blocks.scale*2&&i[0]},g.prototype.create=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.block1==this.block2)throw"You can't link a block to itself";if(this.field1.type==this.field2.type)throw"You have to link an input with an output";this.field1.addEdge(this,e),this.field2.addEdge(this,e),this.block1.render(),this.block2.render()},g.prototype.getDataTypes=function(){return[this.field1.dataTypes(),this.field2.dataTypes()]},g.prototype.erase=function(){this.field1.eraseEdge(this),this.field2.eraseEdge(this),this.block1.render(),this.block2.render()},g.prototype.same=function(e){return this.block1==e.block1&&this.block2==e.block2&&this.field1.name==e.field1.name&&this.field2.name==e.field2.name||this.block1==e.block1&&this.block2==e.block2&&this.field1.name==e.field2.name&&this.field2.name==e.field1.name},g.prototype.export=function(){return{id:this.id,block1:this.block1.id,field1:this.field1.name,block2:this.block2.id,field2:this.field2.name}};var y=g,w=i("d225"),k=i("b0b4"),x=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(w["a"])(this,e),this.svgNS="http://www.w3.org/2000/svg",this.element="string"===typeof t?document.querySelector(t):t,null!==i&&(this.element.style.width=i),null!==n&&(this.element.style.height=n)}return Object(k["a"])(e,[{key:"clear",value:function(){while(this.element.firstChild)this.element.removeChild(this.element.firstChild);return this}},{key:"line",value:function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this._makeNode("line",Object.assign({x1:e,y1:t,x2:i,y2:n},r))}},{key:"_makeNode",value:function(e,t){var i=this.element.ownerDocument.createElementNS(this.svgNS,e);for(var e in t){var n=t[e];null==n||"string"===typeof n&&""===n||i.setAttribute(e,n)}return this.element.appendChild(i),i}}]),e}(),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.errorHandler=e,this.openParameterEditor=t,this.openSchemaModal=i,this.active=!0,this.editable=!0,this.center={x:0,y:0},this.newBlockOffset=0,this.scale=1.3,this.redrawTimeout=null,this.history=null,this.moving=null,this.isReady=!1,this.compactMode=!1,this.mouseX=0,this.mouseY=0,this.linking=null,this.selectedLink=null,this.selectedSide=null,this.selectedBlock=null,this.div=null,this.innerDiv=null,this.svg=null,this.moduleTypes={},this.collectionDefaults={},this.blocks={},this.edges=[],this.id=1,this.edgeId=1,this.clear=function(){this.edges=[],this.blocks={},this.id=1,this.edgeId=1,this.innerDiv&&(this.innerDiv.innerHTML="",this.redraw())},this.showIcons=!0};S.prototype.run=function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.div=document.querySelector(e),this.editable=i,this.div){this.div.innerHTML='<div class="blocks_js_editor"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="canvas"></svg><div class="blocks"></div></div>',this.innerDiv=this.div.querySelector(".blocks"),this.svg=new x(this.div.querySelector("svg"),"100%","100%");var n=p["a"].domBoundingBox(this.div);this.center.x=n.width/2,this.center.y=n.height/2,this.div.addEventListener("mousemove",function(e){var i=p["a"].domBoundingBox(t.div);t.mouseX=e.pageX-i.offsetLeft,t.mouseY=e.pageY-i.offsetTop,t.move()}),document.querySelector("html").addEventListener("mouseup",function(e){t.editable&&t.linking&&1==e.which&&(t.tryEndLink(),t.linking=null,t.redraw()),!t.moving||2!=e.which&&1!=e.which||(t.moving=null)}),this.div.addEventListener("mousedown",function(e){t.canvasClicked()&&e.preventDefault(),2!=e.which&&(t.selectedLink||t.selectedBlock||1!=e.which)||(t.moving=[t.mouseX,t.mouseY])}),document.addEventListener("keydown",function(e){var i=document.querySelectorAll("input, textarea, button, select, datalist"),n=!0,r=!1,s=void 0;try{for(var a,o=i[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value;if(l===document.activeElement)return}}catch(c){r=!0,s=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}t.editable&&46==e.keyCode&&t.active&&t.deleteEvent()});var r=function(e){var i=t.mouseX-t.center.x,n=t.mouseY-t.center.y,r=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),s=Math.pow(1.1,r);t.center.x-=i*(s-1),t.center.y-=n*(s-1),t.newBlockOffset=0,t.scale*=s,t.redraw(),e.preventDefault()};this.div.addEventListener("DOMMouseScroll",r),this.div.addEventListener("mousewheel",r),this.history=new l(this),this.isReady||this.postReady()}else console.error("blocks.js: Unable to find "+e)},S.prototype.postReady=function(){if(this.isReady=!0,void 0!=this.readyQueue)for(var e in this.readyQueue)this.readyQueue[e]()},S.prototype.ready=function(e){if(this.isReady)e();else{var t=[];void 0!=this.readyQueue&&(t=this.readyQueue),t.push(e),this.readyQueue=t}},S.prototype.canShowParameters=function(){return"function"===typeof this.openParameterEditor},S.prototype.showParameters=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.canShowParameters()&&this.openParameterEditor(this,e,this.editable,t)},S.prototype.showSchema=function(e,t){"function"===typeof this.openSchemaModal&&this.openSchemaModal(e,t)},S.prototype.hasUndo=function(){return null===this.history?0:this.history.size()>0},S.prototype.undo=function(){null!==this.history&&(this.history.restoreLast(),this.blocks[this.selectedBlock]||(this.selectedBlock=null),this.edges[this.selectedLink]||(this.selectedLink=null))},S.prototype.setResultNode=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.result!==t){this.history.save(),e.setResult(t);var i=!1;for(var n in this.blocks){var r=this.blocks[n];if(r!==e)if(t)r.setResult(!1);else if(!r.hasOutputEdges()){r.setResult(!0),i=!0;break}}this.getBlockCount()>0&&!t&&!i&&this.showError("No result node available, please specify one."),this.redraw()}},S.prototype.getPositionForPageXY=function(e,t){var i=p["a"].domBoundingBox(this.div);return null!==e&&(e=(e-i.offsetLeft-this.center.x)/this.scale),null!==t&&(t=(t-i.offsetTop-this.center.y)/this.scale),{x:e,y:t}},S.prototype.addCollection=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null,r=null;return"object"===Object(a["a"])(this.collectionDefaults[e])&&(n=this.collectionDefaults[e].spatialExtent,r=this.collectionDefaults[e].temporalExtent),this.createBlock("load_collection","process",t,i,{id:e,spatial_extent:n,temporal_extent:r})},S.prototype.addProcess=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.createBlock(e,"process",t,i,{},n)},S.prototype.addCallbackArgument=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.createBlock(e,"callback-argument",t,i)},S.prototype.createBlock=function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(!(t in this.moduleTypes))throw"Invalid module type specified.";if(!(e in this.moduleTypes[t]))throw"'"+e+"' not available.";var a=new v(this,e,t,this.moduleTypes[t][e],s),o=p["a"].domBoundingBox(this.div);return a.x=null===i?(-this.center.x+o.width/2)/this.scale-a.getWidth()/2+this.newBlockOffset:i,a.y=null===n?(-this.center.y+o.height/2)/this.scale-a.getHeight()/2+this.newBlockOffset:n,this.newBlockOffset<150&&(this.newBlockOffset+=10),0!==this.getProcessBlockCount()||a.isCallbackArgument()||(a.result=!0),a.setValues(r),a.isCallbackArgument()||this.history.save(),this.addBlock(a),a},S.prototype.unregisterCollectionDefaults=function(){this.collectionDefaults={}},S.prototype.unregisterProcesses=function(){this.moduleTypes["process"]={}},S.prototype.unregisterCallbackArguments=function(){this.moduleTypes["callback-arguments"]={}},S.prototype.registerCollectionDefaults=function(e){try{this.collectionDefaults[e.id]={spatialExtent:p["a"].extentToBBox(e.extent.spatial),temporalExtent:e.extent.temporal}}catch(t){console.warn(t)}},S.prototype.registerProcess=function(e){this.register(e,"process",e.id)},S.prototype.registerCallbackArgument=function(e,t){var i=JSON.parse(JSON.stringify(t));i.returns={name:e,attrs:"output",schema:t},this.register(i,"callback-argument",e)},S.prototype.register=function(e,t,i){t in this.moduleTypes||(this.moduleTypes[t]={}),this.moduleTypes[t][i]=e},S.prototype.beginLink=function(e,t){this.linking=[e,t]},S.prototype.move=function(){if(this.editable&&this.selectedSide){var e=Math.sqrt(Math.pow(this.mouseX-this.selectedSide[1],2)+Math.pow(this.mouseY-this.selectedSide[2],2));if(e>15){var t=this.edges[this.selectedLink];2==this.selectedSide[0]?this.linking=[t.block1,t.field1.name]:this.linking=[t.block2,t.field2.name],this.removeEdge(this.selectedLink),this.selectedSide=null,null!=this.selectedLink&&this.selectedLink in this.edges&&(this.edges[this.selectedLink].selected=!1),this.selectedLink=null,this.redraw()}}this.moving&&(this.center.x+=this.mouseX-this.moving[0],this.center.y+=this.mouseY-this.moving[1],this.newBlockOffset=0,this.moving=[this.mouseX,this.mouseY],this.redraw()),this.editable&&this.linking&&this.redraw()},S.prototype.canvasClicked=function(){var e=!1;for(var t in this.selectedBlock=null,null!=this.selectedLink&&(this.edges[this.selectedLink].selected=!1),this.selectedLink=null,this.selectedSide=null,this.blocks)this.blocks[t].isHovered&&(this.selectedBlock=t);if(!this.selectedBlock)for(var t in this.edges){var i=this.edges[t].collide(this.mouseX,this.mouseY);if(0!=i){i<.2?this.selectedSide=[1,this.mouseX,this.mouseY]:i>.8&&(this.selectedSide=[2,this.mouseX,this.mouseY]),this.selectedLink=t,this.edges[t].selected=!0,e=!0;break}}return this.redraw(),e},S.prototype.removeEdge=function(e){this.history.save(),this.edges[e].erase(),this.edges.splice(e,1)},S.prototype.getEdgeId=function(e){for(var t in this.edges)if(e==this.edges[t])return t;return!1},S.prototype.removeBlock=function(e){var t=this.blocks[e],i=[];for(var n in this.edges){var r=this.edges[n];r.block1==t||r.block2==t?r.erase():i.push(r)}this.edges=i,t.erase(),t.id==this.selectedBlock&&(this.selectedBlock=null),delete this.blocks[e],t.result&&this.setResultNode(t,!1),this.redraw()},S.prototype.getBlockById=function(e){return this.blocks[e]?this.blocks[e]:null},S.prototype.getCallbackArgumentBlockByName=function(e){for(var t in this.blocks){var i=this.blocks[t];if(i.isCallbackArgument()&&i.name===e)return i}return null},S.prototype.getBlockCount=function(){return p["a"].size(this.blocks)},S.prototype.getProcessBlockCount=function(){return p["a"].size(Object.values(this.blocks).filter(function(e){return!e.isCallbackArgument()}))},S.prototype.canDelete=function(){if(null!=this.selectedBlock){var e=this.getBlockById(this.selectedBlock);if(e&&e.isCallbackArgument())return!1}return null!=this.selectedBlock||null!=this.selectedLink},S.prototype.deleteEvent=function(){this.canDelete()&&(null!=this.selectedBlock&&(this.history.save(),this.removeBlock(this.selectedBlock),this.selectedBlock=null),null!=this.selectedLink&&(this.history.save(),this.removeEdge(this.selectedLink),this.selectedLink=null,this.redraw()))},S.prototype.doRedraw=function(){for(var e in this.blocks)this.blocks[e].redraw(this.selectedBlock==e);for(var e in this.svg.clear(),this.edges)this.edges[e].draw(this.svg);if(this.linking)try{var t=this.linking[0].linkPositionFor(this.linking[1]);this.svg.line(t.x,t.y,this.mouseX,this.mouseY,{stroke:"rgba(0,0,0,0.4)","stroke-width":3*this.scale})}catch(i){console.error(i),this.linking=null}this.redrawTimeout=null},S.prototype.redraw=function(){var e=this;this.redrawTimeout||(this.redrawTimeout=setTimeout(function(){return e.doRedraw()},25))},S.prototype.tryEndLink=function(){for(var e in this.blocks){var t=this.blocks[e];if(t.isHovered&&t.focusedField){this.endLink(t,t.focusedField);break}}},S.prototype.addEdge=function(e,t,i,n){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e instanceof v||(e=this.getBlockById(e)),i instanceof v||(i=this.getBlockById(i));var s=this.edgeId++;if(t instanceof c["a"]||(t=e.getField(t)),n instanceof c["a"]||(n=i.getField(n)),t.isOutput())var a=new y(s,e,t,i,n,this);else a=new y(s,i,n,e,t,this);var o=a.fromTo();if(o[0]!==o[1]){if(-1!=o[1].allSuccessors().indexOf(o[0].id))throw"You can not create a loop";if(!this.areTypesCompatible(n,t))throw"Types are not compatible";if(n.getEdgeCount()>0&&!n.allowsMultipleEdges())throw"Parameter accepts only one input";for(var l in this.edges){var u=this.edges[l];if(u.same(a))throw"This connection exists already"}this.history.save(),a.create(r),this.edges.push(a),r&&this.setResultNode(t.isOutput()?e:i,!1),this.linking=null,this.selectedBlock=null,i.focusedField=null,e.focusedField=null,i.redraw(),e.redraw(),this.redraw()}},S.prototype.endLink=function(e,t){try{this.addEdge(this.linking[0],this.linking[1],e,t)}catch(i){this.showError(i)}},S.prototype.areTypesCompatible=function(e,t){return d["JsonSchemaValidator"].isSchemaCompatible(e.schema,t.schema,!1,!0)},S.prototype.showError=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"function"===typeof this.errorHandler?this.errorHandler(e,t):console.error(t,e)},S.prototype.toggleCompact=function(){for(var e in this.compactMode=!this.compactMode,this.blocks)this.blocks[e].render();this.redraw()},S.prototype.export=function(){var e=[],t=[];for(var i in this.blocks)e.push(this.blocks[i].export());for(var i in this.edges)t[i]=this.edges[i].export();return{edges:t,blocks:e}},S.prototype.exportProcessGraph=function(){if(0===this.getProcessBlockCount())return null;var e={};for(var t in this.blocks){var i=this.blocks[t].exportProcessGraph();null!==i&&(e[t]=i)}return e},S.prototype.importProcessGraph=function(e,t){var i;e instanceof d["ProcessGraph"]?(i=new d["ProcessGraph"](e.toJSON(),t),i.setParent(e.parentProcessId,e.parentParameterName)):i=new d["ProcessGraph"](e,t),i.parse(),this.importNodesFromProcessGraph(i.getStartNodes());var n=i.getNodes();for(var r in n){var s=n[r],a=s.getArgumentNames();for(var o in a){var l=s.getRawArgumentValue(a[o]);switch(s.getArgumentType(a[o])){case"result":this.addEdge(i.getNode(l).blockId,"output",s.blockId,a[o],!1);break;case"callback-argument":this.addEdge(this.getCallbackArgumentBlockByName(l),"output",s.blockId,a[o],!1);break;case"object":case"array":for(var u in l)c["a"].isRef(l[u])&&(l[u].from_node?this.addEdge(i.getNode(l[u].from_node).blockId,"output",s.blockId,a[o],!1):l[u].from_argument&&this.addEdge(this.getCallbackArgumentBlockByName(l[u].from_argument),"output",s.blockId,a[o],!1));break}}}},S.prototype.importNodesFromProcessGraph=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(var n in e){var r=e[n];if(!r.blockId){var s=this.addProcess(r.process_id,t,i,r.id);s.result=r.isResultNode,s.comment=r.description,s.setValues(r.arguments),s.render(),r.blockId=s.id,this.importNodesFromProcessGraph(r.getNextNodes(),t+s.getWidth()+20,i),i+=s.getHeight()+20}}},S.prototype.incrementId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e)e=this.id,this.id++;else if(isNaN(parseInt(e))){if("string"!==typeof e||0===e.length)throw"Invalid node id specified"}else this.id=Math.max(this.id,parseInt(e)+1);return e},S.prototype.addBlock=function(e){if(!(e instanceof v))throw"Parameter must be of type 'Block'";e.id=this.incrementId(e.id),e.create(this.innerDiv),this.blocks[e.id]=e},S.prototype.import=function(e){var t=this;this.clear(),this.ready(function(){try{var i=[];if(t.id=1,t.edgeId=1,"object"!=Object(a["a"])(e)||e instanceof Array)throw"Scene is not an object";if(!("blocks"in e)||!(e.blocks instanceof Array))throw"Scene has no blocks section";if(!("edges"in e)||!(e.edges instanceof Object))throw"Scene has no edges section";for(var n in e.blocks){var r=e.blocks[n];if(r.type in t.moduleTypes&&r.name in t.moduleTypes[r.type]){var s=new v(t,r.name,r.type,t.moduleTypes[r.type][r.name],r.id);s.x=r.x,s.y=r.y,s.comment=r.comment,s.result=r.result,s.setValues(r.values,!0),t.addBlock(s)}else i.push("Block #"+n+": Unable to create a block of type "+r.type)}for(var n in e.edges){r=e.edges[n];if(!1 in r)i.push("Edge #"+n+": The edge does not have an id");else{var o=t.getBlockById(r.block1),l=t.getBlockById(r.block2);if(o&&l){var c=new y(r.id,o,o.getField(r.field1),l,l.getField(r.field2),t);t.edgeId=Math.max(t.edgeId,c.id+1),c.create(),t.edges.push(c)}else i.push("Edge #"+n+": Corresponsing block does not exist")}}if(i.length)for(var n in i)t.showError(i[n],"Import failed");t.redraw()}catch(u){t.showError(u,"Import failed")}})},S.prototype.perfectScale=function(){if(this.div&&0!==this.getBlockCount()){var e=null,t=null,i=null,n=null;for(var r in this.blocks){var s=this.blocks[r];null==e?(e=s.x-15,t=s.x+s.getWidth()+18,i=s.y-15,n=s.y+115):(e=Math.min(e,s.x-15),t=Math.max(t,s.x+s.getWidth()+18),i=Math.min(i,s.y-15),n=Math.max(n,s.y+115))}var a=this.div.getBoundingClientRect(),o=a.width/(t-e),l=a.height/(n-i);this.scale=Math.min(o,l),this.center.x=a.width/2-this.scale*(e+t)/2,this.center.y=a.height/2-this.scale*(i+n)/2,this.newBlockOffset=0,this.redraw()}};var C=S,_=i("1190"),P=i("cbd9"),O=i("14c0"),j=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{ref:"modal",scopedSlots:e._u([{key:"main",fn:function(){return[i("div",{attrs:{id:"schemaModal"}},[e.message?i("p",{staticClass:"message"},[e._v(e._s(e.message))]):e._e(),i("JsonSchema",{attrs:{schema:e.schema}})],1)]},proxy:!0}])})},D=[],E=i("714b"),T=i("6e45"),M={name:"SchemaModal",components:{Modal:E["a"],JsonSchema:T["a"]},data:function(){return{schema:null,message:null}},methods:{show:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.schema=t,this.message=i,this.$refs.modal.show(e)}}},F=M,I=(i("0df61"),i("2877")),A=Object(I["a"])(F,j,D,!1,null,null,null),B=A.exports;function N(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function L(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?N(i,!0).forEach(function(t){Object(s["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):N(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var G={name:"VisualEditor",components:{EditorToolbar:_["a"],DiscoveryToolbar:P["a"],ParameterModal:O["a"],SchemaModal:B},props:{id:String,editable:{type:Boolean,default:!0},active:{type:Boolean,default:!0},value:{type:Object,default:null},callbackArguments:{type:Object},enableClear:{type:Boolean,default:!0},enableLocalStorage:{type:Boolean,default:!0},enableExecute:{type:Boolean,default:!0},showDiscoveryToolbar:{type:Boolean,default:!0}},computed:L({},p["a"].mapState("server",["processes","collections"]),{},p["a"].mapGetters("server",["processRegistry"])),data:function(){return{blocks:null,isFullScreen:!1}},beforeMount:function(){var e=this;this.blocks=new C(this.errorHandler,function(t,i,n,r){return e.openParameterEditor(t,i,n,r)},function(t,i){return e.showSchemaModal(t,i)})},mounted:function(){this.active&&this.onShow()},watch:{processes:function(){this.registerProcesses()},collections:function(){this.registerCollections()},active:function(e){e&&this.onShow()}},methods:{allowDrop:function(e){e.preventDefault()},onDrop:function(e){var t=e.dataTransfer.getData("application/openeo-process"),i=e.dataTransfer.getData("application/openeo-collection"),n=e.dataTransfer.getData("application/openeo-process-graph");t?(e.preventDefault(),this.insertProcess(t,e.pageX,e.pageY)):i?(e.preventDefault(),this.insertCollection(i,e.pageX,e.pageY)):n&&(e.preventDefault(),this.insertProcessGraph(JSON.parse(n)))},onShow:function(){this.blocks.isReady||(this.blocks.run("#"+this.id,this.editable),this.registerProcesses(),this.registerCollections(),this.makeCallbackArguments(),this.insertProcessGraph(this.value,!1))},perfectScale:function(){this.blocks.perfectScale(),this.$forceUpdate()},toggleFullScreen:function(){var e=this.$refs.visualEditor;this.isFullScreen?(this.isFullScreen=!1,e.classList.remove("fullscreen"),this.perfectScale()):(this.isFullScreen=!0,e.classList.add("fullscreen"),this.perfectScale())},errorHandler:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;p["a"].exception(this,e,t)},showSchemaModal:function(e,t){this.$refs.schemaModal&&this.$refs.schemaModal.show(e,t,"This is a callback argument. It is a value made available by the process executing this sub-processes for further use. The value will comply to the following data type(s):")},openParameterEditor:function(e,t,i,n){e.active=!1;var r=t.name+" #"+t.id;this.$refs.parameterModal.show(r,t.editables,i,i?function(e){return t.save(e)}:null,function(){return e.active=!0,!0},t.name,n)},clearProcessGraph:function(){this.blocks.clear(),this.makeCallbackArguments()},registerCollections:function(){for(var e in this.blocks.unregisterCollectionDefaults(),this.collections)this.blocks.registerCollectionDefaults(this.collections[e])},registerProcesses:function(){for(var e in this.blocks.unregisterProcesses(),this.processes)this.blocks.registerProcess(this.processes[e]);for(var t in this.blocks.unregisterCallbackArguments(),this.callbackArguments)this.blocks.registerCallbackArgument(t,this.callbackArguments[t])},getProcessGraph:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=null;try{n=this.makeProcessGraph()}catch(s){return void t("No valid model specified.",s)}if(null!==n)try{var r=new d["ProcessGraph"](n,this.processRegistry);r.parse()}catch(s){return void t("Process graph invalid",s)}null!==n||i?e(n):t("No model specified.")},makeModel:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!0;t&&this.blocks.history.save(),this.blocks.clear(),this.blocks.history.enable(!1);try{this.makeCallbackArguments(),this.blocks.importProcessGraph(e,this.processRegistry),this.blocks.perfectScale()}catch(n){p["a"].exception(this,n,"Process graph invalid"),this.blocks.history.restoreLast(),i=!1}return this.blocks.history.enable(!0),i},makeProcessGraph:function(){return this.blocks.exportProcessGraph()},makeCallbackArguments:function(){var e=0;for(var t in this.callbackArguments)this.insertCallbackArgument(t,e++)},insertProcessGraph:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e?this.makeModel(e,t):this.clearProcessGraph()},insertCollection:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{var n=this.blocks.getPositionForPageXY(t,i);this.blocks.addCollection(e,n.x,n.y)}catch(r){p["a"].exception(this,r)}},insertProcess:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{var n=this.blocks.getPositionForPageXY(t,i);this.blocks.addProcess(e,n.x,n.y)}catch(r){p["a"].exception(this,r)}},insertCallbackArgument:function(e,t){try{this.blocks.addCallbackArgument(e,-150,50*t)}catch(i){p["a"].exception(this,i)}}}},V=G,$=(i("4d982"),Object(I["a"])(V,n,r,!1,null,null,null));t["default"]=$.exports},"916f":function(e,t,i){"use strict";var n=i("a36c"),r=i.n(n);r.a},9215:function(e,t,i){},"970e":function(e,t,i){},9961:function(e,t,i){"use strict";var n=i("9215"),r=i.n(n);r.a},"9b84":function(e,t,i){"use strict";var n=i("f93f"),r=i.n(n);r.a},"9d5a":function(e,t,i){},"9e49":function(e,t,i){"use strict";var n=i("c2a1"),r=i.n(n);r.a},a143:function(e,t,i){},a36c:function(e,t,i){},a5c1:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:e.id}})},r=[],s=(i("a481"),i("75fc")),a=(i("c5f6"),i("4877")),o=i("025e"),l=(i("5bc0"),i("c320")),c=i("9d47"),u=i("8f3a"),h=i("0af5"),d=i("4cdf"),p=i("a2e1"),f=i("5eee"),v=i("a2c7"),m=i("5bc3"),b=i("256f"),g=i("b2fc"),y=i("480c"),w=i("6cf3"),k=i("3e6b"),x=i("5831"),S=i("d0e9"),C=i("2ef1"),_=(i("faaa"),i("f087")),P=i("e887"),O=(i("159a"),i("c516")),j=(i("1399"),i("0417")),D=(i("7505"),i("cfd3")),E=i("d803"),T=i("d225"),M=i("b0b4"),F=i("3900"),I=function(){function e(){Object(T["a"])(this,e),this.createHtml(),this.loading=0,this.loaded=0}return Object(M["a"])(e,[{key:"addLoading",value:function(){this.loading++,this.update()}},{key:"addLoaded",value:function(){this.loaded++,this.update()}},{key:"update",value:function(){var e=(this.loaded/this.loading*100).toFixed(1)+"%";this.label.innerText="Loading Tiles ("+e+")",this.progressBarInner.style.width=e,this.loading===this.loaded&&(this.loading=0,this.loaded=0),this.el.style.opacity=this.show()?1:0}},{key:"show",value:function(){return this.loading>0&&this.loaded<=this.loading}},{key:"createHtml",value:function(){this.el=document.createElement("div"),this.el.className="ol-unselectable ol-progress-control",this.progressBar=document.createElement("div"),this.progressBar.className="progress-bar",this.progressBarInner=document.createElement("div"),this.progressBarInner.className="progress-bar-inner",this.progressBar.appendChild(this.progressBarInner),this.label=document.createElement("div"),this.label.className="progress-label",this.el.appendChild(this.progressBar),this.el.appendChild(this.label)}},{key:"getControl",value:function(){var e=new F["a"]({element:this.el});return e}}]),e}(),A=function(){function e(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(T["a"])(this,e),this.map=t;var s=this.map.getSize();this.width=n||(s[0]>0?.7*s[0]:300),this.height=r||(s[1]>0?.7*s[1]:200),this.moving=!1,this.editable=i,this.createElements(),this.addControls(),this.render()}return Object(M["a"])(e,[{key:"getBounds",value:function(){var e=this.map.getSize(),t=[0,0],i=[0,0];i[0]=Math.round((e[0]-this.width)/2),t[1]=Math.round((e[1]-this.height)/2),t[0]=e[0]-i[0],i[1]=e[1]-t[1];var n=Object(b["i"])(this.map.getCoordinateFromPixel(i)),r=Object(b["i"])(this.map.getCoordinateFromPixel(t));return{west:n[0],south:n[1],east:r[0],north:r[1]}}},{key:"setBounds",value:function(e){var t=this,i=Object(b["d"])([e.west,e.south]),n=Object(b["d"])([e.east,e.north]),r={callback:function(){var e=t.map.getPixelFromCoordinate(i),r=t.map.getPixelFromCoordinate(n);t.width=parseInt(Math.abs(e[0]-r[0])),t.height=parseInt(Math.abs(e[1]-r[1])),t.render()}},a=this.map.getSize();!this.editable&&a&&(r.padding=[a[0]/3,a[1]/3,a[0]/3,a[1]/3]),this.map.getView().fit([].concat(Object(s["a"])(i),Object(s["a"])(n)),r)}},{key:"createElement",value:function(e,t,i){var n=document.createElement(e);return n.className=t,i&&i.appendChild(n),n}},{key:"createElements",value:function(){var e=this;this.overlayContainer||(this.overlayContainer=this.createElement("div","ol-unselectable ol-areaselect ol-areaselect-shade-container",this.map.getOverlayContainer()),this.topShade=this.createElement("div","ol-areaselect-shade",this.overlayContainer),this.bottomShade=this.createElement("div","ol-areaselect-shade",this.overlayContainer),this.leftShade=this.createElement("div","ol-areaselect-shade",this.overlayContainer),this.rightShade=this.createElement("div","ol-areaselect-shade",this.overlayContainer),this.editable&&(this.nwHandle=this.createElement("div","ol-areaselect-handle"),this.swHandle=this.createElement("div","ol-areaselect-handle"),this.neHandle=this.createElement("div","ol-areaselect-handle"),this.seHandle=this.createElement("div","ol-areaselect-handle"),this.setUpHandlerEvents(this.nwHandle,1,1),this.setUpHandlerEvents(this.neHandle,-1,1),this.setUpHandlerEvents(this.swHandle,1,-1),this.setUpHandlerEvents(this.seHandle,-1,-1)),this.map.on("change:size",function(){return e.onInteraction()}))}},{key:"setUpHandlerEvents",value:function(e,t,i){var n=this,r=function(e){if(n.moving){var r=n.map.getSize();n.width+=2*(n.moving[0]-e.pageX)*t,n.height+=2*(n.moving[1]-e.pageY)*i,n.width=Math.max(30,n.width),n.height=Math.max(30,n.height),n.width=Math.min(r[0]-30,n.width),n.height=Math.min(r[1]-30,n.height),n.moving=[e.pageX,e.pageY],n.render()}},s=this.map.getTargetElement(),a=document.querySelector("html"),o=function e(){n.map.getTargetElement()&&(s.removeEventListener("mousemove",r),a.removeEventListener("mouseup",e),n.moving=!1)};e.addEventListener("mousedown",function(e){e.stopPropagation(),n.moving=[e.pageX,e.pageY],s.addEventListener("mousemove",r),a.addEventListener("mouseup",o)})}},{key:"onInteraction",value:function(){this.render()}},{key:"render",value:function(){var e=this.map.getSize(),t=Math.round((e[1]-this.height)/2),i=Math.round((e[0]-this.width)/2);if(this.setElementDimensions(this.overlayContainer,{width:e[0],height:e[1]}),this.setElementDimensions(this.topShade,{width:e[0],height:t,top:0,left:0}),this.setElementDimensions(this.bottomShade,{width:e[0],height:t,bottom:0,left:0}),this.setElementDimensions(this.leftShade,{width:i,height:e[1]-2*t,top:t,left:0}),this.setElementDimensions(this.rightShade,{width:i,height:e[1]-2*t,top:t,right:0}),this.editable){var n=Math.round(this.nwHandle.offsetWidth/2);this.setElementDimensions(this.nwHandle,{left:i-n,top:t-7}),this.setElementDimensions(this.neHandle,{right:i-n,top:t-7}),this.setElementDimensions(this.swHandle,{left:i-n,bottom:t-7}),this.setElementDimensions(this.seHandle,{right:i-n,bottom:t-7})}}},{key:"setElementDimensions",value:function(e,t){e.style.width=t.width+"px",e.style.height=t.height+"px",e.style.top=t.top+"px",e.style.left=t.left+"px",e.style.bottom=t.bottom+"px",e.style.right=t.right+"px"}},{key:"addControls",value:function(){this.editable&&(this.addControl(this.nwHandle),this.addControl(this.neHandle),this.addControl(this.swHandle),this.addControl(this.seHandle))}},{key:"addControl",value:function(e){this.map.addControl(new F["a"]({element:e}))}}]),e}(),B={name:"MapViewer",mixins:[a["a"]],props:{id:{type:String,required:!0},center:{type:Array,default:function(){return[50.1725,9.15]}},zoom:{type:Number,default:6},show:{type:Boolean,default:!0},editable:{type:Boolean,default:!0},showExtent:{type:Array,default:function(){return null}},showAreaSelector:{default:!1},showGeoJson:{default:!1}},data:function(){return{map:null,baseLayer:null,osm:null,progress:null,userLayers:{},swipe:{control:null,left:null,right:null},geoJsonLayer:null}},watch:{show:function(e){this.showMap()}},mounted:function(){this.showMap()},methods:{showMap:function(){this.show&&this.$nextTick(this.renderMap)},renderMap:function(){if(null!==this.map)return this.map.updateSize(),void this.map.render();this.progress=new I,this.areaSelect=null,this.osm=new S["a"],this.baseLayer=new y["a"]({source:this.trackTileProgress(this.osm),baseLayer:!0,title:"OpenStreetMap"});var e=[new l["a"],new j["a"],new c["a"],this.progress.getControl()],t={target:this.id,layers:[this.baseLayer],view:new v["a"]({center:Object(b["d"])([this.center[1],this.center[0]]),zoom:this.zoom})};if(this.editable?t.controls=Object(u["a"])().extend(e):(t.interactions=[],t.controls=e),this.map=new f["a"](t),this.showExtent){var i=o["a"].extentToBBox(this.showExtent);this.addRectangle(i.west,i.east,i.north,i.south)}else if(this.showAreaSelector)if(!0===this.showAreaSelector)this.addAreaSelector();else{i=o["a"].extentToBBox(this.showAreaSelector);this.addAreaSelector(i.west,i.east,i.north,i.south)}o["a"].isObject(this.showGeoJson)&&!this.editable?this.geoJsonLayer=this.addGeoJson(this.showGeoJson):this.showGeoJson&&(this.geoJsonLayer=this.showGeoJsonEditor(this.showGeoJson)),this.listen("windowResized",this.updateMapSize)},updateMapSize:function(){this.map&&this.map.updateSize()},addGeoJson:function(e){var t={};o["a"].isObject(e)&&(t.features=(new p["a"]).readFeatures(e,{featureProjection:this.osm.getProjection()}));var i=new x["a"](t),n=new k["a"]({title:"GeoJSON",source:i});this.map.addLayer(n);var r=i.getExtent();return Object(h["H"])(r)||this.map.getView().fit(r),n},showGeoJsonEditor:function(e){var t=this.addGeoJson(e),i=new _["a"];this.map.addControl(i);var n=new O["a"]({source:t.getSource(),interactions:{Info:!1,DrawHole:!1,Offset:!1,Split:!1}});i.addControl(n);var r=new E["a"];this.map.addInteraction(r),r.on("undo",function(e){"addfeature"===e.action.type&&(n.getInteraction("Select").getFeatures().clear(),n.getInteraction("Transform").select())});var s=new _["a"]({group:!0,controls:[new P["a"]({html:'<i class="fas fa-undo-alt"></i>',title:"Undo",handleClick:function(){return r.undo()}}),new P["a"]({html:'<i class="fas fa-redo-alt"></i>',title:"Redo",handleClick:function(){return r.redo()}})]});return i.addControl(s),this.map.addInteraction(new g["a"]({source:t.getSource()})),t},getGeoJson:function(){var e=new p["a"],t=this.geoJsonLayer.getSource().getFeatures(),i=[];for(var n in t)i.push(e.writeFeatureObject(t[n],{dataProjection:"EPSG:4326",featureProjection:this.osm.getProjection()}));return 0===i.length?null:1===i.length?!i[0].properties&&i[0].geometry?i[0].geometry:i[0]:{type:"FeatureCollection",features:i}},addRectangle:function(e,t,i,n){var r=[].concat(Object(s["a"])(Object(b["d"])([e,n])),Object(s["a"])(Object(b["d"])([t,i])));this.map.addLayer(new k["a"]({title:"Extent",displayInLayerSwitcher:!1,source:new x["a"]({features:[new d["a"](Object(m["c"])(r))],wrapX:!1})})),this.map.getView().fit(r)},addAreaSelector:function(e,t,i,n){this.areaSelect=new A(this.map,this.editable),"undefined"!==typeof e&&"undefined"!==typeof t&&"undefined"!==typeof i&&"undefined"!==typeof n&&this.areaSelect.setBounds(e,t,i,n)},trackTileProgress:function(e){var t=this;return e.on("tileloadstart",function(){t.progress.addLoading()}),e.on("tileloadend",function(){t.progress.addLoaded()}),e.on("tileloaderror",function(){t.progress.addLoaded()}),e},getVisibleLayers:function(){var e=[];for(var t in this.userLayers)this.userLayers[t].getVisible()&&e.push(t);return e},showWebService:function(e){switch(e.type.toLowerCase()){case"xyz":this.updateXYZLayer(e);break;default:o["a"].error(this,"Sorry, the service type is not supported by the map.")}},toggleSwipeControl:function(){var e=this.getVisibleLayers();2===e.length?(null===this.swipe.control&&(this.swipe.control=new D["a"],this.map.addControl(this.swipe.control)),this.swipe.left!==e[0]&&(this.swipe.control.addLayer(this.userLayers[e[0]]),this.swipe.left=e[0]),this.swipe.right!==e[1]&&(this.swipe.control.addLayer(this.userLayers[e[1]],!0),this.swipe.right=e[1])):(this.map.removeControl(this.swipe.control),this.swipe.control=null,this.swipe.left=null,this.swipe.right=null)},addLayerToMap:function(e,t){var i=this;this.userLayers[e]=t,this.map.addLayer(t),this.toggleSwipeControl(),t.on("change",function(){return i.toggleSwipeControl()}),t.on("change:visible",function(){return i.toggleSwipeControl()}),t.on("change:zIndex",function(){return i.toggleSwipeControl()})},removeLayerFromMap:function(e){this.userLayers[e]&&(this.map.removeLayer(this.userLayers[e]),delete this.userLayers[e],this.toggleSwipeControl())},updateGeoTiffLayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=new y["a"]({source:new w["a"]({url:"http://tiles.rdnt.io/tiles?url="+encodeURIComponent(e),crossOrigin:"anonymous"})});this.addLayerToMap(t||"GeoTiff",i)},updateXYZLayer:function(e){var t=e.serviceId,i=e.url,n=(e.title?e.title.substr(0,50):t.toUpperCase().substr(0,6))+" (XYZ)";if("undefined"===typeof this.userLayers[t]){var r=new y["a"]({source:this.trackTileProgress(new C["a"]({url:i})),title:n});this.addLayerToMap(t,r)}else{var s=o["a"].replaceParam(i,"__editorSessionId",(new Date).getTime());s=s.replace(/%7B/g,"{").replace(/%7D/g,"}"),this.userLayers[t].getSource().setUrl(s)}}}},N=B,L=(i("3b8b"),i("2877")),G=Object(L["a"])(N,n,r,!1,null,null,null);t["a"]=G.exports},a769:function(e,t,i){},aa61:function(e,t,i){"use strict";var n=i("53d5"),r=i.n(n);r.a},aab4:function(e,t,i){"use strict";var n=i("ab21"),r=i.n(n);r.a},ab21:function(e,t,i){},b23d:function(e,t,i){"use strict";var n=i("8893"),r=i.n(n);r.a},b40d:function(e,t,i){},b5d7:function(e,t,i){"use strict";var n=i("d1cc"),r=i.n(n);r.a},bfcb:function(e,t,i){},c2a1:function(e,t,i){},c5a7:function(e,t,i){"use strict";var n=i("970e"),r=i.n(n);r.a},c6c0:function(e,t,i){"use strict";var n=i("a143"),r=i.n(n);r.a},caa7:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i("d225"),r=i("b0b4"),s=function(){function e(t){Object(n["a"])(this,e),this.schema=t,t.oneOf||t.anyOf?this.schemas=(t.oneOf||t.anyOf).map(function(e){return new a(e)}):Array.isArray(t.type)?this.schemas=t.type.map(function(e){return new a(Object.assign({},t,{type:e}))}):this.schemas=[new a(t)]}return Object(r["a"])(e,[{key:"hasDefaultValue",value:function(){if("undefined"!==typeof this.schema.default)return!0;for(var e in this.schemas)if("undefined"!==typeof this.schemas[e].default)return!0;return!1}},{key:"defaultValue",value:function(){if("undefined"!==typeof this.schema.default)return this.schema.default;for(var e in this.schemas)if("undefined"!==typeof this.schemas[e].default)return this.schemas[e].default}},{key:"isEditable",value:function(){return this.schemas.filter(function(e){return e.isEditable()&&!e.isNull()}).length>0}},{key:"is",value:function(e){var t=this.dataTypes();return 1===t.length&&t[0]===e}},{key:"dataType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataTypes(!0,e),i=t.indexOf("null");return 1===t.length?t[0]:2===t.length&&-1!=i?t[0===i?1:0]:"mixed"}},{key:"dataTypes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.schemas.map(function(e){return e.dataType(t)});return i=i.filter(function(e,t,i){return i.indexOf(e)===t}),e||(i=i.filter(function(e){return"null"!==e})),i}},{key:"nullable",value:function(){return this.schemas.filter(function(e){return e.isNull()}).length>0}}]),e}(),a=function(){function e(t){Object(n["a"])(this,e),this.schema=t,"array"===this.schema.type?this.arrayItems=new s(this.schema.items||{}):this.arrayItems=null}return Object(r["a"])(e,[{key:"isNull",value:function(){return"null"===this.schema.type}},{key:"isEditable",value:function(){return"raster-cube"!==this.dataType()&&"vector-cube"!==this.dataType()}},{key:"arrayOf",value:function(){return null===this.arrayItems?null:this.arrayItems.dataType()}},{key:"dataType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.schema.type||"any";return e||(t=this.schema.format||t),t}},{key:"isEnum",value:function(){return Array.isArray(this.schema.enum)}},{key:"getEnumChoices",value:function(){return this.schema.enum}},{key:"getCallbackParameters",value:function(){return this.schema.parameters}},{key:"title",value:function(){return this.schema.title?this.schema.title:this.dataType()}},{key:"description",value:function(){return this.schema.description||""}}]),e}()},cb37:function(e,t,i){},cbd9:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"discovery-toolbar"},[i("div",{staticClass:"search-box"},[i("span",{staticClass:"icon"},[e._v("🔎")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],attrs:{type:"search",placeholder:"Search",title:"Search in collections and processes"},domProps:{value:e.searchTerm},on:{input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}})]),i("div",{staticClass:"search-results"},[i("div",{class:{category:!0,collections:!0,expanded:e.collectionsExpanded}},[i("strong",{attrs:{title:"Collections ("+e.collectionsCount+")"},on:{click:function(t){return e.toggle("collections")}}},[i("span",{staticClass:"toggle"},[e._v("▸")]),e._v(" Collections")]),e._l(e.collections,function(t,n){return i("div",{directives:[{name:"show",rawName:"v-show",value:e.collectionsShow[n],expression:"collectionsShow[i]"}],key:t.id,staticClass:"discovery-entity",attrs:{draggable:"true"},on:{dragstart:function(i){return e.onDrag(i,"collection",t.id)}}},[i("div",{staticClass:"discovery-info",on:{click:function(i){return e.showCollectionInfo(t.id)}}},[i("strong",{attrs:{title:t.id}},[e._v(e._s(t.id))]),t.title?i("small",{attrs:{title:t.title}},[e._v(e._s(t.title))]):e._e()]),i("button",{staticClass:"discovery-button",attrs:{type:"button",title:"Insert"},on:{click:function(i){return e.insertCollection(t.id)}}},[i("i",{staticClass:"fas fa-plus"})])])}),e.collectionsCount?e._e():i("div",{staticClass:"noData"},[e._v("No collections available.")])],2),i("div",{class:{category:!0,processes:!0,expanded:e.processesExpanded}},[i("strong",{attrs:{title:"Processes ("+e.processesCount+")"},on:{click:function(t){return e.toggle("processes")}}},[i("span",{staticClass:"toggle"},[e._v("▸")]),e._v(" Processes")]),e._l(e.processes,function(t,n){return i("div",{directives:[{name:"show",rawName:"v-show",value:e.processesShow[n],expression:"processesShow[i]"}],key:t.id,staticClass:"discovery-entity",attrs:{draggable:"true"},on:{dragstart:function(i){return e.onDrag(i,"process",t.id)}}},[i("div",{staticClass:"discovery-info",on:{click:function(i){return e.showProcessInfo(t.id)}}},[i("strong",{attrs:{title:t.id}},[e._v(e._s(t.id))]),t.summary?i("small",{attrs:{title:t.summary}},[e._v(e._s(t.summary))]):e._e()]),i("button",{staticClass:"discovery-button",attrs:{type:"button",title:"Insert"},on:{click:function(i){return e.insertProcess(t.id)}}},[i("i",{staticClass:"fas fa-plus"})])])}),e.processesCount?e._e():i("div",{staticClass:"noData"},[e._v("No processes available.")])],2),e.loadHubProcessGraphs?i("div",{class:{category:!0,hubGraphs:!0,expanded:e.hubGraphsExpanded}},[i("strong",{attrs:{title:"Process Graphs @ Hub ("+e.hubGraphsCount+")"},on:{click:function(t){return e.toggle("hubGraphs")}}},[i("span",{staticClass:"toggle"},[e._v("▸")]),e._v(" Process Graphs @ Hub")]),e._l(e.hubGraphs,function(t,n){return i("div",{directives:[{name:"show",rawName:"v-show",value:e.hubGraphsShow[n],expression:"hubGraphsShow[i]"}],key:t.id,staticClass:"discovery-entity",attrs:{draggable:"true"},on:{dragstart:function(i){return e.onDrag(i,"process-graph",t.process_graph)}}},[i("div",{staticClass:"discovery-info",on:{click:function(i){return e.showProcessGraphInfo(t)}}},[t.title?i("small",{attrs:{title:t.title}},[e._v(e._s(t.title))]):i("small",[e._v(e._s(t.id))])]),i("button",{staticClass:"discovery-button",attrs:{type:"button",title:"Insert"},on:{click:function(i){return e.insertProcessGraph(t.process_graph)}}},[i("i",{staticClass:"fas fa-plus"})])])}),e.hubGraphsCount?e._e():i("div",{staticClass:"noData"},[e._v("No compatible process graphs available at the openEO Hub.")])],2):e._e()])])},r=[],s=(i("8e6e"),i("456d"),i("6762"),i("2fdb"),i("ac6a"),i("5df3"),i("ac4d"),i("8a81"),i("96cf"),i("3b8d")),a=i("bd86"),o=i("7618"),l=i("a1bc"),c=i("4877"),u=i("8c7c"),h=i("025e"),d=i("fbdae");function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function f(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(i,!0).forEach(function(t){Object(a["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var v={name:"DiscoveryToolbar",mixins:[u["a"],c["a"]],props:{onAddCollection:{type:Function,required:!0},onAddProcess:{type:Function,required:!0},onAddProcessGraph:{type:Function,required:!0}},data:function(){return{loadHubProcessGraphs:l["a"].loadHubProcessGraphs,searchTerm:"",collectionsExpanded:!1,processesExpanded:!1,hubGraphsExpanded:!1,collectionsShow:[],processesShow:[],hubGraphs:[],hubGraphsShow:[],collectionsCount:0,processesCount:0,hubGraphsCount:0,timeout:null}},created:function(){this.filter("processes"),this.filter("collections"),this.loadHubGraphs()},watch:{processes:function(){"object"===Object(o["a"])(this.processes)&&this.filter("processes")},collections:function(){"object"===Object(o["a"])(this.collections)&&this.filter("collections")},searchTerm:function(){var e=this;null!==this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.timeout=null,e.filter("processes"),e.filter("collections"),e.filter("hubGraphs")},500)}},computed:f({},h["a"].mapState("server",["processes","collections"]),{},h["a"].mapGetters("server",["processRegistry"])),methods:{filterArrayAsync:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,i){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=Symbol(),e.next=3,Promise.all(t.map(function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:if(!e.sent){e.next=6;break}e.t0=t,e.next=7;break;case 6:e.t0=n;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 3:return e.t0=function(e){return e!==n},e.abrupt("return",e.sent.filter(e.t0));case 5:case"end":return e.stop()}},e)}));function t(t,i){return e.apply(this,arguments)}return t}(),loadHubGraphs:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.loadHubProcessGraphs){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,axios.get("https://hub.openeo.org/api/process_graphs");case 5:if(t=e.sent,Array.isArray(t.data)){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,this.filterArrayAsync(t.data,function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,h["a"].isObject(t.process_graph)||(t.process_graph=JSON.parse(t.process_graph)),n=new d["ProcessGraph"](t.process_graph,i.processRegistry),e.next=5,n.validate();case 5:return r=e.sent,e.abrupt("return",0===r.count());case 9:return e.prev=9,e.t0=e["catch"](0),e.abrupt("return",!1);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}());case 10:this.hubGraphs=e.sent,this.filter("hubGraphs"),e.next=16;break;case 14:e.prev=14,e.t0=e["catch"](2);case 16:case"end":return e.stop()}},e,this,[[2,14]])}));function t(){return e.apply(this,arguments)}return t}(),onDrag:function(e,t,i){h["a"].isObject(i)&&(i=JSON.stringify(i)),e.dataTransfer.setData("application/openeo-"+t,i),e.dataTransfer.setData("text/plain",i)},filter:function(e){var t=this,i=0,n=[],r=!1,s=this.searchTerm.toLowerCase();this.searchTerm?(n=this[e].map(function(e){var n=t.filterFn(e,s);return n&&i++,n}),r=!0):(n=this[e].map(function(){return!0}),i=this[e].length),this[e+"Show"]=n,this[e+"Count"]=i,this.toggle(e,r)},filterFn:function(e,t){return!("string"!==typeof e.summary||!e.summary.toLowerCase().includes(t))||(!("string"!==typeof e.title||!e.title.toLowerCase().includes(t))||!!e.id.toLowerCase().includes(t))},toggle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=e+"Expanded";this[i]=null===t?!this[i]:t},showCollectionInfo:function(e){this.supports("listCollections")&&this.emit("showCollectionInfo",e)},showProcessInfo:function(e){this.supports("listProcesses")&&this.emit("showProcessInfo",e)},showProcessGraphInfo:function(e){this.emit("showProcessGraphInfo",e)},insertCollection:function(e){this.onAddCollection(e)},insertProcess:function(e){this.onAddProcess(e)},insertProcessGraph:function(e){this.onAddProcessGraph(e)}}},m=v,b=(i("cf07"),i("2877")),g=Object(b["a"])(m,n,r,!1,null,"afc8aaf4",null);t["a"]=g.exports},cf07:function(e,t,i){"use strict";var n=i("9d5a"),r=i.n(n);r.a},cf2f:function(e,t,i){"use strict";var n=i("3c4e"),r=i.n(n);r.a},d1cc:function(e,t,i){},e0b0:function(e,t,i){"use strict";var n=i("a769"),r=i.n(n);r.a},e270:function(e,t,i){"use strict";var n=i("7618"),r=(i("7f7f"),i("6762"),i("2fdb"),i("d225")),s=i("b0b4"),a=i("308d"),o=i("6bb5"),l=i("2a88"),c=i("4e2b"),u=i("caa7"),h=i("025e"),d=function(e){function t(e,i,n){var s,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=arguments.length>6&&void 0!==arguments[6]&&arguments[6],d=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return Object(r["a"])(this,t),s=Object(a["a"])(this,Object(o["a"])(t).call(this,n)),s.block=null,s.description=l||"",s.isRequired=c||!1,s.isDeprecated=d||!1,s.isExperimental=h||!1,s.type=u?"output":"input",s.name=e,s.label=i,s.edges=[],s.resetValue(),s}return Object(c["a"])(t,e),Object(s["a"])(t,[{key:"resetValue",value:function(){if(this.hasValue=!1,this.hasDefaultValue())return this.value=this.defaultValue(),void(this.hasValue=!0);if(this.nullable())this.value=null;else{var e=this.dataType(!0);switch(e){case"array":this.value=[];break;case"string":this.value="";break;case"integer":case"number":this.value=0;break;case"boolean":this.value=!1;break;default:this.value=null}}}},{key:"setBlock",value:function(e){this.block=e}},{key:"isDefaultValue",value:function(){return!this.hasValue||this.hasDefaultValue()&&this.defaultValue()==this.getValue()}},{key:"isArrayType",value:function(){return"array"===this.dataType(!0)}},{key:"isObjectType",value:function(){return"object"===this.dataType(!0)}},{key:"isEditable",value:function(){return this.isInput()&&Object(l["a"])(Object(o["a"])(t.prototype),"isEditable",this).call(this)}},{key:"isOutput",value:function(){return"output"===this.type}},{key:"isInput",value:function(){return"input"===this.type}},{key:"allowsMultipleEdges",value:function(){var e=this.dataTypes(!1,!0);return e.filter(function(e){return["array","object"].includes(e)}).length>0}},{key:"_getEdgeRef",value:function(e){var t=e.getOtherBlock(this.block);return t?t.isCallbackArgument()?{from_argument:String(t.name)}:{from_node:String(t.id)}:null}},{key:"_addValueForEdge",value:function(e){var i=this._getEdgeRef(e);if(i)if(this.allowsMultipleEdges())if(this.isArrayType())t.isRef(this.value)?this.value=[this.value,i]:Array.isArray(this.value)&&this.value.length>0?this.value.push(i):(this.value=i,this.hasValue=!0);else if(this.isObjectType())if(t.isRef(this.value)){var n="Can't determine which object property this input should be assigned to. Please specify manually in Process Graph mode.";console.warn(n),this.block.blocks.showError(n)}else this.value=i,this.hasValue=!0;else this.value=i,this.hasValue=!0;else this.value=i,this.hasValue=!0}},{key:"_removeValueForEdge",value:function(e){var t=this._getEdgeRef(e);this._isRefEqual(t,this.value)?this.resetValue():(this.isArrayType()||this.isObjectType())&&(this.value=this._removeValueForEdgeDeep(this.value,t))}},{key:"_removeValueForEdgeDeep",value:function(e,t){if(Array.isArray(e)){var i=e.length;while(i--)null!==e[i]&&"object"===Object(n["a"])(e[i])&&(this._isRefEqual(t,e[i])?e.splice(i,1):this._removeValueForEdgeDeep(e[i],t))}else if(h["a"].isObject(e))for(var r in e)e.hasOwnProperty(r)&&null!==e[r]&&"object"===Object(n["a"])(e[r])&&(this._isRefEqual(t,e[r])?delete e[r]:this._removeValueForEdgeDeep(e[r],t));return e}},{key:"_isRefEqual",value:function(e,t){return!(!h["a"].isObject(e)||!h["a"].isObject(t))&&(!(!e.from_argument||e.from_argument!==t.from_argument)||!(!e.from_node||e.from_node!=t.from_node))}},{key:"isLinking",value:function(){var e=this.block.blocks.linking;return this.name===this.block.focusedField||Array.isArray(e)&&this.block.id===e[0].id&&this.name===e[1]}},{key:"addEdge",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.edges.push(e),t&&this.isInput()&&this._addValueForEdge(e),this}},{key:"eraseEdge",value:function(e){for(var t in this.edges)if(this.edges[t]==e)return this._removeValueForEdge(e),this.edges.splice(t,1),!0;return!1}},{key:"getEdgeCount",value:function(){return this.edges.length}},{key:"getEdges",value:function(){return this.edges}},{key:"getValue",value:function(){return this.value}},{key:"getLabel",value:function(){return this.label}},{key:"setValue",value:function(e){return"boolean"==this.dataType(!0)&&(e=!!e),this.value=e,this.hasValue=!0,this}}],[{key:"isRef",value:function(e){return h["a"].isObject(e)&&(e.from_argument||e.from_node)}}]),t}(u["a"]);t["a"]=d},e6ae:function(e,t,i){"use strict";var n=i("cb37"),r=i.n(n);r.a},ed22:function(e,t){
/*! http://mths.be/repeat v0.2.0 by @mathias */
String.prototype.repeat||function(){"use strict";var e=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(n){}return i}(),t=function(e){if(null==this)throw TypeError();var t=String(this),i=e?Number(e):0;if(i!=i&&(i=0),i<0||i==1/0)throw RangeError();var n="";while(i)i%2==1&&(n+=t),i>1&&(t+=t),i>>=1;return n};e?e(String.prototype,"repeat",{value:t,configurable:!0,writable:!0}):String.prototype.repeat=t}()},f196:function(e,t,i){"use strict";var n=i("1887"),r=i.n(n);r.a},f3db:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"wrapper"}},[n("div",{attrs:{id:"ide"},on:{mouseup:function(t){return e.stopMovingSeparator(t)},mousemove:function(t){return e.moveSeparator(t)}}},[n("header",{staticClass:"navbar"},[n("div",{staticClass:"logo"},[n("img",{attrs:{src:i("cf05"),alt:"openEO"}}),n("h2",[e._v("Web Editor "),n("span",{staticClass:"version",on:{click:e.showWebEditorInfo}},[e._v(e._s(e.version))])])]),n("ul",{attrs:{id:"menu"}},[n("li",[n("div",{staticClass:"menuItem",attrs:{title:"Get server information"},on:{click:e.showServerInfo}},[n("i",{staticClass:"fas fa-info fa-fw"}),e._v(" Server")])]),n("li",[n("UserMenu")],1)])]),n("main",{staticClass:"page"},[n("div",{ref:"discovery",attrs:{id:"discovery"}},[n("DiscoveryToolbar",{staticClass:"toolbar",attrs:{onAddCollection:e.insertCollection,onAddProcess:e.insertProcess,onAddProcessGraph:e.insertProcessGraph}})],1),n("hr",{ref:"separator0",staticClass:"separator",on:{dblclick:function(t){return e.centerSeparator(t,0)},mousedown:function(t){return e.startMovingSeparator(t,0)}}}),n("div",{ref:"workspace",attrs:{id:"workspace"}},[n("Editor",{ref:"editor",staticClass:"mainEditor",attrs:{id:"main",showDiscoveryToolbar:!1}}),n("UserWorkspace",{staticClass:"userContent"})],1),n("hr",{ref:"separator1",staticClass:"separator",on:{dblclick:function(t){return e.centerSeparator(t,1)},mousedown:function(t){return e.startMovingSeparator(t,1)}}}),n("div",{ref:"viewer",attrs:{id:"viewer"}},[n("Viewer")],1)])]),n("CollectionModal",{ref:"collectionModal"}),n("ProcessModal",{ref:"processModal"}),n("ServerInfoModal",{ref:"serverInfoModal"}),n("ServiceInfoModal",{ref:"serviceModal"}),n("JobInfoModal",{ref:"jobModal"}),n("ProcessGraphInfoModal",{ref:"pgModal"}),n("ParameterModal",{ref:"parameterModal"})],1)},r=[],s=(i("8e6e"),i("ac6a"),i("456d"),i("7514"),i("8449"),i("bd86")),a=i("9224"),o=i("4877"),l=i("025e"),c=i("8c7c"),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"UserMenu"}},[i("div",{staticClass:"menuItem"},[e._m(0),i("div",{staticClass:"data"},[i("span",{staticClass:"name nowrap"},[i("i",{staticClass:"fas fa-user"}),e._v(" "+e._s(e.userName))]),e.hasBudget?i("span",{staticClass:"credits nowrap"},[i("i",{staticClass:"fas fa-dollar-sign fa-fw"}),e._v(" "+e._s(e.budget))]):e._e(),e.hasStorage?i("span",{staticClass:"storage nowrap"},[i("i",{staticClass:"fas fa-database fa-fw"}),e._v(" "+e._s(e.storageUsedPercent)+"% used")]):e._e()])]),i("div",{staticClass:"dropdown"},[i("div",{staticClass:"item"},[e._v("\n\t\t\tWelcome, "+e._s(e.userName)+"!\n\t\t")]),e.hasStorage?i("div",{staticClass:"item"},[i("h4",[e._v("Storage")]),i("div",{staticClass:"storagePercent"},[i("div",{staticClass:"used",style:"width: "+e.storageUsedPercent+"%"})]),i("div",{staticClass:"nowrap"},[e._v("Used "+e._s(e.formatMegabyte(e.storageUsed))+" of "+e._s(e.formatMegabyte(e.userInfo.storage.quota))+".")])]):e._e(),e._l(e.links,function(t,n){return i("div",{key:n,staticClass:"item"},[i("a",{attrs:{href:t.href,target:"_blank",rel:t.rel}},[e._v(e._s(t.title))])])}),i("div",{staticClass:"item"},[i("button",{staticClass:"navButton",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.logout(t)}}},[i("i",{staticClass:"fas fa-sign-out-alt"}),e._v(" Logout")])])],2)])},h=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"down"},[i("i",{staticClass:"fas fa-chevron-down"})])}],d=(i("96cf"),i("3b8d"));i("55dd"),i("a481");function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function f(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(i,!0).forEach(function(t){Object(s["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var v={name:"UserMenu",computed:f({},l["a"].mapState("server",["userInfo"]),{},l["a"].mapGetters("server",["formatCurrency"]),{links:function(){var e=[];if(Array.isArray(this.userInfo.links))for(var t in this.userInfo.links){var i=this.userInfo.links[t];"string"===typeof i.rel&&"self"===i.rel.toLowerCase()||("string"===typeof i.title&&0!==i.title.length||("string"===typeof i.rel&&i.rel.length>1?i.title=i.rel.charAt(0).toUpperCase()+i.rel.slice(1):i.title=i.href.replace(/^https?:\/\/(www.)?/i,"").replace(/\/$/i,"")),e.push(i))}return e.sort(function(e,t){return e.title.localeCompare(t.title)})},hasBudget:function(){return null===this.userInfo.budget||"number"===typeof this.userInfo.budget&&this.userInfo.budget>=0},hasStorage:function(){return l["a"].isObject(this.userInfo.storage)&&"number"===typeof this.userInfo.storage.quota&&"number"===typeof this.userInfo.storage.free},budget:function(){return this.hasBudget?null===this.userInfo.budget?"Unlimited":this.formatCurrency(this.userInfo.budget):"N/A"},userName:function(){return this.userInfo.user_id?this.userInfo.user_id:"Guest"},storageUsed:function(){return this.hasStorage?this.userInfo.storage.quota-this.userInfo.storage.free:null},storageUsedPercent:function(){return this.hasStorage?Math.round(this.storageUsed/this.userInfo.storage.quota*100):null}}),methods:f({},l["a"].mapActions("server",{logoutServer:"logout"}),{},l["a"].mapMutations("editor",{resetEditor:"reset"}),{logout:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.logoutServer();case 2:this.resetEditor();case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),formatMegabyte:function(e){var t=1073741824;return e>t?Math.round(e/t)+" GB":Math.round(e/1048576)+" MB"}})},m=v,b=(i("c6c0"),i("2877")),g=Object(b["a"])(m,u,h,!1,null,"581b3c97",null),y=g.exports,w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Tabs",{ref:"tabs",attrs:{id:"userContent"}},[e.supportsJobs?i("Tab",{attrs:{id:"jobs",name:"Batch Jobs",icon:"fa-tasks"}},[i("JobPanel")],1):e._e(),e.supportsServices?i("Tab",{attrs:{id:"services",name:"Web Services",icon:"fa-cloud"}},[i("ServicePanel")],1):e._e(),e.supportsProcessGraphs?i("Tab",{attrs:{id:"storedProcessGraphs",name:"Process Graphs",icon:"fa-code-branch"}},[i("ProcessGraphPanel")],1):e._e(),e.supportsFiles?i("Tab",{attrs:{id:"files",name:"Files",icon:"fa-file"}},[i("FilePanel")],1):e._e()],1)},k=[],x=i("e7ea"),S=i("bdb2"),C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"FilePanel"},on:{dragenter:function(t){return e.dropZoneInfo(!0)},dragleave:function(t){return e.dropZoneInfo(!1)},drop:function(t){return e.uploadFiles(t)},dragover:function(t){return e.allowDrop(t)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showUploadDropHint,expression:"showUploadDropHint"}],staticClass:"dropZone"},[e._v("To upload files, drop them here.")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.supports("uploadFile"),expression:"supports('uploadFile')"}],staticClass:"addFile"},[i("input",{attrs:{type:"file",name:"uploadUserFile",id:"uploadUserFile",multiple:""},on:{change:e.uploadFiles}})]),i("div",{staticClass:"percent"},[i("div",{staticClass:"used",class:{error:e.uploadErrored},style:"width: "+this.uploadProgress+"%; opacity: "+this.uploadFadeOut})]),i("DataTable",{ref:"table",attrs:{dataSource:e.listFiles,columns:e.columns},scopedSlots:e._u([{key:"actions",fn:function(t){return[i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("downloadFile"),expression:"supports('downloadFile')"}],attrs:{title:"Download"},on:{click:function(i){return e.downloadFile(t.row)}}},[i("i",{staticClass:"fas fa-download"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("deleteFile"),expression:"supports('deleteFile')"}],attrs:{title:"Delete"},on:{click:function(i){return e.deleteFile(t.row)}}},[i("i",{staticClass:"fas fa-trash"})])]}}])},[i("template",{slot:"toolbar"},[e.isListDataSupported?i("button",{attrs:{title:"Refresh files"},on:{click:function(t){return e.updateData()}}},[i("i",{staticClass:"fas fa-sync-alt"})]):e._e()])],2)],1)},_=[],P=(i("7f7f"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dataTable",attrs:{id:e.id}},[i("div",{staticClass:"dataTableMenu"},[i("div",{staticClass:"dataTableToolbar"},[e._t("toolbar")],2),e.data.length>0?i("div",{staticClass:"dataTableFilter"},[i("i",{staticClass:"fas fa-search filter-icon"}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.filterValue,expression:"filterValue"}],attrs:{type:"text",placeholder:"Search term"},domProps:{value:e.filterValue},on:{input:function(t){t.target.composing||(e.filterValue=t.target.value)}}}),i("button",{attrs:{type:"button",disabled:!e.hasFilter},on:{click:e.clearFilter}},[i("i",{staticClass:"fas fa-times-circle"})])]):e._e()]),e.data.length>0||"undefined"==typeof e.noDataMessage||""==e.noDataMessage?i("table",[i("tr",e._l(e.columns,function(t,n){return i("th",{directives:[{name:"show",rawName:"v-show",value:!t.hide,expression:"!col.hide"}],key:n,class:n},[e._v(e._s(t.name))])}),0),e._l(e.view,function(t,n){return i("tr",{key:n},e._l(e.columns,function(n,r){return i("td",{directives:[{name:"show",rawName:"v-show",value:!n.hide,expression:"!col.hide"}],key:r,class:[r,{edit:e.canEdit(n)}],attrs:{title:!!e.canEdit(n)&&"Double-click to change the value","data-value":!!n.stylable&&e.value(t,n,r)},on:{dblclick:function(i){return e.onDblClick(i,t,n,r)}}},[e._t(r,[e.showEditField(t,n,r)?[i("form",{on:{submit:function(i){return i.preventDefault(),i.stopPropagation(),e.saveEditField(i,t,n,r)}}},[i("input",{ref:"editField",refInFor:!0,attrs:{type:"text"},domProps:{value:e.value(t,n,r)},on:{blur:function(i){return e.saveEditField(i,t,n,r)},keyup:function(i){return e.resetEditFieldEsc(i,t,n,r)}}})])]:[e._v("\n\t\t\t\t\t\t"+e._s(e.formattedValue(t,n,r))+"\n\t\t\t\t\t")]],{row:t,col:n,id:r})],2)}),0)}),e.data.length>0&&0==e.view.length?i("tr",{staticClass:"noSearchResults"},[i("td",{attrs:{colspan:e.columnCount}},[e._v("Sorry, no element matches your search criteria.")])]):e._e()],2):e._e(),0==e.data.length?i("div",{staticClass:"noDataMessage"},[e._v(e._s(e.noDataMessage))]):e._e()])}),O=[],j=(i("6b54"),i("20d6"),i("7618")),D={name:"DataTable",props:["id","columns","dataSource"],data:function(){return{data:[],view:[],filterValue:null,primaryKey:null,noDataMessage:"No data specified.",editField:null}},watch:{data:function(e,t){this.updateView()},filterValue:function(e,t){this.updateView()}},computed:{columnCount:function(){return Object.keys(this.columns).length},hasFilter:function(){return"string"===typeof this.filterValue&&this.filterValue.length>0}},created:function(){this.determinePrimaryKey()},methods:{canEdit:function(e){return"function"===typeof e.edit},showEditField:function(e,t,i){return this.canEdit(t)&&null!=this.editField&&this.editField[0]==e&&this.editField[1]==i},onDblClick:function(e,t,i,n){var r=this;if(this.canEdit(i)){var s=this.value(t,i,n);if("boolean"===typeof s){var a=this.columns[n].edit;a(t)}else this.editField=[t,n],this.$nextTick(function(){return r.$refs.editField[0].focus()});e.preventDefault(),e.stopPropagation()}},saveEditField:function(e,t,i,n){if(null!==this.editField&&this.canEdit(i)){var r=this.columns[n].edit;r(t,this.$refs.editField[0].value),this.editField=null,e.preventDefault(),e.stopPropagation()}},resetEditFieldEsc:function(e,t,i,n){"Escape"==e.key&&(this.editField=null)},determinePrimaryKey:function(){for(var e in this.columns)if(this.columns[e].primaryKey){this.primaryKey=e;break}},setNoData:function(e){this.data=[],"string"!=typeof e?l["a"].isObject(e)&&("object"===Object(j["a"])(e.data)&&"object"===Object(j["a"])(e.config)&&"object"===Object(j["a"])(e.headers)&&(e=e.data),l["a"].isObject(e)&&"string"===typeof e.message)?this.noDataMessage=e.message:(console.warn(e),this.noDataMessage="Sorry, an unknown error has occured."):this.noDataMessage=e},retrieveData:function(){var e=this;this.setNoData("Loading data..."),this.data=[],"function"===typeof this.dataSource?this.dataSource().then(function(t){Array.isArray(t)?0==t.length?e.setNoData(""):e.setData(t):e.setNoData("Invalid response from data source.")}).catch(function(t){e.setNoData(t)}):Array.isArray(this.dataSource)?0==this.dataSource.length?this.setNoData(""):this.setData(this.dataSource):this.setNoData("No valid data source specified.")},setData:function(e){this.noDataMessage=void 0,this.data=e},removeData:function(e){var t=this;if(null===this.primaryKey)throw new Error("No primary key specified.");this.data=this.data.filter(function(i){return i[t.primaryKey]!=e}),0==this.data.length&&this.setNoData("")},addData:function(e){if(!e.hasOwnProperty(this.primaryKey))throw new Error("Object does not contain a value for the primary key.");this.data.push(e)},replaceData:function(e){var t=this;if(null===this.primaryKey)throw new Error("No primary key specified.");if(!e.hasOwnProperty(this.primaryKey))throw new Error("Object does not contain a value for the primary key.");var i=this.data.findIndex(function(i){return i[t.primaryKey]==e[t.primaryKey]});i>=0?this.$set(this.data,i,e):this.data.push(e)},value:function(e,t,i){var n;return n="object"===Object(j["a"])(e)?e[i]:e,l["a"].isObject(t)&&"function"===typeof t.computedValue&&(n=t.computedValue(e,n)),n},formattedValue:function(e,t,i){return this.format(this.value(e,t,i),t)},sort:function(){},filter:function(){var e=this;if(this.hasFilter){var t=this.filterValue.toLowerCase();this.view=this.view.filter(function(i){for(var n in i){var r=e.columns[n];if(!("undefined"===typeof r||r.hasOwnProperty("filterable")&&!1===r.filterable)){var s=e.value(i,r,n);if(("number"===typeof s||"string"===typeof s||"boolean"===typeof s)&&(s=s.toString(),-1!==s.toLowerCase().indexOf(t)))return!0}}return!1})}},clearFilter:function(){this.filterValue="",this.updateView()},updateView:function(){Array.isArray(this.data)?(this.view=this.data,this.data.length>0&&(this.filter(),this.sort())):this.view=[]},format:function(e,t){return"string"===typeof t.format?"function"===typeof this["format"+t.format]?e=this["format"+t.format](e,t):console.warn(t.format+" is an invalid formatter."):"function"===typeof t.format&&(e=t.format.call(this,e,t)),e},formatFileSize:function(e,t){if(!e)return"";var i=0==e?0:Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,i)).toFixed(2)+" "+["B","kB","MB","GB","TB"][i]},formatDateTime:function(e,t){return l["a"].formatDateTime(e)},formatUpperCase:function(e,t){return"string"===typeof e?e.toUpperCase():e}}},E=D,T=(i("6224"),Object(b["a"])(E,P,O,!1,null,null,null)),M=T.exports;function F(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function I(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?F(i,!0).forEach(function(t){Object(s["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):F(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var A,B,N={mixins:[c["a"]],components:{DataTable:M},data:function(){return{columns:{},listFunc:null,createFunc:null}},computed:I({},l["a"].mapGetters("server",["isAuthenticated"]),{isListDataSupported:function(){return this.isAuthenticated&&this.supports(this.listFunc)}}),watch:{isAuthenticated:function(e,t){e&&!t&&this.updateData()}},mounted:function(){this.updateData()},methods:{updateData:function(){},updateTable:function(e){e&&(this.isAuthenticated?this.supports(this.listFunc)?this.supports(this.createFunc)?e.retrieveData():e.setNoData("Sorry, this feature is not supported by the server."):e.setNoData("Sorry, listing stored data is not supported by the server."):e.setNoData("Please authenticate to list stored data."))}}},L=N,G=Object(b["a"])(L,A,B,!1,null,null,null),V=G.exports,$={name:"FilePanel",mixins:[V],data:function(){return{columns:{path:{name:"Path",primaryKey:!0},size:{name:"Size",format:"FileSize",filterable:!1},modified:{name:"Last modified",format:"DateTime"},actions:{name:"Actions",filterable:!1}},subscribed:!1,uploadProgress:0,uploadProgressPerFile:[],uploadErrored:!1,uploadFadeOut:1,showUploadDropHint:0,listFunc:"listFiles",createFunc:"uploadFile"}},watch:{uploadProgressPerFile:{deep:!0,handler:function(){this.uploadProgress=this.uploadProgressPerFile.reduce(function(e,t){return e+t},0)/this.uploadProgressPerFile.length,this.uploadProgress>99.9999&&this.finishAllUploads()}}},methods:{allowDrop:function(e){this.supports("uploadFile")&&(e.preventDefault(),e.stopPropagation())},dropZoneInfo:function(e){this.showUploadDropHint+=e?1:-1},listFiles:function(){return this.connection.listFiles()},updateData:function(){this.updateTable(this.$refs.table)},uploadFiles:function(e){this.showUploadDropHint=0;var t=[];if(e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length?(t=e.dataTransfer.files,e.preventDefault(),e.stopPropagation()):e.target&&e.target.files&&e.target.files.length&&(t=e.target.files),this.supports("uploadFile"))if(0!==t.length){this.uploadProgressPerFile=[],this.uploadProgress=0,this.uploadErrored=!1;for(var i=0;i<t.length;i++)this.uploadFile(t[i],i)}else l["a"].info(this,"Please select files to upload.");else l["a"].error(this,"Uploading files is not supported.")},uploadFile:function(e,t){var i=this;if(this.uploadProgressPerFile.push(0),"string"===typeof e.name){var n=this.connection.openFile(e.name);n.uploadFile(e,function(e){return i.$set(i.uploadProgressPerFile,t,e)}).then(function(n){i.$refs.table.replaceData(n),i.$set(i.uploadProgressPerFile,t,100),l["a"].ok(i,"File upload completed.",e.name)}).catch(function(t){console.error(t),l["a"].exception(i,t,e.name)})}},finishAllUploads:function(){var e=this;document.getElementById("uploadUserFile").value="";var t=setInterval(function(){e.uploadFadeOut-=.05,e.uploadFadeOut<0&&(e.uploadProgress=0,e.uploadFadeOut=1,clearInterval(t))},100)},downloadFile:function(e){l["a"].info(this,"File requested. Please wait..."),e.downloadFile(e.path)},deleteFile:function(e){var t=this;e.deleteFile().then(function(i){t.$refs.table.removeData(e.path)}).catch(function(e){l["a"].error(t,"Sorry, could not delete file.")})},subscribeToFileChanges:function(){this.connection.subscribe("openeo.files",{},function(e,t){console.info("File change: "+JSON.stringify(e))}),this.subscribed=!0},unsubscribeFromFileChanges:function(e){this.connection.unsubscribe("openeo.files",{}),this.subscribed=!1}}},J=$,R=(i("9961"),Object(b["a"])(J,C,_,!1,null,null,null)),Y=R.exports,X=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.connection?i("DataTable",{ref:"table",attrs:{dataSource:e.listJobs,columns:e.columns,id:"JobPanel"},scopedSlots:e._u([{key:"actions",fn:function(t){return[i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("describeJob"),expression:"supports('describeJob')"}],attrs:{title:"Details"},on:{click:function(i){return e.showJobInfo(t.row)}}},[i("i",{staticClass:"fas fa-info"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("describeJob"),expression:"supports('describeJob')"}],attrs:{title:"Show in Editor"},on:{click:function(i){return e.showInEditor(t.row)}}},[i("i",{staticClass:"fas fa-code-branch"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("estimateJob"),expression:"supports('estimateJob')"}],attrs:{title:"Estimate"},on:{click:function(i){return e.estimateJob(t.row)}}},[i("i",{staticClass:"fas fa-file-invoice-dollar"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("updateJob")&&e.isJobInactive(t.row),expression:"supports('updateJob') && isJobInactive(p.row)"}],attrs:{title:"Edit metadata"},on:{click:function(i){return e.editMetadata(t.row)}}},[i("i",{staticClass:"fas fa-edit"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("updateJob")&&e.isJobInactive(t.row),expression:"supports('updateJob') && isJobInactive(p.row)"}],attrs:{title:"Replace process graph"},on:{click:function(i){return e.replaceProcessGraph(t.row)}}},[i("i",{staticClass:"fas fa-retweet"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("deleteJob"),expression:"supports('deleteJob')"}],attrs:{title:"Delete"},on:{click:function(i){return e.deleteJob(t.row)}}},[i("i",{staticClass:"fas fa-trash"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("startJob")&&e.isJobInactive(t.row),expression:"supports('startJob') && isJobInactive(p.row)"}],attrs:{title:"Start processing"},on:{click:function(i){return e.queueJob(t.row)}}},[i("i",{staticClass:"fas fa-play-circle"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("stopJob")&&e.isJobActive(t.row),expression:"supports('stopJob') && isJobActive(p.row)"}],attrs:{title:"Cancel processing"},on:{click:function(i){return e.cancelJob(t.row)}}},[i("i",{staticClass:"fas fa-stop-circle"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("downloadResults")&&e.hasResults(t.row),expression:"supports('downloadResults') && hasResults(p.row)"}],attrs:{title:"Download"},on:{click:function(i){return e.downloadResults(t.row)}}},[i("i",{staticClass:"fas fa-download"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("downloadResults")&&e.hasResults(t.row),expression:"supports('downloadResults') && hasResults(p.row)"}],attrs:{title:"View results"},on:{click:function(i){return e.viewResults(t.row,!0)}}},[i("i",{staticClass:"fas fa-eye"})])]}}],null,!1,2155912949)},[i("template",{slot:"toolbar"},[i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("createJob"),expression:"supports('createJob')"}],attrs:{title:"Add new job"},on:{click:function(t){return e.createJobFromScript()}}},[i("i",{staticClass:"fas fa-plus"}),e._v(" Add")]),e.isListDataSupported?i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("listJobs"),expression:"supports('listJobs')"}],attrs:{title:"Refresh jobs"},on:{click:function(t){return e.updateData()}}},[i("i",{staticClass:"fas fa-sync-alt"})]):e._e()])],2):e._e()},U=[],H=i("e270");function q(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function z(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?q(i,!0).forEach(function(t){Object(s["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):q(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var W={name:"JobPanel",mixins:[V,o["a"]],data:function(){return{columns:{jobId:{name:"ID",primaryKey:!0,hide:!0},title:{name:"Title",computedValue:function(e,t){return!t&&e.jobId?"Job #"+e.jobId.toUpperCase().substr(-6):t},edit:this.updateTitle},status:{name:"Status",stylable:!0},submitted:{name:"Submitted",format:"DateTime"},updated:{name:"Last update",format:"DateTime"},actions:{name:"Actions",filterable:!1}},jobSubscriptions:[],watchers:[],jobUpdater:null,listFunc:"listJobs",createFunc:"createJob"}},computed:z({},l["a"].mapGetters("server",["supportsBilling","supportsBillingPlans"])),mounted:function(){this.jobUpdater=setInterval(this.executeWatchers,1e4)},beforeDestroy:function(){null!==this.jobUpdater&&clearInterval(this.jobUpdater)},methods:{listJobs:function(){return this.connection.listJobs()},updateData:function(){this.updateTable(this.$refs.table)},refreshJob:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object.assign({},e);e.describeJob().then(function(e){"function"===typeof i&&i(e,n),t.updateJobData(e)}).catch(function(e){return l["a"].exception(t,e,"Loading job failed")})},showInEditor:function(e){var t=this;this.refreshJob(e,function(e){t.emit("insertProcessGraph",e.processGraph)})},jobCreated:function(e){var t=this;if(this.$refs.table){this.$refs.table.addData(e);var i=[];this.supports("estimateJob")&&i.push({text:"Estimate",action:function(){return t.estimateJob(e)}}),this.supports("startJob")&&i.push({text:"Start processing",action:function(){return t.queueJob(e)}}),this.supports("deleteJob")&&i.push({text:"Delete",action:function(){return t.deleteJob(e)}}),l["a"].confirm(this,"Job created!",i)}},getTitleField:function(){return new H["a"]("title","Title",{type:"string"})},getDescriptionField:function(){return new H["a"]("description","Description",{type:"string",format:"commonmark"},"CommonMark (Markdown) is allowed.")},getBillingPlanField:function(){return new H["a"]("plan","Billing plan",{type:"string",format:"billing-plan"})},getBudgetField:function(){return new H["a"]("budget","Budget",{type:"number",format:"budget",default:null})},normalizeToDefaultData:function(e){return"undefined"===typeof e.title||"string"===typeof e.title&&0!==e.title.length||(e.title=null),"undefined"===typeof e.description||"string"===typeof e.description&&0!==e.description.length||(e.description=null),"undefined"===typeof e.plan||"string"===typeof e.plan&&0!==e.plan.length||(e.plan=null),"undefined"!==typeof e.budget&&("number"!==typeof e.budget||e.budget<0)&&(e.budget=null),e},createJob:function(e,t){var i=this;t=this.normalizeToDefaultData(t),this.connection.createJob(e,t.title,t.description,t.plan,t.budget).then(function(e){i.jobCreated(e)}).catch(function(e){l["a"].exception(i,e,"Sorry, could not create a batch job.")})},createJobFromScript:function(){var e=this;this.emit("getProcessGraph",function(t){var i=[e.getTitleField(),e.getDescriptionField(),e.supportsBillingPlans?e.getBillingPlanField():null,e.supportsBilling?e.getBudgetField():null];e.emit("showDataForm","Create new batch job",i,function(i){return e.createJob(t,i)})})},updateJobData:function(e){this.$refs.table.replaceData(e);var t=this.watchers.findIndex(function(t){return t.jobId==e.jobId});switch(e.status.toLowerCase()){case"running":case"queued":-1===t&&this.watchers.push(e);break;default:this.watchers.splice(t,1)}},deleteJob:function(e){var t=this;e.deleteJob().then(function(){t.$refs.table.removeData(e.jobId)}).catch(function(e){l["a"].exception(t,e,"Sorry, could not delete job.")})},executeWatchers:function(){var e=this;for(var t in this.watchers)this.refreshJob(this.watchers[t],function(t,i){if("finished"!==i.status&&"finished"===t.status){var n=[];e.supports("downloadResults")&&(n.push({text:"Download",action:function(){return e.downloadResults(t)}}),n.push({text:"View",action:function(){return e.viewResults(t)}})),l["a"].confirm(e,"Job has finished!",n)}else"error"!==i.status&&"error"===t.status&&l["a"].error(e,"Job has stopped due to an error or timeout.")})},showJobInfo:function(e){var t=this;this.refreshJob(e,function(e){t.emit("showJobInfo",e.getAll())})},estimateJob:function(e){var t=this;e.estimateJob().then(function(e){t.emit("showModal","Job Estimate",e)}).catch(function(e){return l["a"].exception(t,e,"Loading estimate failed")})},replaceProcessGraph:function(e){var t=this;this.emit("getProcessGraph",function(i){t.updateJob(e,{processGraph:i})})},editMetadata:function(e){var t=this;this.refreshJob(e,function(e){var i=[t.getTitleField().setValue(e.title),t.getDescriptionField().setValue(e.description),t.supportsBillingPlans?t.getBillingPlanField().setValue(e.plan):null,t.supportsBilling?t.getBudgetField().setValue(e.budget):null];t.emit("showDataForm","Edit batch job",i,function(i){return t.updateJob(e,i)})})},updateTitle:function(e,t){this.updateJob(e,{title:t})},updateJob:function(e,t){var i=this;t=this.normalizeToDefaultData(t),e.updateJob(t).then(function(e){l["a"].ok(i,"Job successfully updated."),i.updateJobData(e)}).catch(function(e){return l["a"].exception(i,e,"Updating job failed")})},queueJob:function(e){var t=this;e.startJob().then(function(e){l["a"].ok(t,"Job successfully queued."),t.updateJobData(e)}).catch(function(e){return l["a"].exception(t,e,"Queueing job failed")})},cancelJob:function(e){var t=this;e.stopJob().then(function(e){l["a"].ok(t,"Job successfully canceled."),t.updateJobData(e)}).catch(function(e){return l["a"].exception(t,e,"Canceling job failed")})},viewResults:function(e){var t=this;l["a"].info(this,"Data requested. Please wait..."),e.listResults().then(function(i){0!=i.links.length?t.emit("viewJobResults",i,e):l["a"].error(t,"No results available.")})},downloadResults:function(e){var t=this;e.listResults().then(function(e){if(Array.isArray(e.links)&&0!=e.links.length){var i=e.links.map(function(e){return e.href});t.emit("showListModal","Download results"+(e.title?" for: "+e.title:""),i,[{callback:function(e){return window.open(e,"_blank"),!1}}])}else l["a"].error(t,"No download available.")})},subscribeToJob:function(e){var t={job_id:e};this.connection.subscribe("openeo.jobs.debug",t,function(t,i){console.info("Debugging information for job "+e+": "+JSON.stringify(t))}),this.connection.subscribe("openeo.jobs.output",t,function(t,i){console.info("Output from job "+e+": "+JSON.stringify(t))}),this.connection.subscribe("openeo.jobs.status",t,function(t,i){console.info("Status information for job "+e+": "+JSON.stringify(t))}),this.jobSubscriptions.push(e)},unsubscribeFromJob:function(e){var t={job_id:e};this.connection.unsubscribe("openeo.jobs.debug",t),this.connection.unsubscribe("openeo.jobs.output",t),this.connection.unsubscribe("openeo.jobs.status",t),this.jobSubscriptions.splice(this.jobSubscriptions.indexOf(e),1)},hasResults:function(e){return"string"!==typeof e.status||"finished"==e.status.toLowerCase()},isJobInactive:function(e){return"string"!==typeof e.status||!this.isActiveStatusCode(e.status)},isJobActive:function(e){return"string"!==typeof e.status||this.isActiveStatusCode(e.status)},isActiveStatusCode:function(e){switch(e.toLowerCase()){case"running":case"queued":return!0;default:return!1}}}},K=W,Z=(i("0791"),Object(b["a"])(K,X,U,!1,null,null,null)),Q=Z.exports,ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DataTable",{ref:"table",attrs:{dataSource:e.listProcessGraphs,columns:e.columns,id:"ProcessGraphPanel"},scopedSlots:e._u([{key:"actions",fn:function(t){return[i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("describeProcessGraph"),expression:"supports('describeProcessGraph')"}],attrs:{title:"Details"},on:{click:function(i){return e.graphInfo(t.row)}}},[i("i",{staticClass:"fas fa-info"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("describeProcessGraph"),expression:"supports('describeProcessGraph')"}],attrs:{title:"Show in Editor"},on:{click:function(i){return e.showInEditor(t.row)}}},[i("i",{staticClass:"fas fa-code-branch"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("updateProcessGraph"),expression:"supports('updateProcessGraph')"}],attrs:{title:"Edit metadata"},on:{click:function(i){return e.editMetadata(t.row)}}},[i("i",{staticClass:"fas fa-edit"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("updateProcessGraph"),expression:"supports('updateProcessGraph')"}],attrs:{title:"Replace process graph"},on:{click:function(i){return e.replaceProcessGraph(t.row)}}},[i("i",{staticClass:"fas fa-retweet"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("deleteProcessGraph"),expression:"supports('deleteProcessGraph')"}],attrs:{title:"Delete"},on:{click:function(i){return e.deleteGraph(t.row)}}},[i("i",{staticClass:"fas fa-trash"})])]}}])},[i("template",{slot:"toolbar"},[i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("createProcessGraph"),expression:"supports('createProcessGraph')"}],attrs:{title:"Add new process graph"},on:{click:e.addGraphFromScript}},[i("i",{staticClass:"fas fa-plus"}),e._v(" Add")]),e.isListDataSupported?i("button",{attrs:{title:"Refresh process graphs"},on:{click:function(t){return e.updateData()}}},[i("i",{staticClass:"fas fa-sync-alt"})]):e._e()])],2)},te=[],ie={name:"ProcessGraphPanel",mixins:[V,o["a"]],data:function(){return{columns:{processGraphId:{name:"ID",primaryKey:!0,hide:!0},title:{name:"Title",edit:this.updateTitle},actions:{name:"Actions",filterable:!1}},listFunc:"listProcessGraphs",createFunc:"createProcessGraph"}},methods:{listProcessGraphs:function(){return this.connection.listProcessGraphs()},updateData:function(){this.updateTable(this.$refs.table)},refreshProcessGraph:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.describeProcessGraph().then(function(e){"function"===typeof i&&i(e),t.updateProcessGraphData(e)}).catch(function(e){return l["a"].exception(t,e,"Loading process graph failed")})},showInEditor:function(e){var t=this;this.refreshProcessGraph(e,function(e){t.emit("insertProcessGraph",e.processGraph)})},getTitleField:function(){return new H["a"]("title","Title",{type:"string"})},getDescriptionField:function(){return new H["a"]("description","Description",{type:"string",format:"commonmark"},"CommonMark (Markdown) is allowed.")},addGraphFromScript:function(){var e=this;this.emit("getProcessGraph",function(t){var i=[e.getTitleField(),e.getDescriptionField()];e.emit("showDataForm","Store a new process graph",i,function(i){return e.addGraph(t,i)})})},normalizeToDefaultData:function(e){return"undefined"===typeof e.title||"string"===typeof e.title&&0!==e.title.length||(e.title=null),"undefined"===typeof e.description||"string"===typeof e.description&&0!==e.description.length||(e.description=null),e},addGraph:function(e,t){var i=this;t=this.normalizeToDefaultData(t),this.connection.createProcessGraph(e,t.title,t.description).then(function(e){i.$refs.table.addData(e),l["a"].ok(i,"Process graph successfully stored!")}).catch(function(e){return l["a"].exception(i,e,"Storing process graph failed.")})},graphInfo:function(e){var t=this;this.refreshProcessGraph(e,function(e){t.emit("showProcessGraphInfo",e.getAll())})},editMetadata:function(e){var t=this;this.refreshProcessGraph(e,function(e){var i=[t.getTitleField().setValue(e.title),t.getDescriptionField().setValue(e.description)];t.emit("showDataForm","Edit metadata for a process graph",i,function(i){return t.updateMetadata(e,i)})})},replaceProcessGraph:function(e){var t=this;this.emit("getProcessGraph",function(i){return t.updateMetadata(e,{processGraph:i})})},updateTitle:function(e,t){this.updateMetadata(e,{title:t})},updateMetadata:function(e,t){var i=this;t=this.normalizeToDefaultData(t),e.updateProcessGraph(t).then(function(e){l["a"].ok(i,"Process graph successfully updated."),i.updateProcessGraphData(e)}).catch(function(e){return l["a"].exception(i,e,"Updating process graph failed")})},deleteGraph:function(e){var t=this;e.deleteProcessGraph().then(function(){t.$refs.table.removeData(e.processGraphId)}).catch(function(e){return l["a"].exception(t,e,"Deleting process graph failed")})},updateProcessGraphData:function(e){this.$refs.table.replaceData(e)}}},ne=ie,re=Object(b["a"])(ne,ee,te,!1,null,null,null),se=re.exports,ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DataTable",{ref:"table",attrs:{dataSource:e.listServices,columns:e.columns,id:"ServicePanel"},scopedSlots:e._u([{key:"enabled",fn:function(e){return[i("span",{staticClass:"boolean"},[i("span",{directives:[{name:"show",rawName:"v-show",value:!0===e.row.enabled,expression:"p.row.enabled === true"}]},[i("i",{staticClass:"fas fa-check-circle"})]),i("span",{directives:[{name:"show",rawName:"v-show",value:!1===e.row.enabled,expression:"p.row.enabled === false"}]},[i("i",{staticClass:"fas fa-times-circle"})]),i("span",{directives:[{name:"show",rawName:"v-show",value:"boolean"!==typeof e.row.enabled,expression:"typeof p.row.enabled !== 'boolean'"}]},[i("i",{staticClass:"fas fa-question-circle"})])])]}},{key:"actions",fn:function(t){return[i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("describeService"),expression:"supports('describeService')"}],attrs:{title:"Details"},on:{click:function(i){return e.serviceInfo(t.row)}}},[i("i",{staticClass:"fas fa-info"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("describeService"),expression:"supports('describeService')"}],attrs:{title:"Show in Editor"},on:{click:function(i){return e.showInEditor(t.row)}}},[i("i",{staticClass:"fas fa-code-branch"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("updateService"),expression:"supports('updateService')"}],attrs:{title:"Edit metadata"},on:{click:function(i){return e.editMetadata(t.row)}}},[i("i",{staticClass:"fas fa-edit"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("updateService"),expression:"supports('updateService')"}],attrs:{title:"Replace process graph"},on:{click:function(i){return e.replaceProcessGraph(t.row)}}},[i("i",{staticClass:"fas fa-retweet"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("deleteService"),expression:"supports('deleteService')"}],attrs:{title:"Delete"},on:{click:function(i){return e.deleteService(t.row)}}},[i("i",{staticClass:"fas fa-trash"})]),i("button",{directives:[{name:"show",rawName:"v-show",value:t.row.enabled&&e.isMapServiceSupported(t.row.type),expression:"p.row.enabled && isMapServiceSupported(p.row.type)"}],attrs:{title:"View on map"},on:{click:function(i){return e.viewService(t.row)}}},[i("i",{staticClass:"fas fa-map"})])]}}])},[i("template",{slot:"toolbar"},[i("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("createService"),expression:"supports('createService')"}],attrs:{title:"Add new service"},on:{click:function(t){return e.createServiceFromScript()}}},[i("i",{staticClass:"fas fa-plus"}),e._v(" Add")]),e.isListDataSupported?i("button",{attrs:{title:"Refresh services"},on:{click:function(t){return e.updateData()}}},[i("i",{staticClass:"fas fa-sync-alt"})]):e._e()])],2)},oe=[],le=(i("6762"),i("2fdb"),i("a1bc"));function ce(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function ue(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ce(i,!0).forEach(function(t){Object(s["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ce(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var he={name:"ServicePanel",mixins:[V,o["a"]],computed:ue({},l["a"].mapState("server",["serviceTypes"]),{},l["a"].mapGetters("server",["supportsBilling","supportsBillingPlans"])),data:function(){return{columns:{serviceId:{name:"ID",primaryKey:!0,hide:!0},title:{name:"Title",computedValue:function(e,t){return!t&&e.serviceId?"Service #"+e.serviceId.toUpperCase().substr(0,6):t},edit:this.updateTitle},type:{name:"Type",format:"UpperCase"},enabled:{name:"Enabled",edit:this.toggleEnabled},submitted:{name:"Submitted",format:"DateTime"},actions:{name:"Actions",filterable:!1}},listFunc:"listServices",createFunc:"createService"}},methods:{isMapServiceSupported:function(e){return"string"===typeof e&&le["a"].supportedMapServices.includes(e.toLowerCase())},listServices:function(){return this.connection.listServices()},updateData:function(){this.updateTable(this.$refs.table)},refreshService:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.describeService().then(function(e){"function"===typeof i&&i(e),t.updateServiceData(e)}).catch(function(e){return l["a"].exception(t,e,"Loading service failed")})},showInEditor:function(e){var t=this;this.refreshService(e,function(e){t.emit("insertProcessGraph",e.processGraph)})},serviceCreated:function(e){var t=this;if(this.$refs.table){this.$refs.table.addData(e);var i=[];this.isMapServiceSupported(e.type)&&i.push({text:"View on map",action:function(){return t.viewService(e)}}),this.supports("describeService")&&i.push({text:"Details",action:function(){return t.serviceInfo(e)}}),this.supports("deleteService")&&i.push({text:"Delete",action:function(){return t.deleteService(e)}}),l["a"].confirm(this,"Web Service created!",i)}},getTitleField:function(){return new H["a"]("title","Title",{type:"string"})},getDescriptionField:function(){return new H["a"]("description","Description",{type:"string",format:"commonmark"},"CommonMark (Markdown) is allowed.")},getServiceTypeField:function(){return new H["a"]("type","Type",{type:"string",format:"service-type"},"",!0)},getBillingPlanField:function(){return new H["a"]("plan","Billing plan",{type:"string",format:"billing-plan"})},getBudgetField:function(){return new H["a"]("budget","Budget",{type:"number",format:"budget",default:null})},getEnabledField:function(){return new H["a"]("enabled","Enabled",{type:"boolean",default:!0})},getParametersField:function(){return new H["a"]("parameters","Parameters",{type:"object",format:"service-type-parameters"})},normalizeToDefaultData:function(e){return"undefined"===typeof e.title||"string"===typeof e.title&&0!==e.title.length||(e.title=null),"undefined"===typeof e.description||"string"===typeof e.description&&0!==e.description.length||(e.description=null),"undefined"!==typeof e.enabled&&"boolean"!==typeof e.enabled&&(e.enabled=!0),"undefined"===typeof e.parameters||l["a"].isObject(e.parameters)||(e.parameters={}),"undefined"===typeof e.plan||"string"===typeof e.plan&&0!==e.plan.length||(e.plan=null),"undefined"!==typeof e.budget&&("number"!==typeof e.budget||e.budget<0)&&(e.budget=null),e},createService:function(e,t){var i=this;t=this.normalizeToDefaultData(t),this.connection.createService(e,t.type,t.title,t.description,t.enabled,t.parameters,t.plan,t.budget).then(function(e){i.serviceCreated(e)}).catch(function(e){l["a"].exception(i,e,"Creating service failed")})},createServiceFromScript:function(){var e=this;this.emit("getProcessGraph",function(t){var i=[e.getServiceTypeField(),e.getTitleField(),e.getDescriptionField(),e.getEnabledField(),e.supportsBillingPlans?e.getBillingPlanField():null,e.supportsBilling?e.getBudgetField():null,e.getParametersField()];e.emit("showDataForm","Create new web service",i,function(i){return e.createService(t,i)})})},editMetadata:function(e){var t=this;this.refreshService(e,function(e){var i=[t.getTitleField().setValue(e.title),t.getDescriptionField().setValue(e.description),t.getEnabledField().setValue(e.enabled),t.supportsBillingPlans?t.getBillingPlanField().setValue(e.plan):null,t.supportsBilling?t.getBudgetField().setValue(e.budget):null,t.getParametersField().setValue(e.parameters)];t.emit("showDataForm","Edit web service",i,function(i){return t.updateService(e,i)})})},serviceInfo:function(e){var t=this;this.refreshService(e,function(e){t.emit("showServiceInfo",e.getAll())})},replaceProcessGraph:function(e){var t=this;this.emit("getProcessGraph",function(i){e.updateService({processGraph:i}).then(function(e){l["a"].ok(t,"Service process graph successfully updated."),t.updateServiceData(e)}).catch(function(e){return l["a"].exception(t,e,"Replacing process graph failed")})})},updateTitle:function(e,t){this.updateService(e,{title:t})},toggleEnabled:function(e){this.updateService(e,{enabled:!e.enabled})},updateService:function(e,t){var i=this;t=this.normalizeToDefaultData(t),e.updateService(t).then(function(e){l["a"].ok(i,"Service successfully updated web service."),i.updateServiceData(e)}).catch(function(e){return l["a"].exception(i,e,"Updating service failed")})},deleteService:function(e){var t=this;e.deleteService().then(function(){t.$refs.table.removeData(e.serviceId),t.emit("removeWebService",e.serviceId)}).catch(function(e){l["a"].exception(t,e,"Deleting service failed")})},viewService:function(e){l["a"].info(this,"Requesting tiles from server. Please wait..."),this.emit("viewWebService",e)},updateServiceData:function(e){this.$refs.table.replaceData(e)}}},de=he,pe=(i("916f"),Object(b["a"])(de,ae,oe,!1,null,null,null)),fe=pe.exports,ve={name:"UserWorkspace",mixins:[c["a"]],components:{FilePanel:Y,JobPanel:Q,ProcessGraphPanel:se,ServicePanel:fe,Tabs:x["a"],Tab:S["a"]},computed:{supportsJobs:function(){return this.supports("listJobs")||this.supports("createJob")},supportsServices:function(){return this.supports("listServices")||this.supports("createService")},supportsProcessGraphs:function(){return this.supports("listProcessGraphs")||this.supports("createProcessGraph")},supportsFiles:function(){return this.supports("listFiles")||this.supports("uploadFile")}}},me=ve,be=(i("b5d7"),Object(b["a"])(me,w,k,!1,null,null,null)),ge=be.exports,ye=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Tabs",{ref:"tabs",attrs:{id:"viewerContent"},scopedSlots:e._u([{key:"default",fn:function(t){t.tabs;return[i("Tab",{attrs:{id:"mapView",name:"Map",icon:"fa-map",selected:!0},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.tab;return[i("MapViewer",{ref:"mapViewer",attrs:{id:"mapCanvas",show:t.active}})]}}],null,!0)})]}},{key:"dynamic",fn:function(e){var t=e.tab;return["fa-image"===t.icon?i("ImageViewer",{attrs:{data:t.data}}):i("DataViewer",{attrs:{data:t.data}})]}}])})},we=[],ke=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dataViewer"},[e.isError?i("div",{staticClass:"noDataMessage"},[e._v(e._s(e.content.message))]):"string"===typeof e.content?i("div",{staticClass:"text"},[e._v(e._s(e.content))]):null!==e.content?i("ObjectTree",{staticClass:"tree",attrs:{data:e.content}}):i("div",{staticClass:"noDataMessage"},[i("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" Loading data...")])],1)},xe=[],Se=i("0a37");function Ce(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function _e(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ce(i,!0).forEach(function(t){Object(s["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ce(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var Pe={name:"DataViewer",mixins:[o["a"]],props:{data:{type:Object,required:!0}},components:{ObjectTree:Se["a"]},computed:_e({},l["a"].mapState("server",["connection"]),{isError:function(){return this.content instanceof Error}}),data:function(){return{content:null}},watch:{data:function(){this.processData(this.data)}},created:function(){this.processData(this.data)},methods:{processData:function(e){var t=this;if(e instanceof Blob)switch(e.type){case"application/json":l["a"].blobToText(e,function(e){var i=JSON.parse(e.target.result);t.content=i});break;case"text/plain":l["a"].blobToText(e,function(e){t.content=nl2br(e.target.result)});break;case"text/html":l["a"].blobToText(e,function(e){t.content=e.target.result});break;default:this.error("Sorry, content type not supported.")}else e.url?this.connection.download(e.url,!1).then(function(e){return t.processData(e.data)}).catch(function(e){return l["a"].exception(t,e,"Sorry, can't download file.")}):this.error("Sorry, internal data format not supported.")},nl2br:function(e){return"undefined"===typeof e||null===e?"":(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")},error:function(e){this.content=new Error(e)}}},Oe=Pe,je=(i("b23d"),Object(b["a"])(Oe,ke,xe,!1,null,"bdd92a70",null)),De=je.exports,Ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"imageContainer",staticClass:"imageViewer"},[i("div",{ref:"loading",staticClass:"noDataMessage"},[i("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" Loading image...")]),i("img",{ref:"image",attrs:{alt:""},on:{click:e.resize}})])},Te=[],Me={name:"ImageViewer",props:{data:{type:Object,required:!0}},mounted:function(){this.data.blob?this.showImageBlob(this.data.blob):this.data.url&&this.showImage(this.data.url),this.resize()},methods:{showImage:function(e){var t=this;this.$refs.image.src=e,this.$refs.image.onload=function(){t.$refs.loading.style.display="none"}},showImageBlob:function(e){this.showImage(URL.createObjectURL(e))},resize:function(){this.$refs.image&&(this.$refs.image.style.maxWidth?(this.$refs.image.style.maxWidth=null,this.$refs.image.style.cursor="zoom-out",this.$refs.image.title="Click to shrink (fit to screen)"):(this.$refs.image.style.maxWidth="100%",this.$refs.image.style.cursor="zoom-in",this.$refs.image.title="Click to enlarge"))}}},Fe=Me,Ie=(i("aab4"),Object(b["a"])(Fe,Ee,Te,!1,null,"8fe7759e",null)),Ae=Ie.exports,Be=i("a5c1"),Ne=i("b40f"),Le=i.n(Ne);function Ge(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function Ve(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ge(i,!0).forEach(function(t){Object(s["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ge(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var $e={name:"Viewer",mixins:[o["a"]],components:{Tab:S["a"],Tabs:x["a"],DataViewer:De,ImageViewer:Ae,MapViewer:Be["a"]},mounted:function(){this.listen("viewBlob",this.showViewer),this.listen("viewLink",this.showViewer),this.listen("viewSyncResult",this.showSyncResults),this.listen("viewJobResults",this.showJobResults),this.listen("viewWebService",this.showWebService),this.listen("removeWebService",this.removeWebService)},data:function(){return{tabCounter:{}}},computed:Ve({},l["a"].mapState("server",["connection"])),methods:{showWebService:function(e){this.showMapViewer(),this.$refs.mapViewer.showWebService(e)},removeWebService:function(e){this.$refs.mapViewer.removeLayerFromMap(e)},showMapViewer:function(){this.$refs.tabs.selectTab("mapView")},showSyncResults:function(e){var t=this;this.connection.computeResult(e).then(function(e){return t.showViewer(e)}).catch(function(e){return l["a"].exception(t,e,"Computation failed")})},showJobResults:function(e,t){for(var i in e.links){var n=e.id||t.id;this.showViewer(e.links[i],this.makeTitle(e.title||t.title,"Job "+n.substr(0,6)+"...",!0))}},uniqueTitle:function(e){return this.tabCounter[e]?this.tabCounter[e]++:this.tabCounter[e]=1,e+" ("+this.tabCounter[e]+")"},makeTitle:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return null===e?this.uniqueTitle(t):i?this.uniqueTitle(e):e},showViewer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i={};switch(l["a"].isObject(e)&&"string"===typeof e.href&&"string"===typeof e.type?(i.type=e.type,i.url=e.href):e instanceof Blob?(i.type=e.type,i.blob=e):l["a"].error(this,"Sorry, invalid data received."),"string"===typeof i.type&&-1!==i.type.indexOf("/")&&-1===i.type.indexOf("*")||l["a"].error(this,"Sorry, can't detect content type."),Object.assign(i,Le.a.parse(i.type)),i.type){case"image/png":case"image/jpg":case"image/jpeg":case"image/gif":this.$refs.tabs.addTab(this.makeTitle(t,"Image"),"fa-image",i,null,!0,!0);break;case"image/tiff":i.url&&"geotiff"===i.parameters.application?(this.showMapViewer(),this.$refs.mapViewer.updateGeoTiffLayer(i.url,this.makeTitle(t,"GeoTiff"))):l["a"].error(this,"Sorry, TIFF as blob not supported by the viewer.");break;case"application/json":case"text/plain":case"text/html":this.$refs.tabs.addTab(this.makeTitle(t,"Data"),"fa-database",i,null,!0,!0);break;default:l["a"].error(this,"Sorry, content type not supported by the viewer.")}}}},Je=$e,Re=(i("15dd"),Object(b["a"])(Je,ye,we,!1,null,null,null)),Ye=Re.exports,Xe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Tabs",{ref:"tabs",staticClass:"editor",attrs:{id:"processGraphContent"}},[i("Tab",{attrs:{id:"visual",name:"Visual Model",icon:"fa-code-branch",selected:!0,allowShow:e.prepareProcessGraph},on:{show:e.transferProcessGraph},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.tab;return[i("VisualEditor",{ref:"graphBuilder",attrs:{active:n.active,editable:e.editable,value:e.processGraph,id:e.id+"_visual",enableClear:e.enableClear,enableExecute:e.enableExecute,enableLocalStorage:e.enableLocalStorage,showDiscoveryToolbar:e.showDiscoveryToolbar}})]}}])}),i("Tab",{attrs:{id:"source",name:"Process Graph",icon:"fa-code",allowShow:e.prepareProcessGraph},on:{show:e.transferProcessGraph},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.tab;return[i("TextEditor",{ref:"sourceEditor",attrs:{active:n.active,editable:e.editable,value:e.processGraph,id:e.id+"_text",enableClear:e.enableClear,enableExecute:e.enableExecute,enableLocalStorage:e.enableLocalStorage}})]}}])})],1)},Ue=[],He=i("8c66"),qe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"textEditor"},[i("EditorToolbar",{attrs:{editable:e.editable,onStore:e.getProcessGraph,onInsert:e.insertProcessGraph,onClear:e.clearProcessGraph,enableClear:e.enableClear,enableExecute:e.enableExecute,enableLocalStorage:e.enableLocalStorage}}),i("div",{staticClass:"sourceCodeEditor",attrs:{id:e.id}})],1)},ze=[],We=i("1190"),Ke=i("fbdae"),Ze=(i("a7be"),i("f9d4"),i("56b3")),Qe=i.n(Ze);function et(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function tt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?et(i,!0).forEach(function(t){Object(s["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):et(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var it={name:"TextEditor",components:{EditorToolbar:We["a"]},props:{id:String,editable:{type:Boolean,default:!0},active:{type:Boolean,default:!1},value:{type:Object,default:null},enableClear:{type:Boolean,default:!0},enableLocalStorage:{type:Boolean,default:!0},enableExecute:{type:Boolean,default:!0}},computed:tt({},l["a"].mapGetters("server",["processRegistry"])),data:function(){return{editorOptions:{mode:"javascript",indentUnit:2,lineNumbers:!0,readOnly:!this.$props.editable},editor:null}},mounted:function(){this.active&&this.onShow()},watch:{active:function(e){e&&this.onShow()}},methods:{onShow:function(){null===this.editor?(this.editor=Qe()(document.getElementById(this.id),this.editorOptions),this.editor.setSize(null,"100%"),this.insertProcessGraph(this.value)):this.editor.refresh()},clearProcessGraph:function(){this.insertToEditor("",!0)},getProcessGraph:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.editor.getValue(),r=null;if(n)try{r=JSON.parse(n)}catch(a){return void t("Process graph is invalid JSON",a)}if(null!==r)try{var s=new Ke["ProcessGraph"](r,this.processRegistry);s.parse()}catch(a){return void t("Process graph invalid",a)}null!==r||i?e(r):t("No process graph specified.")},insertToEditor:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?this.editor.setValue(e):this.editor.replaceSelection(e)},insertProcessGraph:function(e){e?this.insertToEditor(JSON.stringify(e,null,2),!0):this.clearProcessGraph()}}},nt=it,rt=(i("aa61"),Object(b["a"])(nt,qe,ze,!1,null,"b9905146",null)),st=rt.exports,at=i("d24e"),ot=i.n(at),lt={name:"Editor",components:{VisualEditor:He["default"],TextEditor:st,Tabs:x["a"],Tab:S["a"]},props:{id:String,editable:{type:Boolean,default:!0},processGraph:{type:Object,default:null},enableClear:{type:Boolean,default:!0},enableLocalStorage:{type:Boolean,default:!0},enableExecute:{type:Boolean,default:!0},showDiscoveryToolbar:{type:Boolean,default:!0}},data:function(){return{lastPgToInsert:null,pgToInsert:this.processGraph}},methods:{activeEditor:function(){return"source"===this.$refs.tabs.getActiveTabId()?this.$refs.sourceEditor:this.$refs.graphBuilder},inactiveEditor:function(){return"source"!==this.$refs.tabs.getActiveTabId()?this.$refs.sourceEditor:this.$refs.graphBuilder},getProcessGraph:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];null===i&&(i=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null!==i?l["a"].exception(t,i,e):l["a"].error(t,e)}),this.activeEditor().getProcessGraph(e,i,n)},insertProcess:function(e){this.activeEditor().insertProcess(e)},insertCollection:function(e){this.activeEditor().insertCollection(e)},insertProcessGraph:function(e){this.activeEditor().insertProcessGraph(e)},prepareProcessGraph:function(){var e=this;return this.editable?new Promise(function(t,i){e.getProcessGraph(function(i){e.pgToInsert=i,t(!0)},function(i,n){n&&l["a"].exception(e,n,i),t(!1)},!0)}):(this.pgToInsert=this.processGraph,!0)},transferProcessGraph:function(e){this.activeEditor().onShow(),this.editable&&this.lastPgToInsert&&ot()(this.pgToInsert)===this.lastPgToInsert||(this.insertProcessGraph(this.pgToInsert),this.lastPgToInsert=ot()(this.pgToInsert)),this.pgToInsert=null}}},ct=lt,ut=Object(b["a"])(ct,Xe,Ue,!1,null,null,null),ht=ut.exports,dt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{ref:"modal",scopedSlots:e._u([{key:"main",fn:function(){return[i("div",{staticClass:"docgen"},[i("Collection",{attrs:{collectionData:e.collection,version:e.version}},[i("template",{slot:"collection-spatial-extent"},[i("MapViewer",{attrs:{id:"collectionMap",show:e.showMap,showExtent:e.collection.extent.spatial}})],1)],2)],1)]},proxy:!0}])})},pt=[],ft=i("714b"),vt=i("47ed"),mt={name:"CollectionModal",components:{MapViewer:Be["a"],Modal:ft["a"],Collection:vt["a"]},data:function(){return{version:null,collection:null,showMap:!1}},methods:{show:function(e,t){var i=this;this.version=t,this.collection=e,this.$refs.modal.show(e.id),this.$nextTick(function(){i.showMap=!0})}}},bt=mt,gt=(i("2bd0"),Object(b["a"])(bt,dt,pt,!1,null,null,null)),yt=gt.exports,wt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{ref:"modal",scopedSlots:e._u([{key:"main",fn:function(){return[i("div",{staticClass:"docgen"},[i("Process",{attrs:{processData:e.process,version:e.version,provideDownload:!1}})],1)]},proxy:!0}])})},kt=[],xt=i("2b37"),St={name:"ProcessModal",components:{Modal:ft["a"],Process:xt["a"]},data:function(){return{version:null,process:null}},methods:{show:function(e,t){this.version=t,this.process=e,this.$refs.modal.show(e.id)}}},Ct=St,_t=(i("9b84"),Object(b["a"])(Ct,wt,kt,!1,null,null,null)),Pt=_t.exports,Ot=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{ref:"modal",scopedSlots:e._u([{key:"main",fn:function(){return[i("div",{staticClass:"vue-component server-info"},[i("Capabilities",{attrs:{capabilities:e.capabilities,url:e.url}}),e.services?[i("h3",[e._v("Supported secondary web service types")]),i("SupportedServiceTypes",{attrs:{version:e.capabilities.version,services:e.services}})]:e._e(),e.formats?[i("h3",[e._v("Supported output file formats")]),i("SupportedFileFormats",{attrs:{version:e.capabilities.version,formats:e.formats}})]:e._e()],2)]},proxy:!0}])})},jt=[],Dt=i("f0df"),Et=i("ca30"),Tt=i("48d5"),Mt={name:"ServerInfoModal",components:{Modal:ft["a"],Capabilities:Dt["a"],SupportedFileFormats:Et["a"],SupportedServiceTypes:Tt["a"]},data:function(){return{url:null,capabilities:null,formats:null,services:null}},methods:{show:function(e,t,i){this.url=e.getBaseUrl(),this.capabilities=e.capabilities().toPlainObject(),this.formats=t,this.services=i,this.$refs.modal.show(e.capabilities().title()||"Server information")}}},Ft=Mt,It=(i("7bde"),Object(b["a"])(Ft,Ot,jt,!1,null,null,null)),At=It.exports,Bt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{ref:"modal",attrs:{minWidth:"80%"},scopedSlots:e._u([{key:"main",fn:function(){return[i("section",{staticClass:"vue-component basedata"},[i("div",{staticClass:"tabular"},[i("label",[e._v("ID:")]),i("code",{staticClass:"value"},[e._v(e._s(e.job.id))])])]),i("section",{staticClass:"vue-component progress"},[i("h3",[e._v("Progress")]),i("div",{staticClass:"tabular"},[i("label",[e._v("Submitted:")]),i("span",{staticClass:"value"},[e._v(e._s(e.submitted))])]),i("div",{staticClass:"tabular"},[i("label",[e._v("Updated:")]),i("span",{staticClass:"value"},[e._v(e._s(e.updated))])]),i("div",{staticClass:"tabular"},[i("label",[e._v("Status:")]),i("span",{staticClass:"value status",attrs:{"data-value":e.job.status}},[e._v(e._s(e.job.status))])]),"number"===typeof e.job.progress?i("div",{staticClass:"tabular"},[i("label",[e._v("Progress:")]),i("div",{staticClass:"value"},[i("div",{staticClass:"progressBar",class:{error:!!e.job.error}},[i("div",{staticClass:"completed",style:"width: "+e.progress},[e.job.progress>50?i("span",{staticClass:"number"},[e._v(e._s(e.progress))]):e._e(),e._v(" \n\t\t\t\t\t")]),e.job.progress<=50?i("span",{staticClass:"number"},[e._v(e._s(e.progress))]):e._e()])])]):e._e(),e.job.error?i("div",{staticClass:"tabular"},[i("label",[e._v("Error(s):")]),i("div",{staticClass:"value"},[i("div",{staticClass:"errorMessage"},[e._v(e._s(e.job.error.message))]),Array.isArray(e.job.error.links)&&e.job.error.links.length>0?i("div",{staticClass:"errorLinks"},[i("strong",[e._v("Further information:")]),i("br"),i("LinkList",{attrs:{links:e.job.error.links}})],1):e._e(),i("div",{staticClass:"errorInternals"},[e._v("\n\t\t\t\t\tCode: "),i("code",[e._v(e._s(e.job.error.code))]),e.job.error.id?i("span",{staticClass:"sepl"},[e._v("ID: "),i("code",[e._v(e._s(e.job.error.id))])]):e._e()])])]):e._e()]),e.job.plan||e.job.costs||e.job.budget?i("section",{staticClass:"vue-component billing"},[i("h3",[e._v("Billing")]),e.job.plan?i("div",{staticClass:"tabular"},[i("label",[e._v("Billing plan:")]),i("span",{staticClass:"value"},[e._v(e._s(e.job.plan))])]):e._e(),e.job.costs?i("div",{staticClass:"tabular"},[i("label",[e._v("Costs:")]),i("span",{staticClass:"value"},[e._v(e._s(e.formatCurrency(e.job.costs)))])]):e._e(),e.job.budget?i("div",{staticClass:"tabular"},[i("label",[e._v("Budget:")]),i("span",{staticClass:"value"},[e._v(e._s(e.formatCurrency(e.job.budget)))])]):e._e()]):e._e(),e.job.description?i("section",{staticClass:"vue-component description"},[i("h3",[e._v("Description")]),i("Description",{attrs:{description:e.job.description}})],1):e._e(),i("section",{staticClass:"process-graph"},[i("div",{staticClass:"vue-component"},[i("h3",[e._v("Process Graph")])]),i("Editor",{staticClass:"infoViewer",attrs:{processGraph:e.job.processGraph,editable:!1,enableExecute:!1,id:"jobPgViewer"}})],1)]},proxy:!0}])})},Nt=[],Lt=i("8088"),Gt=i("4845");function Vt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function $t(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Vt(i,!0).forEach(function(t){Object(s["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Vt(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var Jt={name:"JobInfoModal",components:{Description:Lt["a"],Editor:ht,LinkList:Gt["a"],Modal:ft["a"]},computed:$t({},l["a"].mapGetters("server",["formatCurrency"]),{submitted:function(){return l["a"].formatDateTime(this.job.submitted)},updated:function(){return this.job.updated?l["a"].formatDateTime(this.job.updated):"N/A"},displayTitle:function(){return"Batch Job: "+(this.job.title||"#"+this.job.id)},progress:function(){return"number"===typeof this.job.progress?Math.round(10*this.job.progress)/10+"%":"0%"}}),data:function(){return{job:{}}},methods:{show:function(e){this.job=e,this.$refs.modal.show(this.displayTitle)}}},Rt=Jt,Yt=(i("00b8"),Object(b["a"])(Rt,Bt,Nt,!1,null,"2fca3d65",null)),Xt=Yt.exports,Ut=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{ref:"modal",attrs:{minWidth:"80%"},scopedSlots:e._u([{key:"main",fn:function(){return[i("section",{staticClass:"vue-component basedata"},[i("div",{staticClass:"tabular"},[i("label",[e._v("ID:")]),i("code",{staticClass:"value"},[e._v(e._s(e.pg.id))])])]),e.pg.description?i("section",{staticClass:"vue-component description"},[i("h3",[e._v("Description")]),i("Description",{attrs:{description:e.pg.description}})],1):e._e(),i("section",{staticClass:"process-graph"},[i("div",{staticClass:"vue-component"},[i("h3",[e._v("Process Graph")])]),i("Editor",{staticClass:"infoViewer",attrs:{processGraph:e.pg.processGraph,editable:!1,enableExecute:!1,id:"pgInfoViewer"}})],1)]},proxy:!0}])})},Ht=[],qt=i("e97b"),zt={name:"ProcessGraphInfoModal",components:{Description:Lt["a"],Editor:ht,Modal:ft["a"]},computed:{displayTitle:function(){return"Process Graph: "+(this.pg.title||"#"+this.pg.id)}},data:function(){return{pg:{}}},methods:{show:function(e){e instanceof qt["ProcessGraph"]?this.pg=new qt["ProcessGraph"](e):this.pg=e,this.$refs.modal.show(this.displayTitle)}}},Wt=zt,Kt=Object(b["a"])(Wt,Ut,Ht,!1,null,null,null),Zt=Kt.exports,Qt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{ref:"modal",attrs:{minWidth:"80%"},scopedSlots:e._u([{key:"main",fn:function(){return[i("section",{staticClass:"vue-component basedata"},[i("div",{staticClass:"tabular"},[i("label",[e._v("ID:")]),i("code",{staticClass:"value"},[e._v(e._s(e.service.id))])]),i("div",{staticClass:"tabular"},[i("label",[e._v("Type:")]),i("span",{staticClass:"value"},[e._v(e._s(e.type))])]),i("div",{staticClass:"tabular"},[i("label",[e._v("URL:")]),i("code",{staticClass:"value"},[e._v(e._s(e.service.url))])]),i("div",{staticClass:"tabular"},[i("label",[e._v("Enabled:")]),i("span",{staticClass:"value boolean"},[!0===e.service.enabled?i("span",[i("i",{staticClass:"fas fa-check-circle"})]):!1===e.service.enabled?i("span",[i("i",{staticClass:"fas fa-times-circle"})]):i("span",[i("i",{staticClass:"fas fa-question-circle"})])])]),e.service.submitted?i("div",{staticClass:"tabular"},[i("label",[e._v("Submitted:")]),i("code",{staticClass:"value"},[e._v(e._s(e.submitted))])]):e._e()]),e.service.plan||e.service.costs||e.service.budget?i("section",{staticClass:"vue-component billing"},[i("h3",[e._v("Billing")]),e.service.plan?i("div",{staticClass:"tabular"},[i("label",[e._v("Billing plan:")]),i("span",{staticClass:"value"},[e._v(e._s(e.service.plan))])]):e._e(),e.service.costs?i("div",{staticClass:"tabular"},[i("label",[e._v("Costs:")]),i("span",{staticClass:"value"},[e._v(e._s(e.formatCurrency(e.service.costs)))])]):e._e(),e.service.budget?i("div",{staticClass:"tabular"},[i("label",[e._v("Budget:")]),i("span",{staticClass:"value"},[e._v(e._s(e.formatCurrency(e.service.budget)))])]):e._e()]):e._e(),e.service.description?i("section",{staticClass:"vue-component description"},[i("h3",[e._v("Description")]),i("Description",{attrs:{description:e.service.description}})],1):e._e(),i("section",{staticClass:"process-graph"},[i("div",{staticClass:"vue-component"},[i("h3",[e._v("Process Graph")])]),i("Editor",{staticClass:"infoViewer",attrs:{processGraph:e.service.processGraph,editable:!1,enableExecute:!1,id:"servicePgViewer"}})],1),e.hasParameters?i("section",{staticClass:"vue-component parameters"},[i("h3",[e._v("Parameters")]),e._l(e.service.parameters,function(t,n){return i("div",{key:n,staticClass:"tabular"},[i("label",[e._v(e._s(n)+":")]),i("div",{staticClass:"value"},["object"===typeof e.formattedValue?i("ObjectTree",{attrs:{data:t}}):[e._v(e._s(e.formattedValue))]],2)])})],2):e._e(),e.hasAttributes?i("section",{staticClass:"vue-component attributes"},[i("h3",[e._v("Attributes")]),e._l(e.service.attributes,function(t,n){return i("div",{key:n,staticClass:"tabular"},[i("label",[e._v(e._s(n)+":")]),i("div",{staticClass:"value"},["object"===typeof e.formattedValue?i("ObjectTree",{attrs:{data:t}}):[e._v(e._s(e.formattedValue))]],2)])})],2):e._e()]},proxy:!0}])})},ei=[];function ti(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function ii(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ti(i,!0).forEach(function(t){Object(s["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ti(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var ni={name:"ServiceInfoModal",components:{Description:Lt["a"],Editor:ht,Modal:ft["a"],ObjectTree:Se["a"]},computed:ii({},l["a"].mapGetters("server",["formatCurrency"]),{hasAttributes:function(){return l["a"].size(this.service.attributes)>0},hasParameters:function(){return l["a"].size(this.service.parameters)>0},submitted:function(){return l["a"].formatDateTime(this.service.submitted)},type:function(){return"string"===typeof this.service.type?this.service.type.toUpperCase():""},displayTitle:function(){return"Web Service: "+(this.service.title||this.type+" #"+this.service.id)}}),data:function(){return{service:{}}},methods:{show:function(e){this.service=e,this.$refs.modal.show(this.displayTitle)}}},ri=ni,si=Object(b["a"])(ri,Qt,ei,!1,null,null,null),ai=si.exports,oi=i("14c0"),li=i("cbd9");function ci(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function ui(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ci(i,!0).forEach(function(t){Object(s["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ci(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var hi={name:"IDE",mixins:[c["a"],o["a"]],components:{DiscoveryToolbar:li["a"],Editor:ht,Viewer:Ye,UserMenu:y,UserWorkspace:ge,CollectionModal:yt,ProcessModal:Pt,ServerInfoModal:At,JobInfoModal:Xt,ProcessGraphInfoModal:Zt,ServiceInfoModal:ai,ParameterModal:oi["a"]},data:function(){return{moving:!1,movingOffset:0,separators:[{left:"discovery",right:"workspace",anchor:"left",width:"20%"},{left:"workspace",right:"viewer",anchor:"right",width:"30%"}],version:a.version,resizeListener:null,userInfoUpdater:null}},computed:ui({},l["a"].mapState("server",["collections","processes","outputFormats","serviceTypes"])),mounted:function(){var e=this;this.listen("showCollectionInfo",this.showCollectionInfo),this.listen("showProcessInfo",this.showProcessInfo),this.listen("showJobInfo",this.showJobInfo),this.listen("showProcessGraphInfo",this.showProcessGraphInfo),this.listen("showServiceInfo",this.showServiceInfo),this.listen("showDataForm",this.showDataForm),this.listen("getProcessGraph",this.getProcessGraph),this.listen("insertProcessGraph",this.insertProcessGraph),this.resizeListener=function(t){return e.emit("windowResized",t)},window.addEventListener("resize",this.resizeListener),this.userInfoUpdater=setInterval(this.describeAccount,12e4)},beforeDestroy:function(){null!==this.resizeListener&&window.removeEventListener("resize",this.resizeListener),null!==this.userInfoUpdater&&clearInterval(this.userInfoUpdater)},methods:ui({},l["a"].mapActions("server",["describeAccount"]),{getProcessGraph:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.$refs.editor.getProcessGraph(e,t,i)},insertProcessGraph:function(e){this.$refs.editor.insertProcessGraph(e)},insertCollection:function(e){this.$refs.editor.insertCollection(e)},insertProcess:function(e){this.$refs.editor.insertProcess(e)},startMovingSeparator:function(e,t){this.moving=!1,1===e.which&&(this.moving=t)},stopMovingSeparator:function(e){this.moving=!1},moveSeparator:function(e){if(!1!==this.moving&&this.separators[this.moving]&&0!==e.movementX){var t,i=this.separators[this.moving],n=this.$refs[i[i.anchor]];t="right"===i.anchor?Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)-e.x:e.x,n.style.width=t+"px",this.emit("windowResized",e),e.preventDefault(),e.stopPropagation()}},centerSeparator:function(e,t){this.moving=!1;var i=this.separators[t];if(i){var n=this.$refs[i[i.anchor]];n.getBoundingClientRect().width<220?n.style.width=i.width:n.style.width=0,this.emit("windowResized",e)}},showCollectionInfo:function(e){var t=this;this.connection.describeCollection(e).then(function(e){t.$refs.collectionModal.show(e,t.apiVersion)}).catch(function(e){return l["a"].error(t,"Sorry, can't load collection details.")})},showProcessInfo:function(e){var t=this.processes.find(function(t){return t.id==e});this.$refs.processModal.show(t,this.apiVersion)},showServiceInfo:function(e){this.$refs.serviceModal.show(e)},showJobInfo:function(e){this.$refs.jobModal.show(e)},showProcessGraphInfo:function(e){this.$refs.pgModal.show(e)},showServerInfo:function(){this.$refs.serverInfoModal.show(this.connection,this.outputFormats,this.serviceTypes)},showWebEditorInfo:function(){this.emit("showWebEditorInfo")},showDataForm:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r="function"===typeof i;this.$refs.parameterModal.show(e,t.filter(function(e){return null!==e}),r,i,n)}})},di=hi,pi=(i("352f"),Object(b["a"])(di,n,r,!1,null,null,null));t["default"]=pi.exports},f93f:function(e,t,i){}}]);
//# sourceMappingURL=chunk-0322b59b.145c58a7.js.map