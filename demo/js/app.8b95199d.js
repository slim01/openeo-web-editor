(function(e){function t(t){for(var i,o,n=t[0],c=t[1],l=t[2],d=0,p=[];d<n.length;d++)o=n[d],s[o]&&p.push(s[o][0]),s[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],i=!0,n=1;n<a.length;n++){var c=a[n];0!==s[c]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var i={},s={app:0},r=[];function o(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=i,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(a,i,function(t){return e[t]}.bind(null,i));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/openeo-web-editor/demo/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var l=0;l<n.length;l++)t(n[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"05f9":function(e,t,a){},"067b":function(e,t,a){},"0791":function(e,t,a){"use strict";var i=a("22f1"),s=a.n(i);s.a},1999:function(e,t,a){},"22d7":function(e,t,a){"use strict";var i=a("b52e"),s=a.n(i);s.a},"22f1":function(e,t,a){},2944:function(e,t,a){},"2d07":function(e,t,a){"use strict";var i=a("5ebb"),s=a.n(i);s.a},"303a":function(e,t,a){"use strict";var i=a("a09f"),s=a.n(i);s.a},"316a":function(e,t,a){"use strict";var i=a("067b"),s=a.n(i);s.a},"468d":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var i=a("2b0e"),s=a("db49"),r=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"container"}},[a("div",{attrs:{id:"ide"}},[a("BackendPanel",{attrs:{openEO:e.openEO}}),a("SourceEnvironment",{attrs:{openEO:e.openEO}}),a("div",{staticClass:"tabs",attrs:{id:"userContent"}},[a("div",{staticClass:"tabsHeader"},[a("button",{staticClass:"tabItem",attrs:{name:"jobsTab"},on:{click:e.changeUserTab}},[a("i",{staticClass:"fas fa-tasks"}),e._v(" Jobs")]),a("button",{directives:[{name:"show",rawName:"v-show",value:this.openEO.Capabilities.createService(),expression:"this.openEO.Capabilities.createService()"}],staticClass:"tabItem",attrs:{name:"servicesTab"},on:{click:e.changeUserTab}},[a("i",{staticClass:"fas fa-cloud"}),e._v(" Services")]),a("button",{directives:[{name:"show",rawName:"v-show",value:this.openEO.Capabilities.userProcessGraphs(),expression:"this.openEO.Capabilities.userProcessGraphs()"}],staticClass:"tabItem",attrs:{name:"processGraphsTab"},on:{click:e.changeUserTab}},[a("i",{staticClass:"fas fa-code-branch"}),e._v(" Process Graphs")]),a("button",{directives:[{name:"show",rawName:"v-show",value:this.openEO.Capabilities.userFiles(),expression:"this.openEO.Capabilities.userFiles()"}],staticClass:"tabItem",attrs:{name:"filesTab"},on:{click:e.changeUserTab}},[a("i",{staticClass:"fas fa-file"}),e._v(" Files")]),a("button",{staticClass:"tabItem",attrs:{name:"accountTab"},on:{click:e.changeUserTab}},[a("i",{staticClass:"fas fa-user"}),e._v(" Account")])]),a("div",{staticClass:"tabsBody"},[a("div",{staticClass:"tabContent",attrs:{id:"jobsTab"}},[a("JobPanel",{attrs:{userId:e.openEO.Auth.userId,openEO:e.openEO}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:this.openEO.Capabilities.createService(),expression:"this.openEO.Capabilities.createService()"}],staticClass:"tabContent",attrs:{id:"servicesTab"}},[a("ServicePanel",{ref:"servicePanel",attrs:{userId:e.openEO.Auth.userId,openEO:e.openEO}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:this.openEO.Capabilities.userProcessGraphs(),expression:"this.openEO.Capabilities.userProcessGraphs()"}],staticClass:"tabContent",attrs:{id:"processGraphsTab"}},[a("ProcessGraphPanel",{attrs:{userId:e.openEO.Auth.userId,openEO:e.openEO}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:this.openEO.Capabilities.userFiles(),expression:"this.openEO.Capabilities.userFiles()"}],staticClass:"tabContent",attrs:{id:"filesTab"}},[a("FilePanel",{attrs:{userId:e.openEO.Auth.userId,openEO:e.openEO}})],1),a("div",{staticClass:"tabContent",attrs:{id:"accountTab"}},[a("AccountPanel",{attrs:{userId:e.openEO.Auth.userId,openEO:e.openEO}})],1)])]),e._m(0)],1),a("div",{attrs:{id:"viewer"}},[a("div",{staticClass:"tabs"},[a("div",{staticClass:"tabsHeader"},[a("button",{staticClass:"tabItem tabActive",attrs:{name:"mapTab"},on:{click:e.changeViewerTab}},[a("i",{staticClass:"fas fa-map"}),e._v(" Map")]),a("button",{staticClass:"tabItem",attrs:{name:"imageTab"},on:{click:e.changeViewerTab}},[a("i",{staticClass:"fas fa-image"}),e._v(" Images")]),a("button",{staticClass:"tabItem",attrs:{name:"dataTab"},on:{click:e.changeViewerTab}},[a("i",{staticClass:"fas fa-database"}),e._v(" Data")])]),a("div",{staticClass:"tabsBody"},[a("div",{staticClass:"tabContent tabActive",attrs:{id:"mapTab"}},[a("MapViewer",{ref:"mapViewer"})],1),a("div",{staticClass:"tabContent",attrs:{id:"imageTab"}},[a("ImageViewer",{ref:"imageViewer"})],1),a("div",{staticClass:"tabContent",attrs:{id:"dataTab"}},[a("DataViewer",{ref:"dataViewer"})],1)])])]),a("vue-snotify"),a("Modal")],1)},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("footer",[i("a",{attrs:{href:"http://www.openeo.org",target:"_blank"}},[i("img",{attrs:{src:a("cf05"),id:"openeoLogo"}})])])}],c=(a("a481"),a("7f7f"),a("6168")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"filePanel"}},[a("h3",[e._v("User '"+e._s(e.userName)+"'")]),a("br"),a("ul",[e.openEO.Capabilities.userCredits()?a("li",[e._v("Credits: "+e._s(null===e.credits?"N/A":e.credits))]):e._e()])])},u=[],d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dataTable",attrs:{id:e.id}},[a("div",{staticClass:"dataTableMenu"},[a("div",{staticClass:"dataTableToolbar"},[e._t("toolbar")],2),e.data.length>0?a("div",{staticClass:"dataTableFilter"},[a("i",{staticClass:"fas fa-search filter-icon"}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.filterValue,expression:"filterValue"}],attrs:{type:"text",placeholder:"Search term"},domProps:{value:e.filterValue},on:{input:function(t){t.target.composing||(e.filterValue=t.target.value)}}}),a("button",{attrs:{disabled:!e.hasFilter},on:{click:e.clearFilter}},[a("i",{staticClass:"fas fa-times-circle"})])]):e._e()]),e.data.length>0||void 0==e.noDataMessage||""==e.noDataMessage?a("table",[a("tr",e._l(e.columns,function(t,i){return a("th",{key:i,class:i},[e._v(e._s(t.name))])})),e._l(e.view,function(t,i){return a("tr",{key:i},e._l(e.columns,function(i,s){return a("td",{key:s,class:s,attrs:{"data-value":!!i.stylable&&e.value(t,i,s)}},[e._t(s,[e._v("\n\t\t\t\t\t"+e._s(e.formattedValue(t,i,s))+"\n\t\t\t\t")],{row:t,col:i,id:s})],2)}))}),e.data.length>0&&0==e.view.length?a("tr",{staticClass:"noSearchResults"},[a("td",{attrs:{colspan:e.columnCount}},[e._v("Sorry, no element matches your search criteria.")])]):e._e()],2):e._e(),0==e.data.length?a("div",{staticClass:"noDataMessage"},[e._v(e._s(e.noDataMessage))]):e._e()])},p=[],f=(a("55dd"),a("6b54"),a("53ca")),h=(a("20d6"),a("ac6a"),a("456d"),{name:"DataTable",props:["id","columns","dataSource","preprocessor"],data:function(){return{data:[],view:[],filterValue:null,primaryKey:null,noDataMessage:"No data specified."}},watch:{data:function(e,t){this.updateView()},filterValue:function(e,t){this.updateView()}},computed:{columnCount:function(){return Object.keys(this.columns).length},hasFilter:function(){return"string"===typeof this.filterValue&&this.filterValue.length>0}},created:function(){this.determinePrimaryKey()},methods:{determinePrimaryKey:function(){for(var e in this.columns)if(this.columns[e].primaryKey){this.primaryKey=e;break}},setNoData:function(e){if(this.data=[],"number"===typeof e)switch(e){case 401:this.noDataMessage="Please authenticate to use this feature.";break;case 403:case 404:this.noDataMessage="Sorry, authentication failed. Please try again.";break;case 501:this.noDataMessage="Sorry, this feature is not supported by the server.";break;default:this.noDataMessage="Sorry, an error occured. Please try again later.";break}else this.noDataMessage=e},retrieveData:function(){var e=this;this.setNoData("Loading data..."),this.data=[],"function"===typeof this.dataSource?this.dataSource().then(function(t){Array.isArray(t)?0==t.length?e.setNoData(""):e.setData(t):e.setNoData("Invalid response from data source.")}).catch(function(t){e.setNoData(t)}):Array.isArray(this.dataSource)?0==this.dataSource.length?this.setNoData(""):this.setData(this.dataSource):this.setNoData("No valid data source specified.")},setData:function(e){this.noDataMessage=void 0,"function"===typeof this.preprocessor?this.data=e.map(this.preprocessor):this.data=e},removeData:function(e){var t=this;if(null===this.primaryKey)throw new Error("No primary key specified.");this.data=this.data.filter(function(a){return a[t.primaryKey]!=e}),0==this.data.length&&this.setNoData("")},addData:function(e){if("function"===typeof this.preprocessor&&(e=this.preprocessor(e)),!e.hasOwnProperty(this.primaryKey))throw new Error("Object does not contain a value for the primary key.");this.data.push(e)},replaceData:function(e){var t=this;if(null===this.primaryKey)throw new Error("No primary key specified.");if("function"===typeof this.preprocessor&&(e=this.preprocessor(e)),!e.hasOwnProperty(this.primaryKey))throw new Error("Object does not contain a value for the primary key.");var a=this.data.findIndex(function(a){return a[t.primaryKey]==e[t.primaryKey]});a>=0?this.$set(this.data,a,e):this.data.push(e)},value:function(e,t,a){return"object"===Object(f["a"])(e)?e[a]:e},formattedValue:function(e,t,a){return this.format(this.value(e,t,a),t)},sort:function(){},filter:function(){var e=this;if(this.hasFilter){var t=this.filterValue.toLowerCase();this.view=this.view.filter(function(a){for(var i in a){var s=e.columns[i];if("undefined"===typeof s||!s.hasOwnProperty("filterable")||!1!==s.filterable){var r=e.value(a,s,i);if(("number"===typeof r||"string"===typeof r||"boolean"===typeof r)&&(r=r.toString(),-1!==r.toLowerCase().indexOf(t)))return!0}}return!1})}},clearFilter:function(){this.filterValue="",this.updateView()},updateView:function(){Array.isArray(this.data)?(this.view=this.data,this.data.length>0&&(this.filter(),this.sort())):this.view=[]},format:function(e,t){return"string"===typeof t.format?"function"===typeof this["format"+t.format]?e=this["format"+t.format](e,t):console.log(t.format+" is an invalid formatter."):"function"===typeof t.format&&(e=t.format.call(this,e,t)),e},formatFileSize:function(e,t){if(!e)return"";var a=0==e?0:Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,a)).toFixed(2)+" "+["B","kB","MB","GB","TB"][a]},formatDateTime:function(e,t){return this.$utils.formatDateTime(e)}}}),v=h,_=(a("6224"),a("2877")),m=Object(_["a"])(v,d,p,!1,null,null,null);m.options.__file="DataTable.vue";var b=m.exports,w={name:"FilePanel",props:["openEO","userId"],components:{DataTable:b},data:function(){return{credits:null}},created:function(){c["a"].$on("serverChanged",this.updateData)},watch:{userId:function(e,t){null!==e&&this.updateData()}},computed:{userName:{get:function(){return"string"!==typeof this.userId&&"number"!==typeof this.userId||"me"==this.userId?"Guest":this.userId}}},methods:{updateData:function(){var e=this;if(this.credits=null,("string"===typeof this.userId||"number"===typeof this.userId)&&this.openEO.Capabilities.userCredits()){var t=this.openEO.Users.getObject(this.userId);t.getCredits().then(function(t){e.credits=t}).catch(function(t){e.credits=null})}}}},g=w,O=Object(_["a"])(g,l,u,!1,null,null,null);O.options.__file="AccountPanel.vue";var y=O.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"backendPanel"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.$config.allowServerChange,expression:"$config.allowServerChange"}],staticClass:"server-toolbar"},[a("h3",[e._v("Server:")]),a("input",{ref:"serverUrl",attrs:{id:"serverUrl",list:"serverUrls",value:""}}),a("button",{attrs:{title:"Select previously used server"},on:{click:e.showServerSelector}},[a("i",{staticClass:"fas fa-book"})]),a("button",{attrs:{title:"Change server"},on:{click:e.updateServerUrlFromInput}},[a("i",{staticClass:"fas fa-check"})])]),a("div",{staticClass:"info-toolbar"},[a("button",{attrs:{title:"Get server information"},on:{click:e.getServerInfo}},[a("i",{staticClass:"fas fa-info"})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showDataSelector(),expression:"showDataSelector()"}],staticClass:"data-toolbar"},[e._v("\n\t\tData: "),a("select",{ref:"data",attrs:{id:"data"}},e._l(e.data,function(t){return a("option",{key:t.product_id,attrs:{title:t.description},domProps:{value:t.product_id}},[e._v(e._s(t.product_id))])})),a("button",{attrs:{id:"insertData",title:"Insert into script"},on:{click:e.insertDataToEditor}},[a("i",{staticClass:"fas fa-plus"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.dataInfo(),expression:"openEO.Capabilities.dataInfo()"}],attrs:{title:"Show details"},on:{click:e.showDataInfo}},[a("i",{staticClass:"fas fa-info"})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showProcessSelector(),expression:"showProcessSelector()"}],staticClass:"processes-toolbar"},[e._v("\n\t\tProcesses: "),a("select",{ref:"processes",attrs:{id:"processes"}},e._l(e.processes,function(t){return a("option",{key:t.process_id,attrs:{title:t.description},domProps:{value:t.process_id}},[e._v(e._s(t.process_id))])})),a("button",{attrs:{id:"insertProcesses",title:"Insert into script"},on:{click:e.insertProcessToEditor}},[a("i",{staticClass:"fas fa-plus"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.processInfo(),expression:"openEO.Capabilities.processInfo()"}],attrs:{title:"Show details"},on:{click:e.showProcessInfo}},[a("i",{staticClass:"fas fa-info"})])]),a("div",{staticClass:"vis-toolbar"},[e._v("\n\t\tVisualizations: "),a("select",{attrs:{id:"visualizations"}},[a("option",{attrs:{value:""}},[e._v("None")]),a("option",{attrs:{value:"custom"}},[e._v("Custom function")]),a("optgroup",{attrs:{label:"Pre-defined"}},e._l(e.openEO.Visualizations,function(t,i){return a("option",{key:i,domProps:{value:i}},[e._v(e._s(t.name))])}))]),a("button",{attrs:{id:"insertVisualizations",title:"Insert into script"},on:{click:e.insertVisualization}},[a("i",{staticClass:"fas fa-plus"})])])])},C=[],S={name:"BackendPanel",props:["openEO"],data:function(){return{processes:[],data:[],serverUrls:[]}},watch:{serverUrls:function(e,t){localStorage.setItem("serverUrls",JSON.stringify(e))}},created:function(){c["a"].$on("changeServerUrl",this.changeServer),c["a"].$on("serverChanged",this.discoverData)},mounted:function(){var e=localStorage.getItem("serverUrls");null!==e&&(this.serverUrls=JSON.parse(e))},methods:{showDataSelector:function(){return this.openEO.Capabilities.data()&&this.data.length>0},showProcessSelector:function(){return this.openEO.Capabilities.processes()&&this.processes.length>0},showServerSelector:function(){var e=this;c["a"].$emit("showComponentModal","Select previously used server","List",{dataSource:this.serverUrls,actions:[{callback:function(t){return e.updateServerUrlTo(t)||!0},icon:"check",title:"Select this server"},{callback:function(t){return e.serverUrls.splice(e.serverUrls.indexOf(t),1)},icon:"trash",title:"Delete entry from history"}]})},changeServer:function(e){this.$refs.serverUrl.value=e,-1===this.serverUrls.indexOf(e)&&this.serverUrls.push(e)},discoverData:function(){var e=this;this.openEO.Capabilities.data()&&this.openEO.Data.get().then(this.setDiscoveredData).catch(function(t){return e.setDiscoveredData([])}),this.openEO.Capabilities.processes()&&this.openEO.Processes.get().then(this.setDiscoveredProcesses).catch(function(t){return e.setDiscoveredProcesses([])})},updateServerUrlFromInput:function(){var e=this.$refs.serverUrl.value;"string"===typeof e&&e.length>0?e!=this.openEO.API.baseUrl&&c["a"].$emit("changeServerUrl",e):this.$utils.error(this,"Please specify a valid server URL.")},updateServerUrlTo:function(e){this.$refs.serverUrl.value=e,this.updateServerUrlFromInput()},getServerInfo:function(){var e={url:this.openEO.API.baseUrl,supportedEndpoints:this.openEO.Capabilities.rawData,supportedWebServices:this.openEO.SupportedServices,supportedOutputFormats:this.openEO.SupportedOutputFormats};c["a"].$emit("showModal","Server information",e)},showDataInfo:function(){var e=this;this.openEO.Data.getById(this.$refs.data.value).then(function(t){c["a"].$emit("showModal","Data: "+e.$refs.data.value,t)}).catch(function(t){return e.$utils.error(e,"Sorry, can't load process details.")})},showProcessInfo:function(){var e=this;this.openEO.Processes.getById(this.$refs.processes.value).then(function(t){c["a"].$emit("showModal","Process: "+e.$refs.processes.value,t)}).catch(function(t){return e.$utils.error(e,"Sorry, can't load process details.")})},insertDataToEditor:function(){this.insertToEditor(this.$refs.data.value)},insertProcessToEditor:function(){this.insertToEditor(this.$refs.processes.value)},insertToEditor:function(e){c["a"].$emit("addToSource",e)},setDiscoveredData:function(e){for(var t in this.data=[],e)"undefined"!==typeof e[t].product_id&&this.data.push(e[t])},setDiscoveredProcesses:function(e){for(var t in this.processes=[],e)"undefined"!==typeof e[t].process_id&&this.processes.push(e[t])},insertVisualization:function(){var e,t=document.getElementById("visualizations");if("custom"===t.value)e="\nOpenEO.Editor.Visualization = {\n\tfunction: function(input) {\n\t\t// ToDo: Implement your custom visualization\n\t}\n};\n";else if("undefined"!==typeof this.openEO.Visualizations[t.value]){var a="",i=[];for(var s in this.openEO.Visualizations[t.value].arguments){var r=this.openEO.Visualizations[t.value].arguments[s],o=prompt(r.description,JSON.stringify(r.defaultValue));if(null===o)return;i.push('"'+s+'": '+o)}i.length>0&&(a=",\n\targs: {\n\t\t"+i.join(",\r\n\t\t")+"\n\t}"),e="\nOpenEO.Editor.Visualization = {\n\tfunction: OpenEO.Visualizations."+t.value+a+"\n};\n"}else e="";this.insertToEditor(e)}}},D=S,$=(a("bb7b"),Object(_["a"])(D,E,C,!1,null,"9e018868",null));$.options.__file="BackendPanel.vue";var P=$.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"dataViewer"}},[e.isText()?a("span",[e._v(e._s(e.nl2br(e.content)))]):a("ObjectTree",{attrs:{data:e.content}})],1)},M=[],T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isEmpty?a("em",[e._v("None")]):e.collapsed?a("em",[e._v("... ("),a("a",{on:{click:function(t){e.toggle()}}},[e._v("show all "+e._s(e.data.length)+" entries")]),e._v(")")]):a("ul",e._l(e.data,function(t,i){return a("li",{key:i},[e.shouldShowKey?[a("em",[e._v(e._s(e.prettifyKey(i)))]),e._v(": ")]:e._e(),e.showObjectTree(t)?a("ObjectTree",{attrs:{data:t}}):[e._v(e._s(t))]],2)}))},k=[],j={name:"ObjectTree",props:["data"],data:function(){return{collapsed:!1,isObjectTree:!0}},created:function(){this.collapsed=Array.isArray(this.data)&&this.data.length>50&&this.$parent.isObjectTree},computed:{shouldShowKey:function(){return!(Array.isArray(this.data)&&this.data.length>0&&"object"!==Object(f["a"])(this.data[0]))},isEmpty:function(){return null==this.data||Array.isArray(this.data)&&0==this.data.length||"object"==Object(f["a"])(this.data)&&0==Object.keys(this.data).length}},methods:{toggle:function(){this.collapsed=!this.collapsed},showObjectTree:function(e){return"object"===Object(f["a"])(e)&&!this.collapsed},prettifyKey:function(e){return this.$utils.isNumeric(e)?e:(e=e.replace(/([a-z])([A-Z])/g,"$1 $2"),e=e.replace(/([a-zA-Z\d])_([a-zA-Z\d])/g,"$1 $2"),e.charAt(0).toUpperCase()+e.substr(1))}}},x=j,U=Object(_["a"])(x,T,k,!1,null,null,null);U.options.__file="ObjectTree.vue";var L=U.exports,A={name:"DataViewer",components:{ObjectTree:L},data:function(){return{content:null}},mounted:function(){this.reset()},methods:{isText:function(){return"string"===typeof this.content},reset:function(){this.content="Nothing to show."},showJson:function(e){this.content=e,c["a"].$emit("showDataViewer")},showText:function(e){this.content=e,c["a"].$emit("showDataViewer")},showBlob:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(null==a&&(a=e.type),a){case"application/json":this.$utils.blobToText(e,function(e){var a=JSON.parse(e.target.result);t.showJson(a)});break;case"text/plain":this.$utils.blobToText(e,function(e){t.showText(e.target.result)});break}},nl2br:function(e){return"undefined"===typeof e||null===e?"":(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")}}},V=A,N=(a("303a"),Object(_["a"])(V,I,M,!1,null,"fb2db5fc",null));N.options.__file="DataViewer.vue";var B=N.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DataTable",{ref:"table",attrs:{dataSource:e.dataSource,columns:e.columns,id:"FilePanel"},scopedSlots:e._u([{key:"toolbar",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.uploadUserFile(),expression:"openEO.Capabilities.uploadUserFile()"}]},[a("input",{attrs:{type:"file",name:"uploadUserFile",id:"uploadUserFile"}}),a("button",{attrs:{title:"Add new file",id:"uploadUserFileBtn"},on:{click:function(t){e.uploadFile()}}},[a("i",{staticClass:"fas fa-upload"})]),a("span",{attrs:{id:"uploadUserFileStatus"}})]),a("button",{attrs:{title:"Refresh files"},on:{click:function(t){e.updateData()}}},[a("i",{staticClass:"fas fa-sync-alt"})])]}},{key:"actions",fn:function(t){return[a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.downloadUserFile(),expression:"openEO.Capabilities.downloadUserFile()"}],attrs:{title:"Download"},on:{click:function(a){e.downloadFile(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-download"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.deleteUserFile(),expression:"openEO.Capabilities.deleteUserFile()"}],attrs:{title:"Delete"},on:{click:function(a){e.deleteFile(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-trash"})])]}}])})},J=[],R={name:"FilePanel",props:["openEO","userId"],components:{DataTable:b},data:function(){return{columns:{name:{name:"Path / Name",primaryKey:!0},size:{name:"Size",format:"FileSize",filterable:!1},modified:{name:"Last modified",format:"DateTime"},actions:{name:"Actions",filterable:!1,id:"name"}}}},created:function(){c["a"].$on("serverChanged",this.updateData)},watch:{userId:function(e,t){null!==e&&this.updateData()}},methods:{dataSource:function(){var e=this.openEO.Users.getObject(this.userId);return e.getFiles()},updateData:function(){this.$refs.table&&this.openEO.Capabilities.userFiles()&&("string"!==typeof this.userId&&"number"!==typeof this.userId?this.$refs.table.setNoData(401):this.$refs.table.retrieveData())},uploadFile:function(){var e=this,t=document.getElementById("uploadUserFile"),a=document.getElementById("uploadUserFileStatus"),i=t.files[0],s=this.openEO.Users.getObject(this.userId).getFileObject(i.name);s.replace(i,function(e){a.innerText=e+"%"}).then(function(s){e.$refs.table.replaceData({name:i.name,size:i.size,modified:(new Date).toISOString()}),a.innerText="",t.value="",e.$utils.ok(e,"File upload completed.")}).catch(function(t){a.innerText="",e.$utils.error(e,"Sorry, file upload failed.")})},downloadFile:function(e){var t=this;this.$utils.info(this,"Download requested. Please wait...");var a=this.openEO.Users.getObject(this.userId).getFileObject(e);a.get().then(function(a){t.$utils.downloadData(a,e)})},deleteFile:function(e){var t=this,a=this.openEO.Users.getObject(this.userId).getFileObject(e);a.delete().then(function(a){t.$refs.table.removeData(e)}).catch(function(e){t.$utils.error(t,"Sorry, could not delete file.")})}}},K=R,z=(a("9961"),Object(_["a"])(K,F,J,!1,null,null,null));z.options.__file="FilePanel.vue";var W=z.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"imageContainer",attrs:{id:"imageViewer"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:"text"==e.visibleContent,expression:"visibleContent == 'text'"}],ref:"emptyMsg"}),a("canvas",{directives:[{name:"show",rawName:"v-show",value:"canvas"==e.visibleContent,expression:"visibleContent == 'canvas'"}],ref:"canvas"}),a("img",{directives:[{name:"show",rawName:"v-show",value:"image"==e.visibleContent,expression:"visibleContent == 'image'"}],ref:"image"})])},q=[],H={name:"ImageViewer",data:function(){return{script:null,visibleContent:"text"}},mounted:function(){this.reset()},methods:{setScript:function(e){this.script=e},reset:function(){this.setMessage("Nothing to show.")},setMessage:function(e){this.$refs.emptyMsg.innerText=e,this.visibleContent="text",this.setCanvasSize(0,0)},showImage:function(e){var t=this;this.setMessage("Loading image..."),c["a"].$emit("showImageViewer"),this.$refs.image.onload=function(){t.visibleContent="image",t.script.Visualization&&t.script.Visualization.function&&t.updateCanvas()},this.$refs.image.src=e},showImageBlob:function(e){this.showImage(URL.createObjectURL(e))},showImageBase64:function(e){contentType,btoa(e);this.showImage(e)},updateCanvas:function(){this.setCanvasSize(this.$refs.image.naturalWidth,this.$refs.image.naturalHeight);var e=this.$refs.canvas.getContext("2d");e.drawImage(this.$refs.image,0,0),this.$refs.canvas.originalImage=e.getImageData(0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.$utils.recolorImage(this.$refs.canvas,this.script),this.visibleContent="canvas"},setCanvasSize:function(e,t){this.$refs.canvas.width=this.$refs.image.naturalWidth,this.$refs.canvas.height=this.$refs.image.naturalHeight}}},Z=H,Y=(a("2d07"),Object(_["a"])(Z,G,q,!1,null,null,null));Y.options.__file="ImageViewer.vue";var X=Y.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DataTable",{ref:"table",attrs:{dataSource:e.dataSource,columns:e.columns,id:"JobPanel"},scopedSlots:e._u([{key:"toolbar",fn:function(t){return[a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.createJob(),expression:"openEO.Capabilities.createJob()"}],attrs:{title:"Add new job"},on:{click:e.createJobFromScript}},[a("i",{staticClass:"fas fa-plus"}),e._v(" Add")]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.userJobs(),expression:"openEO.Capabilities.userJobs()"}],attrs:{title:"Refresh jobs"},on:{click:function(t){e.updateData()}}},[a("i",{staticClass:"fas fa-sync-alt"})])]}},{key:"actions",fn:function(t){return[a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.jobInfo(),expression:"openEO.Capabilities.jobInfo()"}],attrs:{title:"Details"},on:{click:function(a){e.showJobInfo(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-info"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.updateJob(),expression:"openEO.Capabilities.updateJob()"}],attrs:{title:"Edit"},on:{click:function(a){e.editJob(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-edit"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.queueJob(),expression:"openEO.Capabilities.queueJob()"}],attrs:{title:"Queue as batch job"},on:{click:function(a){e.queueJob(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-play-circle"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.pauseJob(),expression:"openEO.Capabilities.pauseJob()"}],attrs:{title:"Pause batch job"},on:{click:function(a){e.pauseJob(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-pause-circle"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.cancelJob(),expression:"openEO.Capabilities.cancelJob()"}],attrs:{title:"Disable"},on:{click:function(a){e.cancelJob(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-stop-circle"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.downloadJob(),expression:"openEO.Capabilities.downloadJob()"}],attrs:{title:"Download"},on:{click:function(a){e.downloadJob(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-download"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.downloadJob(),expression:"openEO.Capabilities.downloadJob()"}],attrs:{title:"View results"},on:{click:function(a){e.downloadJob(t.row[t.col.id],!0)}}},[a("i",{staticClass:"fas fa-eye"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.createService(),expression:"openEO.Capabilities.createService()"}],attrs:{title:"Create Service"},on:{click:function(a){e.createServiceFromJob(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-plus"}),a("i",{staticClass:"fas fa-cloud"})])]}}])})},ee=[],te={name:"JobPanel",props:["openEO","userId"],components:{DataTable:b},data:function(){return{columns:{job_id:{name:"ID",primaryKey:!0},status:{name:"Status",stylable:!0},submitted:{name:"Submitted",format:"DateTime"},updated:{name:"Last update",format:"DateTime"},consumed_credits:{name:"Costs",filterable:!1},actions:{name:"Actions",filterable:!1,id:"job_id"}},watchers:[]}},created:function(){c["a"].$on("jobCreated",this.jobCreated),c["a"].$on("serverChanged",this.updateData)},mounted:function(){window.setInterval(this.executeWatchers,5e3)},watch:{userId:function(e,t){null!==e&&this.updateData()}},methods:{dataSource:function(){var e=this.openEO.Users.getObject(this.userId);return e.getJobs()},updateData:function(){this.$refs.table&&(this.openEO.Capabilities.createJob()?this.openEO.Capabilities.userJobs()?"string"!==typeof this.userId&&"number"!==typeof this.userId?this.$refs.table.setNoData(401):this.$refs.table.retrieveData():this.$refs.table.setNoData("Feature supported, but retrieval of stored data of this feature not supported."):this.$refs.table.setNoData(501))},jobCreated:function(e){var t=this;if(this.$refs.table){this.$refs.table.addData(e);var a={buttons:[]};this.openEO.Capabilities.downloadJob()&&a.buttons.push({text:"Download",action:function(){return t.downloadJob(e.job_id)}}),this.$snotify.confirm("Job created!",null,a)}},createJob:function(e,t){var a=this;this.openEO.Jobs.create(e.ProcessGraph,t).then(function(e){c["a"].$emit("jobCreated",e)}).catch(function(e){a.$utils.error(a,"Sorry, could not create an openEO job.")})},createJobFromScript:function(e){var t=this,a=prompt("Please specify the file format you need or leave empty for default format.","");null!==a&&c["a"].$emit("evalScript",function(e){t.createJob(e,a)})},updateJobDataById:function(e){var t=this,a=this.openEO.Jobs.getObject(e);a.get().then(function(e){return t.updateJobData(e)})},updateJobData:function(e){this.$refs.table.replaceData(e);var t=this.watchers.indexOf(e.job_id);switch(e.status.toLowerCase()){case"running":case"queued":case"unknown":-1===t&&this.watchers.push(e.job_id);break;default:delete this.watchers[t]}},executeWatchers:function(){for(var e in this.watchers)this.updateJobDataById(this.watchers[e])},showJobInfo:function(e){var t=this,a=this.openEO.Jobs.getObject(e);a.get().then(function(a){c["a"].$emit("showModal","Job: "+e,a),t.updateJobData(a)}).catch(function(e){return t.$utils.error(t,"Sorry, could not load job details.")})},editJob:function(e){var t=this;c["a"].$emit("evalScript",function(a){var i=t.openEO.Jobs.getObject(e);i.modify(a.ProcessGraph,{}),t.updateJobDataById(e)},!1)},queueJob:function(e){var t=this,a=this.openEO.Jobs.getObject(e);a.queue().then(function(a){t.$utils.ok(t,"Job successfully queued."),t.updateJobDataById(e)}).catch(function(e){return t.$utils.error(t,"Sorry, could not queue job.")})},pauseJob:function(e){var t=this,a=this.openEO.Jobs.getObject(e);a.pause().then(function(a){t.$utils.ok(t,"Job successfully paused."),t.updateJobDataById(e)}).catch(function(e){return t.$utils.error(t,"Sorry, could not pause job.")})},cancelJob:function(e){var t=this,a=this.openEO.Jobs.getObject(e);a.cancel().then(function(a){t.$utils.ok(t,"Job successfully canceled."),t.updateJobDataById(e)}).catch(function(e){return t.$utils.error(t,"Sorry, could not cancel job.")})},downloadJob:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=prompt("Please specify the file format you need or leave empty for default format.","");if(null!==i){this.$utils.info(this,(a?"Data":"Download")+" requested. Please wait...");var s=this.openEO.Jobs.getObject(e);s.download(i).then(function(e){t.$utils.blobToText(e,function(s){if("application/json"==e.type||"json"==i){var r=JSON.parse(s.target.result);if(Array.isArray(r)&&1==r.length&&"string"===typeof r[0]&&-1!==r[0].indexOf("://")){var o=t.$utils.getFileNameFromURL(r[0]);t.openEO.HTTP.download(r[0]).then(function(e){return t.handleDownloadedData(e,a,o)}).catch(function(e){return t.$utils.error(t,"Sorry, could not send file to browser.")})}else t.handleDownloadedData(e,a)}else t.handleDownloadedData(e,a)})}).catch(function(e){t.$utils.error(t,"Sorry, an error occured.")})}},handleDownloadedData:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t?c["a"].$emit("evalScript",function(t){c["a"].$emit("showInViewer",e,t)}):this.$utils.downloadData(e,a,e.type)},createServiceFromJob:function(e){var t=this;if(1==this.openEO.SupportedServices.length)a=this.openEO.SupportedServices[0];else{var a=prompt("Please specify the service type you want to create:","");if(null===a)return;-1===this.openEO.SupportedServices.indexOf(a.toLowerCase())&&this.$utils.error(this,"Invalid service type specified.")}this.openEO.Services.create(e,a,{}).then(function(e){c["a"].$emit("serviceCreated",e)}).catch(function(e){t.$utils.error(t,"Sorry, an error occured.")})}}},ae=te,ie=(a("0791"),Object(_["a"])(ae,Q,ee,!1,null,null,null));ie.options.__file="JobPanel.vue";var se=ie.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"mapCanvas"}})},oe=[],ne=(a("6cc5"),a("e11e")),ce=a.n(ne),le=a("81b6"),ue=a.n(le);ue.a.LeafletGeotiff.CustomRenderer=ue.a.LeafletGeotiffRenderer.extend({options:{script:null},initialize:function(e){this.name="openEO-geotiff-visualizer",ue.a.setOptions(this,e)},setScript:function(e){e&&e.Visualization&&e.Visualization.function&&(this.options.script=e),this.parent._reset()},render:function(e,t,a,i){for(var s=!!(this.options.script&&this.options.script.Visualization&&this.options.script.Visualization.function),r=a.createImageData(e.width,e.height),o=0;o<e.height;o++)for(var n=0;n<e.width;n++){var c=o*e.width+n,l=[e.data[c],e.data[c],e.data[c],255];s&&(l=this.options.script.Visualization.function(l,this.options.script.Visualization.args)),r.data.set(l,4*(o*e.width+n))}a.putImageData(this.parent.transform(r,i),i.xStart,i.yStart)}});var de=ue.a.LeafletGeotiff.customRenderer=function(e){return new ue.a.LeafletGeotiff.CustomRenderer(e)},pe=(a("b048"),a("6005"),a("9d1c"),{name:"MapViewer",data:function(){return{options:{fullscreenControl:!0,center:[45,15],zoom:8},map:null,baseLayer:{osm:null},layer:{},layerControl:null,sideBySideComponent:null}},mounted:function(){this.createMap(),c["a"].$on("viewWebService",this.viewWebService),c["a"].$on("removeWebService",this.removeWebService)},methods:{createMap:function(){this.map=new ce.a.Map("mapCanvas",this.options),this.layerControl=ce.a.control.layers(),this.layerControl.addTo(this.map),this.baseLayer.osm=ce.a.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{name:"OpenStreetMap",attribution:'Map data &copy; <a href="http://www.osm.org">OpenStreetMap</a>'}),this.baseLayer.osm.addTo(this.map),this.layerControl.addBaseLayer(this.baseLayer.osm,this.baseLayer.osm.options.name),this.map.on("layeradd",this.oNLayerAdd),this.map.on("overlayremove",this.onOverlayRemove)},oNLayerAdd:function(e){var t=this.getShownLayers();2==t.length&&null===this.sideBySideComponent&&(this.sideBySideComponent=ce.a.control.sideBySide(t[0],t[1]),this.sideBySideComponent.addTo(this.map))},onOverlayRemove:function(e){var t=this.getShownLayers();2!=t.length&&null!==this.sideBySideComponent&&(this.map.removeControl(this.sideBySideComponent),this.sideBySideComponent=null)},getShownLayers:function(){var e=[];for(var t in this.layer)this.map.hasLayer(this.layer[t])&&e.push(this.layer[t]);return e},viewWebService:function(e){"wms"==e.service_type.toLowerCase()?this.updateWMSLayer(e):"xyz"==e.service_type.toLowerCase()?this.updateXYZLayer(e):this.$utils.error("Sorry, the requested service type is not supported by the map.")},removeWebService:function(e){this.layer[e]&&this.removeLayerFromMap(e)},addLayerToMap:function(e){this.layer[e].addTo(this.map),this.layerControl.addOverlay(this.layer[e],this.layer[e].options.name)},removeLayerFromMap:function(e){this.layer[e].removeFrom(this.map),this.layerControl.removeLayer(this.layer[e]),delete this.layer[e]},removeOldLayer:function(e){for(var t in this.layer)null!==this.layer[t]&&this.layer[t]!==e&&this.removeLayerFromMap(t)},updateTiffLayerBlob:function(e){this.updateTiffLayer(URL.createObjectURL(e))},updateTiffLayer:function(e){var t=this.$utils.formatDateTime(Date.now());if("undefined"===typeof this.layer[t]){var a=de(),i={name:t+" (GeoTiff)",renderer:a};this.layer[t]=Object(le["leafletGeotiff"])(e,i),this.addLayerToMap(t),c["a"].$emit("evalScript",function(e){a.setScript(e)})}else this.layer[t].setURL(e)},updateXYZLayer:function(e){var t=e.service_id,a=e.service_url+"/{z}/{x}/{y}";if("undefined"===typeof this.layer[t]){var i={name:t+" (XYZ)"};this.layer[t]=new ce.a.TileLayer(a,i),this.extendTileLayerForVisualizations(this.layer[t]),this.addLayerToMap(t)}else this.layer[t].setUrl(a,!1),this.layer[t].recolor()},updateWMSLayer:function(e){var t=e.service_id;if("undefined"===typeof this.layer[t]){var a=e.service_args;a.name=t+" (WMS)",a.service=a.service||"WMS",a.format=a.format||"image/jpeg",this.layer[t]=ce.a.tileLayer.wms(e.service_url,a),this.extendTileLayerForVisualizations(this.layer[t]),this.addLayerToMap(t)}else this.layer[t].setUrl(e.service_url,!1),this.layer[t].recolor()},extendTileLayerForVisualizations:function(e){var t=this;e.recolor=function(){for(var e in this._tiles){var a=this._tiles[e];t.recolor(a.el)}},e.createTile=function(e){var a=ce.a.DomUtil.create("canvas","leaflet-tile");a.width=a.height=this.options.tileSize;var i=new Image;return i.crossOrigin="",i.onload=function(){var e=a.getContext("2d");e.drawImage(i,0,0),a.originalImage=e.getImageData(0,0,a.width,a.height),t.recolor(a)},i.src=this.getTileUrl(e),a}},recolor:function(e){var t=this;c["a"].$emit("evalScript",function(a){t.$utils.recolorImage(e,a)})}}}),fe=pe,he=(a("b92f"),Object(_["a"])(fe,re,oe,!1,null,"712bd78d",null));he.options.__file="MapViewer.vue";var ve=he.exports,_e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.shown?a("div",{staticClass:"modal",attrs:{id:"modal"},on:{click:e.possiblyClose}},[a("div",{staticClass:"modal-container"},[a("h2",{staticClass:"modal-header"},[e._v("\n\t\t\t"+e._s(e.title)+"\n\t\t\t"),a("span",{staticClass:"close",on:{click:e.close}},[e._v("Ã—")])]),a("div",{staticClass:"modal-content",attrs:{id:"modal-content"}},["string"===typeof e.body?[e._v(e._s(e.body))]:a(e.compname,e._b({tag:"component"},"component",e.props,!1))],2)])]):e._e()},me=[],be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",e._l(e.items,function(t){return a("li",{key:t},[a("a",{on:{click:function(a){e.doMainAction(t)}}},[e._v(e._s(t))]),e._l(e.actions,function(i){return a("button",{key:i.icon,attrs:{title:i.title},on:{click:function(a){e.doAction(i.callback,t)}}},[a("i",{class:"fas fa-"+i.icon})])})],2)}))},we=[],ge={name:"List",props:["dataSource","actions"],computed:{items:function(){return"function"==typeof this.dataSource?this.dataSource():this.dataSource}},methods:{doAction:function(e,t){var a=e(t);!0===a&&this.$utils.isChildOfModal(this)&&c["a"].$emit("closeModal")},doMainAction:function(e){this.actions.length>0&&this.doAction(this.actions[0].callback,e)}}},Oe=ge,ye=(a("e01b"),Object(_["a"])(Oe,be,we,!1,null,"2203221f",null));ye.options.__file="List.vue";var Ee=ye.exports,Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("form",{attrs:{id:"loginForm"},on:{submit:function(t){return t.preventDefault(),e.submitLogin(t)}}},[a("h3",[e._v("Login")]),a("label",{attrs:{for:"username"}},[e._v("Username:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{id:"username",type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),a("label",{attrs:{for:"password"}},[e._v("Password:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),a("button",{attrs:{type:"submit"}},[e._v("Login")])]),e.showRegistration?a("form",{attrs:{id:"registerForm"},on:{submit:function(t){return t.preventDefault(),e.submitRegister(t)}}},[a("h3",[e._v("Register")]),a("label",{attrs:{for:"registerPassword"}},[e._v("Password:")]),a("input",{ref:"registerPassword",attrs:{id:"registerPassword",type:"password"}}),a("button",{attrs:{type:"submit"}},[e._v("Register")])]):e._e()])},Se=[],De={name:"CredentialsForm",props:["submitLoginCallback","submitRegisterCallback","cancelCallback"],data:function(){return{username:"",password:"",registered:!1}},computed:{showRegistration:function(){return!this.registered&&"function"===typeof this.submitRegisterCallback}},mounted:function(){c["a"].$on("modalClosed",this.cancelCallback)},destroyed:function(){c["a"].$off("modalClosed",this.cancelCallback)},methods:{submitLogin:function(e){var t=this;this.submitLoginCallback(this.username,this.password).then(function(e){t.$utils.isChildOfModal(t)&&c["a"].$emit("closeModal")}).catch(function(e){})},submitRegister:function(e){var t=this,a=this.$refs.registerPassword.value;this.submitRegisterCallback(a).then(function(e){t.registered=!0,t.username=e.user_id,t.password=a}).catch(function(e){})}}},$e=De,Pe=(a("9089"),Object(_["a"])($e,Ce,Se,!1,null,"f86ec576",null));Pe.options.__file="CredentialsForm.vue";var Ie=Pe.exports,Me={name:"Modal",components:{CredentialsForm:Ie,List:Ee,ObjectTree:L},data:function(){return{title:"",body:null,props:null,compname:null,shown:!1}},mounted:function(){c["a"].$on("showModal",this.showModal),c["a"].$on("showComponentModal",this.showComponentModal),c["a"].$on("closeModal",this.close)},methods:{show:function(){this.shown=!0},close:function(){this.shown=!1,c["a"].$emit("modalClosed")},possiblyClose:function(e){e.target==document.getElementById("modal")&&this.close()},initCommonModal:function(e){this.title=e,this.body=null,this.compname=null,this.props=null},initTextModal:function(e,t){this.initCommonModal(e),this.body=t},initComponentModal:function(e,t,a){this.initCommonModal(e),this.compname=t,this.props=a},showModal:function(e,t){"string"===typeof t?(this.initTextModal(e,body),this.show()):this.showComponentModal(e,"ObjectTree",{data:t})},showComponentModal:function(e,t,a){this.initComponentModal(e,t,a),this.show()}}},Te=Me,ke=(a("22d7"),Object(_["a"])(Te,_e,me,!1,null,null,null));ke.options.__file="Modal.vue";var je=ke.exports,xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DataTable",{ref:"table",attrs:{dataSource:e.dataSource,preprocessor:e.dataPreprocessor,columns:e.columns,id:"ProcessGraphPanel"},scopedSlots:e._u([{key:"toolbar",fn:function(t){return[a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.createUserProcessGraph(),expression:"openEO.Capabilities.createUserProcessGraph()"}],attrs:{title:"Add new process graph"},on:{click:e.addGraph}},[a("i",{staticClass:"fas fa-plus"}),e._v(" Add")]),a("button",{attrs:{title:"Refresh process graphs"},on:{click:function(t){e.updateData()}}},[a("i",{staticClass:"fas fa-sync-alt"})])]}},{key:"actions",fn:function(t){return[a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.userProcessGraphInfo(),expression:"openEO.Capabilities.userProcessGraphInfo()"}],attrs:{title:"Details"},on:{click:function(a){e.graphInfo(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-info"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.updateUserProcessGraph(),expression:"openEO.Capabilities.updateUserProcessGraph()"}],attrs:{title:"Edit"},on:{click:function(a){e.editGraph(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-edit"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.deleteUserProcessGraph(),expression:"openEO.Capabilities.deleteUserProcessGraph()"}],attrs:{title:"Delete"},on:{click:function(a){e.deleteGraph(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-trash"})])]}}])})},Ue=[],Le={name:"ProcessGraphPanel",props:["openEO","userId"],components:{DataTable:b},data:function(){return{columns:{id:{name:"ID",primaryKey:!0},actions:{name:"Actions",id:"id",filterable:!1}}}},created:function(){c["a"].$on("serverChanged",this.updateData)},watch:{userId:function(e,t){null!==e&&this.updateData()}},methods:{dataSource:function(){var e=this.openEO.Users.getObject(this.userId);return e.getProcessGraphs()},dataPreprocessor:function(e){return{id:e}},updateData:function(){this.$refs.table&&this.openEO.Capabilities.userProcessGraphs()&&("string"!==typeof this.userId&&"number"!==typeof this.userId?this.$refs.table.setNoData(401):this.$refs.table.retrieveData())},addGraph:function(){var e=this;c["a"].$emit("evalScript",function(t){var a=e.openEO.Users.getObject(e.userId);a.createProcessGraph(t.ProcessGraph).then(function(t){e.$refs.table.addData(t.process_graph_id),e.$utils.ok(e,"Process Graph saved!")}).catch(function(t){console.log(t),e.$utils.error(e,"Sorry, could not create a process graph.")})})},graphInfo:function(e){var t=this,a=this.openEO.Users.getObject(this.userId).getProcessGraphObject(e);a.get().then(function(t){c["a"].$emit("showModal","Process Graph: "+e,t)}).catch(function(e){return t.$utils.error(t,"Sorry, could not load process graph.")})},editGraph:function(e){var t=this;c["a"].$emit("evalScript",function(a){var i=t.openEO.Users.getObject(t.userId).getProcessGraphObject(e);i.replace(a.ProcessGraph).then(function(e){t.$utils.ok(t,"Process Graph updated!")}).catch(function(e){t.$utils.error(t,"Sorry, could not update the process graph.")})})},deleteGraph:function(e){var t=this,a=this.openEO.Users.getObject(this.userId).getProcessGraphObject(e);a.delete().then(function(a){t.$refs.table.removeData(e)}).catch(function(e){t.$utils.error(t,"Sorry, could not delete process graph.")})}}},Ae=Le,Ve=(a("316a"),Object(_["a"])(Ae,xe,Ue,!1,null,null,null));Ve.options.__file="ProcessGraphPanel.vue";var Ne=Ve.exports,Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DataTable",{ref:"table",attrs:{dataSource:e.dataSource,columns:e.columns,id:"ServicePanel"},scopedSlots:e._u([{key:"toolbar",fn:function(t){return[a("button",{attrs:{title:"Refresh services"},on:{click:function(t){e.updateData()}}},[a("i",{staticClass:"fas fa-sync-alt"})])]}},{key:"actions",fn:function(t){return[a("button",{attrs:{title:"View on map"},on:{click:function(a){e.viewService(t.row)}}},[a("i",{staticClass:"fas fa-map"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.serviceInfo(),expression:"openEO.Capabilities.serviceInfo()"}],attrs:{title:"Details"},on:{click:function(a){e.serviceInfo(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-info"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.updateService(),expression:"openEO.Capabilities.updateService()"}],attrs:{title:"Edit"},on:{click:function(a){e.editService(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-edit"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.deleteService(),expression:"openEO.Capabilities.deleteService()"}],attrs:{title:"Delete"},on:{click:function(a){e.deleteService(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-trash"})])]}}])})},Fe=[],Je={name:"ServicePanel",props:["openEO","userId"],components:{DataTable:b},data:function(){return{columns:{service_id:{name:"ID",primaryKey:!0},service_type:{name:"Type"},job_id:{name:"Job"},actions:{name:"Actions",filterable:!1,id:"service_id"}}}},created:function(){c["a"].$on("serverChanged",this.updateData),c["a"].$on("serviceCreated",this.serviceCreated)},watch:{userId:function(e,t){null!==e&&this.updateData()}},methods:{dataSource:function(){var e=this.openEO.Users.getObject(this.userId);return e.getServices()},updateData:function(){this.$refs.table&&this.openEO.Capabilities.createService()&&("string"!==typeof this.userId&&"number"!==typeof this.userId?this.$refs.table.setNoData(401):this.$refs.table.retrieveData())},serviceCreated:function(e){var t=this;this.$refs.table.addData(e);var a={buttons:[]};a.buttons.push({text:"View",action:function(){return t.viewService(e)}}),this.openEO.Capabilities.serviceInfo()&&a.buttons.push({text:"Details",action:function(){return t.serviceInfo(e.job_id)}}),this.openEO.Capabilities.updateService()&&a.buttons.push({text:"Edit",action:function(){return t.editService(e.job_id)}}),this.openEO.Capabilities.deleteService()&&a.buttons.push({text:"Delete",action:function(){return t.deleteService(e.job_id)}}),this.$snotify.confirm("Service created!",null,a)},serviceInfo:function(e){var t=this,a=this.openEO.Services.getObject(e);a.get().then(function(t){c["a"].$emit("showModal","Service: "+e,t)}).catch(function(e){t.$utils.error(t,"Sorry, could not load service information.")})},editService:function(e){this.openEO.Services.getObject(e);this.$utils.error(this,"Not implemented")},deleteService:function(e){var t=this,a=this.openEO.Services.getObject(e);a.delete().then(function(a){t.$refs.table.removeData(e),c["a"].$emit("removeWebService",e)}).catch(function(e){t.$utils.error(t,"Sorry, could not delete service.")})},viewService:function(e){this.$utils.info(this,"Requesting tiles from server. Please wait..."),c["a"].$emit("viewWebService",e),c["a"].$emit("showMapViewer")}}},Re=Je,Ke=(a("916f"),Object(_["a"])(Re,Be,Fe,!1,null,null,null));Ke.options.__file="ServicePanel.vue";var ze=Ke.exports,We=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"SourceEnvironment"}},[a("div",{staticClass:"sourceHeader"},[a("h3",[e._v("Script: "),a("em",{attrs:{id:"scriptName"}},[e._v(e._s(e.scriptName))])]),a("div",{staticClass:"sourceToolbar"},[e.openEO.Capabilities.executeJob()?a("button",{staticClass:"executeScript",attrs:{title:"Run current script and view results"},on:{click:e.executeScript}},[a("i",{staticClass:"fas fa-play"})]):e._e(),a("button",{attrs:{title:"Clear current script / New script"},on:{click:e.newScript}},[a("i",{staticClass:"fas fa-file"})]),a("button",{attrs:{title:"Load script from local storage"},on:{click:function(t){e.loadScript()}}},[a("i",{staticClass:"fas fa-folder-open"})]),a("button",{attrs:{title:"Save script to local storage"},on:{click:e.saveScript}},[a("i",{staticClass:"fas fa-save"})]),a("button",{attrs:{title:"Download script"},on:{click:e.downloadScript}},[a("i",{staticClass:"fas fa-download"})])])]),a("div",{attrs:{id:"sourceCodeEditor"}})])},Ge=[],qe=a("7ff7"),He=qe["a"],Ze=(a("be81"),Object(_["a"])(He,We,Ge,!1,null,"6d38e379",null));Ze.options.__file="SourceEnvironment.vue";var Ye=Ze.exports,Xe=a("bc3a"),Qe=a.n(Xe),et=a("e97b"),tt=(a("28a5"),{rampColors:{name:"Color ramp",callback:function(e,t){if(e[t.band]<t.valMin||e[t.band]>t.valMax)return[0,0,0,0];"string"===typeof t.clrMin&&(t.clrMin=t.clrMin.split(",")),"string"===typeof t.clrMax&&(t.clrMax=t.clrMax.split(","));var a=(e[t.band]-t.valMin)/(t.valMax-t.valMin);return t.clrMin.map(function(e,i){return a*t.clrMax[i]+(1-a)*e})},arguments:{band:{description:"The band to use",defaultValue:0},valMin:{description:"Minimum value of the band",defaultValue:0},valMax:{description:"Maximum value of the band",defaultValue:255},clrMin:{description:"Color for the minimum value",defaultValue:[240,220,150,255]},clrMax:{description:"Color for the maximum value",defaultValue:[10,70,230,255]}}},invertColors:{name:"Invert colors",callback:function(e,t){return e[0]=255-e[0],e[1]=255-e[1],e[2]=255-e[2],e[3]=e[3],e},arguments:{}}}),at=tt;window.axios=Qe.a,et["OpenEO"].Visualizations=at,et["OpenEO"].Capabilities=new et["Capabilities"],et["OpenEO"].SupportedOutputFormats={},et["OpenEO"].SupportedServices=[];var it={name:"openeo-web-editor",components:{AccountPanel:y,BackendPanel:P,DataViewer:B,ImageViewer:X,FilePanel:W,JobPanel:se,MapViewer:ve,Modal:je,ProcessGraphPanel:Ne,ServicePanel:ze,SourceEnvironment:Ye},data:function(){return{openEO:et["OpenEO"]}},created:function(){c["a"].$on("changeServerUrl",this.changeServer),c["a"].$on("serverChanged",this.serverChanged)},mounted:function(){"string"===typeof this.$config.serverUrl&&this.$config.serverUrl.length>0&&c["a"].$emit("changeServerUrl",this.$config.serverUrl),this.resetActiveTab("userContent"),c["a"].$on("showInViewer",this.showInViewer),c["a"].$on("showMapViewer",this.showMapViewer),c["a"].$on("showImageViewer",this.showImageViewer),c["a"].$on("showDataViewer",this.showDataViewer)},methods:{changeServer:function(e){this.openEO.Capabilities=new et["Capabilities"],this.openEO.SupportedOutputFormats={},this.openEO.SupportedServices=[],this.openEO.API.baseUrl=e,this.openEO.Auth.reset(),-1!==e.indexOf("/api")?this.openEO.API.driver="openeo-r-backend":this.openEO.API.driver="other",this.requestCapabilities()},serverChanged:function(){this.resetActiveTab("userContent")},requestCapabilities:function(){var e=this;this.openEO.API.getCapabilities().then(function(t){e.openEO.Capabilities=t,e.requestSupportedOutputFormats(),e.requestSupportedServices(),e.requestAuth()}).catch(function(t){console.log(t),e.$utils.error(e,"Sorry, server is not responding.")})},requestSupportedOutputFormats:function(){var e=this;this.openEO.Capabilities.outputFormatCapabilities()&&this.openEO.API.getOutputFormats().then(function(t){e.openEO.SupportedOutputFormats=t})},requestSupportedServices:function(){var e=this;this.openEO.Capabilities.serviceCapabilities()&&this.openEO.Services.getCapabilities().then(function(t){e.openEO.SupportedServices=t})},requestAuth:function(){var e=this;if(this.openEO.Capabilities.userLogin()){var t={submitLoginCallback:function(t,a){return e.openEO.Auth.login(t,a).then(function(t){return c["a"].$emit("serverChanged"),e.$utils.ok(e,"Login successful."),t}).catch(function(t){throw e.$utils.error(e,"Sorry, credentials are wrong."),t})},cancelCallback:function(){c["a"].$emit("serverChanged")}};this.openEO.Capabilities.userRegister()&&(t.submitRegisterCallback=function(t){return e.openEO.Auth.register(t).then(function(t){return e.$utils.ok(e,"Registration successful. Your new username is: "+t.user_id),t}).catch(function(t){throw e.$utils.error(e,"Sorry, registration failed. Try to choose another password."),t})}),c["a"].$emit("showComponentModal","Enter your credentials","CredentialsForm",t)}else this.openEO.Auth.userId="me",c["a"].$emit("serverChanged")},resetActiveTab:function(e){var t=document.getElementById(e).getElementsByClassName("tabItem")[0];this.showTab(e,t.name)},setTabActive:function(e){e.className&&-1!==e.className.indexOf(" tabActive")||(e.className+=" tabActive")},changeUserTab:function(e){this.changeTab("userContent",e)},changeViewerTab:function(e){this.changeTab("viewer",e)},changeTab:function(e,t){this.showTab(e,t.currentTarget.name)},showTab:function(e,t){for(var a=document.getElementById(e),i=a.getElementsByClassName("tabContent"),s=0;s<i.length;s++)i[s].className=i[s].className.replace(" tabActive",""),i[s].id==t&&this.setTabActive(i[s]);var r=a.getElementsByClassName("tabItem");for(s=0;s<r.length;s++)r[s].className=r[s].className.replace(" tabActive",""),r[s].name==t&&this.setTabActive(r[s])},showMapViewer:function(){this.showTab("viewer","mapTab")},showImageViewer:function(){this.showTab("viewer","imageTab")},showDataViewer:function(){this.showTab("viewer","dataTab")},showInViewer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!(e instanceof Blob))throw"No blob specified.";var i=e.type;switch(null===a||i&&-1!==i.indexOf("/")&&-1===i.indexOf("*")||(i=this.getMimeTypeForOutputFormat(a)),"string"===typeof i&&(i=i.toLowerCase()),i){case"image/png":case"image/jpg":case"image/jpeg":case"image/gif":t&&this.$refs.imageViewer.setScript(t),this.$refs.imageViewer.showImageBlob(e);break;case"application/json":case"text/plain":this.$refs.dataViewer.showBlob(e,i);break;case"image/tif":case"image/tiff":this.$refs.mapViewer.updateTiffLayerBlob(e);break;default:this.$utils.error(this,"Sorry, the returned content type is not supported to view.")}},getMimeTypeForOutputFormat:function(e){if(!e.format)return null;var t=e.format.toLowerCase();switch(t){case"png":case"jpeg":case"jpg":case"gif":return"image/"+t;case"tif":case"tiff":case"gtiff":return"image/tiff";case"json":return"application/json";default:return null}}}},st=it,rt=(a("c8c0"),Object(_["a"])(st,o,n,!1,null,null,null));rt.options.__file="Editor.vue";var ot=rt.exports,nt=a("f213"),ct=(a("fbfd"),{error:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.$snotify.error(t,a)},info:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.$snotify.info(t,a)},ok:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.$snotify.success(t,a)},downloadData:function(){var e=document.createElement("a");return document.body.appendChild(e),e.style="display: none",function(t,a,i){var s;t instanceof Blob?s=t:(i||(i="application/octet-stream"),s=new Blob([t],{type:i})),a||(a="unnamed-file");var r=window.URL.createObjectURL(s);e.href=r,e.download=a,e.click(),window.URL.revokeObjectURL(r)}}(),blobToText:function(e,t){var a=new FileReader;a.onload=t,a.readAsText(e)},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},recolorImage:function(e,t){if(e.originalImage&&t.Visualization&&t.Visualization.function)try{for(var a=e.getContext("2d"),i=a.getImageData(0,0,e.width,e.height),s=0;s<i.data.length;s+=4){var r=e.originalImage.data.slice(s,s+4),o=t.Visualization.function(r,t.Visualization.args);i.data.set(o,s)}a.putImageData(i,0,0)}catch(n){console.log(n)}},isChildOfModal:function(e){return e.$parent&&"Modal"==e.$parent.$options.name},getFileNameFromURL:function(e){return e=e.substring(0,-1==e.indexOf("#")?e.length:e.indexOf("#")),e=e.substring(0,-1==e.indexOf("?")?e.length:e.indexOf("?")),e=e.substring(e.lastIndexOf("/")+1,e.length),e},formatDateTime:function(e){if(!e)return"";var t=new Date(e);return t.toISOString().replace("T"," ").replace("Z","").substring(0,19)}});i["a"].use(nt["a"],{toast:{timeout:1e4}}),i["a"].prototype.$config=r.a,i["a"].prototype.$utils=ct,i["a"].config.productionTip=!1,i["a"].config.errorHandler=function(e,t,a){ct.error(t,e.message),console.log(e)},window.App=new i["a"]({render:function(e){return e(ot)}}).$mount("#app")},"5ebb":function(e,t,a){},6168:function(e,t,a){"use strict";var i=a("2b0e");t["a"]=new i["a"]},6224:function(e,t,a){"use strict";var i=a("468d"),s=a.n(i);s.a},"7ff7":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__),_home_travis_build_Open_EO_openeo_web_editor_node_modules_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("53ca"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("456d"),core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("cadf"),core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("551c"),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es7_promise_finally__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("097d"),core_js_modules_es7_promise_finally__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es7_promise_finally__WEBPACK_IMPORTED_MODULE_7__),_eventbus_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("6168"),codemirror_lib_codemirror_css__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("a7be"),codemirror_lib_codemirror_css__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(codemirror_lib_codemirror_css__WEBPACK_IMPORTED_MODULE_9__),codemirror_mode_javascript_javascript_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("f9d4"),codemirror_mode_javascript_javascript_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(codemirror_mode_javascript_javascript_js__WEBPACK_IMPORTED_MODULE_10__),codemirror__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("56b3"),codemirror__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(codemirror__WEBPACK_IMPORTED_MODULE_11__);__webpack_exports__["a"]={name:"SourceEnvironment",props:["openEO"],computed:{savedScriptNames:function(){return Object.keys(this.savedScripts)}},data:function(){return{scriptName:"",savedScripts:{},editorOptions:{mode:"javascript",indentUnit:4,lineNumbers:!0},editor:null,defaultScript:this.$config.defaultScript}},watch:{savedScripts:{handler:function(e,t){localStorage.setItem("savedScripts",JSON.stringify(e))},deep:!0}},mounted:function(){this.editor=codemirror__WEBPACK_IMPORTED_MODULE_11___default()(document.getElementById("sourceCodeEditor"),this.editorOptions),this.editor.setValue(this.defaultScript),_eventbus_js__WEBPACK_IMPORTED_MODULE_8__["a"].$on("addToSource",this.insertToEditor),_eventbus_js__WEBPACK_IMPORTED_MODULE_8__["a"].$on("evalScript",this.evalScript);var e=localStorage.getItem("savedScripts");null!==e&&(this.savedScripts=JSON.parse(e))},methods:{evalScript:function evalScript(callback){var OpenEO=this.openEO;OpenEO.Editor={ProcessGraph:{},Visualization:{function:void 0,args:{}}};var script=this.editor.getSelection();if(script||(script=this.editor.getValue()),script&&eval(script),OpenEO.Editor.Visualization.args=OpenEO.Editor.Visualization.args||{},"object"===Object(_home_travis_build_Open_EO_openeo_web_editor_node_modules_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_2__["a"])(OpenEO.Editor.Visualization.function)){var vis=OpenEO.Editor.Visualization.function;if(OpenEO.Editor.Visualization.function=vis.callback,"undefined"!==typeof vis.arguments)for(var key in vis.arguments)"undefined"===typeof OpenEO.Editor.Visualization.args[key]&&(OpenEO.Editor.Visualization.args[key]=vis.arguments[key].defaultValue)}callback(OpenEO.Editor)},clearEditor:function(){this.editor.setValue(""),this.scriptName=""},storageName:function(e){return e.replace(".","_")},executeScript:function(){var e=this,t=prompt("Please specify the file format:","");null!==t&&(this.$utils.info(this,"Data requested. Please wait..."),_eventbus_js__WEBPACK_IMPORTED_MODULE_8__["a"].$emit("evalScript",function(a){e.openEO.Jobs.executeSync(a.ProcessGraph,t).then(function(e){return _eventbus_js__WEBPACK_IMPORTED_MODULE_8__["a"].$emit("showInViewer",e,a,t)}).catch(function(t){return e.$utils.error(e,"Sorry, could not execute script.")})}))},newScript:function(){var e=confirm("Do you really want to clear the existing script to create a new one?");e&&this.clearEditor()},loadScript:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0!=t){var a=this.savedScripts[t];return a?(this.editor.setValue(a),this.scriptName=t,!0):(this.$utils.info(this,'No script with the name "'+t+'" found.'),!1)}_eventbus_js__WEBPACK_IMPORTED_MODULE_8__["a"].$emit("showComponentModal","Select script to load","List",{dataSource:function(){return e.savedScriptNames},actions:[{callback:this.loadScript,icon:"check",title:"Load script"},{callback:this.deleteScript,icon:"trash",title:"Delete script"}]})},saveScript:function(){var e=prompt("Name for the script:",this.scriptName);e&&(this.$set(this.savedScripts,this.storageName(e),this.editor.getValue()),this.scriptName=e)},downloadScript:function(){var e=this.scriptName;e||(e="openeo-script"),this.$utils.downloadData(this.editor.getValue(),e+".js","text/javascript")},deleteScript:function(e){this.$delete(this.savedScripts,e)},insertToEditor:function(e){this.editor.replaceSelection(e)}}}},9089:function(e,t,a){"use strict";var i=a("2944"),s=a.n(i);s.a},"916f":function(e,t,a){"use strict";var i=a("a36c"),s=a.n(i);s.a},9215:function(e,t,a){},9961:function(e,t,a){"use strict";var i=a("9215"),s=a.n(i);s.a},a09f:function(e,t,a){},a36c:function(e,t,a){},b52e:function(e,t,a){},b92f:function(e,t,a){"use strict";var i=a("f1cd"),s=a.n(i);s.a},bb7b:function(e,t,a){"use strict";var i=a("05f9"),s=a.n(i);s.a},be81:function(e,t,a){"use strict";var i=a("f02f"),s=a.n(i);s.a},c8c0:function(e,t,a){"use strict";var i=a("1999"),s=a.n(i);s.a},cf05:function(e,t,a){e.exports=a.p+"img/logo.637896da.png"},db49:function(e,t){e.exports={clientPath:"/",devPort:80,serverUrl:"",allowServerChange:!0,defaultScript:""}},e01b:function(e,t,a){"use strict";var i=a("fe40"),s=a.n(i);s.a},f02f:function(e,t,a){},f1cd:function(e,t,a){},fe40:function(e,t,a){}});
//# sourceMappingURL=app.8b95199d.js.map