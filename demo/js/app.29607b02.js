(function(e){function t(t){for(var i,n,o=t[0],l=t[1],c=t[2],d=0,h=[];d<o.length;d++)n=o[d],r[n]&&h.push(r[n][0]),r[n]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(h.length)h.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],i=!0,o=1;o<s.length;o++){var l=s[o];0!==r[l]&&(i=!1)}i&&(a.splice(t--,1),e=n(n.s=s[0]))}return e}var i={},r={app:0},a=[];function n(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=i,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/openeo-web-editor/demo/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"025e":function(e,t,s){"use strict";s("4917"),s("386d"),s("a481"),s("7f7f");var i=s("a1bc"),r=s("fbda"),a=s("2f62");t["a"]={exception:function(e,t,s){console.error(t);var i=null,r=s;this.isObject(t)&&"string"===typeof t.message?(i=t.code>0?"Error #"+t.code:s,r=t.message):"string"===typeof t&&(r=t,i=s),this.error(e,r,i)},error:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.$snotify.error(t,s,i["a"].snotifyDefaults)},info:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.$snotify.info(t,s,i["a"].snotifyDefaults)},ok:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r={timeout:2e3};e.$snotify.success(t,s,Object.assign({},i["a"].snotifyDefaults,r))},confirm:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={timeout:1e4,closeOnClick:!1,buttons:s};e.$snotify.confirm(t,null,Object.assign({},i["a"].snotifyDefaults,r))},blobToText:function(e,t){var s=new FileReader;s.onload=t,s.readAsText(e)},isChildOfModal:function(e){return e.$parent&&"Modal"==e.$parent.$options.name},getFileNameFromURL:function(e){return e=e.substring(0,-1==e.indexOf("#")?e.length:e.indexOf("#")),e=e.substring(0,-1==e.indexOf("?")?e.length:e.indexOf("?")),e=e.substring(e.lastIndexOf("/")+1,e.length),e},formatDateTime:function(e){if(!e)return"";var t=new Date(e);return t.toISOString().replace("T"," ").replace("Z","").substring(0,19)},getMimeTypeForOutputFormat:function(e){if(!e.format)return null;var t=e.format.toLowerCase();switch(t){case"png":case"jpeg":case"jpg":case"gif":return"image/"+t;case"tif":case"tiff":case"gtiff":return"image/tiff";case"json":return"application/json";default:return null}},param:function(e){var t=new URLSearchParams(window.location.search);return t.get(e)},isUrl:function(e){return"string"===typeof e&&e.length>0&&null!==e.match(/^https?:\/\//i)},isObject:function(e){return r["Utils"].isObject(e)},size:function(e){return r["Utils"].size(e)},domBoundingBox:function(e){var t=e.getBoundingClientRect();return t.offsetTop=t.top+document.body.scrollTop,t.offsetLeft=t.left+document.body.scrollLeft,t},mapState:a["e"],mapGetters:a["c"],mapMutations:a["d"],mapActions:a["b"]}},"0791":function(e,t,s){"use strict";var i=s("22f1"),r=s.n(i);r.a},"0b46":function(e,t,s){},"0cff":function(e,t,s){"use strict";var i=s("1634"),r=s.n(i);r.a},"0df61":function(e,t,s){"use strict";var i=s("10b5"),r=s.n(i);r.a},"10b5":function(e,t,s){},1190:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sourceHeader"},[e.scriptName?s("h3",[e._v(e._s(e.scriptName))]):e._e(),s("div",{staticClass:"sourceToolbar"},[e._t("default"),e.enableLocalStorage||e.enableClear?s("span",{staticClass:"sepl"},[e.enableClear&&e.editable?s("button",{attrs:{type:"button",title:"Clear current script / New script"},on:{click:e.newScript}},[s("i",{staticClass:"fas fa-file"})]):e._e(),e.enableLocalStorage&&e.editable?s("button",{attrs:{type:"button",title:"Load script from local storage"},on:{click:e.openScriptChooser}},[s("i",{staticClass:"fas fa-folder-open"})]):e._e(),e.enableLocalStorage?s("button",{attrs:{type:"button",title:"Save script to local storage"},on:{click:e.saveScript}},[s("i",{staticClass:"fas fa-save"})]):e._e()]):e._e(),e.enableExecute&&e.supports("computeResult")?s("button",{staticClass:"sepl",attrs:{type:"button",title:"Run current process graph and view results"},on:{click:e.executeProcessGraph}},[s("i",{staticClass:"fas fa-play"})]):e._e()],2)])},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("bd86")),n=s("6168"),o=s("025e");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(s,!0).forEach(function(t){Object(a["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var u={name:"EditorToolbar",props:{editable:{type:Boolean,default:!0},onClear:{type:Function,required:!0},onInsert:{type:Function,required:!0},onStore:{type:Function,required:!0},enableClear:{type:Boolean,default:!0},enableLocalStorage:{type:Boolean,default:!0},enableExecute:{type:Boolean,default:!0}},computed:c({},o["a"].mapState("server",["connection"]),{},o["a"].mapState("editor",["storedScripts","scriptName"]),{},o["a"].mapGetters("server",["supports"])),methods:c({},o["a"].mapMutations("editor",["addScript","removeScript","setScriptName"]),{newScript:function(){var e=confirm("Do you really want to clear the existing script to create a new one?");e&&(this.onClear(),this.setScriptName(null))},loadScript:function(e){var t=this.storedScripts[e];return t?(this.onInsert(t),this.setScriptName(e),!0):(o["a"].info(this,'No script with the name "'+e+'" found.'),!1)},openScriptChooser:function(){var e=this;n["a"].$emit("showListModal","Select script to load",this.storedScripts,[{callback:function(t){return e.loadScript(t)}},{callback:function(t){return e.removeScript(t)},icon:"trash",title:"Delete script"}])},saveScript:function(){var e=this,t=prompt("Name for the script:","string"===typeof this.scriptName?this.scriptName:"");t&&this.onStore(function(s){e.addScript({name:t,script:s}),e.setScriptName(t)})},executeProcessGraph:function(){var e=this;n["a"].$emit("getProcessGraph",function(t){o["a"].info(e,"Data requested. Please wait..."),e.connection.computeResult(t).then(function(e){return n["a"].$emit("showInViewer",e)}).catch(function(t){return o["a"].exception(e,t,"Computation failed")})})}})},d=u,h=(s("f196"),s("2877")),p=Object(h["a"])(d,i,r,!1,null,null,null);t["a"]=p.exports},"149e":function(e,t,s){},"14c0":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{ref:"__modal",attrs:{minWidth:"60%",maxWidth:"90%"},scopedSlots:e._u([{key:"main",fn:function(){return[0===e.editableFields.length?s("p",[e._v("No editable parameters available.")]):s("form",{attrs:{id:"parameterModal"},on:{submit:function(t){return t.preventDefault(),e.save(t)}}},e._l(e.editableFields,function(t,i){return s("div",{key:i,staticClass:"fieldRow"},[s("label",[e._v("\n\t\t\t\t\t"+e._s(t.label)),t.isRequired?s("strong",{staticClass:"required",attrs:{title:"required"}},[e._v("*")]):e._e(),t.description?s("div",{staticClass:"description"},[s("Description",{attrs:{description:t.description}})],1):e._e()]),s("ParameterFields",{ref:t.name,refInFor:!0,attrs:{editable:e.editable,field:t,pass:t.getValue(),processId:e.processId}})],1)}),0)]},proxy:!0},"function"===typeof this.saveCallback?{key:"footer",fn:function(){return[s("div",{staticClass:"footer"},[s("button",{staticClass:"save",on:{click:e.save}},[e._v("Save")])])]},proxy:!0}:null],null,!0)})},r=[],a=s("025e"),n=s("714b"),o=s("8088"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return null!==e.type?s("div",{staticClass:"fieldContainer"},[e.field.schemas.length>1?s("div",{staticClass:"dataTypeChooser"},[e._v("\n\t\tData type:\n\t\t"),s("select",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{name:"dataType",disabled:!e.editable},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.type=t.target.multiple?s:s[0]}}},e._l(e.field.schemas,function(t,i){return s("option",{key:i,domProps:{value:i}},[e._v(e._s(t.title()))])}),0),e.field.schemas[e.type].description()?s("div",{staticClass:"description"},[s("i",{staticClass:"fas fa-info-circle"}),e._v(" "+e._s(e.field.schemas[e.type].description())+"\n\t\t")]):e._e()]):e._e(),s("ParameterField",{ref:"field",attrs:{editable:e.editable,field:e.field,schema:e.field.schemas[e.type],pass:e.pass,processId:e.processId}})],1):e._e()},c=[],u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fieldEditorContainer"},[e.isResult?[s("div",{staticClass:"fieldValue externalData fromNode"},[s("span",[e._v("Output of "),s("tt",[e._v("#"+e._s(e.value.from_node))])],1)]),e.isArray?s("button",{attrs:{type:"button"},on:{click:function(t){return e.convertToArray()}}},[s("i",{staticClass:"fas fa-list"}),e._v(" Convert to Array")]):e._e()]:e.isCallbackArgument?[s("div",{staticClass:"fieldValue externalData fromArgument"},[s("span",[e._v("Value of callback argument "),s("tt",[e._v(e._s(e.value.from_argument))])],1)]),e.isArray?s("button",{attrs:{type:"button"},on:{click:function(t){return e.convertToArray()}}},[s("i",{staticClass:"fas fa-list"}),e._v(" Convert to array")]):e._e()]:e.schema.isEnum()?s("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"selectFirst",staticClass:"fieldValue",attrs:{name:e.fieldName,disabled:!e.editable},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.value=t.target.multiple?s:s[0]}}},e._l(e.schema.getEnumChoices(),function(t,i){return s("option",{key:i,domProps:{value:t}},[e._v(e._s(t))])}),0):"collection-id"===e.type?s("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"selectFirst",staticClass:"fieldValue",attrs:{name:e.fieldName,disabled:!e.editable},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.value=t.target.multiple?s:s[0]}}},e._l(e.collections,function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.id))])}),0):"output-format"===e.type?s("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"selectFirst",staticClass:"fieldValue",attrs:{name:e.fieldName,disabled:!e.editable},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.value=t.target.multiple?s:s[0]}}},e._l(e.outputFormats,function(t,i){return s("option",{key:i,domProps:{value:i.toUpperCase()}},[e._v(e._s(i.toUpperCase()))])}),0):"service-type"===e.type?s("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"selectFirst",staticClass:"fieldValue",attrs:{name:e.fieldName,disabled:!e.editable},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.value=t.target.multiple?s:s[0]}}},e._l(e.serviceTypes,function(t,i){return s("option",{key:i,domProps:{value:i.toUpperCase()}},[e._v(e._s(i.toUpperCase()))])}),0):"billing-plan"===e.type?s("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"selectFirst",staticClass:"fieldValue",attrs:{name:e.fieldName,disabled:!e.editable},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.value=t.target.multiple?s:s[0]}}},e._l(e.capabilities.listPlans(),function(t){return s("option",{key:t.name,domProps:{value:t.name}},[e._v(e._s(t.name)+" ("+e._s(t.paid?"paid":"free")+")")])}),0):"temporal-interval"===e.type?[s("VueCtkDateTimePicker",{attrs:{disabled:!e.editable,range:!0,label:"Select start and end time",format:"YYYY-MM-DD[T]HH:mm:ss[Z]"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]:"date-time"===e.type?[s("VueCtkDateTimePicker",{attrs:{disabled:!e.editable,label:"Select date and time",format:"YYYY-MM-DD[T]HH:mm:ss[Z]","no-button":"true"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]:"date"===e.type?[s("VueCtkDateTimePicker",{attrs:{disabled:!e.editable,label:"Select date","only-date":"true",format:"YYYY-MM-DD","no-button":"true"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]:"time"===e.type?[s("VueCtkDateTimePicker",{attrs:{disabled:!e.editable,label:"Select time","only-time":"true",format:"HH:mm:ss[Z]","no-button":"true"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]:"bounding-box"===e.type?[s("div",{staticClass:"areaSelector",attrs:{id:e.fieldName}})]:"callback"===e.type?s("div",{staticClass:"border"},[s("VisualEditor",{ref:"callbackBuilder",staticClass:"callbackEditor",attrs:{id:"inlinePgEditor",editable:e.editable,callbackArguments:e.schema.getCallbackParameters(),value:e.value,enableExecute:!1,enableLocalStorage:!1}})],1):"null"===e.type?[e._v("\n\t\tThe field will be set to "),s("strong",[s("tt",[e._v("null")])],1),e._v(".\n\t")]:e.isArray?s("div",{staticClass:"arrayEditor"},[s("draggable",{model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[s("transition-group",{attrs:{name:"arrayElements"}},e._l(e.value,function(t,i){return s("div",{key:t.id,staticClass:"fieldValue arrayElement"},[s("ParameterField",{ref:t.id,refInFor:!0,attrs:{editable:e.editable,field:e.field,schema:e.schema,pass:t.value,isItem:!0}}),e.editable?s("button",{staticClass:"arrayElementDelete",attrs:{type:"button"},on:{click:function(t){return e.removeField(i)}}},[s("i",{staticClass:"fas fa-trash"})]):e._e(),e.editable?s("div",{staticClass:"mover"},[s("i",{staticClass:"fas fa-arrows-alt"})]):e._e()],1)}),0)],1),e.editable?s("button",{attrs:{type:"button"},on:{click:function(t){return e.addField()}}},[s("i",{staticClass:"fas fa-plus"}),e._v(" Add")]):e._e()],1):"budget"===e.type?[s("input",{directives:[{name:"model",rawName:"v-model",value:e.hasBudget,expression:"hasBudget"}],attrs:{type:"checkbox",value:"1"},domProps:{checked:Array.isArray(e.hasBudget)?e._i(e.hasBudget,"1")>-1:e.hasBudget},on:{change:function(t){var s=e.hasBudget,i=t.target,r=!!i.checked;if(Array.isArray(s)){var a="1",n=e._i(s,a);i.checked?n<0&&(e.hasBudget=s.concat([a])):n>-1&&(e.hasBudget=s.slice(0,n).concat(s.slice(n+1)))}else e.hasBudget=r}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"number",min:"0.00",step:"0.01",disabled:!e.hasBudget||!e.editable,name:e.fieldName},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),e._v(" "+e._s(e.capabilities.currency())+"\n\t\t")]:e.useTextarea?s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"fieldValue textarea",attrs:{name:e.fieldName,disabled:!e.editable},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}):"boolean"===e.type?s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"fieldValue",attrs:{type:"checkbox",name:e.fieldName,disabled:!e.editable},domProps:{checked:!!e.value,checked:Array.isArray(e.value)?e._i(e.value,null)>-1:e.value},on:{change:function(t){var s=e.value,i=t.target,r=!!i.checked;if(Array.isArray(s)){var a=null,n=e._i(s,a);i.checked?n<0&&(e.value=s.concat([a])):n>-1&&(e.value=s.slice(0,n).concat(s.slice(n+1)))}else e.value=r}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"fieldValue",attrs:{type:"text",name:e.fieldName,disabled:!e.editable},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})],2)},d=[],h=(s("8e6e"),s("04ff"),s("ee1d"),s("c5f6"),s("5df2"),s("7618")),p=(s("ac6a"),s("456d"),s("7f7f"),s("bd86")),f=s("310e"),v=s.n(f),m=s("e30a"),b=s.n(m),g=(s("b40d"),s("6cc5"),s("e11e")),y=s.n(g);L.AreaSelect=L.Evented.extend({includes:L.Evented,options:{width:300,height:200,enabled:!0},initialize:function(e){L.Util.setOptions(this,e),this._width=this.options.width,this._height=this.options.height},addTo:function(e){return this.map=e,this._createElements(),this._render(),this},setBounds:function(e){this.map.fitBounds(e);var t=this.map.latLngToContainerPoint(e.getSouthWest()),s=this.map.latLngToContainerPoint(e.getNorthEast());this.setDimensions({width:Math.abs(t.x-s.x),height:Math.abs(t.y-s.y)})},getBounds:function(){var e=this.map.getSize(),t=new L.Point,s=new L.Point;s.x=Math.round((e.x-this._width)/2),t.y=Math.round((e.y-this._height)/2),t.x=e.x-s.x,s.y=e.y-t.y;var i=this.map.containerPointToLatLng(s),r=this.map.containerPointToLatLng(t);return new L.LatLngBounds(i,r)},remove:function(){this.map.off("moveend",this._onMapChange),this.map.off("zoomend",this._onMapChange),this.map.off("resize",this._onMapResize),this._container.parentNode.removeChild(this._container)},setDimensions:function(e){e&&(this._height=parseInt(e.height)||this._height,this._width=parseInt(e.width)||this._width,this._render(),this.fire("change"))},_createElements:function(){this._container||(this._container=L.DomUtil.create("div","leaflet-areaselect-container",this.map._controlContainer),this._topShade=L.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._bottomShade=L.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._leftShade=L.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._rightShade=L.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this.options.editable&&(this._nwHandle=L.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._swHandle=L.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._neHandle=L.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._seHandle=L.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._setUpHandlerEvents(this._nwHandle),this._setUpHandlerEvents(this._neHandle,-1,1),this._setUpHandlerEvents(this._swHandle,1,-1),this._setUpHandlerEvents(this._seHandle,-1,-1),this.map.on("moveend",this._onMapChange,this),this.map.on("zoomend",this._onMapChange,this),this.map.on("resize",this._onMapResize,this)),this.fire("change"))},_setUpHandlerEvents:function(e,t,s){t=t||1,s=s||1;var i=this;function r(a){a.stopPropagation(),i.map.dragging.disable(),L.DomEvent.removeListener(this,"mousedown",r);var n=a.pageX,o=a.pageY,l=i.map.getSize();function c(e){i._width+=2*(n-e.originalEvent.pageX)*t,i._height+=2*(o-e.originalEvent.pageY)*s,i._width=Math.max(30,i._width),i._height=Math.max(30,i._height),i._width=Math.min(l.x-30,i._width),i._height=Math.min(l.y-30,i._height),n=e.originalEvent.pageX,o=e.originalEvent.pageY,i._render()}function u(t){i.map.dragging.enable(),L.DomEvent.removeListener(i.map,"mouseup",u),L.DomEvent.removeListener(i.map,"mousemove",c),L.DomEvent.addListener(e,"mousedown",r),i.fire("change")}L.DomEvent.addListener(i.map,"mousemove",c),L.DomEvent.addListener(i.map,"mouseup",u)}L.DomEvent.addListener(e,"mousedown",r)},_onMapResize:function(){this._render()},_onMapChange:function(){this.fire("change")},_render:function(){var e=this.map.getSize(),t=Math.round((e.y-this._height)/2),s=Math.round((e.x-this._width)/2);function i(e,t){e.style.width=t.width+"px",e.style.height=t.height+"px",e.style.top=t.top+"px",e.style.left=t.left+"px",e.style.bottom=t.bottom+"px",e.style.right=t.right+"px"}if(i(this._topShade,{width:e.x,height:t,top:0,left:0}),i(this._bottomShade,{width:e.x,height:t,bottom:0,left:0}),i(this._leftShade,{width:s,height:e.y-2*t,top:t,left:0}),i(this._rightShade,{width:s,height:e.y-2*t,top:t,right:0}),this.options.editable){var r=Math.round(this._nwHandle.offsetWidth/2);i(this._nwHandle,{left:s-r,top:t-7}),i(this._neHandle,{right:s-r,top:t-7}),i(this._swHandle,{left:s-r,bottom:t-7}),i(this._seHandle,{right:s-r,bottom:t-7})}}}),L.areaSelect=function(e){return new L.AreaSelect(e)};L.areaSelect,s("39fd");var w=s("fbda");function k(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function C(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?k(s,!0).forEach(function(t){Object(p["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):k(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var S={name:"ParameterField",components:{draggable:v.a,VisualEditor:function(){return Promise.resolve().then(s.bind(null,"8c66"))},VueCtkDateTimePicker:b.a},props:{field:Object,editable:{type:Boolean,default:!0},schema:Object,pass:{},processId:String,isItem:{type:Boolean,default:!1}},data:function(){return{value:null,hasBudget:!1}},computed:C({},a["a"].mapState("server",["collections","outputFormats","serviceTypes"]),{},a["a"].mapGetters("server",["capabilities","processRegistry"]),{type:function(){return this.isItem?this.schema.arrayOf():this.schema.dataType()},useTextarea:function(){return"geojson"===this.type||"proj-definition"===this.type||"output-format-options"===this.type||"service-type-parameters"===this.type||"process-graph-variables"===this.type||"commonmark"===this.type},fieldName:function(){return this.field.name+(Array.isArray(this.field.value)?"[]":"")},isResult:function(){return a["a"].isObject(this.value)&&this.value.from_node},isCallbackArgument:function(){return a["a"].isObject(this.value)&&this.value.from_argument},isArray:function(){return"array"===this.type||"temporal-intervals"===this.type}}),watch:{schema:function(){this.$nextTick(this.initView)}},created:function(){this.value=this.initValue()},mounted:function(){this.$nextTick(this.initView)},methods:{initView:function(){var e=this;if("bounding-box"===this.type){var t=new y.a.Map(this.fieldName,{zoomControl:this.editable}),s=y.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{name:"OpenStreetMap",attribution:'Map data &copy; <a href="http://www.osm.org">OpenStreetMap</a>'});s.addTo(t);var i=y.a.areaSelect({editable:this.editable});i.addTo(t),a["a"].isObject(this.value)&&Object.keys(this.value).length>=4?(this.value=y.a.latLngBounds(y.a.latLng(this.value.south,this.value.west),y.a.latLng(this.value.north,this.value.east)),i.setBounds(this.value)):(t.setView([0,0],1),this.value=i.getBounds()),i.on("change",function(){e.value=i.getBounds()}),this.editable||(t.touchZoom.disable(),t.doubleClickZoom.disable(),t.scrollWheelZoom.disable(),t.boxZoom.disable(),t.keyboard.disable(),t.dragging.disable())}this.$refs.selectFirst&&0===this.$refs.selectFirst.selectedOptions.length&&(this.$refs.selectFirst.selectedIndex=0,this.value=this.$refs.selectFirst.value)},initValue:function(){var e;if(a["a"].isObject(this.$props.pass)&&(this.$props.pass.from_argument||this.$props.pass.from_node))e=this.$props.pass;else if("temporal-interval"===this.type)e=Array.isArray(this.$props.pass)&&this.$props.pass.length>=2?{start:this.$props.pass[0],end:this.$props.pass[1]}:"";else if("output-format"===this.type||"service-type"===this.type)e="string"===typeof this.$props.pass?this.$props.pass.toUpperCase():this.$props.pass;else if("callback"===this.type)e=a["a"].isObject(this.$props.pass)&&this.$props.pass.callback?this.$props.pass.callback:null;else if("billing-plan"===this.type){var t=this.capabilities.listPlans().filter(function(e){return e.default});1===t.length&&(e=t[0].name)}else"budget"===this.type?(e=this.$props.pass,this.hasBudget="number"===typeof e):e=this.isArray?this.initArray(this.$props.pass):this.useTextarea&&"object"===Object(h["a"])(this.$props.pass)?"object"===Object(h["a"])(this.$props.pass)&&null!==this.$props.pass?JSON.stringify(this.$props.pass,null,2):"":this.$props.pass;return e},getValue:function(){if(this.isCallbackArgument||this.isResult)return this.value;if("temporal-interval"===this.type)return[this.value.start,this.value.end];if("callback"===this.type){var e=this.$refs.callbackBuilder.makeProcessGraph(),t=new w["ProcessGraph"](e,this.processRegistry);return t.setParent(this.processId,this.field.name),t.parse(),{callback:t}}if("bounding-box"===this.type)return{west:+this.value.getWest().toFixed(6),south:+this.value.getSouth().toFixed(6),east:+this.value.getEast().toFixed(6),north:+this.value.getNorth().toFixed(6)};if(this.isArray){var s=[];for(var i in this.value){var r=this.value[i].id;s.push(this.$refs[r][0].getValue())}return s}if("number"===this.type||"budget"===this.type){var a=Number.parseFloat(this.value);return Number.isNaN(a)?null:a}if("integer"===this.type){a=Number.parseInt(this.value);return Number.isNaN(a)?null:a}if("null"===this.type)return null;if(this.useTextarea)return"string"===typeof this.value&&this.value.length>0?"object"===Object(h["a"])(this.$props.pass)&&null!==this.$props.pass?JSON.parse(this.value):this.value:null;if("any"===this.type||"mixed"===this.type){a=Number(this.value);return Number.isNaN(a)?this.value:a}return this.value},initArray:function(e){var t=[];if(Array.isArray(e))for(var s in e)t.push({id:"arrayElement"+s,value:e[s]});return t},convertToArray:function(){this.value=this.initArray([this.value])},addField:function(){return Array.isArray(this.value)||(this.value=[]),this.value.push({id:this.value.length,value:null}),!1},removeField:function(e){return this.value.splice(e,1),!1}}},_=S,P=(s("e6ae"),s("a1c8"),s("2877")),O=Object(P["a"])(_,u,d,!1,null,"82f085a8",null),x=O.exports,D={name:"ParameterFields",components:{ParameterField:x},props:{field:Object,editable:{type:Boolean,default:!0},processId:String,pass:{}},data:function(){return{type:null}},created:function(){var e=this;this.field.schemas.length>1?w["JsonSchemaValidator"].getTypeForValue(this.field.schemas.map(function(e){return e.schema}),this.pass).then(function(t){"undefined"===typeof t?e.guessType():Array.isArray(t)?(Utils.info("Data type can't be detected, please select it yourself."),console.warn("Parameter schema is ambiguous. Potential types: "+t.join(", ")+". Value: "+JSON.stringify(e.pass)),e.type=t[0]):e.type=t}).catch(function(t){return e.guessType()}):this.type=0},methods:{guessType:function(){for(var e in this.field.schemas)if(this.field.schemas[e].isNull())return void(this.type=e);this.type=0},getValue:function(){return this.$refs.field.getValue()}}},j=D,E=(s("6303"),Object(P["a"])(j,l,c,!1,null,"eb0c98e6",null)),T=E.exports,M={name:"ParameterModal",components:{Modal:n["a"],Description:o["a"],ParameterFields:T},data:function(){return{editableFields:[],editable:!0,saveCallback:null,processId:null}},methods:{save:function(){try{if("function"===typeof this.saveCallback){var e={};for(var t in this.$refs)Array.isArray(this.$refs[t])&&this.$refs[t].length>0&&a["a"].isObject(this.$refs[t][0])&&"function"==typeof this.$refs[t][0].getValue&&(e[t]=this.$refs[t][0].getValue());this.saveCallback(e)}this.$refs.__modal.close()}catch(s){a["a"].exception(this,s)}},show:function(e,t){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.editableFields=t,this.editable=s,this.saveCallback=i,this.processId=a,this.$refs.__modal.show(e,r)}}},F=M,A=(s("0cff"),s("e0b0"),Object(P["a"])(F,i,r,!1,null,"ba3f9cec",null));t["a"]=A.exports},1634:function(e,t,s){},1887:function(e,t,s){},"1e17":function(e,t,s){"use strict";var i=s("483a"),r=s.n(i);r.a},"22d7":function(e,t,s){"use strict";var i=s("b52e"),r=s.n(i);r.a},"22f1":function(e,t,s){},"2bd0":function(e,t,s){"use strict";var i=s("bfcb"),r=s.n(i);r.a},"352f":function(e,t,s){"use strict";var i=s("82a7"),r=s.n(i);r.a},"39fd":function(e,t,s){},"3b8b":function(e,t,s){"use strict";var i=s("420f"),r=s.n(i);r.a},"420f":function(e,t,s){},"468d":function(e,t,s){},"47b0":function(e,t,s){"use strict";var i=s("a6a9"),r=s.n(i);r.a},"483a":function(e,t,s){},"4ab7":function(e,t,s){},"4d98":function(e,t,s){"use strict";var i=s("7b23"),r=s.n(i);r.a},"4fbe":function(e,t,s){},"50ae":function(e,t,s){"use strict";var i=s("c278"),r=s.n(i);r.a},5117:function(e,t,s){"use strict";var i=s("5740"),r=s.n(i);r.a},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var i=s("2b0e"),r=s("f213"),a=(s("fbfd"),s("2f62")),n=(s("55dd"),s("ac6a"),s("5df3"),s("7f7f"),s("96cf"),s("3b8d")),o=s("e97b"),l=s("fbda"),c=function(){return{connection:null,requireAuthentication:!0,userId:null,connectionError:null,discoveryErrors:[],outputFormats:{},serviceTypes:{},processes:[],collections:[]}},u={namespaced:!0,state:c(),getters:{capabilities:function(e){return null!==e.connection?e.connection.capabilities():null},supports:function(e){return function(t){return null!==e.connection&&null!==e.connection.capabilities()&&e.connection.capabilities().hasFeature(t)}},formatCurrency:function(e){return function(t){var s="";return e.connection&&null!==e.connection.capabilities().currency()&&(s=" "+e.connection.capabilities().currency()),t+s}},isConnected:function(e){return null!==e.connection&&(!e.requireAuthentication||null!==e.userId)},processRegistry:function(e){var t=new l["ProcessRegistry"];for(var s in e.processes)t.add(e.processes[s]);return t},supportsBilling:function(e){return null!==e.connection&&null!==e.connection.capabilities().currency()},supportsBillingPlans:function(e){return null!==e.connection&&null!==e.connection.capabilities().currency()&&e.connection.capabilities().listPlans().length>0}},actions:{connect:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,s){var i,r,a,n,l,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=t.commit,r=s.url,a=s.requireAuthentication,i("reset"),e.prev=3,e.next=6,o["OpenEO"].connect(r);case 6:n=e.sent,i("connection",n),e.next=15;break;case 10:return e.prev=10,e.t0=e["catch"](3),"Network Error"!=e.t0.message&&"NetworkError"!=e.t0.name||(e.t0=new Error("Server is not available.")),i("setConnectionError",e.t0),e.abrupt("return",!1);case 15:return l=[],c=n.capabilities(),c.hasFeature("listCollections")?l.push(n.listCollections().then(function(e){return i("collections",e)}).catch(function(e){return i("addDiscoveryError",e)})):i("addDiscoveryError",new Error("Collections not supported by the back-end.")),c.hasFeature("listProcesses")?l.push(n.listProcesses().then(function(e){return i("processes",e)}).catch(function(e){return i("addDiscoveryError",e)})):i("addDiscoveryError",new Error("Processes not supported by the back-end.")),c.hasFeature("listFileTypes")&&l.push(n.listFileTypes().then(function(e){return i("outputFormats",e)}).catch(function(e){return i("addDiscoveryError",e)})),c.hasFeature("listServiceTypes")&&l.push(n.listServiceTypes().then(function(e){return i("serviceTypes",e)}).catch(function(e){return i("addDiscoveryError",e)})),e.next=23,Promise.all(l);case 23:return i("requireAuthentication",a),e.abrupt("return",!0);case 25:case"end":return e.stop()}},e,null,[[3,10]])}));function t(t,s){return e.apply(this,arguments)}return t}(),authenticateBasic:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,s){var i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=s.username,r=s.password,!t.getters.supports("authenticateBasic")){e.next=7;break}return e.next=4,t.state.connection.authenticateBasic(i,r);case 4:t.commit("userId",t.state.connection.getUserId()),e.next=8;break;case 7:throw"Sorry, Basic authentication is not supported.";case 8:case"end":return e.stop()}},e)}));function t(t,s){return e.apply(this,arguments)}return t}()},mutations:{requireAuthentication:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.requireAuthentication=t},connection:function(e,t){e.connection=t},userId:function(e,t){e.userId=t},outputFormats:function(e,t){e.outputFormats=t},serviceTypes:function(e,t){e.serviceTypes=t},processes:function(e,t){var s=[];for(var i in t.processes)"undefined"!==typeof t.processes[i].id&&s.push(t.processes[i]);s.sort(function(e,t){return e.id.localeCompare(t.id)}),e.processes=s},collections:function(e,t){var s=[];for(var i in t.collections)"undefined"!==typeof t.collections[i].id&&s.push(t.collections[i]);s.sort(function(e,t){return e.id.localeCompare(t.id)}),e.collections=s},setConnectionError:function(e,t){e.connectionError=t},addDiscoveryError:function(e,t){e.discoveryErrors.push(t)},reset:function(e){Object.assign(e,c())}}},d="serverUrls",h="savedScripts",p={namespaced:!0,state:{storedServers:JSON.parse(localStorage.getItem(d)||"[]"),storedScripts:JSON.parse(localStorage.getItem(h)||"{}"),scriptName:null},getters:{getScriptByName:function(e){return function(t){return e.storedScripts[t]}}},actions:{},mutations:{addServer:function(e,t){-1===e.storedServers.indexOf(t)&&e.storedServers.push(t),localStorage.setItem(d,JSON.stringify(e.storedServers))},removeServer:function(e,t){e.storedServers.splice(e.storedServers.indexOf(t),1),localStorage.setItem(d,JSON.stringify(e.storedServers))},addScript:function(e,t){var s=t.name,i=t.script;e.storedScripts[s]=i,localStorage.setItem(h,JSON.stringify(e.storedScripts))},removeScript:function(e,t){i["a"].delete(e.storedScripts,t),localStorage.setItem(h,JSON.stringify(e.storedScripts))},setScriptName:function(e,t){e.scriptName=t}}};i["a"].use(a["a"]);var f=new a["a"].Store({modules:{server:u,editor:p}}),v=s("a1bc"),m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"container"}},[e.isConnected?s("IDE"):s("ConnectForm"),s("Modal",{ref:"modal",attrs:{maxWidth:"60%"}}),s("vue-snotify"),s("div",{ref:"webEditorInfo",staticStyle:{display:"none"}},[s("p",{staticClass:"aboutPage"},[e._v(e._s(e.pkg.description))]),e._m(0),s("h3",{staticClass:"aboutPage"},[e._v("Supported API versions:")]),s("ul",{staticClass:"aboutPage"},e._l(e.pkg.apiVersions,function(t){return s("li",{key:t},[s("a",{attrs:{href:"https://open-eo.github.io/openeo-api/v/"+t+"/index.html",target:"_blank"}},[e._v(e._s(t))])])}),0)])],1)},b=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",{staticClass:"aboutPage"},[e._v("This software is published by the "),s("strong",[e._v("openEO Consortium")]),e._v(" under the "),s("strong",[e._v("Apache 2.0 license")]),e._v(". Please find more information about the openEO project on our "),s("a",{attrs:{href:"http://www.openeo.org",target:"_blank"}},[e._v("homepage")]),e._v(" and visit the "),s("a",{attrs:{href:"https://github.com/Open-EO/openeo-web-editor",target:"_blank"}},[e._v("GitHub repository")]),e._v(" for information about the Web Editor. Feel encouraged to "),s("strong",[e._v("report bugs, feature requests and other issues in the "),s("a",{attrs:{href:"https://github.com/Open-EO/openeo-web-editor/issues",target:"_blank"}},[e._v("GitHub issue tracker")])]),e._v(".")])}],g=(s("8e6e"),s("456d"),s("bd86")),y=s("9224"),w=s("6168"),k=s("025e"),C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"login"}},[i("form",{on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[i("header",{staticClass:"logo"},[i("img",{attrs:{src:s("cf05"),alt:"openEO"}}),i("h2",[e._v("Web Editor "),i("span",{staticClass:"version",on:{click:e.showWebEditorInfo}},[e._v(e._s(e.version))])])]),e.message?i("div",{staticClass:"message",domProps:{innerHTML:e._s(e.message)}}):e._e(),i("h3",[e._v("Connect to server")]),i("div",{staticClass:"row"},[i("label",{attrs:{for:"username"}},[e._v("Server:")]),i("div",{staticClass:"input"},[i("input",{directives:[{name:"model",rawName:"v-model.lazy.trim",value:e.serverUrl,expression:"serverUrl",modifiers:{lazy:!0,trim:!0}}],attrs:{id:"serverUrl"},domProps:{value:e.serverUrl},on:{change:function(t){e.serverUrl=t.target.value.trim()},blur:function(t){return e.$forceUpdate()}}}),i("button",{attrs:{type:"button",title:"Select previously used server"},on:{click:e.showServerSelector}},[i("i",{staticClass:"fas fa-book"})])])]),i("div",{staticClass:"row"},[i("label",{attrs:{for:"username"}},[e._v("Username:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"input",attrs:{id:"username",type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),i("div",{staticClass:"row"},[i("label",{attrs:{for:"password"}},[e._v("Password:")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input",attrs:{id:"password",type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),i("div",{staticClass:"row"},[i("button",{staticClass:"connectBtn",class:{connecting:e.connecting},attrs:{type:"submit"}},[i("i",{staticClass:"fas fa-spinner fa-spin fa-lg"}),e._v(" Connect")])])])])},S=[],_=(s("ac4d"),s("8a81"),s("8c7c"));function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(s,!0).forEach(function(t){Object(g["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var x,D,j={name:"ConnectForm",mixins:[_["a"]],computed:O({},k["a"].mapState("server",["connectionError","discoveryErrors"]),{},k["a"].mapState("editor",["storedServers"])),data:function(){return{serverUrl:v["a"].serverUrl,username:"",password:"",connecting:!1,version:y.version,message:v["a"].loginMessage}},created:function(){var e=k["a"].param("server");k["a"].isUrl(e)&&(this.serverUrl=e)},methods:O({},k["a"].mapActions("server",["connect","authenticateBasic"]),{},k["a"].mapMutations("editor",["addServer","removeServer"]),{submitForm:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,s,i,r,a,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("string"===typeof this.serverUrl&&k["a"].isUrl(this.serverUrl)){e.next=5;break}return k["a"].error(this,"Please specify a valid server."),e.abrupt("return");case 5:if("https:"!==window.location.protocol||"https:"===this.serverUrl.toLowerCase().substr(0,6)){e.next=8;break}return k["a"].error(this,"You are trying to connect to a back-end with HTTP instead of HTTPS, which is insecure and prohibited by web browsers. Please use HTTPS instead."),e.abrupt("return");case 8:return t=this.username||this.password,this.connecting=!0,e.prev=10,e.next=13,this.connect({url:this.serverUrl,requireAuthentication:t});case 13:if(!e.sent){e.next=17;break}this.addServer(this.serverUrl),e.next=20;break;case 17:return this.connecting=!1,k["a"].exception(this,this.connectionError),e.abrupt("return");case 20:e.next=27;break;case 22:return e.prev=22,e.t0=e["catch"](10),this.connecting=!1,k["a"].exception(this,e.t0),e.abrupt("return");case 27:for(s=!0,i=!1,r=void 0,e.prev=30,a=this.discoveryErrors[Symbol.iterator]();!(s=(n=a.next()).done);s=!0)o=n.value,k["a"].exception(this,o);e.next=38;break;case 34:e.prev=34,e.t1=e["catch"](30),i=!0,r=e.t1;case 38:e.prev=38,e.prev=39,s||null==a.return||a.return();case 41:if(e.prev=41,!i){e.next=44;break}throw r;case 44:return e.finish(41);case 45:return e.finish(38);case 46:if(!t){e.next=66;break}if(e.prev=47,this.supports("authenticateBasic")||!this.supports("authenticateOIDC")){e.next=52;break}k["a"].error(this,"Sorry, the authentication methods supported by the back-end are not supported by the Web Editor."),e.next=59;break;case 52:if(!this.supports("authenticateBasic")){e.next=58;break}return e.next=55,this.authenticateBasic({username:this.username,password:this.password});case 55:k["a"].ok(this,"Login successful."),e.next=59;break;case 58:k["a"].error(this,"Sorry, the authentication methods is not supported by the Web Editor.");case 59:e.next=64;break;case 61:e.prev=61,e.t2=e["catch"](47),k["a"].error(this,"Sorry, credentials are wrong.");case 64:e.next=67;break;case 66:k["a"].info(this,"You are working as a guest. Your data will be publicly available!");case 67:this.connecting=!1;case 68:case"end":return e.stop()}},e,this,[[10,22],[30,34,38,46],[39,,41,45],[47,61]])}));function t(){return e.apply(this,arguments)}return t}(),showWebEditorInfo:function(){w["a"].$emit("showWebEditorInfo")},showServerSelector:function(){var e=this;w["a"].$emit("showListModal","Select previously used server",this.storedServers,[{callback:function(t){return e.serverUrl=t,!0}},{callback:function(t){return e.removeServer(t)},icon:"trash",title:"Delete entry from history"}])}})},E=j,T=(s("a986"),s("2877")),M=Object(T["a"])(E,C,S,!1,null,null,null),F=M.exports,A=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"wrapper"}},[i("div",{attrs:{id:"ide"},on:{mouseup:function(t){return e.stopMovingSeparator(t)},mousemove:function(t){return e.moveSeparator(t)}}},[i("header",{staticClass:"navbar"},[i("div",{staticClass:"logo"},[i("img",{attrs:{src:s("cf05"),alt:"openEO"}}),i("h2",[e._v("Web Editor "),i("span",{staticClass:"version",on:{click:e.showWebEditorInfo}},[e._v(e._s(e.version))])])]),i("ul",{attrs:{id:"menu"}},[i("li",[i("div",{staticClass:"menuItem",attrs:{title:"Get server information"},on:{click:e.showServerInfo}},[i("i",{staticClass:"fas fa-info fa-fw"}),e._v(" Server")])]),i("li",[i("UserMenu")],1)])]),i("main",{staticClass:"page"},[i("div",{ref:"discovery",attrs:{id:"discovery"}},[i("DiscoveryToolbar",{staticClass:"toolbar",attrs:{onAddCollection:e.insertCollection,onAddProcess:e.insertProcess}})],1),i("hr",{ref:"separator0",staticClass:"separator",on:{dblclick:function(t){return e.centerSeparator(0)},mousedown:function(t){return e.startMovingSeparator(t,0)}}}),i("div",{ref:"workspace",attrs:{id:"workspace"}},[i("Editor",{ref:"editor",staticClass:"mainEditor",attrs:{id:"main",showDiscoveryToolbar:!1}}),i("UserWorkspace",{staticClass:"userContent"})],1),i("hr",{ref:"separator1",staticClass:"separator",on:{dblclick:function(t){return e.centerSeparator(1)},mousedown:function(t){return e.startMovingSeparator(t,1)}}}),i("div",{ref:"viewer",attrs:{id:"viewer"}},[i("Viewer")],1)])]),i("CollectionModal",{ref:"collectionModal"}),i("ProcessModal",{ref:"processModal"}),i("ServerInfoModal",{ref:"serverInfoModal"}),i("ServiceInfoModal",{ref:"serviceModal"}),i("JobInfoModal",{ref:"jobModal"}),i("ProcessGraphInfoModal",{ref:"pgModal"}),i("ParameterModal",{ref:"parameterModal"})],1)},I=[],L=(s("7514"),s("8449"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"UserMenu"}},[s("div",{staticClass:"menuItem"},[e._m(0),s("div",{staticClass:"data"},[s("span",{staticClass:"name nowrap"},[s("i",{staticClass:"fas fa-user"}),e._v(" "+e._s(e.userName))]),e.hasBudget?s("span",{staticClass:"credits nowrap"},[s("i",{staticClass:"fas fa-dollar-sign fa-fw"}),e._v(" "+e._s(e.budget))]):e._e(),e.hasStorage?s("span",{staticClass:"storage nowrap"},[s("i",{staticClass:"fas fa-database fa-fw"}),e._v(" "+e._s(e.storageUsedPercent)+"% used")]):e._e()])]),s("div",{staticClass:"dropdown"},[s("div",{staticClass:"item"},[e._v("\n\t\t\tWelcome, "+e._s(e.userName)+"!\n\t\t")]),e.hasStorage?s("div",{staticClass:"item"},[s("h4",[e._v("Storage")]),s("div",{staticClass:"storagePercent"},[s("div",{staticClass:"used",style:"width: "+this.storageUsedPercent+"%"})]),s("div",{staticClass:"nowrap"},[e._v("Used "+e._s(e.formatMegabyte(this.storageUsed))+" of "+e._s(e.formatMegabyte(this.me.storage.quota))+".")])]):e._e(),Array.isArray(e.me.links)&&e.me.links.length>0?s("div",{staticClass:"item"},[s("h4",[e._v("Additional resources")]),s("LinkList",{attrs:{links:e.me.links}})],1):e._e(),s("div",{staticClass:"item"},[s("button",{staticClass:"navButton",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.reset()}}},[s("i",{staticClass:"fas fa-sign-out-alt"}),e._v(" Logout")])])])])}),B=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"down"},[s("i",{staticClass:"fas fa-chevron-down"})])}],N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dataTable",attrs:{id:e.id}},[s("div",{staticClass:"dataTableMenu"},[s("div",{staticClass:"dataTableToolbar"},[e._t("toolbar")],2),e.data.length>0?s("div",{staticClass:"dataTableFilter"},[s("i",{staticClass:"fas fa-search filter-icon"}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.filterValue,expression:"filterValue"}],attrs:{type:"text",placeholder:"Search term"},domProps:{value:e.filterValue},on:{input:function(t){t.target.composing||(e.filterValue=t.target.value)}}}),s("button",{attrs:{type:"button",disabled:!e.hasFilter},on:{click:e.clearFilter}},[s("i",{staticClass:"fas fa-times-circle"})])]):e._e()]),e.data.length>0||"undefined"==typeof e.noDataMessage||""==e.noDataMessage?s("table",[s("tr",e._l(e.columns,function(t,i){return s("th",{directives:[{name:"show",rawName:"v-show",value:!t.hide,expression:"!col.hide"}],key:i,class:i},[e._v(e._s(t.name))])}),0),e._l(e.view,function(t,i){return s("tr",{key:i},e._l(e.columns,function(i,r){return s("td",{directives:[{name:"show",rawName:"v-show",value:!i.hide,expression:"!col.hide"}],key:r,class:[r,{edit:e.canEdit(i)}],attrs:{title:!!e.canEdit(i)&&"Double-click to change the value","data-value":!!i.stylable&&e.value(t,i,r)},on:{dblclick:function(s){return e.onDblClick(s,t,i,r)}}},[e._t(r,[e.showEditField(t,i,r)?[s("form",{on:{submit:function(s){return s.preventDefault(),s.stopPropagation(),e.saveEditField(s,t,i,r)}}},[s("input",{ref:"editField",refInFor:!0,attrs:{type:"text"},domProps:{value:e.value(t,i,r)},on:{blur:function(s){return e.saveEditField(s,t,i,r)},keyup:function(s){return e.resetEditFieldEsc(s,t,i,r)}}})])]:[e._v("\n\t\t\t\t\t\t"+e._s(e.formattedValue(t,i,r))+"\n\t\t\t\t\t")]],{row:t,col:i,id:r})],2)}),0)}),e.data.length>0&&0==e.view.length?s("tr",{staticClass:"noSearchResults"},[s("td",{attrs:{colspan:e.columnCount}},[e._v("Sorry, no element matches your search criteria.")])]):e._e()],2):e._e(),0==e.data.length?s("div",{staticClass:"noDataMessage"},[e._v(e._s(e.noDataMessage))]):e._e()])},V=[],G=(s("6b54"),s("20d6"),s("7618")),$={name:"DataTable",props:["id","columns","dataSource"],data:function(){return{data:[],view:[],filterValue:null,primaryKey:null,noDataMessage:"No data specified.",editField:null}},watch:{data:function(e,t){this.updateView()},filterValue:function(e,t){this.updateView()}},computed:{columnCount:function(){return Object.keys(this.columns).length},hasFilter:function(){return"string"===typeof this.filterValue&&this.filterValue.length>0}},created:function(){this.determinePrimaryKey()},methods:{canEdit:function(e){return"function"===typeof e.edit},showEditField:function(e,t,s){return this.canEdit(t)&&null!=this.editField&&this.editField[0]==e&&this.editField[1]==s},onDblClick:function(e,t,s,i){var r=this;if(this.canEdit(s)){var a=this.value(t,s,i);if("boolean"===typeof a){var n=this.columns[i].edit;n(t)}else this.editField=[t,i],this.$nextTick(function(){return r.$refs.editField[0].focus()});e.preventDefault(),e.stopPropagation()}},saveEditField:function(e,t,s,i){if(null!==this.editField&&this.canEdit(s)){var r=this.columns[i].edit;r(t,this.$refs.editField[0].value),this.editField=null,e.preventDefault(),e.stopPropagation()}},resetEditFieldEsc:function(e,t,s,i){"Escape"==e.key&&(this.editField=null)},determinePrimaryKey:function(){for(var e in this.columns)if(this.columns[e].primaryKey){this.primaryKey=e;break}},setNoData:function(e){this.data=[],"string"!=typeof e?k["a"].isObject(e)&&("object"===Object(G["a"])(e.data)&&"object"===Object(G["a"])(e.config)&&"object"===Object(G["a"])(e.headers)&&(e=e.data),k["a"].isObject(e)&&"string"===typeof e.message)?this.noDataMessage=e.message:(console.warn(e),this.noDataMessage="Sorry, an unknown error has occured."):this.noDataMessage=e},retrieveData:function(){var e=this;this.setNoData("Loading data..."),this.data=[],"function"===typeof this.dataSource?this.dataSource().then(function(t){Array.isArray(t)?0==t.length?e.setNoData(""):e.setData(t):e.setNoData("Invalid response from data source.")}).catch(function(t){e.setNoData(t)}):Array.isArray(this.dataSource)?0==this.dataSource.length?this.setNoData(""):this.setData(this.dataSource):this.setNoData("No valid data source specified.")},setData:function(e){this.noDataMessage=void 0,this.data=e},removeData:function(e){var t=this;if(null===this.primaryKey)throw new Error("No primary key specified.");this.data=this.data.filter(function(s){return s[t.primaryKey]!=e}),0==this.data.length&&this.setNoData("")},addData:function(e){if(!e.hasOwnProperty(this.primaryKey))throw new Error("Object does not contain a value for the primary key.");this.data.push(e)},replaceData:function(e){var t=this;if(null===this.primaryKey)throw new Error("No primary key specified.");if(!e.hasOwnProperty(this.primaryKey))throw new Error("Object does not contain a value for the primary key.");var s=this.data.findIndex(function(s){return s[t.primaryKey]==e[t.primaryKey]});s>=0?this.$set(this.data,s,e):this.data.push(e)},value:function(e,t,s){var i;return i="object"===Object(G["a"])(e)?e[s]:e,k["a"].isObject(t)&&"function"===typeof t.computedValue&&(i=t.computedValue(e,i)),i},formattedValue:function(e,t,s){return this.format(this.value(e,t,s),t)},sort:function(){},filter:function(){var e=this;if(this.hasFilter){var t=this.filterValue.toLowerCase();this.view=this.view.filter(function(s){for(var i in s){var r=e.columns[i];if(!("undefined"===typeof r||r.hasOwnProperty("filterable")&&!1===r.filterable)){var a=e.value(s,r,i);if(("number"===typeof a||"string"===typeof a||"boolean"===typeof a)&&(a=a.toString(),-1!==a.toLowerCase().indexOf(t)))return!0}}return!1})}},clearFilter:function(){this.filterValue="",this.updateView()},updateView:function(){Array.isArray(this.data)?(this.view=this.data,this.data.length>0&&(this.filter(),this.sort())):this.view=[]},format:function(e,t){return"string"===typeof t.format?"function"===typeof this["format"+t.format]?e=this["format"+t.format](e,t):console.warn(t.format+" is an invalid formatter."):"function"===typeof t.format&&(e=t.format.call(this,e,t)),e},formatFileSize:function(e,t){if(!e)return"";var s=0==e?0:Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,s)).toFixed(2)+" "+["B","kB","MB","GB","TB"][s]},formatDateTime:function(e,t){return k["a"].formatDateTime(e)},formatUpperCase:function(e,t){return"string"===typeof e?e.toUpperCase():e}}},J=$,R=(s("6224"),Object(T["a"])(J,N,V,!1,null,null,null)),U=R.exports,z={mixins:[_["a"]],components:{DataTable:U},data:function(){return{columns:{}}},computed:{userId:{get:function(){return this.connection?this.connection.getUserId():null}}},watch:{userId:function(e,t){e!==t&&this.updateData()}},mounted:function(){this.updateData()},methods:{updateData:function(){},updateTable:function(e,t,s){this.$refs.table&&(this.supports("createJob")||this.supports("listJobs")?"string"!==typeof this.userId&&"number"!==typeof this.userId?this.$refs.table.setNoData("Please authenticate to use this feature."):this.$refs.table.retrieveData():this.$refs.table.setNoData("Sorry, this feature is not supported by the server."))}}},H=z,q=Object(T["a"])(H,x,D,!1,null,null,null),Y=q.exports,W=s("4845");function X(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function Z(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?X(s,!0).forEach(function(t){Object(g["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):X(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var K={name:"UserMenu",mixins:[Y],components:{LinkList:W["a"]},data:function(){return{me:{}}},computed:Z({},k["a"].mapGetters("server",["formatCurrency"]),{hasBudget:function(){return"number"===typeof this.me.budget&&this.me.budget>=0},hasStorage:function(){return k["a"].isObject(this.me.storage)&&"number"===typeof this.me.storage.quota&&"number"===typeof this.me.storage.free},budget:function(){return this.hasBudget?this.formatCurrency(this.me.budget):"N/A"},userName:function(){return this.userId?this.userId:"Guest"},storageUsed:function(){return this.hasStorage?this.me.storage.quota-this.me.storage.free:null},storageUsedPercent:function(){return this.hasStorage?Math.round(this.storageUsed/this.me.storage.quota*100):null}}),methods:Z({},k["a"].mapMutations("server",["reset"]),{updateData:function(){var e=this;this.connection&&this.supports("describeAccount")&&this.userId&&this.connection.describeAccount().then(function(t){return e.me=t}).catch(function(t){k["a"].exception(e,t,"Loading account information failed")})},formatMegabyte:function(e){var t=1073741824;return e>t?Math.round(e/t)+" GB":Math.round(e/1048576)+" MB"}})},Q=K,ee=(s("ae54"),Object(T["a"])(Q,L,B,!1,null,"48f792ba",null)),te=ee.exports,se=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Tabs",{directives:[{name:"show",rawName:"v-show",value:e.isConnected,expression:"isConnected"}],ref:"tabs",attrs:{id:"userContent"}},[e.supportsJobs?s("Tab",{attrs:{id:"jobs",name:"Batch Jobs",icon:"fa-tasks"}},[s("JobPanel")],1):e._e(),e.supportsServices?s("Tab",{attrs:{id:"services",name:"Web Services",icon:"fa-cloud"}},[s("ServicePanel")],1):e._e(),e.supportsProcessGraphs?s("Tab",{attrs:{id:"storedProcessGraphs",name:"Process Graphs",icon:"fa-code-branch"}},[s("ProcessGraphPanel")],1):e._e(),e.supportsFiles?s("Tab",{attrs:{id:"files",name:"Files",icon:"fa-file"}},[s("FilePanel")],1):e._e()],1)},ie=[],re=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{tabs:!0,hide:!e.hasEnabledTabs,hideNames:e.hideNames},attrs:{id:e.id}},[s("div",{staticClass:"tabsHeader"},e._l(e.tabs,function(t){return s("button",{directives:[{name:"show",rawName:"v-show",value:t.enabled,expression:"tab.enabled"}],key:t.id,class:{tabItem:!0,tabActive:t.active},attrs:{type:"button",title:t.name},on:{click:function(s){return e.selectTab(t)}}},[t.icon?s("i",{class:["fas",t.icon]}):e._e(),s("span",{staticClass:"tabName"},[e._v(e._s(t.name))]),t.closable?s("span",{staticClass:"tabClose",on:{click:function(s){return s.preventDefault(),s.stopPropagation(),e.closeTab(t)}}},[s("i",{staticClass:"far fa-times-circle"})]):e._e()])}),0),s("div",{staticClass:"tabsBody"},[e._t("default")],2)])},ae=[],ne={name:"Tabs",props:{id:{type:String,required:!0}},data:function(){return{tabs:[],hideNames:!1}},mounted:function(){Array.isArray(this.$children)&&(this.tabs=this.$children,this.resetActiveTab()),w["a"].$on("resizedIDE",this.onResize)},computed:{hasEnabledTabs:function(){return this.tabs.filter(function(e){return e.enabled}).length>0}},methods:{onResize:function(){try{var e=document.getElementById(this.id).getElementsByClassName("tabsHeader")[0].getBoundingClientRect().width;this.hideNames=e<75*this.tabs.length}catch(t){}},getTab:function(e){for(var t in this.tabs)if(this.tabs[t].id==e)return this.tabs[t];return null},getActiveTab:function(){for(var e in this.tabs)if(this.tabs[e].active)return this.tabs[e];return null},getActiveTabId:function(){var e=this.getActiveTab();return null!==e?e.id:null},selectTab:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.getActiveTab(),"string"===typeof t&&(t=this.getTab(t)),s!==t){e.next=4;break}return e.abrupt("return");case 4:if(t&&"function"===typeof t.show){e.next=7;break}return console.warn("Invalid tab",t),e.abrupt("return");case 7:return e.next=9,t.show();case 9:if(e.t0=e.sent,!e.t0){e.next=12;break}e.t0=null!==s;case 12:if(!e.t0){e.next=14;break}s.hide();case 14:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),closeTab:function(e){var t=this.tabs.findIndex(function(t){return t.id===e.id});-1!==t&&(this.tabs.splice(t,1),e.close(),this.resetActiveTab())},resetActiveTab:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];0!==this.tabs.length&&(e||null===this.getActiveTab())&&this.selectTab(this.tabs[0])}}},oe=ne,le=(s("47b0"),Object(T["a"])(oe,re,ae,!1,null,null,null)),ce=le.exports,ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.enabled&&e.active,expression:"enabled && active"}],staticClass:"tabContent"},[e._t("default",null,{tab:this})],2)},de=[],he={name:"Tab",props:{id:{type:String,required:!0},name:{type:String,required:!0},icon:{type:String,default:null},selected:{type:Boolean,default:!1},enabled:{type:Boolean,default:!0},closable:{type:Boolean,default:!1},onBeforeShow:{type:Function,default:null},onShow:{type:Function,default:null},onHide:{type:Function,default:null},onClose:{type:Function,default:null}},data:function(){return{active:!1}},watch:{active:function(e){var t=this;e&&"function"===typeof this.onShow?this.$nextTick(function(){return t.onShow()}):e||"function"!==typeof this.onHide||this.$nextTick(function(){return t.onHide()})}},mounted:function(){this.selected?this.show():this.active=!1},methods:{show:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.active){e.next=2;break}return e.abrupt("return",!0);case 2:if(e.t0="function"!==typeof this.onBeforeShow,e.t0){e.next=7;break}return e.next=6,this.onBeforeShow();case 6:e.t0=e.sent;case 7:if(!e.t0){e.next=9;break}this.active=!0;case 9:return e.abrupt("return",this.active);case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),hide:function(){this.active=!1},close:function(){"function"===typeof this.onClose&&this.onClose(this.id)}}},pe=he,fe=Object(T["a"])(pe,ue,de,!1,null,null,null),ve=fe.exports,me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"FilePanel"},on:{dragenter:function(t){return e.dropZoneInfo(!0)},dragleave:function(t){return e.dropZoneInfo(!1)},drop:function(t){return e.uploadFiles(t)},dragover:function(t){return e.allowDrop(t)}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showUploadDropHint,expression:"showUploadDropHint"}],staticClass:"dropZone"},[e._v("To upload files, drop them here.")]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.supports("uploadFile"),expression:"supports('uploadFile')"}],staticClass:"addFile"},[s("input",{attrs:{type:"file",name:"uploadUserFile",id:"uploadUserFile",multiple:""},on:{change:e.uploadFiles}})]),s("div",{staticClass:"percent"},[s("div",{staticClass:"used",class:{error:e.uploadErrored},style:"width: "+this.uploadProgress+"%; opacity: "+this.uploadFadeOut})]),s("DataTable",{ref:"table",attrs:{dataSource:e.listFiles,columns:e.columns},scopedSlots:e._u([{key:"actions",fn:function(t){return[s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("downloadFile"),expression:"supports('downloadFile')"}],attrs:{title:"Download"},on:{click:function(s){return e.downloadFile(t.row)}}},[s("i",{staticClass:"fas fa-download"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("deleteFile"),expression:"supports('deleteFile')"}],attrs:{title:"Delete"},on:{click:function(s){return e.deleteFile(t.row)}}},[s("i",{staticClass:"fas fa-trash"})])]}}])},[s("template",{slot:"toolbar"},[s("button",{attrs:{title:"Refresh files"},on:{click:function(t){return e.updateData()}}},[s("i",{staticClass:"fas fa-sync-alt"})])])],2)],1)},be=[],ge={name:"FilePanel",mixins:[Y],data:function(){return{columns:{path:{name:"Path",primaryKey:!0},size:{name:"Size",format:"FileSize",filterable:!1},modified:{name:"Last modified",format:"DateTime"},actions:{name:"Actions",filterable:!1}},subscribed:!1,uploadProgress:0,uploadProgressPerFile:[],uploadErrored:!1,uploadFadeOut:1,showUploadDropHint:0}},watch:{uploadProgressPerFile:{deep:!0,handler:function(){this.uploadProgress=this.uploadProgressPerFile.reduce(function(e,t){return e+t},0)/this.uploadProgressPerFile.length,this.uploadProgress>99.9999&&this.finishAllUploads()}}},methods:{allowDrop:function(e){this.supports("uploadFile")&&(e.preventDefault(),e.stopPropagation())},dropZoneInfo:function(e){this.showUploadDropHint+=e?1:-1},listFiles:function(){return this.connection.listFiles()},updateData:function(){this.updateTable(this.$refs.table,"listFiles","uploadFile")},uploadFiles:function(e){this.showUploadDropHint=0;var t=[];if(e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length?(t=e.dataTransfer.files,e.preventDefault(),e.stopPropagation()):e.target&&e.target.files&&e.target.files.length&&(t=e.target.files),this.supports("uploadFile"))if(0!==t.length){this.uploadProgressPerFile=[],this.uploadProgress=0,this.uploadErrored=!1;for(var s=0;s<t.length;s++)this.uploadFile(t[s],s)}else k["a"].info(this,"Please select files to upload.");else k["a"].error(this,"Uploading files is not supported.")},uploadFile:function(e,t){var s=this;if(this.uploadProgressPerFile.push(0),"string"===typeof e.name){var i=this.connection.openFile(e.name);i.uploadFile(e,function(e){return s.$set(s.uploadProgressPerFile,t,e)}).then(function(i){s.$refs.table.replaceData(i),s.$set(s.uploadProgressPerFile,t,100),k["a"].ok(s,"File upload completed.",e.name)}).catch(function(t){console.error(t),k["a"].exception(s,t,e.name)})}},finishAllUploads:function(){var e=this;document.getElementById("uploadUserFile").value="";var t=setInterval(function(){e.uploadFadeOut-=.05,e.uploadFadeOut<0&&(e.uploadProgress=0,e.uploadFadeOut=1,clearInterval(t))},100)},downloadFile:function(e){k["a"].info(this,"File requested. Please wait..."),e.downloadFile(e.path)},deleteFile:function(e){var t=this;e.deleteFile().then(function(s){t.$refs.table.removeData(e.path)}).catch(function(e){k["a"].error(t,"Sorry, could not delete file.")})},subscribeToFileChanges:function(){this.connection.subscribe("openeo.files",{},function(e,t){console.info("File change: "+JSON.stringify(e))}),this.subscribed=!0},unsubscribeFromFileChanges:function(e){this.connection.unsubscribe("openeo.files",{}),this.subscribed=!1}}},ye=ge,we=(s("9961"),Object(T["a"])(ye,me,be,!1,null,null,null)),ke=we.exports,Ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.connection?s("DataTable",{ref:"table",attrs:{dataSource:e.listJobs,columns:e.columns,id:"JobPanel"},scopedSlots:e._u([{key:"actions",fn:function(t){return[s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("describeJob"),expression:"supports('describeJob')"}],attrs:{title:"Details"},on:{click:function(s){return e.showJobInfo(t.row)}}},[s("i",{staticClass:"fas fa-info"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("describeJob"),expression:"supports('describeJob')"}],attrs:{title:"Show in Editor"},on:{click:function(s){return e.showInEditor(t.row)}}},[s("i",{staticClass:"fas fa-code-branch"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("estimateJob"),expression:"supports('estimateJob')"}],attrs:{title:"Estimate"},on:{click:function(s){return e.estimateJob(t.row)}}},[s("i",{staticClass:"fas fa-file-invoice-dollar"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("updateJob")&&e.isJobInactive(t.row),expression:"supports('updateJob') && isJobInactive(p.row)"}],attrs:{title:"Edit metadata"},on:{click:function(s){return e.editMetadata(t.row)}}},[s("i",{staticClass:"fas fa-edit"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("updateJob")&&e.isJobInactive(t.row),expression:"supports('updateJob') && isJobInactive(p.row)"}],attrs:{title:"Replace process graph"},on:{click:function(s){return e.replaceProcessGraph(t.row)}}},[s("i",{staticClass:"fas fa-retweet"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("deleteJob"),expression:"supports('deleteJob')"}],attrs:{title:"Delete"},on:{click:function(s){return e.deleteJob(t.row)}}},[s("i",{staticClass:"fas fa-trash"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("startJob")&&e.isJobInactive(t.row),expression:"supports('startJob') && isJobInactive(p.row)"}],attrs:{title:"Start processing"},on:{click:function(s){return e.queueJob(t.row)}}},[s("i",{staticClass:"fas fa-play-circle"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("stopJob")&&e.isJobActive(t.row),expression:"supports('stopJob') && isJobActive(p.row)"}],attrs:{title:"Cancel processing"},on:{click:function(s){return e.cancelJob(t.row)}}},[s("i",{staticClass:"fas fa-stop-circle"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("downloadResults")&&e.hasResults(t.row),expression:"supports('downloadResults') && hasResults(p.row)"}],attrs:{title:"Download"},on:{click:function(s){return e.downloadResults(t.row)}}},[s("i",{staticClass:"fas fa-download"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("downloadResults")&&e.hasResults(t.row),expression:"supports('downloadResults') && hasResults(p.row)"}],attrs:{title:"View results"},on:{click:function(s){return e.viewResults(t.row,!0)}}},[s("i",{staticClass:"fas fa-eye"})])]}}],null,!1,2155912949)},[s("template",{slot:"toolbar"},[s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("createJob"),expression:"supports('createJob')"}],attrs:{title:"Add new job"},on:{click:function(t){return e.createJobFromScript()}}},[s("i",{staticClass:"fas fa-plus"}),e._v(" Add")]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("listJobs"),expression:"supports('listJobs')"}],attrs:{title:"Refresh jobs"},on:{click:function(t){return e.updateData()}}},[s("i",{staticClass:"fas fa-sync-alt"})])])],2):e._e()},Se=[],_e=s("e270");function Pe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function Oe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Pe(s,!0).forEach(function(t){Object(g["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Pe(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var xe={name:"JobPanel",mixins:[Y],data:function(){return{columns:{jobId:{name:"ID",primaryKey:!0,hide:!0},title:{name:"Title",computedValue:function(e,t){return!t&&e.jobId?"Job #"+e.jobId.toUpperCase().substr(-6):t},edit:this.updateTitle},status:{name:"Status",stylable:!0},submitted:{name:"Submitted",format:"DateTime"},updated:{name:"Last update",format:"DateTime"},actions:{name:"Actions",filterable:!1}},jobSubscriptions:[],watchers:[]}},computed:Oe({},k["a"].mapGetters("server",["supportsBilling","supportsBillingPlans"])),mounted:function(){window.setInterval(this.executeWatchers,1e4)},methods:{listJobs:function(){return this.connection.listJobs()},updateData:function(){this.updateTable(this.$refs.table,"listJobs","createJob")},refreshJob:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=Object.assign({},e);e.describeJob().then(function(e){"function"===typeof s&&s(e,i),t.updateJobData(e)}).catch(function(e){return k["a"].exception(t,e,"Loading job failed")})},showInEditor:function(e){this.refreshJob(e,function(e){w["a"].$emit("insertProcessGraph",e.processGraph)})},jobCreated:function(e){var t=this;if(this.$refs.table){this.$refs.table.addData(e);var s=[];this.supports("estimateJob")&&s.push({text:"Estimate",action:function(){return t.estimateJob(e)}}),this.supports("startJob")&&s.push({text:"Start processing",action:function(){return t.queueJob(e)}}),this.supports("deleteJob")&&s.push({text:"Delete",action:function(){return t.deleteJob(e)}}),k["a"].confirm(this,"Job created!",s)}},getTitleField:function(){return new _e["a"]("title","Title",{type:"string"})},getDescriptionField:function(){return new _e["a"]("description","Description",{type:"string",format:"commonmark"},"CommonMark (Markdown) is allowed.")},getBillingPlanField:function(){return new _e["a"]("plan","Billing plan",{type:"string",format:"billing-plan"})},getBudgetField:function(){return new _e["a"]("budget","Budget",{type:"number",format:"budget",default:null})},normalizeToDefaultData:function(e){return"undefined"===typeof e.title||"string"===typeof e.title&&0!==e.title.length||(e.title=null),"undefined"===typeof e.description||"string"===typeof e.description&&0!==e.description.length||(e.description=null),"undefined"===typeof e.plan||"string"===typeof e.plan&&0!==e.plan.length||(e.plan=null),"undefined"!==typeof e.budget&&("number"!==typeof e.budget||e.budget<0)&&(e.budget=null),e},createJob:function(e,t){var s=this;t=this.normalizeToDefaultData(t),this.connection.createJob(e,t.title,t.description,t.plan,t.budget).then(function(e){s.jobCreated(e)}).catch(function(e){k["a"].exception(s,e,"Sorry, could not create a batch job.")})},createJobFromScript:function(){var e=this;w["a"].$emit("getProcessGraph",function(t){var s=[e.getTitleField(),e.getDescriptionField(),e.supportsBillingPlans?e.getBillingPlanField():null,e.supportsBilling?e.getBudgetField():null];w["a"].$emit("showDataForm","Create new batch job",s,function(s){return e.createJob(t,s)})})},updateJobData:function(e){this.$refs.table.replaceData(e);var t=this.watchers.findIndex(function(t){return t.jobId==e.jobId});switch(e.status.toLowerCase()){case"running":case"queued":-1===t&&this.watchers.push(e);break;default:this.watchers.splice(t,1)}},deleteJob:function(e){var t=this;e.deleteJob().then(function(){t.$refs.table.removeData(e.jobId)}).catch(function(e){k["a"].exception(t,e,"Sorry, could not delete job.")})},executeWatchers:function(){var e=this;for(var t in this.watchers)this.refreshJob(this.watchers[t],function(t,s){if("finished"!==s.status&&"finished"===t.status){var i=[];e.supports("downloadResults")&&(i.push({text:"Download",action:function(){return e.downloadResults(t)}}),i.push({text:"View",action:function(){return e.viewResults(t)}})),k["a"].confirm(e,"Job has finished!",i)}else"error"!==s.status&&"error"===t.status&&k["a"].error(e,"Job has stopped due to an error or timeout.")})},showJobInfo:function(e){this.refreshJob(e,function(e){w["a"].$emit("showJobInfo",e.getAll())})},estimateJob:function(e){var t=this;e.estimateJob().then(function(e){w["a"].$emit("showModal","Job Estimate",e)}).catch(function(e){return k["a"].exception(t,e,"Loading estimate failed")})},replaceProcessGraph:function(e){var t=this;w["a"].$emit("getProcessGraph",function(s){t.updateJob(e,{processGraph:s})})},editMetadata:function(e){var t=this;this.refreshJob(e,function(e){var s=[t.getTitleField().setValue(e.title),t.getDescriptionField().setValue(e.description),t.supportsBillingPlans?t.getBillingPlanField().setValue(e.plan):null,t.supportsBilling?t.getBudgetField().setValue(e.budget):null];w["a"].$emit("showDataForm","Edit batch job",s,function(s){return t.updateJob(e,s)})})},updateTitle:function(e,t){this.updateJob(e,{title:t})},updateJob:function(e,t){var s=this;t=this.normalizeToDefaultData(t),e.updateJob(t).then(function(e){k["a"].ok(s,"Job successfully updated."),s.updateJobData(e)}).catch(function(e){return k["a"].exception(s,e,"Updating job failed")})},queueJob:function(e){var t=this;e.startJob().then(function(e){k["a"].ok(t,"Job successfully queued."),t.updateJobData(e)}).catch(function(e){return k["a"].exception(t,e,"Queueing job failed")})},cancelJob:function(e){var t=this;e.stopJob().then(function(e){k["a"].ok(t,"Job successfully canceled."),t.updateJobData(e)}).catch(function(e){return k["a"].exception(t,e,"Canceling job failed")})},viewResults:function(e){var t=this;e.listResults().then(function(e){0!=e.links.length?e.links.length>1?k["a"].info(t,"Job resulted in multiple files, please download them individually."):(k["a"].info(t,"Data requested. Please wait..."),t.connection.download(e.links[0].href,!1).then(function(t){return w["a"].$emit("showInViewer",t.data,e.links[0].type)}).catch(function(e){k["a"].exception(t,e,"Sorry, can't download results.")})):k["a"].error(t,"No download available.")})},downloadResults:function(e){var t=this;e.listResults().then(function(e){if(Array.isArray(e.links)&&0!=e.links.length){var s=e.links.map(function(e){return e.href});w["a"].$emit("showListModal","Download results"+(e.title?" for: "+e.title:""),s,[{callback:function(e){return window.open(e,"_blank"),!1}}])}else k["a"].error(t,"No download available.")})},subscribeToJob:function(e){var t={job_id:e};this.connection.subscribe("openeo.jobs.debug",t,function(t,s){console.info("Debugging information for job "+e+": "+JSON.stringify(t))}),this.connection.subscribe("openeo.jobs.output",t,function(t,s){console.info("Output from job "+e+": "+JSON.stringify(t))}),this.connection.subscribe("openeo.jobs.status",t,function(t,s){console.info("Status information for job "+e+": "+JSON.stringify(t))}),this.jobSubscriptions.push(e)},unsubscribeFromJob:function(e){var t={job_id:e};this.connection.unsubscribe("openeo.jobs.debug",t),this.connection.unsubscribe("openeo.jobs.output",t),this.connection.unsubscribe("openeo.jobs.status",t),this.jobSubscriptions.splice(this.jobSubscriptions.indexOf(e),1)},hasResults:function(e){return"string"!==typeof e.status||"finished"==e.status.toLowerCase()},isJobInactive:function(e){return"string"!==typeof e.status||!this.isActiveStatusCode(e.status)},isJobActive:function(e){return"string"!==typeof e.status||this.isActiveStatusCode(e.status)},isActiveStatusCode:function(e){switch(e.toLowerCase()){case"running":case"queued":return!0;default:return!1}}}},De=xe,je=(s("0791"),Object(T["a"])(De,Ce,Se,!1,null,null,null)),Ee=je.exports,Te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("DataTable",{ref:"table",attrs:{dataSource:e.listProcessGraphs,columns:e.columns,id:"ProcessGraphPanel"},scopedSlots:e._u([{key:"actions",fn:function(t){return[s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("describeProcessGraph"),expression:"supports('describeProcessGraph')"}],attrs:{title:"Details"},on:{click:function(s){return e.graphInfo(t.row)}}},[s("i",{staticClass:"fas fa-info"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("describeProcessGraph"),expression:"supports('describeProcessGraph')"}],attrs:{title:"Show in Editor"},on:{click:function(s){return e.showInEditor(t.row)}}},[s("i",{staticClass:"fas fa-code-branch"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("updateProcessGraph"),expression:"supports('updateProcessGraph')"}],attrs:{title:"Edit metadata"},on:{click:function(s){return e.editMetadata(t.row)}}},[s("i",{staticClass:"fas fa-edit"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("updateProcessGraph"),expression:"supports('updateProcessGraph')"}],attrs:{title:"Replace process graph"},on:{click:function(s){return e.replaceProcessGraph(t.row)}}},[s("i",{staticClass:"fas fa-retweet"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("deleteProcessGraph"),expression:"supports('deleteProcessGraph')"}],attrs:{title:"Delete"},on:{click:function(s){return e.deleteGraph(t.row)}}},[s("i",{staticClass:"fas fa-trash"})])]}}])},[s("template",{slot:"toolbar"},[s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("createProcessGraph"),expression:"supports('createProcessGraph')"}],attrs:{title:"Add new process graph"},on:{click:e.addGraphFromScript}},[s("i",{staticClass:"fas fa-plus"}),e._v(" Add")]),s("button",{attrs:{title:"Refresh process graphs"},on:{click:function(t){return e.updateData()}}},[s("i",{staticClass:"fas fa-sync-alt"})])])],2)},Me=[],Fe={name:"ProcessGraphPanel",mixins:[Y],data:function(){return{columns:{processGraphId:{name:"ID",primaryKey:!0,hide:!0},title:{name:"Title",edit:this.updateTitle},actions:{name:"Actions",filterable:!1}}}},methods:{listProcessGraphs:function(){return this.connection.listProcessGraphs()},updateData:function(){this.updateTable(this.$refs.table,"listProcessGraphs","createProcessGraph")},refreshProcessGraph:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.describeProcessGraph().then(function(e){"function"===typeof s&&s(e),t.updateProcessGraphData(e)}).catch(function(e){return k["a"].exception(t,e,"Loading process graph failed")})},showInEditor:function(e){this.refreshProcessGraph(e,function(e){w["a"].$emit("insertProcessGraph",e.processGraph)})},getTitleField:function(){return new _e["a"]("title","Title",{type:"string"})},getDescriptionField:function(){return new _e["a"]("description","Description",{type:"string",format:"commonmark"},"CommonMark (Markdown) is allowed.")},addGraphFromScript:function(){var e=this;w["a"].$emit("getProcessGraph",function(t){var s=[e.getTitleField(),e.getDescriptionField()];w["a"].$emit("showDataForm","Store a new process graph",s,function(s){return e.addGraph(t,s)})})},normalizeToDefaultData:function(e){return"undefined"===typeof e.title||"string"===typeof e.title&&0!==e.title.length||(e.title=null),"undefined"===typeof e.description||"string"===typeof e.description&&0!==e.description.length||(e.description=null),e},addGraph:function(e,t){var s=this;t=this.normalizeToDefaultData(t),this.connection.createProcessGraph(e,t.title,t.description).then(function(e){s.$refs.table.addData(e),k["a"].ok(s,"Process graph successfully stored!")}).catch(function(e){return k["a"].exception(s,e,"Storing process graph failed.")})},graphInfo:function(e){this.refreshProcessGraph(e,function(e){w["a"].$emit("showProcessGraphInfo",e.getAll())})},editMetadata:function(e){var t=this;this.refreshProcessGraph(e,function(e){var s=[t.getTitleField().setValue(e.title),t.getDescriptionField().setValue(e.description)];w["a"].$emit("showDataForm","Edit metadata for a process graph",s,function(s){return t.updateMetadata(e,s)})})},replaceProcessGraph:function(e){var t=this;w["a"].$emit("getProcessGraph",function(s){return t.updateMetadata(e,{processGraph:s})})},updateTitle:function(e,t){this.updateMetadata(e,{title:t})},updateMetadata:function(e,t){var s=this;t=this.normalizeToDefaultData(t),e.updateProcessGraph(t).then(function(e){k["a"].ok(s,"Process graph successfully updated."),s.updateProcessGraphData(e)}).catch(function(e){return k["a"].exception(s,e,"Updating process graph failed")})},deleteGraph:function(e){var t=this;e.deleteProcessGraph().then(function(){t.$refs.table.removeData(e.processGraphId)}).catch(function(e){return k["a"].exception(t,e,"Deleting process graph failed")})},updateProcessGraphData:function(e){this.$refs.table.replaceData(e)}}},Ae=Fe,Ie=Object(T["a"])(Ae,Te,Me,!1,null,null,null),Le=Ie.exports,Be=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("DataTable",{ref:"table",attrs:{dataSource:e.listServices,columns:e.columns,id:"ServicePanel"},scopedSlots:e._u([{key:"enabled",fn:function(e){return[s("span",{staticClass:"boolean"},[s("span",{directives:[{name:"show",rawName:"v-show",value:!0===e.row.enabled,expression:"p.row.enabled === true"}]},[s("i",{staticClass:"fas fa-check-circle"})]),s("span",{directives:[{name:"show",rawName:"v-show",value:!1===e.row.enabled,expression:"p.row.enabled === false"}]},[s("i",{staticClass:"fas fa-times-circle"})]),s("span",{directives:[{name:"show",rawName:"v-show",value:"boolean"!==typeof e.row.enabled,expression:"typeof p.row.enabled !== 'boolean'"}]},[s("i",{staticClass:"fas fa-question-circle"})])])]}},{key:"actions",fn:function(t){return[s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("describeService"),expression:"supports('describeService')"}],attrs:{title:"Details"},on:{click:function(s){return e.serviceInfo(t.row)}}},[s("i",{staticClass:"fas fa-info"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("describeService"),expression:"supports('describeService')"}],attrs:{title:"Show in Editorr"},on:{click:function(s){return e.showInEditor(t.row)}}},[s("i",{staticClass:"fas fa-code-branch"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("updateService"),expression:"supports('updateService')"}],attrs:{title:"Edit metadata"},on:{click:function(s){return e.editMetadata(t.row)}}},[s("i",{staticClass:"fas fa-edit"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("updateService"),expression:"supports('updateService')"}],attrs:{title:"Replace process graph"},on:{click:function(s){return e.replaceProcessGraph(t.row)}}},[s("i",{staticClass:"fas fa-retweet"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("deleteService"),expression:"supports('deleteService')"}],attrs:{title:"Delete"},on:{click:function(s){return e.deleteService(t.row)}}},[s("i",{staticClass:"fas fa-trash"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.row.enabled&&e.isMapServiceSupported(t.row.type),expression:"p.row.enabled && isMapServiceSupported(p.row.type)"}],attrs:{title:"View on map"},on:{click:function(s){return e.viewService(t.row)}}},[s("i",{staticClass:"fas fa-map"})])]}}])},[s("template",{slot:"toolbar"},[s("button",{directives:[{name:"show",rawName:"v-show",value:e.supports("createService"),expression:"supports('createService')"}],attrs:{title:"Add new service"},on:{click:function(t){return e.createServiceFromScript()}}},[s("i",{staticClass:"fas fa-plus"}),e._v(" Add")]),s("button",{attrs:{title:"Refresh services"},on:{click:function(t){return e.updateData()}}},[s("i",{staticClass:"fas fa-sync-alt"})])])],2)},Ne=[];s("6762"),s("2fdb");function Ve(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function Ge(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ve(s,!0).forEach(function(t){Object(g["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ve(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var $e={name:"ServicePanel",mixins:[Y],computed:Ge({},k["a"].mapState("server",["serviceTypes"]),{},k["a"].mapGetters("server",["supportsBilling","supportsBillingPlans"])),data:function(){return{columns:{serviceId:{name:"ID",primaryKey:!0,hide:!0},title:{name:"Title",computedValue:function(e,t){return!t&&e.serviceId?"Service #"+e.serviceId.toUpperCase().substr(0,6):t},edit:this.updateTitle},type:{name:"Type",format:"UpperCase"},enabled:{name:"Enabled",edit:this.toggleEnabled},submitted:{name:"Submitted",format:"DateTime"},actions:{name:"Actions",filterable:!1}}}},methods:{isMapServiceSupported:function(e){return"string"===typeof e&&v["a"].supportedMapServices.includes(e.toLowerCase())},listServices:function(){return this.connection.listServices()},updateData:function(){this.updateTable(this.$refs.table,"listServices","createService")},refreshService:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.describeService().then(function(e){"function"===typeof s&&s(e),t.updateServiceData(e)}).catch(function(e){return k["a"].exception(t,e,"Loading service failed")})},showInEditor:function(e){this.refreshService(e,function(e){w["a"].$emit("insertProcessGraph",e.processGraph)})},serviceCreated:function(e){var t=this;if(this.$refs.table){this.$refs.table.addData(e);var s=[];this.isMapServiceSupported(e.type)&&s.push({text:"View on map",action:function(){return t.viewService(e)}}),this.supports("describeService")&&s.push({text:"Details",action:function(){return t.serviceInfo(e)}}),this.supports("deleteService")&&s.push({text:"Delete",action:function(){return t.deleteService(e)}}),k["a"].confirm(this,"Web Service created!",s)}},getTitleField:function(){return new _e["a"]("title","Title",{type:"string"})},getDescriptionField:function(){return new _e["a"]("description","Description",{type:"string",format:"commonmark"},"CommonMark (Markdown) is allowed.")},getServiceTypeField:function(){return new _e["a"]("type","Type",{type:"string",format:"service-type"},"",!0)},getBillingPlanField:function(){return new _e["a"]("plan","Billing plan",{type:"string",format:"billing-plan"})},getBudgetField:function(){return new _e["a"]("budget","Budget",{type:"number",format:"budget",default:null})},getEnabledField:function(){return new _e["a"]("enabled","Enabled",{type:"boolean",default:!0})},getParametersField:function(){return new _e["a"]("parameters","Parameters",{type:"object",format:"service-type-parameters"})},normalizeToDefaultData:function(e){return"undefined"===typeof e.title||"string"===typeof e.title&&0!==e.title.length||(e.title=null),"undefined"===typeof e.description||"string"===typeof e.description&&0!==e.description.length||(e.description=null),"undefined"!==typeof e.enabled&&"boolean"!==typeof e.enabled&&(e.enabled=!0),"undefined"===typeof e.parameters||k["a"].isObject(e.parameters)||(e.parameters={}),"undefined"===typeof e.plan||"string"===typeof e.plan&&0!==e.plan.length||(e.plan=null),"undefined"!==typeof e.budget&&("number"!==typeof e.budget||e.budget<0)&&(e.budget=null),e},createService:function(e,t){var s=this;t=this.normalizeToDefaultData(t),this.connection.createService(e,t.type,t.title,t.description,t.enabled,t.parameters,t.plan,t.budget).then(function(e){s.serviceCreated(e)}).catch(function(e){k["a"].exception(s,e,"Creating service failed")})},createServiceFromScript:function(){var e=this;w["a"].$emit("getProcessGraph",function(t){var s=[e.getServiceTypeField(),e.getTitleField(),e.getDescriptionField(),e.getEnabledField(),e.supportsBillingPlans?e.getBillingPlanField():null,e.supportsBilling?e.getBudgetField():null,e.getParametersField()];w["a"].$emit("showDataForm","Create new web service",s,function(s){return e.createService(t,s)})})},editMetadata:function(e){var t=this;this.refreshService(e,function(e){var s=[t.getTitleField().setValue(e.title),t.getDescriptionField().setValue(e.description),t.getEnabledField().setValue(e.enabled),t.supportsBillingPlans?t.getBillingPlanField().setValue(e.plan):null,t.supportsBilling?t.getBudgetField().setValue(e.budget):null,t.getParametersField().setValue(e.parameters)];w["a"].$emit("showDataForm","Edit web service",s,function(s){return t.updateService(e,s)})})},serviceInfo:function(e){this.refreshService(e,function(e){w["a"].$emit("showServiceInfo",e.getAll())})},replaceProcessGraph:function(e){var t=this;w["a"].$emit("getProcessGraph",function(s){e.updateService({processGraph:s}).then(function(e){k["a"].ok(t,"Service process graph successfully updated."),t.updateServiceData(e)}).catch(function(e){return k["a"].exception(t,e,"Replacing process graph failed")})})},updateTitle:function(e,t){this.updateService(e,{title:t})},toggleEnabled:function(e){this.updateService(e,{enabled:!e.enabled})},updateService:function(e,t){var s=this;t=this.normalizeToDefaultData(t),e.updateService(t).then(function(e){k["a"].ok(s,"Service successfully updated web service."),s.updateServiceData(e)}).catch(function(e){return k["a"].exception(s,e,"Updating service failed")})},deleteService:function(e){var t=this;e.deleteService().then(function(){t.$refs.table.removeData(e.serviceId),w["a"].$emit("removeWebService",e.serviceId)}).catch(function(e){k["a"].exception(t,e,"Deleting service failed")})},viewService:function(e){k["a"].info(this,"Requesting tiles from server. Please wait..."),w["a"].$emit("showWebService",e)},updateServiceData:function(e){this.$refs.table.replaceData(e)}}},Je=$e,Re=(s("916f"),Object(T["a"])(Je,Be,Ne,!1,null,null,null)),Ue=Re.exports,ze={name:"UserWorkspace",mixins:[_["a"]],components:{FilePanel:ke,JobPanel:Ee,ProcessGraphPanel:Le,ServicePanel:Ue,Tabs:ce,Tab:ve},computed:{supportsJobs:function(){return this.supports("listJobs")||this.supports("createJob")},supportsServices:function(){return this.supports("listServices")||this.supports("createService")},supportsProcessGraphs:function(){return this.supports("listProcessGraphs")||this.supports("createProcessGraph")},supportsFiles:function(){return this.supports("listFiles")||this.supports("uploadFile")}}},He=ze,qe=(s("b5d7"),Object(T["a"])(He,se,ie,!1,null,null,null)),Ye=qe.exports,We=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Tabs",{ref:"tabs",attrs:{id:"viewerContent"}},[s("Tab",{attrs:{id:"mapView",name:"Map",icon:"fa-map",selected:!0}},[s("MapViewer",{ref:"mapViewer"})],1),s("Tab",{attrs:{id:"imageView",name:"Images",icon:"fa-image"}},[s("ImageViewer",{ref:"imageViewer"})],1),s("Tab",{attrs:{id:"dataView",name:"Data",icon:"fa-database"}},[s("DataViewer",{ref:"dataViewer"})],1)],1)},Xe=[],Ze=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"dataViewer"}},[e.isText()?s("div",{staticClass:"text"},[e._v(e._s(e.nl2br(e.content)))]):e.content?s("ObjectTree",{staticClass:"tree",attrs:{data:e.content}}):s("div",{ref:"emptyMsg",staticClass:"noDataMessage"},[e._v("Nothing to show.")])],1)},Ke=[],Qe=(s("a481"),s("0a37")),et={name:"DataViewer",components:{ObjectTree:Qe["a"]},data:function(){return{content:null}},mounted:function(){this.reset()},methods:{isText:function(){return"string"===typeof this.content},reset:function(){this.content=null},showJson:function(e){this.content=e,w["a"].$emit("showDataViewer")},showText:function(e){this.content=e,w["a"].$emit("showDataViewer")},showBlob:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(null==s&&(s=e.type),s){case"application/json":k["a"].blobToText(e,function(e){var s=JSON.parse(e.target.result);t.showJson(s)});break;case"text/plain":k["a"].blobToText(e,function(e){t.showText(e.target.result)});break}},nl2br:function(e){return"undefined"===typeof e||null===e?"":(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")}}},tt=et,st=(s("e4f1"),Object(T["a"])(tt,Ze,Ke,!1,null,"42f79d16",null)),it=st.exports,rt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"imageContainer",attrs:{id:"imageViewer"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"text"==e.visibleContent,expression:"visibleContent == 'text'"}],ref:"emptyMsg",staticClass:"noDataMessage"}),s("img",{directives:[{name:"show",rawName:"v-show",value:"image"==e.visibleContent,expression:"visibleContent == 'image'"}],ref:"image",on:{click:e.resize}})])},at=[],nt={name:"ImageViewer",data:function(){return{script:null,visibleContent:"text"}},mounted:function(){this.reset(),this.resize()},methods:{reset:function(){this.setMessage("Nothing to show.")},setMessage:function(e){this.$refs.emptyMsg.innerText=e,this.visibleContent="text"},showImage:function(e){var t=this;this.setMessage("Loading image..."),w["a"].$emit("showImageViewer"),this.$refs.image.onload=function(){t.visibleContent="image"},this.$refs.image.src=e},showImageBlob:function(e){this.showImage(URL.createObjectURL(e))},showImageBase64:function(e){contentType,btoa(e);this.showImage(e)},resize:function(){this.$refs.image&&(this.$refs.image.style.maxWidth?(this.$refs.image.style.maxWidth=null,this.$refs.image.style.cursor="zoom-out",this.$refs.image.title="Click to shrink (fit to screen)"):(this.$refs.image.style.maxWidth="100%",this.$refs.image.style.cursor="zoom-in",this.$refs.image.title="Click to enlarge"))}}},ot=nt,lt=Object(T["a"])(ot,rt,at,!1,null,null,null),ct=lt.exports,ut=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"mapCanvas"}})},dt=[],ht=(s("6cc5"),s("e11e")),pt=s.n(ht),ft=s("81b6"),vt=(s("b048"),s("6005"),s("9d1c"),s("5cd3"),s("b53a"),{name:"MapViewer",data:function(){return{options:{fullscreenControl:!0,center:[50.1725,9.15],zoom:6},map:null,baseLayer:{osm:null},layer:{},layerGroup:null,layerControl:null,sideBySideComponent:null}},mounted:function(){this.$nextTick(this.createMap),w["a"].$on("showWebService",this.showWebService),w["a"].$on("removeWebService",this.removeWebService)},methods:{createMap:function(){var e=this;this.map=new pt.a.Map("mapCanvas",this.options),this.layerControl=pt.a.control.layers(),this.layerControl.addTo(this.map),this.baseLayer.osm=pt.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{name:"OpenStreetMap",attribution:'Map data &copy; <a href="http://www.osm.org">OpenStreetMap</a>'}),this.baseLayer.osm.addTo(this.map),this.layerControl.addBaseLayer(this.baseLayer.osm,this.baseLayer.osm.options.name),this.layerGroup=pt.a.layerGroup([this.baseLayer.osm]);var t=new pt.a.Control.TileLoadingProgress({leafletElt:this.layerGroup,position:"bottomleft"});t.addTo(this.map),this.map.on("layeradd",this.onLayerAdd),this.map.on("overlayremove",this.onOverlayRemove),w["a"].$on("resizedIDE",function(){return e.map.invalidateSize()})},onLayerAdd:function(e){var t=this.getShownLayers();2==t.length&&null===this.sideBySideComponent&&(this.sideBySideComponent=pt.a.control.sideBySide(t[0],t[1]),this.sideBySideComponent.addTo(this.map))},onOverlayRemove:function(e){var t=this.getShownLayers();2!=t.length&&null!==this.sideBySideComponent&&(this.map.removeControl(this.sideBySideComponent),this.sideBySideComponent=null)},getShownLayers:function(){var e=[];for(var t in this.layer)this.map.hasLayer(this.layer[t])&&e.push(this.layer[t]);return e},showWebService:function(e){switch(w["a"].$emit("showMapViewer"),e.type.toLowerCase()){case"xyz":this.updateXYZLayer(e);break;default:k["a"].error(this,"Sorry, the service type is not supported by the map.")}},showGTiffBlob:function(e){w["a"].$emit("showMapViewer"),this.updateTiffLayerBlob(e)},removeWebService:function(e){this.layer[e]&&this.removeLayerFromMap(e)},addLayerToMap:function(e){this.layerGroup.addLayer(this.layer[e]),this.layer[e].addTo(this.map),this.layerControl.addOverlay(this.layer[e],this.layer[e].options.name)},removeLayerFromMap:function(e){this.layerGroup.removeLayer(this.layer[e]),this.layer[e].removeFrom(this.map),this.layerControl.removeLayer(this.layer[e]),delete this.layer[e]},removeOldLayer:function(e){for(var t in this.layer)null!==this.layer[t]&&this.layer[t]!==e&&this.removeLayerFromMap(t)},updateTiffLayerBlob:function(e){this.updateTiffLayer(URL.createObjectURL(e))},updateTiffLayer:function(e){var t=k["a"].formatDateTime(Date.now());if("undefined"===typeof this.layer[t]){var s=new ft["LeafletGeotiffRenderer"];s.name="openEO-geotiff-visualizer";var i={name:t+" (GeoTiff)",renderer:s};this.layer[t]=Object(ft["leafletGeotiff"])(e,i),this.addLayerToMap(t)}else this.layer[t].setURL(e)},updateXYZLayer:function(e){var t=e.serviceId,s=e.url,i=e.title?e.title.substr(0,50):t.toUpperCase().substr(0,6);if("undefined"===typeof this.layer[t]){var r={name:i+" (XYZ)"};this.layer[t]=new pt.a.TileLayer(s,r),this.addLayerToMap(t)}else this.layer[t].setUrl(s,!1)}}}),mt=vt,bt=(s("3b8b"),Object(T["a"])(mt,ut,dt,!1,null,null,null)),gt=bt.exports,yt={name:"Viewer",components:{Tab:ve,Tabs:ce,DataViewer:it,ImageViewer:ct,MapViewer:gt},mounted:function(){w["a"].$on("showInViewer",this.showInViewer),w["a"].$on("showMapViewer",this.showMapViewer),w["a"].$on("showImageViewer",this.showImageViewer),w["a"].$on("showDataViewer",this.showDataViewer)},methods:{showMapViewer:function(){this.$refs.tabs.selectTab("mapView")},showImageViewer:function(){this.$refs.tabs.selectTab("imageView")},showDataViewer:function(){this.$refs.tabs.selectTab("dataView")},showInViewer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(e instanceof Blob))throw"No blob specified.";var s=e.type;switch(null===t||s&&-1!==s.indexOf("/")&&-1===s.indexOf("*")||(s=k["a"].getMimeTypeForOutputFormat(t)),"string"===typeof s&&(s=s.toLowerCase()),s){case"image/png":case"image/jpg":case"image/jpeg":case"image/gif":this.$refs.imageViewer.showImageBlob(e);break;case"application/json":case"text/plain":this.$refs.dataViewer.showBlob(e,s);break;case"image/tif":case"image/tiff":this.$refs.mapViewer.showGTiffBlob(e);break;default:k["a"].error(this,"Sorry, the returned content type is not supported to view.")}}}},wt=yt,kt=Object(T["a"])(wt,We,Xe,!1,null,null,null),Ct=kt.exports,St=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Tabs",{ref:"tabs",staticClass:"editor",attrs:{id:"processGraphContent"}},[s("Tab",{attrs:{id:"visual",name:"Visual Model",icon:"fa-code-branch",selected:!0,onBeforeShow:e.prepareProcessGraph,onShow:e.transferProcessGraph},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.tab;return[s("VisualEditor",{ref:"graphBuilder",attrs:{active:i.active,editable:e.editable,value:e.processGraph,id:e.id+"_visual",enableClear:e.enableClear,enableExecute:e.enableExecute,enableLocalStorage:e.enableLocalStorage,showDiscoveryToolbar:e.showDiscoveryToolbar}})]}}])}),s("Tab",{attrs:{id:"source",name:"Process Graph",icon:"fa-code",onBeforeShow:e.prepareProcessGraph,onShow:e.transferProcessGraph},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.tab;return[s("TextEditor",{ref:"sourceEditor",attrs:{active:i.active,editable:e.editable,value:e.processGraph,id:e.id+"_text",enableClear:e.enableClear,enableExecute:e.enableExecute,enableLocalStorage:e.enableLocalStorage}})]}}])})],1)},_t=[],Pt=s("8c66"),Ot=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"textEditor"},[s("EditorToolbar",{attrs:{editable:e.editable,onStore:e.getProcessGraph,onInsert:e.insertProcessGraph,onClear:e.clearProcessGraph,enableClear:e.enableClear,enableExecute:e.enableExecute,enableLocalStorage:e.enableLocalStorage}}),s("div",{staticClass:"sourceCodeEditor",attrs:{id:e.id}})],1)},xt=[],Dt=s("1190"),jt=(s("a7be"),s("f9d4"),s("56b3")),Et=s.n(jt);function Tt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function Mt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Tt(s,!0).forEach(function(t){Object(g["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Tt(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var Ft={name:"TextEditor",components:{EditorToolbar:Dt["a"]},props:{id:String,editable:{type:Boolean,default:!0},active:{type:Boolean,default:!1},value:{type:Object,default:null},enableClear:{type:Boolean,default:!0},enableLocalStorage:{type:Boolean,default:!0},enableExecute:{type:Boolean,default:!0}},computed:Mt({},k["a"].mapGetters("server",["processRegistry"])),data:function(){return{editorOptions:{mode:"javascript",indentUnit:2,lineNumbers:!0,readOnly:!this.$props.editable},editor:null}},mounted:function(){this.active&&this.onShow()},watch:{active:function(e){e&&this.onShow()}},methods:{onShow:function(){null===this.editor?(this.editor=Et()(document.getElementById(this.id),this.editorOptions),this.editor.setSize(null,"100%"),this.insertProcessGraph(this.value)):this.editor.refresh()},clearProcessGraph:function(){this.insertToEditor("",!0)},getProcessGraph:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.editor.getValue(),r=null;if(i)try{r=JSON.parse(i)}catch(n){return void t("Process graph is invalid JSON",n)}if(null!==r)try{var a=new l["ProcessGraph"](r,this.processRegistry);a.parse()}catch(n){return void t("Process graph invalid",n)}null!==r||s?e(r):t("No process graph specified.")},insertToEditor:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?this.editor.setValue(e):this.editor.replaceSelection(e)},insertProcessGraph:function(e){e?this.insertToEditor(JSON.stringify(e,null,2),!0):this.clearProcessGraph()}}},At=Ft,It=(s("e944"),Object(T["a"])(At,Ot,xt,!1,null,"910fe5f2",null)),Lt=It.exports,Bt={name:"Editor",components:{VisualEditor:Pt["default"],TextEditor:Lt,Tabs:ce,Tab:ve},props:{id:String,editable:{type:Boolean,default:!0},processGraph:{type:Object,default:null},enableClear:{type:Boolean,default:!0},enableLocalStorage:{type:Boolean,default:!0},enableExecute:{type:Boolean,default:!0},showDiscoveryToolbar:{type:Boolean,default:!0}},data:function(){return{lastPgToInsert:null,pgToInsert:null}},computed:{activeEditor:function(){return"source"===this.$refs.tabs.getActiveTabId()?this.$refs.sourceEditor:this.$refs.graphBuilder},inactiveEditor:function(){return"source"!==this.$refs.tabs.getActiveTabId()?this.$refs.sourceEditor:this.$refs.graphBuilder}},methods:{getProcessGraph:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];null===s&&(s=function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null!==s?k["a"].exception(t,s,e):k["a"].error(t,e)}),this.activeEditor.getProcessGraph(e,s,i)},insertProcess:function(e){this.activeEditor.insertProcess(e)},insertCollection:function(e){this.activeEditor.insertCollection(e)},insertProcessGraph:function(e){this.activeEditor.insertProcessGraph(e)},prepareProcessGraph:function(){var e=this;return this.editable?new Promise(function(t,s){e.getProcessGraph(function(s){e.pgToInsert=s,t(!0)},function(s,i){i&&k["a"].exception(e,i,s),t(!1)},!0)}):(this.pgToInsert=this.processGraph,!0)},transferProcessGraph:function(){this.activeEditor.onShow(),this.lastPgToInsert&&JSON.stringify(this.pgToInsert)===this.lastPgToInsert||(this.insertProcessGraph(this.pgToInsert),this.lastPgToInsert=JSON.stringify(this.pgToInsert)),this.pgToInsert=null}}},Nt=Bt,Vt=Object(T["a"])(Nt,St,_t,!1,null,null,null),Gt=Vt.exports,$t=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{ref:"modal",scopedSlots:e._u([{key:"main",fn:function(){return[s("div",{staticClass:"docgen"},[s("Collection",{attrs:{collectionData:e.collection,version:e.version}},[s("template",{slot:"collection-spatial-extent"},[s("div",{attrs:{id:"collectionMap"}})])],2)],1)]},proxy:!0}])})},Jt=[],Rt=s("714b"),Ut=s("47ed"),zt={name:"CollectionModal",components:{Modal:Rt["a"],Collection:Ut["a"]},data:function(){return{version:null,collection:null}},methods:{show:function(e,t){this.version=t,this.collection=e,this.$refs.modal.show(e.id),this.$nextTick(this.initMap)},initMap:function(){var e=new pt.a.Map("collectionMap"),t=pt.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{name:"OpenStreetMap",attribution:'Map data &copy; <a href="http://www.osm.org">OpenStreetMap</a>'});t.addTo(e);var s=pt.a.rectangle([[this.collection.extent.spatial[3],this.collection.extent.spatial[0]],[this.collection.extent.spatial[1],this.collection.extent.spatial[2]]]);s.addTo(e),e.fitBounds(s.getBounds())}}},Ht=zt,qt=(s("2bd0"),Object(T["a"])(Ht,$t,Jt,!1,null,null,null)),Yt=qt.exports,Wt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{ref:"modal",scopedSlots:e._u([{key:"main",fn:function(){return[s("div",{staticClass:"docgen"},[s("Process",{attrs:{processData:e.process,version:e.version,provideDownload:!1}})],1)]},proxy:!0}])})},Xt=[],Zt=s("2b37"),Kt={name:"ProcessModal",components:{Modal:Rt["a"],Process:Zt["a"]},data:function(){return{version:null,process:null}},methods:{show:function(e,t){this.version=t,this.process=e,this.$refs.modal.show(e.id)}}},Qt=Kt,es=(s("9b84"),Object(T["a"])(Qt,Wt,Xt,!1,null,null,null)),ts=es.exports,ss=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{ref:"modal",scopedSlots:e._u([{key:"main",fn:function(){return[s("div",{staticClass:"vue-component server-info"},[s("Capabilities",{attrs:{capabilities:e.capabilities,url:e.url}}),e.services?[s("h3",[e._v("Supported secondary web service types")]),s("SupportedServiceTypes",{attrs:{version:e.capabilities.version,services:e.services}})]:e._e(),e.formats?[s("h3",[e._v("Supported output file formats")]),s("SupportedFileFormats",{attrs:{version:e.capabilities.version,formats:e.formats}})]:e._e()],2)]},proxy:!0}])})},is=[],rs=s("f0df"),as=s("ca30"),ns=s("48d5"),os={name:"ServerInfoModal",components:{Modal:Rt["a"],Capabilities:rs["a"],SupportedFileFormats:as["a"],SupportedServiceTypes:ns["a"]},data:function(){return{url:null,capabilities:null,formats:null,services:null}},methods:{show:function(e,t,s){this.url=e.getBaseUrl(),this.capabilities=e.capabilities().toPlainObject(),this.formats=t,this.services=s,this.$refs.modal.show(e.capabilities().title()||"Server information")}}},ls=os,cs=(s("7bde"),Object(T["a"])(ls,ss,is,!1,null,null,null)),us=cs.exports,ds=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{ref:"modal",attrs:{minWidth:"80%"},scopedSlots:e._u([{key:"main",fn:function(){return[s("section",{staticClass:"vue-component basedata"},[s("div",{staticClass:"tabular"},[s("label",[e._v("ID:")]),s("code",{staticClass:"value"},[e._v(e._s(e.job.id))])])]),s("section",{staticClass:"vue-component progress"},[s("h3",[e._v("Progress")]),s("div",{staticClass:"tabular"},[s("label",[e._v("Submitted:")]),s("span",{staticClass:"value"},[e._v(e._s(e.submitted))])]),s("div",{staticClass:"tabular"},[s("label",[e._v("Updated:")]),s("span",{staticClass:"value"},[e._v(e._s(e.updated))])]),s("div",{staticClass:"tabular"},[s("label",[e._v("Status:")]),s("span",{staticClass:"value status",attrs:{"data-value":e.job.status}},[e._v(e._s(e.job.status))])]),"number"===typeof e.job.progress?s("div",{staticClass:"tabular"},[s("label",[e._v("Progress:")]),s("div",{staticClass:"value"},[s("div",{staticClass:"progressBar",class:{error:!!e.job.error}},[s("div",{staticClass:"completed",style:"width: "+e.progress},[e.job.progress>50?s("span",{staticClass:"number"},[e._v(e._s(e.progress))]):e._e(),e._v(" \n\t\t\t\t\t")]),e.job.progress<=50?s("span",{staticClass:"number"},[e._v(e._s(e.progress))]):e._e()])])]):e._e(),e.job.error?s("div",{staticClass:"tabular"},[s("label",[e._v("Error(s):")]),s("div",{staticClass:"value"},[s("div",{staticClass:"errorMessage"},[e._v(e._s(e.job.error.message))]),Array.isArray(e.job.error.links)&&e.job.error.links.length>0?s("div",{staticClass:"errorLinks"},[s("strong",[e._v("Further information:")]),s("br"),s("LinkList",{attrs:{links:e.job.error.links}})],1):e._e(),s("div",{staticClass:"errorInternals"},[e._v("\n\t\t\t\t\tCode: "),s("code",[e._v(e._s(e.job.error.code))]),e.job.error.id?s("span",{staticClass:"sepl"},[e._v("ID: "),s("code",[e._v(e._s(e.job.error.id))])]):e._e()])])]):e._e()]),e.job.plan||e.job.costs||e.job.budget?s("section",{staticClass:"vue-component billing"},[s("h3",[e._v("Billing")]),e.job.plan?s("div",{staticClass:"tabular"},[s("label",[e._v("Billing plan:")]),s("span",{staticClass:"value"},[e._v(e._s(e.job.plan))])]):e._e(),e.job.costs?s("div",{staticClass:"tabular"},[s("label",[e._v("Costs:")]),s("span",{staticClass:"value"},[e._v(e._s(e.formatCurrency(e.job.costs)))])]):e._e(),e.job.budget?s("div",{staticClass:"tabular"},[s("label",[e._v("Budget:")]),s("span",{staticClass:"value"},[e._v(e._s(e.formatCurrency(e.job.budget)))])]):e._e()]):e._e(),e.job.description?s("section",{staticClass:"vue-component description"},[s("h3",[e._v("Description")]),s("Description",{attrs:{description:e.job.description}})],1):e._e(),s("section",{staticClass:"process-graph"},[s("div",{staticClass:"vue-component"},[s("h3",[e._v("Process Graph")])]),s("Editor",{staticClass:"infoViewer",attrs:{processGraph:e.job.processGraph,editable:!1,enableExecute:!1,id:"jobPgViewer"}})],1)]},proxy:!0}])})},hs=[],ps=s("8088");function fs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function vs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fs(s,!0).forEach(function(t){Object(g["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fs(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var ms={name:"JobInfoModal",components:{Description:ps["a"],Editor:Gt,LinkList:W["a"],Modal:Rt["a"]},computed:vs({},k["a"].mapGetters("server",["formatCurrency"]),{submitted:function(){return k["a"].formatDateTime(this.job.submitted)},updated:function(){return this.job.updated?k["a"].formatDateTime(this.job.updated):"N/A"},displayTitle:function(){return"Batch Job: "+(this.job.title||"#"+this.job.id)},progress:function(){return"number"===typeof this.job.progress?Math.round(10*this.job.progress)/10+"%":"0%"}}),data:function(){return{job:{}}},methods:{show:function(e){this.job=e,this.$refs.modal.show(this.displayTitle)}}},bs=ms,gs=(s("50ae"),Object(T["a"])(bs,ds,hs,!1,null,"12d38b23",null)),ys=gs.exports,ws=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{ref:"modal",attrs:{minWidth:"80%"},scopedSlots:e._u([{key:"main",fn:function(){return[s("section",{staticClass:"vue-component basedata"},[s("div",{staticClass:"tabular"},[s("label",[e._v("ID:")]),s("code",{staticClass:"value"},[e._v(e._s(e.pg.id))])])]),e.pg.description?s("section",{staticClass:"vue-component description"},[s("h3",[e._v("Description")]),s("Description",{attrs:{description:e.pg.description}})],1):e._e(),s("section",{staticClass:"process-graph"},[s("div",{staticClass:"vue-component"},[s("h3",[e._v("Process Graph")])]),s("Editor",{staticClass:"infoViewer",attrs:{processGraph:e.pg.processGraph,editable:!1,enableExecute:!1,id:"pgInfoViewer"}})],1)]},proxy:!0}])})},ks=[],Cs={name:"ProcessGraphInfoModal",components:{Description:ps["a"],Editor:Gt,Modal:Rt["a"]},computed:{displayTitle:function(){return"Process Graph: "+(this.pg.title||"#"+this.pg.id)}},data:function(){return{pg:{}}},methods:{show:function(e){this.pg=e,this.$refs.modal.show(this.displayTitle)}}},Ss=Cs,_s=Object(T["a"])(Ss,ws,ks,!1,null,null,null),Ps=_s.exports,Os=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{ref:"modal",attrs:{minWidth:"80%"},scopedSlots:e._u([{key:"main",fn:function(){return[s("section",{staticClass:"vue-component basedata"},[s("div",{staticClass:"tabular"},[s("label",[e._v("ID:")]),s("code",{staticClass:"value"},[e._v(e._s(e.service.id))])]),s("div",{staticClass:"tabular"},[s("label",[e._v("Type:")]),s("span",{staticClass:"value"},[e._v(e._s(e.type))])]),s("div",{staticClass:"tabular"},[s("label",[e._v("URL:")]),s("code",{staticClass:"value"},[e._v(e._s(e.service.url))])]),s("div",{staticClass:"tabular"},[s("label",[e._v("Enabled:")]),s("span",{staticClass:"value boolean"},[!0===e.service.enabled?s("span",[s("i",{staticClass:"fas fa-check-circle"})]):!1===e.service.enabled?s("span",[s("i",{staticClass:"fas fa-times-circle"})]):s("span",[s("i",{staticClass:"fas fa-question-circle"})])])]),e.service.submitted?s("div",{staticClass:"tabular"},[s("label",[e._v("Submitted:")]),s("code",{staticClass:"value"},[e._v(e._s(e.submitted))])]):e._e()]),e.service.plan||e.service.costs||e.service.budget?s("section",{staticClass:"vue-component billing"},[s("h3",[e._v("Billing")]),e.service.plan?s("div",{staticClass:"tabular"},[s("label",[e._v("Billing plan:")]),s("span",{staticClass:"value"},[e._v(e._s(e.service.plan))])]):e._e(),e.service.costs?s("div",{staticClass:"tabular"},[s("label",[e._v("Costs:")]),s("span",{staticClass:"value"},[e._v(e._s(e.formatCurrency(e.service.costs)))])]):e._e(),e.service.budget?s("div",{staticClass:"tabular"},[s("label",[e._v("Budget:")]),s("span",{staticClass:"value"},[e._v(e._s(e.formatCurrency(e.service.budget)))])]):e._e()]):e._e(),e.service.description?s("section",{staticClass:"vue-component description"},[s("h3",[e._v("Description")]),s("Description",{attrs:{description:e.service.description}})],1):e._e(),s("section",{staticClass:"process-graph"},[s("div",{staticClass:"vue-component"},[s("h3",[e._v("Process Graph")])]),s("Editor",{staticClass:"infoViewer",attrs:{processGraph:e.service.processGraph,editable:!1,enableExecute:!1,id:"servicePgViewer"}})],1),e.hasParameters?s("section",{staticClass:"vue-component parameters"},[s("h3",[e._v("Parameters")]),e._l(e.service.parameters,function(t,i){return s("div",{key:i,staticClass:"tabular"},[s("label",[e._v(e._s(i)+":")]),s("div",{staticClass:"value"},["object"===typeof e.formattedValue?s("ObjectTree",{attrs:{data:t}}):[e._v(e._s(e.formattedValue))]],2)])})],2):e._e(),e.hasAttributes?s("section",{staticClass:"vue-component attributes"},[s("h3",[e._v("Attributes")]),e._l(e.service.attributes,function(t,i){return s("div",{key:i,staticClass:"tabular"},[s("label",[e._v(e._s(i)+":")]),s("div",{staticClass:"value"},["object"===typeof e.formattedValue?s("ObjectTree",{attrs:{data:t}}):[e._v(e._s(e.formattedValue))]],2)])})],2):e._e()]},proxy:!0}])})},xs=[];function Ds(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function js(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ds(s,!0).forEach(function(t){Object(g["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ds(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var Es={name:"ServiceInfoModal",components:{Description:ps["a"],Editor:Gt,Modal:Rt["a"],ObjectTree:Qe["a"]},computed:js({},k["a"].mapGetters("server",["formatCurrency"]),{hasAttributes:function(){return k["a"].size(this.service.attributes)>0},hasParameters:function(){return k["a"].size(this.service.parameters)>0},submitted:function(){return k["a"].formatDateTime(this.service.submitted)},type:function(){return"string"===typeof this.service.type?this.service.type.toUpperCase():""},displayTitle:function(){return"Web Service: "+(this.service.title||this.type+" #"+this.service.id)}}),data:function(){return{service:{}}},methods:{show:function(e){this.service=e,this.$refs.modal.show(this.displayTitle)}}},Ts=Es,Ms=Object(T["a"])(Ts,Os,xs,!1,null,null,null),Fs=Ms.exports,As=s("14c0"),Is=s("cbd9");function Ls(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function Bs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ls(s,!0).forEach(function(t){Object(g["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ls(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var Ns={name:"IDE",mixins:[_["a"]],components:{DiscoveryToolbar:Is["a"],Editor:Gt,Viewer:Ct,UserMenu:te,UserWorkspace:Ye,CollectionModal:Yt,ProcessModal:ts,ServerInfoModal:us,JobInfoModal:ys,ProcessGraphInfoModal:Ps,ServiceInfoModal:Fs,ParameterModal:As["a"]},data:function(){return{moving:!1,movingOffset:0,separators:[{left:"discovery",right:"workspace",anchor:"left",width:"20%"},{left:"workspace",right:"viewer",anchor:"right",width:"30%"}],version:y.version}},computed:Bs({},k["a"].mapState("server",["collections","processes","outputFormats","serviceTypes"])),mounted:function(){w["a"].$on("showCollectionInfo",this.showCollectionInfo),w["a"].$on("showProcessInfo",this.showProcessInfo),w["a"].$on("showJobInfo",this.showJobInfo),w["a"].$on("showProcessGraphInfo",this.showProcessGraphInfo),w["a"].$on("showServiceInfo",this.showServiceInfo),w["a"].$on("showDataForm",this.showDataForm),w["a"].$on("getProcessGraph",this.getProcessGraph),w["a"].$on("insertProcessGraph",this.insertProcessGraph),window.onresize=function(e){w["a"].$emit("resizedIDE")}},methods:{getProcessGraph:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.$refs.editor.getProcessGraph(e,t,s)},insertProcessGraph:function(e){this.$refs.editor.insertProcessGraph(e)},insertCollection:function(e){this.$refs.editor.insertCollection(e)},insertProcess:function(e){this.$refs.editor.insertProcess(e)},startMovingSeparator:function(e,t){this.moving=!1,1===e.which&&(this.moving=t)},stopMovingSeparator:function(e){this.moving=!1},moveSeparator:function(e){if(!1!==this.moving&&this.separators[this.moving]&&0!==e.movementX){var t,s=this.separators[this.moving],i=this.$refs[s[s.anchor]];t="right"===s.anchor?Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)-e.x:e.x,i.style.width=t+"px",w["a"].$emit("resizedIDE"),e.preventDefault(),e.stopPropagation()}},centerSeparator:function(e){this.moving=!1;var t=this.separators[e];if(t){var s=this.$refs[t[t.anchor]];s.getBoundingClientRect().width<220?s.style.width=t.width:s.style.width=0,w["a"].$emit("resizedIDE")}},showCollectionInfo:function(e){var t=this;this.connection.describeCollection(e).then(function(e){t.$refs.collectionModal.show(e,t.apiVersion)}).catch(function(e){return k["a"].error(t,"Sorry, can't load collection details.")})},showProcessInfo:function(e){var t=this.processes.find(function(t){return t.id==e});this.$refs.processModal.show(t,this.apiVersion)},showServiceInfo:function(e){this.$refs.serviceModal.show(e)},showJobInfo:function(e){this.$refs.jobModal.show(e)},showProcessGraphInfo:function(e){this.$refs.pgModal.show(e)},showServerInfo:function(){this.$refs.serverInfoModal.show(this.connection,this.outputFormats,this.serviceTypes)},showWebEditorInfo:function(){w["a"].$emit("showWebEditorInfo")},showDataForm:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r="function"===typeof s;this.$refs.parameterModal.show(e,t.filter(function(e){return null!==e}),r,s,i)}}},Vs=Ns,Gs=(s("352f"),Object(T["a"])(Vs,A,I,!1,null,null,null)),$s=Gs.exports,Js=s("bc3a"),Rs=s.n(Js);function Us(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function zs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Us(s,!0).forEach(function(t){Object(g["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Us(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}window.axios=Rs.a;var Hs={name:"openeo-web-editor",components:{ConnectForm:F,IDE:$s,Modal:Rt["a"]},data:function(){return{pkg:y}},mounted:function(){w["a"].$on("showMessageModal",this.showMessageModal),w["a"].$on("showHtmlModal",this.showHtmlModal),w["a"].$on("showListModal",this.showListModal),w["a"].$on("showWebEditorInfo",this.showWebEditorInfo)},computed:zs({},k["a"].mapGetters("server",["isConnected"])),methods:{showMessageModal:function(e,t){this.$refs.modal.showMessage(e,t)},showHtmlModal:function(e,t){this.$refs.modal.showHtml(e,t)},showListModal:function(e,t,s){this.$refs.modal.showList(e,t,s)},showWebEditorInfo:function(){this.showHtmlModal("openEO Web Editor "+y.version,this.$refs.webEditorInfo)}}},qs=Hs,Ys=(s("5117"),Object(T["a"])(qs,m,b,!1,null,null,null)),Ws=Ys.exports;i["a"].use(r["a"]),i["a"].config.productionTip=!1,i["a"].config.errorHandler=function(e,t,s){console.error(e,s),(e instanceof Error||"string"===typeof e)&&t&&t.$snotify&&t.$snotify.error(e.message||e,"Fatal error",v["a"].snotifyDefaults)},new i["a"]({store:f,render:function(e){return e(Ws)}}).$mount("#app")},5740:function(e,t,s){},6168:function(e,t,s){"use strict";var i=s("2b0e");t["a"]=new i["a"]},6224:function(e,t,s){"use strict";var i=s("468d"),r=s.n(i);r.a},6303:function(e,t,s){"use strict";var i=s("b8ca"),r=s.n(i);r.a},"714b":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.shown?s("div",{attrs:{id:"modal"},on:{mousedown:e.possiblyClose}},[s("div",{staticClass:"modal-container",style:{"min-width":e.minWidth,"max-width":e.maxWidth}},[s("header",[s("h2",[e._v(e._s(e.title))]),s("span",{staticClass:"close",on:{click:e.close}},[s("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),s("main",[e._t("main",["string"===typeof e.html?s("div",{domProps:{innerHTML:e._s(e.html)}}):null!==e.html&&"object"===typeof e.html?s("div",{domProps:{innerHTML:e._s(e.html.innerHTML)}}):null!==e.list?[0==e.listCount?s("strong",{staticClass:"listEmpty"},[e._v("Sorry, no data available.")]):s("ul",{staticClass:"list"},e._l(e.listItems,function(t,i){return s("li",{key:i,on:{click:function(s){return e.doMainListAction(t,i)}}},[s("strong",[e._v(e._s(Array.isArray(e.listItems)?t:i))]),e._l(e.otherListActions,function(r){return s("button",{key:r.icon,attrs:{type:"button",title:r.title},on:{click:function(s){return s.preventDefault(),s.stopPropagation(),e.doListAction(t,i,r.callback)}}},[s("i",{class:"fas fa-"+r.icon})])})],2)}),0)]:[e._v(e._s(e.message))]])],2),s("footer",[e._t("footer")],2)])]):e._e()},r=[],a=s("6168"),n=s("025e"),o=function(){return{title:"Sorry, no message passed!",message:null,html:null,list:null,listActions:[],shown:!1,onClose:null}},l={name:"Modal",props:{minWidth:{type:String,default:"30%"},maxWidth:{type:String,default:"80%"}},data:function(){return o()},mounted:function(){a["a"].$on("showModal",this.showModal)},computed:{listCount:function(){return n["a"].size(this.listItems)},listItems:function(){return"function"==typeof this.list?this.list():this.list},otherListActions:function(){return Array.isArray(this.listActions)&&this.listActions.length>1?this.listActions.slice(1):[]}},methods:{escCloseListener:function(e){if("Escape"==e.key)return this.close(),e.preventDefault(),e.stopPropagation(),!1},show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.reset(),this._show(e,t)},showMessage:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.reset(),this.message=t,this._show(e,s)},showHtml:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.reset(),this.html=t,this._show(e,s)},showList:function(e,t,s){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.reset(),this.list=t,this.listActions=s,this._show(e,i)},_show:function(e,t){this.onClose=t,this.title=e,window.addEventListener("keydown",this.escCloseListener),this.shown=!0},reset:function(){Object.assign(this,o())},close:function(){("function"!==typeof this.onClose||this.onClose())&&(this.shown=!1,window.removeEventListener("keydown",this.escCloseListener))},possiblyClose:function(e){e.target==document.getElementById("modal")&&this.close()},doListAction:function(e,t,s){var i=s(Array.isArray(this.listItems)?e:t);!0===i&&this.close()},doMainListAction:function(e,t){this.listActions.length>0&&this.doListAction(e,t,this.listActions[0].callback)}}},c=l,u=(s("22d7"),s("2877")),d=Object(u["a"])(c,i,r,!1,null,null,null);t["a"]=d.exports},"7b23":function(e,t,s){},"7bde":function(e,t,s){"use strict";var i=s("0b46"),r=s.n(i);r.a},"82a7":function(e,t,s){},"8c66":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"visualEditor",staticClass:"visualEditor"},[s("EditorToolbar",{attrs:{editable:e.editable,onStore:e.getProcessGraph,onInsert:e.insertProcessGraph,onClear:e.clearProcessGraph,enableClear:e.enableClear,enableExecute:e.enableExecute,enableLocalStorage:e.enableLocalStorage}},[s("button",{directives:[{name:"show",rawName:"v-show",value:e.editable&&e.blocks.canDelete(),expression:"editable && blocks.canDelete()"}],attrs:{type:"button",title:"Delete selected elements"},on:{click:function(t){return e.blocks.deleteEvent()}}},[s("i",{staticClass:"fas fa-trash"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.editable&&e.blocks.hasUndo(),expression:"editable && blocks.hasUndo()"}],attrs:{type:"button",title:"Undo last change"},on:{click:function(t){return e.blocks.undo()}}},[s("i",{staticClass:"fas fa-undo-alt"})]),s("button",{class:{compactActive:e.blocks.compactMode},attrs:{type:"button",title:"Compact Mode"},on:{click:function(t){return e.blocks.toggleCompact()}}},[s("i",{staticClass:"fas fa-compress-arrows-alt"})]),s("button",{attrs:{type:"button",title:"Scale to perfect size"},on:{click:function(t){return e.perfectScale()}}},[s("i",{staticClass:"fas fa-arrows-alt"})]),s("button",{attrs:{type:"button",title:e.isFullScreen?"Close fullscreen":"Show fullscreen"},on:{click:function(t){return e.toggleFullScreen()}}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.isFullScreen,expression:"isFullScreen"}]},[s("i",{staticClass:"fas fa-compress"})]),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.isFullScreen,expression:"!isFullScreen"}]},[s("i",{staticClass:"fas fa-expand"})])])]),s("div",{staticClass:"editorSplitter"},[e.showDiscoveryToolbar&&e.editable?s("DiscoveryToolbar",{staticClass:"discoveryToolbar",attrs:{onAddCollection:e.insertCollection,onAddProcess:e.insertProcess}}):e._e(),s("div",{staticClass:"graphBuilder",attrs:{id:e.id},on:{drop:function(t){return e.onDrop(t)},dragover:function(t){return e.allowDrop(t)}}})],1),s("SchemaModal",{ref:"schemaModal"}),s("ParameterModal",{ref:"parameterModal"})],1)},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("bd86")),n=s("6168"),o=(s("8615"),s("7618")),l=(s("ac4d"),s("8a81"),function(e){this.historySize=30,this.blocks=e,this.history=[],this.enabled=!0});l.prototype.enable=function(e){this.enabled=e},l.prototype.save=function(){this.enabled&&(this.history.push(this.blocks.export()),this.history.length>this.historySize&&this.history.shift())},l.prototype.size=function(){return this.history.length},l.prototype.restoreLast=function(){if(this.history.length){var e=this.history.pop();this.blocks.import(e)}};var c=l,u=(s("6b54"),s("e270")),d=s("60a2"),h=s("fbda"),p=s("025e"),f=function(e,t,s,i,r){this.blocks=e,this.meta=i,this.name=t,this.type=s,this.defaultFont=10,this.historySaved=!1,this.id=r,this.hasFocus=!1,this.div=null,this.drag=null,this.lastScale=null,this.x=0,this.y=0,this.focusedField=null,this.result=!1,this.output=null,this.inputs=[],this.editables=[],this.fields={},this._createOutputField(i.returns),this._createInputFields(i.parameters,i.parameter_order)};f.prototype._createOutputField=function(e){p["a"].isObject(e)&&(this.output=new u["a"]("output",this.getDefaultOutputLabel(),e.schema,e.description,e.required,!0),this.output.setBlock(this),this.fields.output=this.output)},f.prototype._createInputFields=function(e,t){if(p["a"].isObject(e)){var s=Object.keys(e);for(var i in Array.isArray(t)&&t.length===s.length||(t=s),t){var r=t[i],a=e[r],n=new u["a"](r,r,a.schema,a.description,a.required,!1,a.experimental,a.deprecated);n.setBlock(this),this.inputs.push(n),n.isEditable()&&this.editables.push(n),this.fields[n.name]=n}}},f.prototype.setResult=function(e){this.result=e,this.render()},f.prototype.getHeight=function(){return 20+15*this.inputs.length},f.prototype.getWidth=function(){return this.hasInputs()?this.blocks.compactMode?110:170:this.blocks.compactMode?60:110},f.prototype.hasInputs=function(){return this.inputs.length>0},f.prototype.hasOutputEdges=function(){return this.output.getEdgeCount()>0},f.prototype.getDefaultOutputLabel=function(){return this.isCallbackArgument()?"Callback Argument":"Output"},f.prototype.setValues=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var s in e){var i=this.getField(s);null!==i&&i.setValue(t?JSON.parse(e[s]):e[s])}},f.prototype.getValue=function(e){var t=this.getField(e);return t?t.getValue():null},f.prototype.isCollection=function(){return"load_collection"===this.name},f.prototype.isCallbackArgument=function(){return"callback-argument"===this.type},f.prototype.getCollectionName=function(){return this.getField("id").getValue()},f.prototype.getHtml=function(){var e=this,t=this.name;this.isCollection()&&(t=this.getCollectionName());var s=t,i=t;this.isCallbackArgument()||(s+=' <span class="blockId">#'+this.id+"</span>",i+=" #"+this.id);var r='<div class="blockTitle"><span class="titleText" title="'+i+'">'+s+"</span>";r+='<div class="blockicon">',this.blocks.compactMode||(this.blocks.editable&&!this.isCallbackArgument()&&(r+='<span class="delete" title="Remove (DEL)"><i class="fas fa-trash"></i></span>'),r+='<span class="info" title="Details"><i class="fas fa-info"></i></span>'),"function"===typeof this.blocks.openParameterEditor&&this.editables.length>0&&!this.isCallbackArgument()&&(r+='<span class="settings" title="Change parameter values"><i class="fas fa-sliders-h"></i></span>'),r+="</div></div>",r+='<div class="inout">';var a=function(t,s){for(var i in r+='<div class="'+t+'s">',s){var a=s[i],n="";if(a&&a.isEditable()&&!e.blocks.compactMode){var l=a.getValue();if("object"===Object(o["a"])(l))if(null===l)n="N/A";else if(Array.isArray(l)){var c=d["a"].htmlentities(l.map(function(e){return"string"===typeof e?e:JSON.stringify(e)}).join(", "));n='<span title="'+c+'">List('+l.length+")</span>"}else n=l.callback instanceof h["ProcessGraph"]?"Callback":l.from_argument||l.from_node?"":'<span title="'+d["a"].htmlentities(JSON.stringify(l))+'">Object</span>';else n="string"===typeof l&&l.length>10?'<span title="'+d["a"].htmlentities(l)+'">'+l.substr(0,10)+"...</span>":"boolean"===typeof l?l?"✔️":"❌":l.toString();n.length>0&&(n=": "+n)}var u='<div class="circle"></div>',p="";a.isOutput()&&(p=u,u="");var f,v=[t,"connector","field_"+a.name,a.hasValue||!a.isRequired||a.isOutput()?"hasValue":"noValue"];e.isCollection()&&"id"===a.name&&v.push("hide_collection_id"),f=a.isOutput()&&e.blocks.compactMode?"":a.isOutput()&&e.result?"Result":d["a"].htmlentities(a.getLabel()),r+='<div class="'+v.join(" ")+'" rel="'+a.name+'">'+u+f+n+p+"</div>"}r+="</div>"};return a("input",this.inputs),a("output",[this.output]),r+="</div>",r},f.prototype.render=function(){this.lastScale=null,this.hasFocus=!1,this.div.innerHTML=this.getHtml(),this.initListeners(),this.redraw()},f.prototype.create=function(e){this.div=document.createElement("div"),this.div.id="block"+this.id,this.div.classList.add("block"),this.isCollection()?this.div.classList.add("block_collection"):this.isCallbackArgument()&&this.div.classList.add("block_argument"),e.appendChild(this.div),this.render()},f.prototype.redraw=function(e){for(var t in this.div.style.marginLeft=this.blocks.center.x+this.x*this.blocks.scale+"px",this.div.style.marginTop=this.blocks.center.y+this.y*this.blocks.scale+"px",this.blocks.showIcons&&this.blocks.scale>.8?this.div.querySelector(".blockicon").style.display="":this.div.querySelector(".blockicon").style.display="none",this.lastScale!=this.blocks.scale&&(this.div.style.fontSize=Math.round(this.blocks.scale*this.defaultFont)+"px",this.div.style.width=Math.round(this.blocks.scale*this.getWidth())+"px",this.lastScale=this.blocks.scale),this.fields){var s=this.fields[t],i=this.div.querySelector(".field_"+t);if(i){var r=i.querySelector(".circle");if(r.classList.remove("io_active"),r.classList.remove("io_selected"),r.classList.remove("result"),i.classList.contains("hasValue")||i.classList.add("noValue"),s.getEdgeCount()>0){r.classList.add("io_active"),i.classList.remove("noValue");var a=s.getEdges();for(var n in a)a[n].selected&&r.classList.add("io_selected")}s.isOutput()&&this.result&&r.classList.add("result")}}this.div.classList.remove("block_selected"),e&&this.div.classList.add("block_selected")},f.prototype.initListeners=function(){var e=this;this.div.querySelector(".blockTitle").addEventListener("mousedown",function(t){1==t.which&&(e.historySaved=!1,e.drag=[e.blocks.mouseX/e.blocks.scale-e.x,e.blocks.mouseY/e.blocks.scale-e.y])});var t=document.querySelector("html");t.addEventListener("mousemove",function(){e.drag&&(e.historySaved||(e.blocks.history.save(),e.historySaved=!0),e.x=e.blocks.mouseX/e.blocks.scale-e.drag[0],e.y=e.blocks.mouseY/e.blocks.scale-e.drag[1],e.blocks.redraw())}),t.addEventListener("mouseup",function(){return e.drag=null}),this.div.addEventListener("mouseover",function(){return e.hasFocus=!0}),this.div.addEventListener("mouseout",function(){return e.hasFocus=!1});var s=this.div.querySelectorAll(".connector"),i=!0,r=!1,a=void 0;try{for(var o,l=function(){var t=o.value;e.blocks.editable&&(t.addEventListener("mousedown",function(s){1==s.which&&(e.blocks.beginLink(e,t.getAttribute("rel")),s.preventDefault(),s.stopPropagation())}),t.addEventListener("click",function(t){if(1==t.which){if(e.hasOutputEdges())return void e.blocks.showError("A result node can't have outgoing edges.");e.blocks.setResultNode(e),e.blocks.history.save()}})),t.addEventListener("mouseover",function(){return e.focusedField=t.getAttribute("rel")}),t.addEventListener("mouseout",function(){return e.focusedField=null})},c=s[Symbol.iterator]();!(i=(o=c.next()).done);i=!0)l()}catch(p){r=!0,a=p}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}var u=this.div.querySelector(".settings");u&&u.addEventListener("click",function(t){e.blocks.showParameters(e),t.preventDefault(),t.stopPropagation()});var d=this.div.querySelector(".delete");d&&d.addEventListener("click",function(t){e.blocks.removeBlock(e.id),t.preventDefault(),t.stopPropagation()});var h=this.div.querySelector(".info");h&&h.addEventListener("click",function(t){e.isCallbackArgument()?e.blocks.showSchema(e.name,e.meta.returns.schema):e.isCollection()?n["a"].$emit("showCollectionInfo",e.getCollectionName()):n["a"].$emit("showProcessInfo",e.name),t.preventDefault(),t.stopPropagation()})},f.prototype.linkPositionFor=function(e){try{var t=this.div.querySelector(".field_"+e+" .circle"),s=p["a"].domBoundingBox(t),i=p["a"].domBoundingBox(this.blocks.div),r=s.offsetLeft-i.offsetLeft+s.width/2,a=s.offsetTop-i.offsetTop+s.height/2}catch(n){throw"Unable to find link position for "+e+" ("+n+")"}return{x:r,y:a}},f.prototype.erase=function(){this.div.parentNode.removeChild(this.div)},f.prototype.allSuccessors=function(){var e={},t=[this],s=[this.id];e[this.id]=!0;while(t.length>0){var i=t.pop();for(var r in i.edges)for(var a in i.edges[r]){var n=i.edges[r][a],o=n.fromTo();if(o[0]==i){var l=o[1];l.id in e||(e[l.id]=!0,t.push(l),s.push(l.id))}}}return s},f.prototype.export=function(){var e={};for(var t in this.editables){var s=this.editables[t];e[s.name]=JSON.stringify(s.getValue())}return{id:this.id,x:this.x,y:this.y,type:this.type,name:this.name,values:e}},f.prototype.exportProcessGraph=function(){if(this.isCallbackArgument())return null;var e={};for(var t in this.inputs){var s=this.inputs[t];if(s.hasValue){if(!s.isRequired&&s.isDefaultValue())continue;e[s.name]=s.getValue()}}var i={process_id:this.name,arguments:e};return this.result&&(i.result=!0),i},f.prototype.getField=function(e){return e in this.fields?this.fields[e]:null},f.prototype.save=function(e){var t={};for(var s in this.fields)"boolean"==this.fields[s].type&&(t[s]=this.fields[s]);for(var i in e){var r=i,a=!1;"[]"==r.substr(r.length-2,2)&&(r=r.substr(0,r.length-2),a=!0),null==e[i]&&a&&(e[i]=[]),r in t&&delete t[r],this.getField(r).setValue(e[i])}for(var i in t)this.getField(i).setValue(!1);this.render()};var v=f,m=function(e,t,s,i){this.x=e,this.y=t,this.dx=s,this.dy=i};m.prototype.distance=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},m.prototype.distanceP=function(e){var t=this.normal();t.x=e.x,t.y=e.y;var s=this.intersection(t);return[s[0],this.distance(t.alpha(s[1]),e)]},m.prototype.normal=function(){return new m(this.x,this.y,this.dy,-this.dx)},m.prototype.intersection=function(e){var t=this.dx,s=-e.dx,i=this.dy,r=-e.dy,a=e.x-this.x,n=e.y-this.y,o=t*r-s*i;if(0==o)return null;var l=(r*a-s*n)/o,c=(-i*a+t*n)/o;return[l,c]},m.prototype.alpha=function(e){var t={};return t.x=this.x+this.dx*e,t.y=this.y+this.dy*e,t};var b=m,g=function(e,t,s,i,r,a){if(this.blocks=a,this.id=parseInt(e),this.block1=t,this.field1=s,this.block2=i,this.field2=r,this.selected=!1,this.defaultSize=3,this.defaultFontSize=10,this.position1=null,this.position2=null,this.segment=null,!t.getField(s.name)||!i.getField(r.name))throw"Can't create edge because the field doesn't exist"};g.prototype.fromTo=function(){return[this.block1,this.block2]},g.prototype.getOtherBlock=function(e){return e===this.block1?this.block2:e===this.block2?this.block1:null},g.prototype.getOtherField=function(e){return e===this.field1?this.field2:e===this.field2?this.field1:null},g.prototype.draw=function(e){this.position1=this.block1.linkPositionFor(this.field1.name),this.position2=this.block2.linkPositionFor(this.field2.name),this.segment=new b(this.position1.x,this.position1.y,this.position2.x-this.position1.x,this.position2.y-this.position1.y);var t=this.defaultSize*this.blocks.scale;if(this.selected)var s="rgba(0, 200, 0, 1)";else s="rgba(255, 200, 0, 1)";e.line(this.position1.x,this.position1.y,this.position2.x,this.position2.y,{stroke:s,"stroke-width":t});var i=(this.position1.x+this.position2.x)/2,r=(this.position1.y+this.position2.y)/2,a=Math.sqrt(Math.pow(this.position1.x-this.position2.x,2)+Math.pow(this.position1.y-this.position2.y,2)),n=30;n=n*Math.PI/180;var o=Math.cos(n),l=Math.sin(n),c=Math.cos(-n),u=Math.sin(-n),d=(this.position1.x-i)*this.blocks.scale*10/(a/2),h=(this.position1.y-r)*this.blocks.scale*10/(a/2);t=this.defaultSize*this.blocks.scale/3;e.line(i,r,i+(d*o-h*l),r+(h*o+d*l),{stroke:s,"stroke-width":t}),e.line(i,r,i+(d*c-h*u),r+(h*c+d*u),{stroke:s,"stroke-width":t})},g.prototype.collide=function(e,t){if(!this.segment)return!1;var s=this.segment.distanceP({x:e,y:t});return s[0]>=0&&s[0]<=1&&s[1]<this.defaultSize*this.blocks.scale*2&&s[0]},g.prototype.create=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.block1==this.block2)throw"You can't link a block to itself";if(this.field1.type==this.field2.type)throw"You have to link an input with an output";this.field1.addEdge(this,e),this.field2.addEdge(this,e),this.block1.render(),this.block2.render()},g.prototype.getDataTypes=function(){return[this.field1.dataTypes(),this.field2.dataTypes()]},g.prototype.erase=function(){this.field1.eraseEdge(this),this.field2.eraseEdge(this),this.block1.render(),this.block2.render()},g.prototype.same=function(e){return this.block1==e.block1&&this.block2==e.block2&&this.field1.name==e.field1.name&&this.field2.name==e.field2.name||this.block1==e.block1&&this.block2==e.block2&&this.field1.name==e.field2.name&&this.field2.name==e.field1.name},g.prototype.export=function(){return{id:this.id,block1:this.block1.id,field1:this.field1.name,block2:this.block2.id,field2:this.field2.name}};var y=g,w=s("d225"),k=s("b0b4"),C=function(){function e(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(w["a"])(this,e),this.svgNS="http://www.w3.org/2000/svg",this.element="string"===typeof t?document.querySelector(t):t,null!==s&&(this.element.style.width=s),null!==i&&(this.element.style.height=i)}return Object(k["a"])(e,[{key:"clear",value:function(){while(this.element.firstChild)this.element.removeChild(this.element.firstChild);return this}},{key:"line",value:function(e,t,s,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this._makeNode("line",Object.assign({x1:e,y1:t,x2:s,y2:i},r))}},{key:"_makeNode",value:function(e,t){var s=this.element.ownerDocument.createElementNS(this.svgNS,e);for(var e in t){var i=t[e];null==i||"string"===typeof i&&""===i||s.setAttribute(e,i)}return this.element.appendChild(s),s}}]),e}(),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.errorHandler=e,this.openParameterEditor=t,this.openSchemaModal=s,this.active=!0,this.editable=!0,this.center={x:0,y:0},this.newBlockOffset=0,this.scale=1.3,this.redrawTimeout=null,this.history=null,this.moving=null,this.isReady=!1,this.compactMode=!1,this.mouseX=0,this.mouseY=0,this.linking=null,this.selectedLink=null,this.selectedSide=null,this.selectedBlock=null,this.div=null,this.innerDiv=null,this.svg=null,this.moduleTypes={},this.collectionDefaults={},this.blocks={},this.edges=[],this.id=1,this.edgeId=1,this.clear=function(){this.edges=[],this.blocks={},this.id=1,this.edgeId=1,this.innerDiv&&(this.innerDiv.innerHTML="",this.redraw())},this.showIcons=!0};S.prototype.run=function(e){var t=this,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.div=document.querySelector(e),this.editable=s,this.div){this.div.innerHTML='<div class="blocks_js_editor"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="canvas"></svg><div class="blocks"></div></div>',this.innerDiv=this.div.querySelector(".blocks"),this.svg=new C(this.div.querySelector("svg"),"100%","100%");var i=p["a"].domBoundingBox(this.div);this.center.x=i.width/2,this.center.y=i.height/2,this.div.addEventListener("mousemove",function(e){var s=p["a"].domBoundingBox(t.div);t.mouseX=e.pageX-s.offsetLeft,t.mouseY=e.pageY-s.offsetTop,t.move()}),document.querySelector("html").addEventListener("mouseup",function(e){t.editable&&t.linking&&1==e.which&&(t.tryEndLink(),t.linking=null,t.redraw()),!t.moving||2!=e.which&&1!=e.which||(t.moving=null)}),this.div.addEventListener("mousedown",function(e){t.canvasClicked()&&e.preventDefault(),2!=e.which&&(t.selectedLink||t.selectedBlock||1!=e.which)||(t.moving=[t.mouseX,t.mouseY])}),document.addEventListener("keydown",function(e){var s=document.querySelectorAll("input, textarea, button, select, datalist"),i=!0,r=!1,a=void 0;try{for(var n,o=s[Symbol.iterator]();!(i=(n=o.next()).done);i=!0){var l=n.value;if(l===document.activeElement)return}}catch(c){r=!0,a=c}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}t.editable&&46==e.keyCode&&t.active&&t.deleteEvent()}),this.div.addEventListener("mousewheel",function(e){var s=t.mouseX-t.center.x,i=t.mouseY-t.center.y,r=Math.pow(1.1,e.deltaY/40*-1);t.center.x-=s*(r-1),t.center.y-=i*(r-1),t.newBlockOffset=0,t.scale*=r,t.redraw(),e.preventDefault()}),this.history=new c(this),this.isReady||this.postReady()}else console.error("blocks.js: Unable to find "+e)},S.prototype.postReady=function(){if(this.isReady=!0,void 0!=this.readyQueue)for(var e in this.readyQueue)this.readyQueue[e]()},S.prototype.ready=function(e){if(this.isReady)e();else{var t=[];void 0!=this.readyQueue&&(t=this.readyQueue),t.push(e),this.readyQueue=t}},S.prototype.showParameters=function(e){"function"===typeof this.openParameterEditor&&this.openParameterEditor(this,e,this.editable)},S.prototype.showSchema=function(e,t){"function"===typeof this.openSchemaModal&&this.openSchemaModal(e,t)},S.prototype.hasUndo=function(){return null===this.history?0:this.history.size()>0},S.prototype.undo=function(){null!==this.history&&(this.history.restoreLast(),this.blocks[this.selectedBlock]||(this.selectedBlock=null),this.edges[this.selectedLink]||(this.selectedLink=null))},S.prototype.setResultNode=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.result!==t){e.setResult(t);var s=!1;for(var i in this.blocks){var r=this.blocks[i];if(r!==e)if(t)r.setResult(!1);else if(!r.hasOutputEdges()){r.setResult(!0),s=!0;break}}this.getBlockCount()>0&&!t&&!s&&this.showError("No result node available, please specify one."),this.redraw()}},S.prototype.getPositionForPageXY=function(e,t){var s=p["a"].domBoundingBox(this.div);return null!==e&&(e=(e-s.offsetLeft-this.center.x)/this.scale),null!==t&&(t=(t-s.offsetTop-this.center.y)/this.scale),{x:e,y:t}},S.prototype.addCollection=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null,r=null;return"object"===Object(o["a"])(this.collectionDefaults[e])&&(i=this.collectionDefaults[e].spatialExtent,r=this.collectionDefaults[e].temporalExtent),this.createBlock("load_collection","process",t,s,{id:e,spatial_extent:i,temporal_extent:r})},S.prototype.addProcess=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.createBlock(e,"process",t,s,{},i)},S.prototype.addCallbackArgument=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.createBlock(e,"callback-argument",t,s)},S.prototype.createBlock=function(e,t,s,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(!(t in this.moduleTypes))throw"Invalid module type specified.";if(!(e in this.moduleTypes[t]))throw"'"+e+"' not available.";var n=new v(this,e,t,this.moduleTypes[t][e],a),o=p["a"].domBoundingBox(this.div);return n.x=null===s?(-this.center.x+o.width/2)/this.scale-n.getWidth()/2+this.newBlockOffset:s,n.y=null===i?(-this.center.y+o.height/2)/this.scale-n.getHeight()/2+this.newBlockOffset:i,this.newBlockOffset<150&&(this.newBlockOffset+=10),0!==this.getProcessBlockCount()||n.isCallbackArgument()||(n.result=!0),n.setValues(r),this.addBlock(n),n.isCallbackArgument()||this.history.save(),n},S.prototype.unregisterCollectionDefaults=function(){this.collectionDefaults={}},S.prototype.unregisterProcesses=function(){this.moduleTypes["process"]={}},S.prototype.unregisterCallbackArguments=function(){this.moduleTypes["callback-arguments"]={}},S.prototype.registerCollectionDefaults=function(e){try{var t=e.extent.spatial.length>4;this.collectionDefaults[e.id]={spatialExtent:{west:e.extent.spatial[0],east:e.extent.spatial[t?3:2],south:e.extent.spatial[1],north:e.extent.spatial[t?4:3]},temporalExtent:e.extent.temporal}}catch(s){console.log(s)}},S.prototype.registerProcess=function(e){this.register(e,"process",e.id)},S.prototype.registerCallbackArgument=function(e,t){var s=JSON.parse(JSON.stringify(t));s.returns={name:e,attrs:"output",schema:t},this.register(s,"callback-argument",e)},S.prototype.register=function(e,t,s){t in this.moduleTypes||(this.moduleTypes[t]={}),this.moduleTypes[t][s]=e},S.prototype.beginLink=function(e,t){this.linking=[e,t]},S.prototype.move=function(){if(this.editable&&this.selectedSide){var e=Math.sqrt(Math.pow(this.mouseX-this.selectedSide[1],2)+Math.pow(this.mouseY-this.selectedSide[2],2));if(e>15){var t=this.edges[this.selectedLink];2==this.selectedSide[0]?this.linking=[t.block1,t.field1.name]:this.linking=[t.block2,t.field2.name],this.removeEdge(this.selectedLink),this.selectedSide=null,null!=this.selectedLink&&this.selectedLink in this.edges&&(this.edges[this.selectedLink].selected=!1),this.selectedLink=null,this.redraw()}}this.moving&&(this.center.x+=this.mouseX-this.moving[0],this.center.y+=this.mouseY-this.moving[1],this.newBlockOffset=0,this.moving=[this.mouseX,this.mouseY],this.redraw()),this.editable&&this.linking&&this.redraw()},S.prototype.canvasClicked=function(){var e=!1;for(var t in this.selectedBlock=null,null!=this.selectedLink&&(this.edges[this.selectedLink].selected=!1),this.selectedLink=null,this.selectedSide=null,this.blocks)this.blocks[t].hasFocus&&(this.selectedBlock=t);if(!this.selectedBlock)for(var t in this.edges){var s=this.edges[t].collide(this.mouseX,this.mouseY);if(0!=s){s<.2?this.selectedSide=[1,this.mouseX,this.mouseY]:s>.8&&(this.selectedSide=[2,this.mouseX,this.mouseY]),this.selectedLink=t,this.edges[t].selected=!0,e=!0;break}}return this.redraw(),e},S.prototype.removeEdge=function(e){this.history.save(),this.edges[e].erase(),this.edges.splice(e,1)},S.prototype.getEdgeId=function(e){for(var t in this.edges)if(e==this.edges[t])return t;return!1},S.prototype.removeBlock=function(e){var t=this.blocks[e],s=[];for(var i in this.edges){var r=this.edges[i];r.block1==t||r.block2==t?r.erase():s.push(r)}this.edges=s,t.erase(),t.id==this.selectedBlock&&(this.selectedBlock=null),delete this.blocks[e],t.result&&this.setResultNode(t,!1),this.redraw()},S.prototype.getBlockById=function(e){return this.blocks[e]?this.blocks[e]:null},S.prototype.getCallbackArgumentBlockByName=function(e){for(var t in this.blocks){var s=this.blocks[t];if(s.isCallbackArgument()&&s.name===e)return s}return null},S.prototype.getBlockCount=function(){return p["a"].size(this.blocks)},S.prototype.getProcessBlockCount=function(){return p["a"].size(Object.values(this.blocks).filter(function(e){return!e.isCallbackArgument()}))},S.prototype.canDelete=function(){if(null!=this.selectedBlock){var e=this.getBlockById(this.selectedBlock);if(e&&e.isCallbackArgument())return!1}return null!=this.selectedBlock||null!=this.selectedLink},S.prototype.deleteEvent=function(){this.canDelete()&&(null!=this.selectedBlock&&(this.history.save(),this.removeBlock(this.selectedBlock),this.selectedBlock=null),null!=this.selectedLink&&(this.history.save(),this.removeEdge(this.selectedLink),this.selectedLink=null,this.redraw()))},S.prototype.doRedraw=function(){for(var e in this.blocks)this.blocks[e].redraw(this.selectedBlock==e);for(var e in this.svg.clear(),this.edges)this.edges[e].draw(this.svg);if(this.linking)try{var t=this.linking[0].linkPositionFor(this.linking[1]);this.svg.line(t.x,t.y,this.mouseX,this.mouseY,{stroke:"rgba(0,0,0,0.4)","stroke-width":3*this.scale})}catch(s){console.error(s),this.linking=null}this.redrawTimeout=null},S.prototype.redraw=function(){var e=this;this.redrawTimeout||(this.redrawTimeout=setTimeout(function(){return e.doRedraw()},25))},S.prototype.tryEndLink=function(){for(var e in this.blocks){var t=this.blocks[e];if(t.hasFocus&&t.focusedField){this.endLink(t,t.focusedField);break}}},S.prototype.addEdge=function(e,t,s,i){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e instanceof v||(e=this.getBlockById(e)),s instanceof v||(s=this.getBlockById(s));var a=this.edgeId++;if(t instanceof u["a"]||(t=e.getField(t)),i instanceof u["a"]||(i=s.getField(i)),t.isOutput())var n=new y(a,e,t,s,i,this);else n=new y(a,s,i,e,t,this);var o=n.fromTo();if(o[0]!==o[1]){if(-1!=o[1].allSuccessors().indexOf(o[0].id))throw"You can not create a loop";if(!this.areTypesCompatible(i,t))throw"Types are not compatible";if(i.getEdgeCount()>0&&!i.allowsMultipleEdges())throw"Parameter accepts only one input";for(var l in this.edges){var c=this.edges[l];if(c.same(n))throw"This connection exists already"}this.history.save(),n.create(r),this.edges.push(n),r&&this.setResultNode(t.isOutput()?e:s,!1),s.redraw(),e.redraw(),this.redraw()}},S.prototype.endLink=function(e,t){try{this.addEdge(this.linking[0],this.linking[1],e,t)}catch(s){this.showError(s)}this.linking=null,this.selectedBlock=null},S.prototype.areTypesCompatible=function(e,t){return h["JsonSchemaValidator"].isSchemaCompatible(e.schema,t.schema,!1,!0)},S.prototype.showError=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"function"===typeof this.errorHandler?this.errorHandler(e,t):console.error(t,e)},S.prototype.toggleCompact=function(){for(var e in this.compactMode=!this.compactMode,this.blocks)this.blocks[e].render();this.redraw()},S.prototype.export=function(){var e=[],t=[];for(var s in this.blocks)e.push(this.blocks[s].export());for(var s in this.edges)t[s]=this.edges[s].export();return{edges:t,blocks:e}},S.prototype.exportProcessGraph=function(){if(0===this.getProcessBlockCount())return null;var e={};for(var t in this.blocks){var s=this.blocks[t].exportProcessGraph();null!==s&&(e[t]=s)}return e},S.prototype.importProcessGraph=function(e,t){var s;e instanceof h["ProcessGraph"]?(s=new h["ProcessGraph"](e.toJSON(),t),s.setParent(e.parentProcessId,e.parentParameterName)):s=new h["ProcessGraph"](e,t),s.parse(),this.importNodesFromProcessGraph(s.getStartNodes());var i=s.getNodes();for(var r in i){var a=i[r],n=a.getArgumentNames();for(var o in n){var l=a.getRawArgumentValue(n[o]);switch(a.getArgumentType(n[o])){case"result":this.addEdge(s.getNode(l).blockId,"output",a.blockId,n[o],!1);break;case"callback-argument":this.addEdge(this.getCallbackArgumentBlockByName(l),"output",a.blockId,n[o],!1);break;case"object":case"array":for(var c in l)u["a"].isRef(l[c])&&(l[c].from_node?this.addEdge(s.getNode(l[c].from_node).blockId,"output",a.blockId,n[o],!1):l[c].from_argument&&this.addEdge(this.getCallbackArgumentBlockByName(l[c].from_argument),"output",a.blockId,n[o],!1));break}}}},S.prototype.importNodesFromProcessGraph=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(var i in e){var r=e[i];if(!r.blockId){var a=this.addProcess(r.process_id,t,s,r.id);a&&(a.setValues(r.arguments),a.render()),a.result=r.isResultNode,r.blockId=a.id,this.importNodesFromProcessGraph(r.getNextNodes(),t+a.getWidth()+20,s),s+=a.getHeight()+20}}},S.prototype.incrementId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e)e=this.id,this.id++;else if(isNaN(parseInt(e))){if("string"!==typeof e||0===e.length)throw"Invalid node id specified"}else this.id=Math.max(this.id,parseInt(e)+1);return e},S.prototype.addBlock=function(e){if(!(e instanceof v))throw"Parameter must be of type 'Block'";e.id=this.incrementId(e.id),e.create(this.innerDiv),this.blocks[e.id]=e},S.prototype.import=function(e){var t=this;this.clear(),this.ready(function(){try{var s=[];if(t.id=1,t.edgeId=1,"object"!=Object(o["a"])(e)||e instanceof Array)throw"Scene is not an object";if(!("blocks"in e)||!(e.blocks instanceof Array))throw"Scene has no blocks section";if(!("edges"in e)||!(e.edges instanceof Object))throw"Scene has no edges section";for(var i in e.blocks){var r=e.blocks[i];if(r.type in t.moduleTypes&&r.name in t.moduleTypes[r.type]){var a=new v(t,r.name,r.type,t.moduleTypes[r.type][r.name],r.id);a.x=r.x,a.y=r.y,a.setValues(r.values,!0),t.addBlock(a)}else s.push("Block #"+i+": Unable to create a block of type "+r.type)}for(var i in e.edges){r=e.edges[i];if(!1 in r)s.push("Edge #"+i+": The edge does not have an id");else{var n=t.getBlockById(r.block1),l=t.getBlockById(r.block2);if(n&&l){var c=new y(r.id,n,n.getField(r.field1),l,l.getField(r.field2),t);t.edgeId=Math.max(t.edgeId,c.id+1),c.create(),t.edges.push(c)}else s.push("Edge #"+i+": Corresponsing block does not exist")}}if(s.length)for(var i in s)t.showError(s[i],"Import failed");t.redraw()}catch(u){t.showError(u,"Import failed")}})},S.prototype.perfectScale=function(){if(this.div&&0!==this.getBlockCount()){var e=null,t=null,s=null,i=null;for(var r in this.blocks){var a=this.blocks[r];null==e?(e=a.x-15,t=a.x+a.getWidth()+18,s=a.y-15,i=a.y+115):(e=Math.min(e,a.x-15),t=Math.max(t,a.x+a.getWidth()+18),s=Math.min(s,a.y-15),i=Math.max(i,a.y+115))}var n=this.div.getBoundingClientRect(),o=n.width/(t-e),l=n.height/(i-s);this.scale=Math.min(o,l),this.center.x=n.width/2-this.scale*(e+t)/2,this.center.y=n.height/2-this.scale*(s+i)/2,this.newBlockOffset=0,this.redraw()}};var _=S,P=s("1190"),O=s("cbd9"),x=s("14c0"),D=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{ref:"modal",scopedSlots:e._u([{key:"main",fn:function(){return[s("div",{attrs:{id:"schemaModal"}},[e.message?s("p",{staticClass:"message"},[e._v(e._s(e.message))]):e._e(),s("JsonSchema",{attrs:{schema:e.schema}})],1)]},proxy:!0}])})},j=[],E=s("714b"),T=s("6e45"),M={name:"SchemaModal",components:{Modal:E["a"],JsonSchema:T["a"]},data:function(){return{schema:null,message:null}},methods:{show:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.schema=t,this.message=s,this.$refs.modal.show(e)}}},F=M,A=(s("0df61"),s("2877")),I=Object(A["a"])(F,D,j,!1,null,null,null),L=I.exports;function B(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function N(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?B(s,!0).forEach(function(t){Object(a["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):B(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var V={name:"VisualEditor",components:{EditorToolbar:P["a"],DiscoveryToolbar:O["a"],ParameterModal:x["a"],SchemaModal:L},props:{id:String,editable:{type:Boolean,default:!0},active:{type:Boolean,default:!0},value:{type:Object,default:null},callbackArguments:{type:Object},enableClear:{type:Boolean,default:!0},enableLocalStorage:{type:Boolean,default:!0},enableExecute:{type:Boolean,default:!0},showDiscoveryToolbar:{type:Boolean,default:!0}},computed:N({},p["a"].mapState("server",["processes","collections"]),{},p["a"].mapGetters("server",["processRegistry"])),data:function(){return{blocks:null,isFullScreen:!1}},beforeMount:function(){var e=this;this.blocks=new _(this.errorHandler,function(t,s,i){return e.openParameterEditor(t,s,i)},function(t,s){return e.showSchemaModal(t,s)})},mounted:function(){this.active&&this.onShow()},watch:{processes:function(){this.registerProcesses()},collections:function(){this.registerCollections()}},methods:{allowDrop:function(e){e.preventDefault()},onDrop:function(e){var t=e.dataTransfer.getData("application/openeo-process"),s=e.dataTransfer.getData("application/openeo-collection");t?(e.preventDefault(),this.insertProcess(t,e.pageX,e.pageY)):s&&(e.preventDefault(),this.insertCollection(s,e.pageX,e.pageY))},onShow:function(){this.blocks.isReady||(this.blocks.run("#"+this.id,this.editable),this.registerProcesses(),this.registerCollections(),this.makeCallbackArguments(),this.insertProcessGraph(this.value,!1))},perfectScale:function(){this.blocks.perfectScale(),this.$forceUpdate()},toggleFullScreen:function(){var e=this.$refs.visualEditor;this.isFullScreen?(this.isFullScreen=!1,e.classList.remove("fullscreen"),this.perfectScale()):(this.isFullScreen=!0,e.classList.add("fullscreen"),this.perfectScale())},errorHandler:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;p["a"].exception(this,e,t)},showSchemaModal:function(e,t){this.$refs.schemaModal&&this.$refs.schemaModal.show(e,t,"This is a callback argument. It is a value made available by the process executing this sub-processes for further use. The value will comply to the following data type(s):")},openParameterEditor:function(e,t,s){e.active=!1;var i=t.name+" #"+t.id;this.$refs.parameterModal.show(i,t.editables,s,s?function(e){return t.save(e)}:null,function(){return e.active=!0,!0},t.name)},clearProcessGraph:function(){this.blocks.clear(),this.makeCallbackArguments()},registerCollections:function(){for(var e in this.blocks.unregisterCollectionDefaults(),this.collections)this.blocks.registerCollectionDefaults(this.collections[e])},registerProcesses:function(){for(var e in this.blocks.unregisterProcesses(),this.processes)this.blocks.registerProcess(this.processes[e]);for(var t in this.blocks.unregisterCallbackArguments(),this.callbackArguments)this.blocks.registerCallbackArgument(t,this.callbackArguments[t])},getProcessGraph:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=null;try{i=this.makeProcessGraph()}catch(a){return void t("No valid model specified.",a)}if(null!==i)try{var r=new h["ProcessGraph"](i,this.processRegistry);r.parse()}catch(a){return void t("Process graph invalid",a)}null!==i||s?e(i):t("No model specified.")},makeModel:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=!0;t&&this.blocks.history.save(),this.blocks.clear(),this.blocks.history.enable(!1);try{this.makeCallbackArguments(),this.blocks.importProcessGraph(e,this.processRegistry),this.blocks.perfectScale()}catch(i){p["a"].exception(this,i,"Process graph invalid"),this.blocks.history.restoreLast(),s=!1}return this.blocks.history.enable(!0),s},makeProcessGraph:function(){return this.blocks.exportProcessGraph()},makeCallbackArguments:function(){var e=0;for(var t in this.callbackArguments)this.insertCallbackArgument(t,e++)},insertProcessGraph:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e?this.makeModel(e,t):this.clearProcessGraph()},insertCollection:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{var i=this.blocks.getPositionForPageXY(t,s);this.blocks.addCollection(e,i.x,i.y)}catch(r){p["a"].exception(this,r)}},insertProcess:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{var i=this.blocks.getPositionForPageXY(t,s);this.blocks.addProcess(e,i.x,i.y)}catch(r){p["a"].exception(this,r)}},insertCallbackArgument:function(e,t){try{this.blocks.addCallbackArgument(e,-150,50*t)}catch(s){p["a"].exception(this,s)}}}},G=V,$=(s("4d98"),Object(A["a"])(G,i,r,!1,null,null,null));t["default"]=$.exports},"8c7c":function(e,t,s){"use strict";s("8e6e"),s("ac6a"),s("456d");var i=s("bd86"),r=s("025e");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function n(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(s,!0).forEach(function(t){Object(i["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var o,l,c={computed:n({},r["a"].mapState("server",["connection"]),{},r["a"].mapGetters("server",["supports","isConnected"]),{apiVersion:function(){return this.connection.capabilities().apiVersion()}})},u=c,d=s("2877"),h=Object(d["a"])(u,o,l,!1,null,null,null);t["a"]=h.exports},"916f":function(e,t,s){"use strict";var i=s("a36c"),r=s.n(i);r.a},9215:function(e,t,s){},9224:function(e){e.exports={name:"@openeo/web-editor",version:"0.4.0-beta.4",apiVersions:["0.4.0","0.4.1","0.4.2"],author:"openEO Consortium",contributors:[{name:"Matthias Mohr"},{name:"Gustav Jv Rensburg"},{name:"Miha Kadunc"},{name:"Christoph Friedrich"}],description:"An interactive and easy to use web-based editor for the OpenEO API.",license:"Apache-2.0",homepage:"http://openeo.org",bugs:{url:"https://github.com/Open-EO/openeo-web-editor/issues"},repository:{type:"git",url:"https://github.com/Open-EO/openeo-web-editor.git"},scripts:{serve:"vue-cli-service serve",build:"vue-cli-service build"},dependencies:{"@openeo/js-client":"^0.4.1","@openeo/js-commons":"^0.4.4","@openeo/vue-components":"^0.3.10",ajv:"^6.10.0",codemirror:"^5.47.0","core-js":"^2.6.9",leaflet:"^1.5.1","leaflet-fullscreen":"^1.0.2","leaflet-geotiff":"^0.2.0","leaflet-side-by-side":"github:digidem/leaflet-side-by-side","leaflet-tile-loading-progress-control":"^1.0.9",vue:"^2.6.10","vue-ctk-date-time-picker":"^2.1.1","vue-snotify":"^3.2.1",vuedraggable:"^2.21.0",vuex:"^3.1.1"},devDependencies:{"@vue/cli-plugin-babel":"^3.9.2","@vue/cli-service":"^3.9.2","vue-cli-plugin-webpack-bundle-analyzer":"^1.3.0","vue-template-compiler":"^2.6.10"},browserslist:["> 1%","last 2 versions","not ie <= 8"]}},9961:function(e,t,s){"use strict";var i=s("9215"),r=s.n(i);r.a},"9b84":function(e,t,s){"use strict";var i=s("f93f"),r=s.n(i);r.a},"9e5e":function(e,t,s){},a1bc:function(e,t,s){"use strict";t["a"]={serverUrl:"",loginMessage:'<b>Credentials for the Google Earth Engine platform:</b><table><tr><td>Server:</td><td>https://earthengine.openeo.org</td></tr><tr><td>User:</td><td>group8</td></tr><tr><td>Password:&nbsp;&nbsp;</td><td>test123</td></tr></table><br>Contact <a href="mailto:m.mohr@uni-muenster.de">m.mohr@uni-muenster.de</a> for further information, bug reports or if you\'d like to test other platforms.<br><br>Please keep in mind that this is a very early beta version. The software and services are not always stable yet!',snotifyDefaults:{timeout:5e3,titleMaxLength:30,showProgressBar:!0,closeOnClick:!0,pauseOnHover:!0},supportedMapServices:["xyz"]}},a1c8:function(e,t,s){"use strict";var i=s("4fbe"),r=s.n(i);r.a},a36c:function(e,t,s){},a6a9:function(e,t,s){},a769:function(e,t,s){},a986:function(e,t,s){"use strict";var i=s("4ab7"),r=s.n(i);r.a},ae54:function(e,t,s){"use strict";var i=s("fea2"),r=s.n(i);r.a},b52e:function(e,t,s){},b5d7:function(e,t,s){"use strict";var i=s("d1cc"),r=s.n(i);r.a},b8ca:function(e,t,s){},bfcb:function(e,t,s){},c278:function(e,t,s){},cb37:function(e,t,s){},cbd9:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"discovery-toolbar"},[s("div",{staticClass:"search-box"},[s("span",{staticClass:"icon"},[e._v("🔎")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],attrs:{type:"search",placeholder:"Search",title:"Search in collections and processes"},domProps:{value:e.searchTerm},on:{input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}})]),s("div",{staticClass:"search-results"},[s("div",{class:{category:!0,collections:!0,expanded:e.expanded.collections}},[s("strong",{attrs:{title:"Collections ("+e.collectionCount+")"},on:{click:function(t){return e.toggle("collections")}}},[s("span",{staticClass:"toggle"},[e._v("▸")]),e._v(" Collections")]),e.collectionCount?e._l(e.filtered.collections,function(t){return s("div",{key:t.id,staticClass:"discovery-entity",attrs:{draggable:"true"},on:{dragstart:function(s){return e.onDrag(s,"collection",t.id)}}},[s("div",{staticClass:"discovery-info",on:{click:function(s){return e.showCollectionInfo(t.id)}}},[s("strong",[e._v(e._s(t.id))])]),s("button",{staticClass:"discovery-button",attrs:{type:"button",title:"Insert"},on:{click:function(s){return e.insertCollection(t.id)}}},[s("i",{staticClass:"fas fa-plus"})])])}):s("div",{staticClass:"noData"},[e._v("No collections available.")])],2),s("div",{class:{category:!0,processes:!0,expanded:e.expanded.processes}},[s("strong",{attrs:{title:"Processes ("+e.processCount+")"},on:{click:function(t){return e.toggle("processes")}}},[s("span",{staticClass:"toggle"},[e._v("▸")]),e._v(" Processes")]),e.processCount?e._l(e.filtered.processes,function(t){return s("div",{key:t.id,staticClass:"discovery-entity",attrs:{draggable:"true"},on:{dragstart:function(s){return e.onDrag(s,"process",t.id)}}},[s("div",{staticClass:"discovery-info",on:{click:function(s){return e.showProcessInfo(t.id)}}},[s("strong",{attrs:{title:t.id}},[e._v(e._s(t.id))]),t.summary?s("small",{attrs:{title:t.summary}},[e._v(e._s(t.summary))]):e._e()]),s("button",{staticClass:"discovery-button",attrs:{type:"button",title:"Insert"},on:{click:function(s){return e.insertProcess(t.id)}}},[s("i",{staticClass:"fas fa-plus"})])])}):s("div",{staticClass:"noData"},[e._v("No processes available.")])],2)])])},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("6762"),s("2fdb"),s("bd86")),n=s("7618"),o=(s("a1bc"),s("6168")),l=s("8c7c"),c=s("025e");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(s,!0).forEach(function(t){Object(a["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var h={name:"DiscoveryToolbar",mixins:[l["a"]],props:{onAddCollection:{type:Function,required:!0},onAddProcess:{type:Function,required:!0}},data:function(){return{searchTerm:"",expanded:{collections:!1,processes:!1},filtered:{collections:[],processes:[]}}},created:function(){this.filter("processes"),this.filter("collections")},watch:{processes:function(){"object"===Object(n["a"])(this.processes)&&this.filter("processes")},collections:function(){"object"===Object(n["a"])(this.collections)&&this.filter("collections")},searchTerm:function(){this.filter("processes"),this.filter("collections")}},computed:d({},c["a"].mapState("server",["processes","collections"]),{collectionCount:function(){return this.supports("listCollections")&&Array.isArray(this.filtered.collections)?this.filtered.collections.length:0},processCount:function(){return this.supports("listProcesses")&&Array.isArray(this.filtered.processes)?this.filtered.processes.length:0}}),methods:{onDrag:function(e,t,s){e.dataTransfer.setData("application/openeo-"+t,s),e.dataTransfer.setData("text/plain",s)},filter:function(e){var t=this;if(this.searchTerm){var s=function(e){var s=t.searchTerm.toLowerCase();return!!e.id.toLowerCase().includes(s)||!("string"!==typeof e.summary||!e.summary.toLowerCase().includes(s))};this.filtered[e]=this[e].filter(s),this.$nextTick(function(){return t.expandAll()})}else this.filtered[e]=this[e],this.$nextTick(function(){return t.collapseAll()})},collapseAll:function(){this.toggleAll(!1)},expandAll:function(){this.toggleAll(!0)},toggleAll:function(e){for(var t in this.expanded)this.expanded[t]=e},toggle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.expanded[e]=null===t?!this.expanded[e]:t},showCollectionInfo:function(e){this.supports("listCollections")&&o["a"].$emit("showCollectionInfo",e)},showProcessInfo:function(e){this.supports("listProcesses")&&o["a"].$emit("showProcessInfo",e)},insertCollection:function(e){this.onAddCollection(e)},insertProcess:function(e){this.onAddProcess(e)}}},p=h,f=(s("1e17"),s("2877")),v=Object(f["a"])(p,i,r,!1,null,"379ff807",null);t["a"]=v.exports},cf05:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFkAAAA8CAMAAAA67OZ0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURRUlWBkoWhoqXBwrXR0tXiAvXyAvYCEwYCQzYiU0YyU0ZCg2ZSk4Zis5aCw6aC48ajA/bDNBbTRCbjZEbzZEcDhFcTpIczxKdD5MdWVCH2VCIGZEIWhFI2lHJGpIJmtJKGxKKW5OLXFRMXNTNHNUNHRVNXZXOHdYOXhZO3laPHpcPkBNd0FOeENQeURQeUdTfEdUfEFadEhUfEpWfktYf0xYf0dgeXxeQH5hQ39jRk1agFBcglJehFVhhlhjiFlkiVxnil1oi15pjFRxj1p4l2FsjmRukGZwkmhyk2hzlGp0lGx2lm54mHB6mXJ8mnV/nXeAnniBn3mCoHuEoX2FoXKi03Sj03Sj1HWk1Him1Xuo1n2p1oBjRoJmSYRnS4VpTodrUIdsUIhtUYpvVIpwVY1zWY10Wo91XJB3XpN6YZV9ZZiBapqDbJuEbZyGcKCKdaGMd6OOeaSPeqSQe6WQfICJpIGKpYOLpoSMp4ePqYmRqouTrI2VrpKZsZSbs5Scs5iftpqgtp6luqmWgquYhayah62biLCfjbGgjrOhkLSikrallbiombusnbytnqCnu6KovaSrvqasv76voL6woYWu14Gs2Iew2Yqx2Iiw2qaswKiuwaqwwq60xbC2x7K3yLK4yLW6yrm+zbzAz77C0KPC4qTD47XO6LjQ6bzT6r7U68Cxo8GzpcO1p8S3qsW4qsa6rci7rsq+ssu/tMvAtM3Ct9DGu9HGvNPJv8HF0sPH1MXJ1srN2czP2s7R3NTKwNXMwtjPx9jQx9nRyNzUzdDT3dHU3t/Y0cPX7MPY7MbZ7cjb7src7szd79PW4NbZ4tja49nb5Nnc5Nve5tze5t/h6NHg8Nbk8t7p9eDZ0uLb1Obg2unk3+Hj6eLk6uTl6+Xm7Ofp7url4Ozn4+3p5ejp7urr8Ors8O3u8u/w8+/w9O/0+vDt6fLv7PTx7vDx9PXy8Pb08vX19vX2+Pf4+fj29fn5+fn6/Pv8/fz7+vz8+/z8/P39/v7+/f7+/gAAAJVn57cAAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGHRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4xLjb9TgnoAAAGcUlEQVRYR9WYC1QUVRiAL7iygDw2ZbXZVUJKyWellYYgaakV+ICoJCV7qCkYmmIPHxXYg5TKSnv5SBd72MPUsiQxS8jKNK1jJaFmBEJFoeaz1f/0//+9szsLi9AW5+R3DnPv/Wfmmzv/3Ll7BwHNxdlqfmGh5DuOVD0QF9IysPc933ALYH5Em57gXNS/VcuwhEXHVBBgw7B2geY2g5fJVq3Vai2EXcnnmlu2Td3HoXp9fsgkFMP+5MBsIYKqe6tY250cgwP9VUD0PkDtaqwtz/WXoYACCpH5uILaqbzP7EfbftxDNJt7CeEXHkSx4F0Uq4rAasBFvYKx6EZHkXkY7WfM+zFE5lE3S7YDLMF4cO4vcMTRDmvXkwXNQgQ+dRjg03is9aIY9rhFzhHs09N4h7MxQGYh2uUUOlKo49Mx5JkNp0WIkG+5epj6SRkjs3kHx5yDsO4A+BCLlzkCy4SwYMHma/iuC7HWDUsyn1DIU16i3chOrFN3yDxLhqA6QIhEgCQhYlUErEJggshswZsgBuItYsHZSJNsh1lCmNR+gIuFGIgFmX+UEYDBeMtsS9mpSMBHJ833q2PwBBMWntkYzicqsGc9sFAHSmZgZgDM6DGAd0nmpeqYXG/mZKMZn3V3LBo3PyPN2HXGYE4bKdnGFn4MRD8hrsSCsrFXRgDwEVo5GwlL3OBzbsDsZgMeoN4q2I9jWn+CM2UIqnCQDQG4TogIpwpJGjU7zxGidTVXT+CjcY0601cccw7A+hIABxb6cFlRS9uGsnGjZJt8UyIc2J8tcVhLoQPJLMw5v4KzCPMjrDg4gV72ZHqt9w4XsTQJNNpngBT2WFtREcsDEM3mHtgK4QklYAvF9oVh1a/7pfSSs7EJZuOMJEc2moMqe6pYeBHHYK8+RYlQFjaUjRskmA2kcvZlwX7mbqlqVmMzHJ8fG+QfFJsjpz/CcW1rk19IfK6M1FoslhVcA1hsseD4qd/nerDZB5rXrL8pXvjCZX5VRZrEKGU+M//TbKg3xQufAxQkJo7Ag15RkSbRtGz4SvOazzA2fETPxtGSVXlTszKzsvNWlRyly/0nkDlK07QuWR1vG98nUrOnP7zZc+r1FTJHale8dxqK4djqYryGpl3wSDmsVPflG3o2prx1GtcX2RmbDy1gs6bZM8vosv8KMs8tByjve1f77GwlRuzTDsoDfIbMSElMelmMTVkl538Au9XN/WP0bJRtgtLMyXCHUrqY8xdf1UfInL8W3i4vmah8Bu48JA/yCTJPXnOhZvdMheKWg/C6mgqIlZCKK3ADcnGJVOUOsgYHRQzMqQT40p2NjI5KVJ8xdd6cIfLHT0d9F1SPcP14+iVVyRibI1FBf96YiAPSgFfzxnDVZIILOcjmrvnrxuZ3Vaq6PA7fqwc+cuRKMocVuOGf1w3UYf8hi4s2Lh2Kq2Dh79itZ8MJa09OftMWo1ye2EvobB00t1ZVnUpam8SrdXA13VQAf3GQGd+TQ6trOuelK5kno41jz4sZl9Qi0T3VTMdmHFXIHN0h42QFlG6u+eyPaUpnZAG8qBYkr3kx70JTd9f6FeAULdFovSOfYHQxwDG67jplM9LJ/RHoxYwraqGemeQjDNDPmzRrHdbA7X2e+KEig1Vd2KhjW8NnMGi27Nf5iSLYxXDe5QJX17S8V2abFo0Oe1QkvTDpNaOxaC+1nTRtLGy9ieGx4cafPPg1NoBKN7i6xu8C3awzZx5t+5Q9Nu/Jn58l99TfozV7DZ9B1DcH8teWEVzO6itGgzmqYjwV0bYOewDeHadp82BuR+0dPoPwMLegSFP7rGWWqxbO2bBJ0z7B6VubAqP4TZFjw+mCPI3l2YWt+FEuM/igMdp6gD3aGG4QZFZVxUzsvL6+ZWhsJGNZ16z1reiM23FyJlqvrcXt+GhuEPXNPJ4N47LOeDYyYZNNm6Qfeutq3GTbncZsyD0uKPVJp1QD4F5s9qNKfbO2IGuuUzeXfoybCTZXn7yYK+lfEQk4LxO1idgwueaNOubzSuHufNqnM8numjrQHKrmOYIVPNeZhi7b8bUjla7it/y3NzDsxaxFxWjv0yk6q9obx4aR+3h/UahqMoEF0KAZV0wey6RijydoRJqhOon/h8MMpv/HEGS+/JK6XPW8kYVXq8pWSDR5MENK8FP6wfgwkyk0bhZ+oW9LS3sOQ2RuHs4+M8DfKQaa4/sLxwQAAAAASUVORK5CYII="},d1cc:function(e,t,s){},e0b0:function(e,t,s){"use strict";var i=s("a769"),r=s.n(i);r.a},e270:function(e,t,s){"use strict";var i=s("7618"),r=(s("7f7f"),s("6762"),s("2fdb"),s("d225")),a=s("b0b4"),n=s("308d"),o=s("6bb5"),l=s("2a88"),c=s("4e2b"),u=function(){function e(t){Object(r["a"])(this,e),this.schema=t,t.oneOf||t.anyOf?this.schemas=(t.oneOf||t.anyOf).map(function(e){return new d(e)}):Array.isArray(t.type)?this.schemas=t.type.map(function(e){return new d(Object.assign({},t,{type:e}))}):this.schemas=[new d(t)]}return Object(a["a"])(e,[{key:"hasDefaultValue",value:function(){if("undefined"!==typeof this.schema.default)return!0;for(var e in this.schemas)if("undefined"!==typeof this.schemas[e].default)return!0;return!1}},{key:"defaultValue",value:function(){if("undefined"!==typeof this.schema.default)return this.schema.default;for(var e in this.schemas)if("undefined"!==typeof this.schemas[e].default)return this.schemas[e].default}},{key:"isEditable",value:function(){return this.schemas.filter(function(e){return e.isEditable()&&!e.isNull()}).length>0}},{key:"is",value:function(e){var t=this.dataTypes();return 1===t.length&&t[0]===e}},{key:"dataType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataTypes(!0,e),s=t.indexOf("null");return 1===t.length?t[0]:2===t.length&&-1!=s?t[0===s?1:0]:"mixed"}},{key:"dataTypes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this.schemas.map(function(e){return e.dataType(t)});return s=s.filter(function(e,t,s){return s.indexOf(e)===t}),e||(s=s.filter(function(e){return"null"!==e})),s}},{key:"nullable",value:function(){return this.schemas.filter(function(e){return e.isNull()}).length>0}}]),e}(),d=function(){function e(t){Object(r["a"])(this,e),this.schema=t,"array"===this.schema.type?this.arrayItems=new u(this.schema.items||{}):this.arrayItems=null}return Object(a["a"])(e,[{key:"isNull",value:function(){return"null"===this.schema.type}},{key:"isEditable",value:function(){return"raster-cube"!==this.dataType()&&"vector-cube"!==this.dataType()}},{key:"arrayOf",value:function(){return null===this.arrayItems?null:this.arrayItems.dataType()}},{key:"dataType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.schema.type||"any";return e||(t=this.schema.format||t),t}},{key:"isEnum",value:function(){return Array.isArray(this.schema.enum)}},{key:"getEnumChoices",value:function(){return this.schema.enum}},{key:"getCallbackParameters",value:function(){return this.schema.parameters}},{key:"title",value:function(){var e=this.dataType();return this.schema.title&&(e+=" - "+this.schema.title),e}},{key:"description",value:function(){return this.schema.description||""}}]),e}(),h=s("025e"),p=function(e){function t(e,s,i){var a,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],d=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return Object(r["a"])(this,t),a=Object(n["a"])(this,Object(o["a"])(t).call(this,i)),a.block=null,a.description=l||"",a.isRequired=c||!1,a.isDeprecated=h||!1,a.isExperimental=d||!1,a.type=u?"output":"input",a.name=e,a.label=s,a.edges=[],a.resetValue(),a}return Object(c["a"])(t,e),Object(a["a"])(t,[{key:"resetValue",value:function(){if(this.hasValue=!1,this.hasDefaultValue())return this.value=this.defaultValue(),void(this.hasValue=!0);if(this.nullable())this.value=null;else{var e=this.dataType(!0);switch(e){case"array":this.value=[];break;case"string":this.value="";break;case"integer":case"number":this.value=0;break;case"boolean":this.value=!1;break;default:this.value=null}}}},{key:"setBlock",value:function(e){this.block=e}},{key:"isDefaultValue",value:function(){return!this.hasValue||this.hasDefaultValue()&&this.defaultValue()==this.getValue()}},{key:"isArrayType",value:function(){return"array"===this.dataType(!0)}},{key:"isObjectType",value:function(){return"object"===this.dataType(!0)}},{key:"isEditable",value:function(){return this.isInput()&&Object(l["a"])(Object(o["a"])(t.prototype),"isEditable",this).call(this)}},{key:"isOutput",value:function(){return"output"===this.type}},{key:"isInput",value:function(){return"input"===this.type}},{key:"allowsMultipleEdges",value:function(){var e=this.dataTypes(!1,!0);return e.filter(function(e){return["array","object"].includes(e)}).length>0}},{key:"_getEdgeRef",value:function(e){var t=e.getOtherBlock(this.block);return t?t.isCallbackArgument()?{from_argument:t.name}:{from_node:t.id}:null}},{key:"_addValueForEdge",value:function(e){var s=this._getEdgeRef(e);if(s)if(this.allowsMultipleEdges())if(this.isArrayType())t.isRef(this.value)?this.value=[this.value,s]:Array.isArray(this.value)&&this.value.length>0?this.value.push(s):(this.value=s,this.hasValue=!0);else if(this.isObjectType())if(t.isRef(this.value)){var i="Can't determine which object property this input should be assigned to. Please specify manually in Process Graph mode.";console.warn(i),this.block.blocks.showError(i)}else this.value=s,this.hasValue=!0;else this.value=s,this.hasValue=!0;else this.value=s,this.hasValue=!0}},{key:"_removeValueForEdge",value:function(e){var t=this._getEdgeRef(e);this._isRefEqual(t,this.value)?this.resetValue():(this.isArrayType()||this.isObjectType())&&(this.value=this._removeValueForEdgeDeep(this.value,t))}},{key:"_removeValueForEdgeDeep",value:function(e,t){if(Array.isArray(e)){var s=e.length;while(s--)null!==e[s]&&"object"===Object(i["a"])(e[s])&&(this._isRefEqual(t,e[s])?e.splice(s,1):this._removeValueForEdgeDeep(e[s],t))}else if(h["a"].isObject(e))for(var r in e)e.hasOwnProperty(r)&&null!==e[r]&&"object"===Object(i["a"])(e[r])&&(this._isRefEqual(t,e[r])?delete e[r]:this._removeValueForEdgeDeep(e[r],t));return e}},{key:"_isRefEqual",value:function(e,t){return!(!h["a"].isObject(e)||!h["a"].isObject(t))&&(!(!e.from_argument||e.from_argument!==t.from_argument)||!(!e.from_node||e.from_node!=t.from_node))}},{key:"addEdge",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.edges.push(e),t&&this._addValueForEdge(e),this}},{key:"eraseEdge",value:function(e){for(var t in this.edges)if(this.edges[t]==e)return this._removeValueForEdge(e),this.edges.splice(t,1),!0;return!1}},{key:"getEdgeCount",value:function(){return this.edges.length}},{key:"getEdges",value:function(){return this.edges}},{key:"getValue",value:function(){return this.value}},{key:"getLabel",value:function(){return this.label}},{key:"setValue",value:function(e){return"boolean"==this.dataType(!0)&&(e=!!e),this.value=e,this.hasValue=!0,this}}],[{key:"isRef",value:function(e){return h["a"].isObject(e)&&(e.from_argument||e.from_node)}}]),t}(u);t["a"]=p},e4f1:function(e,t,s){"use strict";var i=s("149e"),r=s.n(i);r.a},e6ae:function(e,t,s){"use strict";var i=s("cb37"),r=s.n(i);r.a},e944:function(e,t,s){"use strict";var i=s("9e5e"),r=s.n(i);r.a},f196:function(e,t,s){"use strict";var i=s("1887"),r=s.n(i);r.a},f93f:function(e,t,s){},fea2:function(e,t,s){}});
//# sourceMappingURL=app.29607b02.js.map