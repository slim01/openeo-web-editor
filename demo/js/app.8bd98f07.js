(function(t){function e(e){for(var i,a,r=e[0],c=e[1],l=e[2],h=0,d=[];h<r.length;h++)a=r[h],o[a]&&d.push(o[a][0]),o[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(d.length)d.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],i=!0,r=1;r<s.length;r++){var c=s[r];0!==o[c]&&(i=!1)}i&&(n.splice(e--,1),t=a(a.s=s[0]))}return t}var i={},o={app:0},n=[];function a(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=i,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/openeo-web-editor/demo/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0791":function(t,e,s){"use strict";var i=s("22f1"),o=s.n(i);o.a},"0ba8":function(t,e,s){"use strict";var i=s("f281"),o=s.n(i);o.a},"18b7":function(t,e,s){},1999:function(t,e,s){},"19bb":function(t,e,s){"use strict";var i=s("51d8"),o=s.n(i);o.a},"22ae":function(t,e,s){},"22d7":function(t,e,s){"use strict";var i=s("b52e"),o=s.n(i);o.a},"22f1":function(t,e,s){},"2d07":function(t,e,s){"use strict";var i=s("5ebb"),o=s.n(i);o.a},"39fd":function(t,e,s){},"3b7f":function(t,e,s){"use strict";var i=s("addd"),o=s.n(i);o.a},"3bcc":function(t,e,s){"use strict";var i=s("785f"),o=s.n(i);o.a},"468d":function(t,e,s){},"51d8":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var i,o,n,a,r=s("2b0e"),c={serverUrl:"",allowServerChange:!0},l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"container"}},[s("div",{attrs:{id:"ide"}},[s("BackendPanel",{attrs:{connection:t.connection}}),s("div",{staticClass:"uiBox tabs",attrs:{id:"processGraphContent"}},[s("div",{staticClass:"tabsHeader"},[s("button",{staticClass:"tabItem",attrs:{name:"graphTab"},on:{click:t.changeProcessGraphTab}},[s("i",{staticClass:"fas fa-code-branch"}),t._v(" Visual Model Builder")]),s("button",{staticClass:"tabItem",attrs:{name:"sourceTab"},on:{click:t.changeProcessGraphTab}},[s("i",{staticClass:"fas fa-code"}),t._v(" Process Graph")])]),s("div",{staticClass:"sourceHeader"},[s("h3",[null===t.scriptName?s("em",[t._v("Unnamed")]):[t._v(t._s(t.scriptName))]],2),s("div",{staticClass:"sourceToolbar"},[t.isVisualBuilderActive?[s("button",{directives:[{name:"show",rawName:"v-show",value:t.blocksCanDelete(),expression:"blocksCanDelete()"}],attrs:{title:"Delete selected elements"},on:{click:function(e){return t.blocksDelete()}}},[s("i",{staticClass:"fas fa-trash"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.blocksHasUndo(),expression:"blocksHasUndo()"}],attrs:{title:"Undo last change"},on:{click:function(e){return t.blocksUndo()}}},[s("i",{staticClass:"fas fa-undo-alt"})]),s("button",{class:{compactActive:t.blocksCompactMode()},attrs:{title:"Compact Mode"},on:{click:function(e){return t.blocksToggleCompact()}}},[s("i",{staticClass:"fas fa-compress-arrows-alt"})]),s("button",{attrs:{title:"Scale to perfect size"},on:{click:function(e){return t.blocksPerfectScale()}}},[s("i",{staticClass:"fas fa-arrows-alt"})])]:t._e(),s("button",{staticClass:"sepl",attrs:{title:"Clear current script / New script"},on:{click:t.newScript}},[s("i",{staticClass:"fas fa-file"})]),s("button",{attrs:{title:"Load script from local storage"},on:{click:t.openScriptChooser}},[s("i",{staticClass:"fas fa-folder-open"})]),s("button",{attrs:{title:"Save script to local storage"},on:{click:t.saveScript}},[s("i",{staticClass:"fas fa-save"})]),this.supports("execute")?s("button",{staticClass:"sepl",attrs:{title:"Run current process graph and view results"},on:{click:t.executeProcessGraph}},[s("i",{staticClass:"fas fa-play"})]):t._e()],2)]),s("div",{staticClass:"tabsBody"},[s("div",{staticClass:"tabContent",attrs:{id:"graphTab"}},[s("GraphBuilderEnvironment",{ref:"graphBuilder",attrs:{active:t.isVisualBuilderActive,scriptName:t.scriptName}})],1),s("div",{staticClass:"tabContent",attrs:{id:"sourceTab"}},[s("SourceEnvironment",{ref:"sourceEditor",attrs:{active:!t.isVisualBuilderActive,scriptName:t.scriptName}})],1)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:this.connection,expression:"this.connection"}],staticClass:"uiBox tabs",attrs:{id:"userContent"}},[s("div",{staticClass:"tabsHeader"},[t.supportsJobs()?s("button",{staticClass:"tabItem",attrs:{name:"jobsTab"},on:{click:t.changeUserTab}},[s("i",{staticClass:"fas fa-tasks"}),t._v(" Batch Jobs")]):t._e(),t.supportsServices()?s("button",{staticClass:"tabItem",attrs:{name:"servicesTab"},on:{click:t.changeUserTab}},[s("i",{staticClass:"fas fa-cloud"}),t._v(" Web Services")]):t._e(),t.supportsProcessGraphs()?s("button",{staticClass:"tabItem",attrs:{name:"processGraphsTab"},on:{click:t.changeUserTab}},[s("i",{staticClass:"fas fa-code-branch"}),t._v(" Process Graphs")]):t._e(),t.supportsFiles()?s("button",{staticClass:"tabItem",attrs:{name:"filesTab"},on:{click:t.changeUserTab}},[s("i",{staticClass:"fas fa-file"}),t._v(" Files")]):t._e(),s("button",{staticClass:"tabItem",attrs:{name:"accountTab"},on:{click:t.changeUserTab}},[s("i",{staticClass:"fas fa-user"}),t._v(" Account")])]),s("div",{staticClass:"tabsBody"},[t.supportsJobs()?s("div",{staticClass:"tabContent",attrs:{id:"jobsTab"}},[s("JobPanel",{attrs:{connection:t.connection}})],1):t._e(),t.supportsServices()?s("div",{staticClass:"tabContent",attrs:{id:"servicesTab"}},[s("ServicePanel",{attrs:{connection:t.connection}})],1):t._e(),t.supportsProcessGraphs()?s("div",{staticClass:"tabContent",attrs:{id:"processGraphsTab"}},[s("ProcessGraphPanel",{attrs:{connection:t.connection}})],1):t._e(),t.supportsFiles()?s("div",{staticClass:"tabContent",attrs:{id:"filesTab"}},[s("FilePanel",{attrs:{connection:t.connection}})],1):t._e(),s("div",{staticClass:"tabContent",attrs:{id:"accountTab"}},[s("AccountPanel",{attrs:{connection:t.connection}})],1)])]),t._m(0)],1),s("div",{attrs:{id:"viewer"}},[s("div",{staticClass:"uiBox tabs"},[s("div",{staticClass:"tabsHeader"},[s("button",{staticClass:"tabItem tabActive",attrs:{name:"mapTab"},on:{click:t.changeViewerTab}},[s("i",{staticClass:"fas fa-map"}),t._v(" Map")]),s("button",{staticClass:"tabItem",attrs:{name:"imageTab"},on:{click:t.changeViewerTab}},[s("i",{staticClass:"fas fa-image"}),t._v(" Images")]),s("button",{staticClass:"tabItem",attrs:{name:"dataTab"},on:{click:t.changeViewerTab}},[s("i",{staticClass:"fas fa-database"}),t._v(" Data")])]),s("div",{staticClass:"tabsBody"},[s("div",{staticClass:"tabContent tabActive",attrs:{id:"mapTab"}},[s("MapViewer",{ref:"mapViewer"})],1),s("div",{staticClass:"tabContent",attrs:{id:"imageTab"}},[s("ImageViewer",{ref:"imageViewer"})],1),s("div",{staticClass:"tabContent",attrs:{id:"dataTab"}},[s("DataViewer",{ref:"dataViewer"})],1)])])]),s("vue-snotify"),s("Modal")],1)},u=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("footer",[i("a",{attrs:{href:"http://www.openeo.org",target:"_blank"}},[i("img",{attrs:{src:s("cf05"),id:"openeoLogo"}})])])}],h=(s("a481"),s("7f7f"),s("f499")),d=s.n(h),p=s("a4bb"),f=s.n(p),v=new r["a"],m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dataPanel",attrs:{id:"filePanel"}},[s("h3",[t._v("User '"+t._s(t.userName)+"'")]),t.me.storage?[s("h4",[t._v("Storage")]),s("div",{staticClass:"percent"},[s("div",{staticClass:"used",style:"width: "+this.storageUsedPercent+"%"})]),s("div",[t._v("Used "+t._s(t.formatMegabyte(this.storageUsed))+" of "+t._s(t.formatMegabyte(this.me.storage.quota))+".")])]:t._e(),"number"===typeof t.me.budget&&t.me.budget>=0?[s("h4",[t._v("Budget")]),t._v("\n\t\t"+t._s(t.formatCurrency(t.me.budget))+"\n\t")]:t._e(),Array.isArray(t.me.links)&&t.me.links.length>0?[s("h4",[t._v("Additional resources")]),s("LinkList",{attrs:{links:t.me.links}})]:t._e()],2)},b=[],g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dataTable",attrs:{id:t.id}},[s("div",{staticClass:"dataTableMenu"},[s("div",{staticClass:"dataTableToolbar"},[t._t("toolbar")],2),t.data.length>0?s("div",{staticClass:"dataTableFilter"},[s("i",{staticClass:"fas fa-search filter-icon"}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filterValue,expression:"filterValue"}],attrs:{type:"text",placeholder:"Search term"},domProps:{value:t.filterValue},on:{input:function(e){e.target.composing||(t.filterValue=e.target.value)}}}),s("button",{attrs:{disabled:!t.hasFilter},on:{click:t.clearFilter}},[s("i",{staticClass:"fas fa-times-circle"})])]):t._e()]),t.data.length>0||"undefined"==typeof t.noDataMessage||""==t.noDataMessage?s("table",[s("tr",t._l(t.columns,function(e,i){return s("th",{directives:[{name:"show",rawName:"v-show",value:!e.hide,expression:"!col.hide"}],key:i,class:i},[t._v(t._s(e.name))])}),0),t._l(t.view,function(e,i){return s("tr",{key:i},t._l(t.columns,function(i,o){return s("td",{directives:[{name:"show",rawName:"v-show",value:!i.hide,expression:"!col.hide"}],key:o,class:o,attrs:{"data-value":!!i.stylable&&t.value(e,i,o)}},[t._t(o,[t._v("\n\t\t\t\t\t"+t._s(t.formattedValue(e,i,o))+"\n\t\t\t\t")],{row:e,col:i,id:o})],2)}),0)}),t.data.length>0&&0==t.view.length?s("tr",{staticClass:"noSearchResults"},[s("td",{attrs:{colspan:t.columnCount}},[t._v("Sorry, no element matches your search criteria.")])]):t._e()],2):t._e(),0==t.data.length?s("div",{staticClass:"noDataMessage"},[t._v(t._s(t.noDataMessage))]):t._e()])},y=[],w=(s("55dd"),s("6b54"),s("20d6"),s("a745")),k=s.n(w),C=s("7618"),S={name:"DataTable",props:["id","columns","dataSource"],data:function(){return{data:[],view:[],filterValue:null,primaryKey:null,noDataMessage:"No data specified."}},watch:{data:function(t,e){this.updateView()},filterValue:function(t,e){this.updateView()}},computed:{columnCount:function(){return f()(this.columns).length},hasFilter:function(){return"string"===typeof this.filterValue&&this.filterValue.length>0}},created:function(){this.determinePrimaryKey()},methods:{determinePrimaryKey:function(){for(var t in this.columns)if(this.columns[t].primaryKey){this.primaryKey=t;break}},setNoData:function(t){this.data=[],"string"!=typeof t?this.$utils.isObject(t)&&("object"===Object(C["a"])(t.data)&&"object"===Object(C["a"])(t.config)&&"object"===Object(C["a"])(t.headers)&&(t=t.data),this.$utils.isObject(t)&&"string"===typeof t.message)?this.noDataMessage=t.message:(console.log(t),this.noDataMessage="Sorry, an unknown error has occured."):this.noDataMessage=t},retrieveData:function(){var t=this;this.setNoData("Loading data..."),this.data=[],"function"===typeof this.dataSource?this.dataSource().then(function(e){k()(e)?0==e.length?t.setNoData(""):t.setData(e):t.setNoData("Invalid response from data source.")}).catch(function(e){t.setNoData(e)}):k()(this.dataSource)?0==this.dataSource.length?this.setNoData(""):this.setData(this.dataSource):this.setNoData("No valid data source specified.")},setData:function(t){this.noDataMessage=void 0,this.data=t},removeData:function(t){var e=this;if(null===this.primaryKey)throw new Error("No primary key specified.");this.data=this.data.filter(function(s){return s[e.primaryKey]!=t}),0==this.data.length&&this.setNoData("")},addData:function(t){if(!t.hasOwnProperty(this.primaryKey))throw new Error("Object does not contain a value for the primary key.");this.data.push(t)},replaceData:function(t){var e=this;if(null===this.primaryKey)throw new Error("No primary key specified.");if(!t.hasOwnProperty(this.primaryKey))throw new Error("Object does not contain a value for the primary key.");var s=this.data.findIndex(function(s){return s[e.primaryKey]==t[e.primaryKey]});s>=0?this.$set(this.data,s,t):this.data.push(t)},value:function(t,e,s){var i;return i="object"===Object(C["a"])(t)?t[s]:t,this.$utils.isObject(e)&&"function"===typeof e.computedValue&&(i=e.computedValue(t,i)),i},formattedValue:function(t,e,s){return this.format(this.value(t,e,s),e)},sort:function(){},filter:function(){var t=this;if(this.hasFilter){var e=this.filterValue.toLowerCase();this.view=this.view.filter(function(s){for(var i in s){var o=t.columns[i];if(!("undefined"===typeof o||o.hasOwnProperty("filterable")&&!1===o.filterable)){var n=t.value(s,o,i);if(("number"===typeof n||"string"===typeof n||"boolean"===typeof n)&&(n=n.toString(),-1!==n.toLowerCase().indexOf(e)))return!0}}return!1})}},clearFilter:function(){this.filterValue="",this.updateView()},updateView:function(){k()(this.data)?(this.view=this.data,this.data.length>0&&(this.filter(),this.sort())):this.view=[]},format:function(t,e){return"string"===typeof e.format?"function"===typeof this["format"+e.format]?t=this["format"+e.format](t,e):console.log(e.format+" is an invalid formatter."):"function"===typeof e.format&&(t=e.format.call(this,t,e)),t},formatFileSize:function(t,e){if(!t)return"";var s=0==t?0:Math.floor(Math.log(t)/Math.log(1024));return 1*(t/Math.pow(1024,s)).toFixed(2)+" "+["B","kB","MB","GB","TB"][s]},formatDateTime:function(t,e){return this.$utils.formatDateTime(t)},formatUpperCase:function(t,e){return"string"===typeof t?t.toUpperCase():t}}},x=S,_=(s("6224"),s("2877")),P=Object(_["a"])(x,g,y,!1,null,null,null),T=P.exports,M={props:["connection"],methods:{supports:function(t){return this.connection&&this.connection.capabilitiesObject&&this.connection.capabilitiesObject.hasFeature(t)}}},D=M,F=Object(_["a"])(D,i,o,!1,null,null,null),E=F.exports,O={mixins:[E],components:{DataTable:T},data:function(){return{columns:{}}},computed:{userId:{get:function(){return this.connection?this.connection.getUserId():null}}},watch:{userId:function(t,e){t!==e&&this.updateData()}},created:function(){v.$on("serverChanged",this.updateData)},methods:{updateData:function(){},updateTable:function(t,e,s){this.$refs.table&&(this.supports("createJob")||this.supports("listJobs")?"string"!==typeof this.userId&&"number"!==typeof this.userId?this.$refs.table.setNoData("Please authenticate to use this feature."):this.$refs.table.retrieveData():this.$refs.table.setNoData("Sorry, this feature is not supported by the server."))}}},j=O,I=Object(_["a"])(j,n,a,!1,null,null,null),B=I.exports,U=s("4845"),N={name:"AccountPanel",mixins:[B],components:{LinkList:U["a"]},data:function(){return{me:{}}},computed:{userName:{get:function(){return this.userId?this.userId:"Guest"}},storageUsed:{get:function(){return this.$utils.isObject(this.me.storage)?this.me.storage.quota-this.me.storage.free:null}},storageUsedPercent:{get:function(){return this.$utils.isObject(this.me.storage)?Math.round(this.storageUsed/this.me.storage.quota*100):null}}},methods:{updateData:function(){var t=this;this.connection&&this.supports("describeAccount")&&this.userId&&this.connection.describeAccount().then(function(e){return t.me=e}).catch(function(e){t.$utils.exception(t,e,"Sorry, could not load account information.")})},formatMegabyte:function(t){return Math.round(t/1048576)+" MB"},formatCurrency:function(t){var e="";return this.connection&&this.connection.capabilitiesObject&&null!==this.connection.capabilitiesObject.currency()&&(e=" "+this.connection.capabilitiesObject.currency()),t+e}}},V=N,G=(s("6a47"),Object(_["a"])(V,m,b,!1,null,"0cd6ab2e",null)),J=G.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"uiBox dataPanel",attrs:{id:"backendPanel"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.$config.allowServerChange,expression:"$config.allowServerChange"}],staticClass:"server-toolbar"},[s("h3",[t._v("Server:")]),s("input",{directives:[{name:"model",rawName:"v-model.lazy.trim",value:t.serverUrl,expression:"serverUrl",modifiers:{lazy:!0,trim:!0}}],attrs:{id:"serverUrl",list:"serverUrls"},domProps:{value:t.serverUrl},on:{change:function(e){t.serverUrl=e.target.value.trim()},blur:function(e){return t.$forceUpdate()}}}),s("button",{attrs:{title:"Select previously used server"},on:{click:t.showServerSelector}},[s("i",{staticClass:"fas fa-book"})]),s("button",{attrs:{title:"Change server"},on:{click:t.updateServerUrlFromInput}},[s("i",{staticClass:"fas fa-check"})]),s("button",{attrs:{title:"Get server information"},on:{click:t.getServerInfo}},[s("i",{staticClass:"fas fa-info"})])]),t.showCollectionSelector()&&t.showProcessSelector()?s("div",{staticClass:"discovery-toolbar"},[t.showCollectionSelector()?s("div",{staticClass:"collections-toolbar"},[s("span",[t._v("Collections:")]),s("select",{ref:"collection",attrs:{id:"collection"}},t._l(t.collections,function(e){return s("option",{key:e.name,domProps:{value:e.name}},[t._v(t._s(e.name))])}),0),s("button",{attrs:{id:"insertCollection",title:"Insert into script"},on:{click:t.insertCollection}},[s("i",{staticClass:"fas fa-plus"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("describeCollection"),expression:"supports('describeCollection')"}],attrs:{title:"Show details"},on:{click:t.showSelectedCollectionInfo}},[s("i",{staticClass:"fas fa-info"})])]):t._e(),t.showProcessSelector()?s("div",{staticClass:"processes-toolbar"},[s("span",[t._v("Processes:")]),s("select",{ref:"processes",attrs:{id:"processes"}},t._l(t.processes,function(e){return s("option",{key:e.name,attrs:{title:e.summary?e.summary:""},domProps:{value:e.name}},[t._v(t._s(e.name))])}),0),s("button",{attrs:{id:"insertProcesses",title:"Insert into script"},on:{click:t.insertProcess}},[s("i",{staticClass:"fas fa-plus"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("listProcesses"),expression:"supports('listProcesses')"}],attrs:{title:"Show details"},on:{click:t.showSelectedProcessInfo}},[s("i",{staticClass:"fas fa-info"})])]):t._e()]):t._e()])},R=[],z=(s("7514"),{name:"BackendPanel",mixins:[E],data:function(){return{processes:[],collections:[],serverUrls:[],serverUrl:""}},watch:{serverUrls:function(t,e){localStorage.setItem("serverUrls",d()(t))}},created:function(){v.$on("changeServerUrl",this.changeServer),v.$on("serverChanged",this.discoverData),v.$on("showCollectionInfo",this.showCollectionInfo),v.$on("showProcessInfo",this.showProcessInfo)},mounted:function(){var t=localStorage.getItem("serverUrls");null!==t&&(this.serverUrls=JSON.parse(t));var e=this.$utils.param("server");this.$config.allowServerChange&&this.$utils.isUrl(e)?v.$emit("changeServerUrl",e):this.$utils.isUrl(this.$config.serverUrl)&&v.$emit("changeServerUrl",this.$config.serverUrl)},methods:{showCollectionSelector:function(){return this.supports("listCollections")&&this.collections.length>0},showProcessSelector:function(){return this.supports("listProcesses")&&this.processes.length>0},showServerSelector:function(){var t=this;v.$emit("showComponentModal","Select previously used server","List",{dataSource:this.serverUrls,actions:[{callback:function(e){return t.updateServerUrlTo(e)||!0},icon:"check",title:"Select this server"},{callback:function(e){return t.serverUrls.splice(t.serverUrls.indexOf(e),1)},icon:"trash",title:"Delete entry from history"}]})},changeServer:function(t){this.serverUrl=t,-1===this.serverUrls.indexOf(t)&&this.serverUrls.push(t)},discoverData:function(){var t=this;this.supports("listCollections")&&this.connection.listCollections().then(this.setDiscoveredCollections).catch(function(e){return t.setDiscoveredCollections([])}),this.supports("listProcesses")&&this.connection.listProcesses().then(this.setDiscoveredProcesses).catch(function(e){return t.setDiscoveredProcesses([])})},updateServerUrlFromInput:function(){"string"===typeof this.serverUrl&&this.serverUrl.length>0?this.connection&&this.serverUrl==this.connection.getBaseUrl()||v.$emit("changeServerUrl",this.serverUrl):this.$utils.error(this,"Please specify a valid server URL.")},updateServerUrlTo:function(t){this.serverUrl=t,this.updateServerUrlFromInput()},getServerInfo:function(){if(this.connection){var t={url:this.connection.getBaseUrl(),capabilities:this.connection.capabilitiesObject.data,services:this.connection.supportedServices,formats:this.connection.supportedOutputFormats};v.$emit("showComponentModal","Server information","ServerInfoPanel",t)}else this.$utils.info(this,"Not connected yet.")},showSelectedCollectionInfo:function(){this.showCollectionInfo(this.$refs.collection.value)},showCollectionInfo:function(t){var e=this;this.connection.describeCollection(t).then(function(s){v.$emit("showComponentModal",t,"CollectionPanel",{collection:s,version:e.connection.capabilitiesObject.version()})}).catch(function(t){return e.$utils.error(e,"Sorry, can't load collection details.")})},showSelectedProcessInfo:function(){this.showProcessInfo(this.$refs.processes.value)},showProcessInfo:function(t){var e=this.processes.find(function(e){return e.name==t});v.$emit("showComponentModal",t,"ProcessPanel",{process:e,version:this.connection.capabilitiesObject.version()})},insertCollection:function(){v.$emit("addCollectionToEditor",this.$refs.collection.value)},insertProcess:function(){v.$emit("addProcessToEditor",this.$refs.processes.value)},setDiscoveredCollections:function(t){for(var e in this.collections=[],t.collections)"undefined"!==typeof t.collections[e].name&&this.collections.push(t.collections[e]);v.$emit("propagateCollections",this.collections)},setDiscoveredProcesses:function(t){for(var e in this.processes=[],t.processes)"undefined"!==typeof t.processes[e].name&&this.processes.push(t.processes[e]);v.$emit("propagateProcesses",this.processes)}}}),H=z,W=(s("9b3a"),Object(_["a"])(H,A,R,!1,null,"288586ec",null)),q=W.exports,Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"dataViewer"}},[t.isText()?s("span",[t._v(t._s(t.nl2br(t.content)))]):s("ObjectTree",{attrs:{data:t.content}})],1)},X=[],K=s("0a37"),Q={name:"DataViewer",components:{ObjectTree:K["a"]},data:function(){return{content:null}},mounted:function(){this.reset()},methods:{isText:function(){return"string"===typeof this.content},reset:function(){this.content="Nothing to show."},showJson:function(t){this.content=t,v.$emit("showDataViewer")},showText:function(t){this.content=t,v.$emit("showDataViewer")},showBlob:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(null==s&&(s=t.type),s){case"application/json":this.$utils.blobToText(t,function(t){var s=JSON.parse(t.target.result);e.showJson(s)});break;case"text/plain":this.$utils.blobToText(t,function(t){e.showText(t.target.result)});break}},nl2br:function(t){return"undefined"===typeof t||null===t?"":(t+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")}}},Z=Q,tt=(s("c6f2"),Object(_["a"])(Z,Y,X,!1,null,"3d91bf7a",null)),et=tt.exports,st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"FilePanel"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.supports("uploadFile"),expression:"supports('uploadFile')"}],staticClass:"addFile"},[s("input",{attrs:{type:"file",name:"uploadUserFile",id:"uploadUserFile"}}),s("button",{directives:[{name:"show",rawName:"v-show",value:!t.uploadProgress,expression:"!uploadProgress"}],attrs:{title:"Add new file",id:"uploadUserFileBtn"},on:{click:function(e){return t.uploadFile()}}},[s("i",{staticClass:"fas fa-upload"})])]),s("div",{staticClass:"percent"},[s("div",{staticClass:"used",class:{error:t.uploadErrored},style:"width: "+this.uploadProgress+"%; opacity: "+this.uploadFadeOut})]),s("DataTable",{ref:"table",attrs:{dataSource:t.listFiles,columns:t.columns},scopedSlots:t._u([{key:"actions",fn:function(e){return[s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("downloadFile"),expression:"supports('downloadFile')"}],attrs:{title:"Download"},on:{click:function(s){return t.downloadFile(e.row)}}},[s("i",{staticClass:"fas fa-download"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("deleteFile"),expression:"supports('deleteFile')"}],attrs:{title:"Delete"},on:{click:function(s){return t.deleteFile(e.row)}}},[s("i",{staticClass:"fas fa-trash"})])]}}])},[s("template",{slot:"toolbar"},[s("button",{attrs:{title:"Refresh files"},on:{click:function(e){return t.updateData()}}},[s("i",{staticClass:"fas fa-sync-alt"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:!t.subscribed,expression:"!subscribed"}],attrs:{title:"Subscribe to all changes to the file directory"},on:{click:function(e){return t.subscribeToFileChanges()}}},[s("i",{staticClass:"fas fa-bell"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.subscribed,expression:"subscribed"}],attrs:{title:"Unsubscribe from all changes to the file directory"},on:{click:function(e){return t.unsubscribeFromFileChanges()}}},[s("i",{staticClass:"fas fa-bell-slash"})])])],2)],1)},it=[],ot={name:"FilePanel",mixins:[B],data:function(){return{columns:{name:{name:"Path / Name",primaryKey:!0},size:{name:"Size",format:"FileSize",filterable:!1},modified:{name:"Last modified",format:"DateTime"},actions:{name:"Actions",filterable:!1}},subscribed:!1,uploadProgress:0,uploadErrored:!1,uploadFadeOut:1}},methods:{listFiles:function(){return this.connection.listFiles()},updateData:function(){this.updateTable(this.$refs.table,"listFiles","uploadFile")},uploadFile:function(){var t=this,e=document.getElementById("uploadUserFile"),s=e.files[0];this.connection.createFile(s.name).then(function(e){return e.uploadFile(s,function(e){t.uploadProgress=e})}).then(function(i){i.setAll({name:s.name,size:s.size,modified:(new Date).toISOString()}),t.$refs.table.replaceData(i),t.uploadProgress=100,t.fadeOutUploadProgress(),e.value="",t.$utils.ok(t,"File upload completed.")}).catch(function(e){console.log(e),t.fadeOutUploadProgress(),t.$utils.exception(t,e,"Sorry, file upload failed.")})},fadeOutUploadProgress:function(){var t=this,e=setInterval(function(){t.uploadFadeOut-=.05,t.uploadFadeOut<0&&(t.uploadProgress=0,t.uploadFadeOut=1,clearInterval(e))},100)},downloadFile:function(t){this.$utils.info(this,"File requested. Please wait..."),t.downloadFile(t.name)},deleteFile:function(t){var e=this;t.deleteFile().then(function(s){e.$refs.table.removeData(t.name)}).catch(function(t){e.$utils.error(e,"Sorry, could not delete file.")})},subscribeToFileChanges:function(){this.connection.subscribe("openeo.files",{},function(t,e){console.log("File change: "+d()(t))}),this.subscribed=!0},unsubscribeFromFileChanges:function(t){this.connection.unsubscribe("openeo.files",{}),this.subscribed=!1}}},nt=ot,at=(s("9961"),Object(_["a"])(nt,st,it,!1,null,null,null)),rt=at.exports,ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"imageContainer",attrs:{id:"imageViewer"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:"text"==t.visibleContent,expression:"visibleContent == 'text'"}],ref:"emptyMsg"}),s("img",{directives:[{name:"show",rawName:"v-show",value:"image"==t.visibleContent,expression:"visibleContent == 'image'"}],ref:"image",on:{click:t.resize}})])},lt=[],ut={name:"ImageViewer",data:function(){return{script:null,visibleContent:"text"}},mounted:function(){this.reset(),this.resize()},methods:{reset:function(){this.setMessage("Nothing to show.")},setMessage:function(t){this.$refs.emptyMsg.innerText=t,this.visibleContent="text"},showImage:function(t){var e=this;this.setMessage("Loading image..."),v.$emit("showImageViewer"),this.$refs.image.onload=function(){e.visibleContent="image"},this.$refs.image.src=t},showImageBlob:function(t){this.showImage(URL.createObjectURL(t))},showImageBase64:function(t){contentType,btoa(t);this.showImage(t)},resize:function(){this.$refs.image&&(this.$refs.image.style.maxWidth?(this.$refs.image.style.maxWidth=null,this.$refs.image.style.cursor="zoom-out",this.$refs.image.title="Click to shrink (fit to screen)"):(this.$refs.image.style.maxWidth="100%",this.$refs.image.style.cursor="zoom-in",this.$refs.image.title="Click to enlarge"))}}},ht=ut,dt=(s("2d07"),Object(_["a"])(ht,ct,lt,!1,null,null,null)),pt=dt.exports,ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.connection?s("DataTable",{ref:"table",attrs:{dataSource:t.listJobs,columns:t.columns,id:"JobPanel"},scopedSlots:t._u([{key:"actions",fn:function(e){return[s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("describeJob"),expression:"supports('describeJob')"}],attrs:{title:"Details"},on:{click:function(s){return t.showJobInfo(e.row)}}},[s("i",{staticClass:"fas fa-info"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("describeJob"),expression:"supports('describeJob')"}],attrs:{title:"Show in Editor"},on:{click:function(s){return t.showInEditor(e.row)}}},[s("i",{staticClass:"fas fa-code-branch"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("estimateJob"),expression:"supports('estimateJob')"}],attrs:{title:"Estimate"},on:{click:function(s){return t.estimateJob(e.row)}}},[s("i",{staticClass:"fas fa-file-invoice-dollar"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("updateJob")&&t.isJobInactive(e.row),expression:"supports('updateJob') && isJobInactive(p.row)"}],attrs:{title:"Edit"},on:{click:function(s){return t.editJob(e.row)}}},[s("i",{staticClass:"fas fa-edit"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("deleteJob"),expression:"supports('deleteJob')"}],attrs:{title:"Delete"},on:{click:function(s){return t.deleteJob(e.row)}}},[s("i",{staticClass:"fas fa-trash"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("startJob")&&t.isJobInactive(e.row),expression:"supports('startJob') && isJobInactive(p.row)"}],attrs:{title:"Start processing"},on:{click:function(s){return t.queueJob(e.row)}}},[s("i",{staticClass:"fas fa-play-circle"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("stopJob")&&t.isJobActive(e.row),expression:"supports('stopJob') && isJobActive(p.row)"}],attrs:{title:"Cancel processing"},on:{click:function(s){return t.cancelJob(e.row)}}},[s("i",{staticClass:"fas fa-stop-circle"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("downloadResults")&&t.hasResults(e.row),expression:"supports('downloadResults') && hasResults(p.row)"}],attrs:{title:"Download"},on:{click:function(s){return t.downloadResults(e.row)}}},[s("i",{staticClass:"fas fa-download"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("downloadResults")&&t.hasResults(e.row),expression:"supports('downloadResults') && hasResults(p.row)"}],attrs:{title:"View results"},on:{click:function(s){return t.viewResults(e.row,!0)}}},[s("i",{staticClass:"fas fa-eye"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("subscribe")&&!t.jobSubscriptions.includes(e.row),expression:"supports('subscribe') && !jobSubscriptions.includes(p.row)"}],attrs:{title:"Subscribe"},on:{click:function(s){return t.subscribeToJob(e.row)}}},[s("i",{staticClass:"fas fa-bell"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("unsubscribe")&&t.jobSubscriptions.includes(e.row),expression:"supports('unsubscribe') && jobSubscriptions.includes(p.row)"}],attrs:{title:"Unsubscribe"},on:{click:function(s){return t.unsubscribeFromJob(e.row)}}},[s("i",{staticClass:"fas fa-bell-slash"})])]}}],null,!1,1258394708)},[s("template",{slot:"toolbar"},[s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("createJob"),expression:"supports('createJob')"}],attrs:{title:"Add new job"},on:{click:function(e){return t.createJobFromScript()}}},[s("i",{staticClass:"fas fa-plus"}),t._v(" Add")]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("listJobs"),expression:"supports('listJobs')"}],attrs:{title:"Refresh jobs"},on:{click:function(e){return t.updateData()}}},[s("i",{staticClass:"fas fa-sync-alt"})])])],2):t._e()},vt=[],mt=(s("6762"),s("2fdb"),s("5176")),bt=s.n(mt),gt={name:"JobPanel",mixins:[B],data:function(){return{columns:{jobId:{name:"ID",primaryKey:!0,hide:!0},title:{name:"Title",computedValue:function(t,e){return!e&&t.jobId?"Job #"+t.jobId.toUpperCase().substr(-6):e}},status:{name:"Status",stylable:!0},submitted:{name:"Submitted",format:"DateTime"},updated:{name:"Last update",format:"DateTime"},actions:{name:"Actions",filterable:!1}},jobSubscriptions:[],watchers:[]}},created:function(){v.$on("jobCreated",this.jobCreated)},mounted:function(){window.setInterval(this.executeWatchers,1e4)},methods:{listJobs:function(){return this.connection.listJobs()},updateData:function(){this.updateTable(this.$refs.table,"listJobs","createJob")},refreshJob:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=bt()({},t);t.describeJob().then(function(t){"function"===typeof s&&s(t,i),e.updateJobData(t)}).catch(function(t){return e.$utils.exception(e,t,"Sorry, could not load job information.")})},showInEditor:function(t){this.refreshJob(t,function(t){v.$emit("insertProcessGraph",t.processGraph)})},jobCreated:function(t){var e=this;if(this.$refs.table){this.$refs.table.addData(t);var s=[];this.supports("estimateJob")&&s.push({text:"Estimate",action:function(){return e.estimateJob(t)}}),this.supports("startJob")&&s.push({text:"Start processing",action:function(){return e.queueJob(t)}}),this.supports("deleteJob")&&s.push({text:"Delete",action:function(){return e.deleteJob(t)}}),this.$utils.confirm(this,"Job created!",s)}},createJob:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;s||(s=null),this.connection.createJob(t,s,i,o).then(function(t){v.$emit("jobCreated",t)}).catch(function(t){e.$utils.exception(e,t,"Sorry, could not create a batch job.")})},createJobFromScript:function(){var t=this,e=prompt("Please specify a title for the job:");if(null!==e){"string"===typeof e&&0!==e.length||(e=null);var s=f()(this.connection.supportedOutputFormats.formats).map(function(t){return t.toUpperCase()}),i=this.connection.supportedOutputFormats.default;do{var o="";i!==this.connection.supportedOutputFormats.default&&(o="Specified file format is invalid.\r\n");i=prompt(o+"Please specify the targeted file format:",i);if(null===i)return;"string"===typeof i?(i=i.toUpperCase(),s.includes(i)||(i="")):i=""}while(0==i.length);v.$emit("getProcessGraph",function(s){t.createJob(s,i,{},e)})}},updateJobData:function(t){this.$refs.table.replaceData(t);var e=this.watchers.findIndex(function(e){return e.jobId==t.jobId});switch(t.status.toLowerCase()){case"running":case"queued":-1===e&&this.watchers.push(t);break;default:this.watchers.splice(e,1)}},deleteJob:function(t){var e=this;t.deleteJob().then(function(){e.$refs.table.removeData(t.jobId)}).catch(function(t){e.$utils.exception(e,t,"Sorry, could not delete job.")})},executeWatchers:function(){var t=this;for(var e in this.watchers)this.refreshJob(this.watchers[e],function(e,s){if("finished"!==s.status&&"finished"===e.status){var i=[];t.supports("downloadResults")&&(i.push({text:"Download",action:function(){return t.downloadResults(e)}}),i.push({text:"View",action:function(){return t.viewResults(e)}})),t.$utils.confirm(t,"Job has finished!",i)}else"error"!==s.status&&"error"===e.status&&t.$utils.error(t,"Job has stopped due to an error or timeout.")})},showJobInfo:function(t){this.refreshJob(t,function(t){v.$emit("showModal","Job Details",t.getAll())})},estimateJob:function(t){var e=this;t.estimateJob().then(function(t){v.$emit("showModal","Job Estimate",t)}).catch(function(t){return e.$utils.exception(e,t,"Sorry, could not load job estimate.")})},editJob:function(t){var e=this;v.$emit("getProcessGraph",function(s){t.updateJob(s).then(function(t){e.$utils.ok(e,"Job successfully updated."),e.updateJobData(t)}).catch(function(t){return e.$utils.exception(e,t,"Sorry, could not update job.")})})},queueJob:function(t){var e=this;t.startJob().then(function(t){e.$utils.ok(e,"Job successfully queued."),e.updateJobData(t)}).catch(function(t){return e.$utils.exception(e,t,"Sorry, could not queue job.")})},cancelJob:function(t){var e=this;t.stopJob().then(function(t){e.$utils.ok(e,"Job successfully canceled."),e.updateJobData(t)}).catch(function(t){return e.$utils.exception(e,t,"Sorry, could not cancel job.")})},viewResults:function(t){var e=this;t.listResults().then(function(t){0!=t.links.length?t.links.length>1?e.$utils.info(e,"Job resulted in multiple files, please download them individually."):(e.$utils.info(e,"Data requested. Please wait..."),e.connection.download(t.links[0].href,!1).then(function(e){return v.$emit("showInViewer",e.data,t.links[0].type)}).catch(function(t){e.$utils.exception(e,t,"Sorry, can't download results.")})):e.$utils.error(e,"No download available.")})},downloadResults:function(t){var e=this;t.listResults().then(function(t){if(0==t.links.length)e.$utils.error(e,"No download available.");else{var s=t.links.map(function(t){return t.href});v.$emit("showComponentModal","Download results"+(t.title?" for: "+t.title:""),"List",{dataSource:s,actions:[]})}})},subscribeToJob:function(t){var e={job_id:t};this.connection.subscribe("openeo.jobs.debug",e,function(e,s){console.log("Debugging information for job "+t+": "+d()(e))}),this.connection.subscribe("openeo.jobs.output",e,function(e,s){console.log("Output from job "+t+": "+d()(e))}),this.connection.subscribe("openeo.jobs.status",e,function(e,s){console.log("Status information for job "+t+": "+d()(e))}),this.jobSubscriptions.push(t)},unsubscribeFromJob:function(t){var e={job_id:t};this.connection.unsubscribe("openeo.jobs.debug",e),this.connection.unsubscribe("openeo.jobs.output",e),this.connection.unsubscribe("openeo.jobs.status",e),this.jobSubscriptions.splice(this.jobSubscriptions.indexOf(t),1)},hasResults:function(t){return"string"!==typeof t.status||"finished"==t.status.toLowerCase()},isJobInactive:function(t){return"string"!==typeof t.status||!this.isActiveStatusCode(t.status)},isJobActive:function(t){return"string"!==typeof t.status||this.isActiveStatusCode(t.status)},isActiveStatusCode:function(t){switch(t.toLowerCase()){case"running":case"queued":return!0;default:return!1}}}},yt=gt,wt=(s("0791"),Object(_["a"])(yt,ft,vt,!1,null,null,null)),kt=wt.exports,Ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"mapCanvas"}})},St=[],xt=s("0a0d"),$t=s.n(xt),_t=(s("6cc5"),s("e11e")),Pt=s.n(_t),Tt=s("81b6"),Mt=(s("b048"),s("6005"),s("9d1c"),{name:"MapViewer",data:function(){return{options:{fullscreenControl:!0,center:[50.1725,9.15],zoom:6},map:null,baseLayer:{osm:null},layer:{},layerControl:null,sideBySideComponent:null}},mounted:function(){this.createMap(),v.$on("viewWebService",this.viewWebService),v.$on("removeWebService",this.removeWebService)},methods:{createMap:function(){this.map=new Pt.a.Map("mapCanvas",this.options),this.layerControl=Pt.a.control.layers(),this.layerControl.addTo(this.map),this.baseLayer.osm=Pt.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{name:"OpenStreetMap",attribution:'Map data &copy; <a href="http://www.osm.org">OpenStreetMap</a>'}),this.baseLayer.osm.addTo(this.map),this.layerControl.addBaseLayer(this.baseLayer.osm,this.baseLayer.osm.options.name),this.map.on("layeradd",this.onLayerAdd),this.map.on("overlayremove",this.onOverlayRemove)},onLayerAdd:function(t){var e=this.getShownLayers();2==e.length&&null===this.sideBySideComponent&&(this.sideBySideComponent=Pt.a.control.sideBySide(e[0],e[1]),this.sideBySideComponent.addTo(this.map))},onOverlayRemove:function(t){var e=this.getShownLayers();2!=e.length&&null!==this.sideBySideComponent&&(this.map.removeControl(this.sideBySideComponent),this.sideBySideComponent=null)},getShownLayers:function(){var t=[];for(var e in this.layer)this.map.hasLayer(this.layer[e])&&t.push(this.layer[e]);return t},viewWebService:function(t){switch(t.type.toLowerCase()){case"wms":this.updateWMSLayer(t);break;case"xyz":this.updateXYZLayer(t);break;default:this.$utils.error(this,"Sorry, the service type is not supported by the map.")}},removeWebService:function(t){this.layer[t]&&this.removeLayerFromMap(t)},addLayerToMap:function(t){this.layer[t].addTo(this.map),this.layerControl.addOverlay(this.layer[t],this.layer[t].options.name)},removeLayerFromMap:function(t){this.layer[t].removeFrom(this.map),this.layerControl.removeLayer(this.layer[t]),delete this.layer[t]},removeOldLayer:function(t){for(var e in this.layer)null!==this.layer[e]&&this.layer[e]!==t&&this.removeLayerFromMap(e)},updateTiffLayerBlob:function(t){this.updateTiffLayer(URL.createObjectURL(t))},updateTiffLayer:function(t){var e=this.$utils.formatDateTime($t()());if("undefined"===typeof this.layer[e]){var s=new Tt["LeafletGeotiffRenderer"];s.name="openEO-geotiff-visualizer";var i={name:e+" (GeoTiff)",renderer:s};this.layer[e]=Object(Tt["leafletGeotiff"])(t,i),this.addLayerToMap(e)}else this.layer[e].setURL(t)},updateXYZLayer:function(t){var e=t.serviceId,s=t.url+"/{z}/{x}/{y}";if("undefined"===typeof this.layer[e]){var i={name:e.toUpperCase().substr(0,6)+" (XYZ)"};this.layer[e]=new Pt.a.TileLayer(s,i),this.addLayerToMap(e)}else this.layer[e].setUrl(s,!1)},updateWMSLayer:function(t){var e=t.serviceId;if("undefined"===typeof this.layer[e]){var s=t.attributes;this.$utils.isObject(s)||(s={}),s.name=e.toUpperCase().substr(0,6)+" (WMS)",s.service=s.service||"WMS",s.format=s.format||"image/jpeg",this.layer[e]=Pt.a.tileLayer.wms(t.url,s),this.addLayerToMap(e)}else this.layer[e].setUrl(t.url,!1)}}}),Dt=Mt,Lt=(s("3b7f"),Object(_["a"])(Dt,Ct,St,!1,null,"56d01c72",null)),Ft=Lt.exports,Et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.shown?s("div",{staticClass:"modal",attrs:{id:"modal"},on:{click:t.possiblyClose}},[s("div",{staticClass:"modal-container"},[s("h2",{staticClass:"modal-header"},[t._v("\n\t\t\t"+t._s(t.title)+"\n\t\t\t"),s("span",{staticClass:"close",on:{click:t.close}},[t._v("×")])]),s("div",{staticClass:"modal-content",attrs:{id:"modal-content"}},["string"===typeof t.message?[t._v(t._s(t.message))]:"string"===typeof t.html?s("div",{domProps:{innerHTML:t._s(t.html)}}):s(t.compname,t._b({tag:"component"},"component",t.props,!1))],2)])]):t._e()},Ot=[],jt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",t._l(t.items,function(e){return s("li",{key:e},[s("a",{attrs:{href:e,target:"_blank"},on:{click:function(s){return t.doMainAction(e,s)}}},[t._v(t._s(e))]),t._l(t.actions,function(i){return s("button",{key:i.icon,attrs:{title:i.title},on:{click:function(s){return t.doAction(i.callback,e)}}},[s("i",{class:"fas fa-"+i.icon})])})],2)}),0)},It=[],Bt={name:"List",props:["dataSource","actions"],computed:{items:function(){return"function"==typeof this.dataSource?this.dataSource():this.dataSource}},methods:{doAction:function(t,e){var s=t(e);!0===s&&this.$utils.isChildOfModal(this)&&v.$emit("closeModal")},doMainAction:function(t,e){this.actions.length>0&&(this.doAction(this.actions[0].callback,t),e&&(e.preventDefault(),e.stopPropagation()))}}},Ut=Bt,Nt=(s("0ba8"),Object(_["a"])(Ut,jt,It,!1,null,"fc2aeba0",null)),Vt=Nt.exports,Gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dataPanel"},[s("form",{attrs:{id:"loginForm"},on:{submit:function(e){return e.preventDefault(),t.submitLogin(e)}}},[s("h3",[t._v("Login")]),s("label",{attrs:{for:"username"}},[t._v("Username:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{id:"username",type:"text"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),s("label",{attrs:{for:"password"}},[t._v("Password:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),s("button",{attrs:{type:"submit"}},[t._v("Login")])])])},Jt=[],At={name:"CredentialsForm",props:["submitLoginCallback","cancelCallback"],data:function(){return{username:"",password:""}},mounted:function(){v.$on("modalClosed",this.cancelCallback)},destroyed:function(){v.$off("modalClosed",this.cancelCallback)},methods:{submitLogin:function(t){var e=this;this.submitLoginCallback(this.username,this.password).then(function(t){e.$utils.isChildOfModal(e)&&(v.$off("modalClosed",e.cancelCallback),v.$emit("closeModal"))}).catch(function(t){})}}},Rt=At,zt=(s("3bcc"),Object(_["a"])(Rt,Gt,Jt,!1,null,"b025bf56",null)),Ht=zt.exports,Wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"docgen"},[s("Collection",{attrs:{collectionData:t.collection,version:t.version}},[s("template",{slot:"collection-spatial-extent"},[s("div",{attrs:{id:"collectionMap"}})])],2)],1)},qt=[],Yt=s("47ed"),Xt={name:"CollectionPanel",components:{Collection:Yt["a"]},props:{version:{type:String,default:null},collection:Object},mounted:function(){var t=new Pt.a.Map("collectionMap"),e=Pt.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{name:"OpenStreetMap",attribution:'Map data &copy; <a href="http://www.osm.org">OpenStreetMap</a>'});e.addTo(t);var s=Pt.a.rectangle([[this.collection.extent.spatial[3],this.collection.extent.spatial[0]],[this.collection.extent.spatial[1],this.collection.extent.spatial[2]]]);s.addTo(t),t.fitBounds(s.getBounds())}},Kt=Xt,Qt=(s("19bb"),Object(_["a"])(Kt,Wt,qt,!1,null,null,null)),Zt=Qt.exports,te=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"docgen"},[s("Process",{attrs:{processData:t.process,version:t.version,provideDownload:!1}})],1)},ee=[],se=s("2b37"),ie={name:"ProcessPanel",components:{Process:se["a"]},props:{version:{type:String,default:null},process:Object}},oe=ie,ne=(s("d019"),Object(_["a"])(oe,te,ee,!1,null,null,null)),ae=ne.exports,re=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[0===this.editables.length?s("p",[t._v("No editable parameters available.")]):s("form",{attrs:{id:"processParameterEditor"},on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[t._l(t.editables,function(e,i){return s("div",{key:i,staticClass:"fieldRow"},[s("label",[t._v("\n\t\t\t\t"+t._s(e.label)),!0===e.meta.required?s("strong",{staticClass:"required",attrs:{title:"required"}},[t._v("*")]):t._e(),e.meta.description?s("div",{staticClass:"description"},[s("Description",{attrs:{description:e.meta.description}})],1):t._e()]),s("EditorField",{ref:e.name,refInFor:!0,attrs:{field:e,pass:e.getValue()}})],1)}),s("button",{staticClass:"save",attrs:{type:"submit"}},[t._v("Save")])],2)])},ce=[],le=s("8088"),ue=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"fieldContainer"},["temporal_extent"===t.type()?s("div",{staticClass:"fieldContainer"},[s("VueCtkDateTimePicker",{attrs:{range:!0,label:"Select start and end time",format:"YYYY-MM-DD[T]HH:mm:ss[Z]"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1):"spatial_extent"===t.type()?s("div",{staticClass:"fieldContainer"},[s("div",{attrs:{id:"areaSelector"}})]):"array"===t.type()?s("div",{staticClass:"fieldContainer"},[s("draggable",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[s("transition-group",{attrs:{name:"arrayElements"}},t._l(t.value,function(e,i){return s("div",{key:e.id,staticClass:"fieldValue arrayElement"},[s("EditorField",{ref:"arrayFields",refInFor:!0,attrs:{field:t.field,pass:e.value,isItem:!0}}),s("button",{attrs:{type:"button"},on:{click:function(e){return t.removeField(i)}}},[s("i",{staticClass:"fas fa-trash"})]),s("div",{staticClass:"mover"},[s("i",{staticClass:"fas fa-arrows-alt"})])],1)}),0)],1),s("button",{attrs:{type:"button"},on:{click:function(e){return t.addField()}}},[s("i",{staticClass:"fas fa-plus"}),t._v(" Add")])],1):"enum"===t.type()?s("select",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"fieldValue",attrs:{name:t.fieldName},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.value=e.target.multiple?s:s[0]}}},t._l(t.field.getEnumChoices(),function(e,i){return s("option",{key:i,domProps:{value:e}},[t._v(t._s(e))])}),0):"boolean"===t.type()?s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"fieldValue",attrs:{type:"checkbox",name:t.fieldName},domProps:{checked:!!t.value,checked:Array.isArray(t.value)?t._i(t.value,null)>-1:t.value},on:{change:function(e){var s=t.value,i=e.target,o=!!i.checked;if(Array.isArray(s)){var n=null,a=t._i(s,n);i.checked?a<0&&(t.value=s.concat([n])):a>-1&&(t.value=s.slice(0,a).concat(s.slice(a+1)))}else t.value=o}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"fieldValue",attrs:{type:"text",name:t.fieldName},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}})])},he=[],de=s("1980"),pe=s.n(de),fe=s("e30a"),ve=s.n(fe),me=(s("b40d"),s("e814")),be=s.n(me);L.AreaSelect=L.Evented.extend({includes:L.Evented,options:{width:300,height:200},initialize:function(t){L.Util.setOptions(this,t),this._width=this.options.width,this._height=this.options.height},addTo:function(t){return this.map=t,this._createElements(),this._render(),this},setBounds:function(t){this.map.fitBounds(t);var e=this.map.latLngToContainerPoint(t.getSouthWest()),s=this.map.latLngToContainerPoint(t.getNorthEast());this.setDimensions({width:Math.abs(e.x-s.x),height:Math.abs(e.y-s.y)})},getBounds:function(){var t=this.map.getSize(),e=new L.Point,s=new L.Point;s.x=Math.round((t.x-this._width)/2),e.y=Math.round((t.y-this._height)/2),e.x=t.x-s.x,s.y=t.y-e.y;var i=this.map.containerPointToLatLng(s),o=this.map.containerPointToLatLng(e);return new L.LatLngBounds(i,o)},remove:function(){this.map.off("moveend",this._onMapChange),this.map.off("zoomend",this._onMapChange),this.map.off("resize",this._onMapResize),this._container.parentNode.removeChild(this._container)},setDimensions:function(t){t&&(this._height=be()(t.height)||this._height,this._width=be()(t.width)||this._width,this._render(),this.fire("change"))},_createElements:function(){this._container||(this._container=L.DomUtil.create("div","leaflet-areaselect-container",this.map._controlContainer),this._topShade=L.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._bottomShade=L.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._leftShade=L.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._rightShade=L.DomUtil.create("div","leaflet-areaselect-shade leaflet-control",this._container),this._nwHandle=L.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._swHandle=L.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._neHandle=L.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._seHandle=L.DomUtil.create("div","leaflet-areaselect-handle leaflet-control",this._container),this._setUpHandlerEvents(this._nwHandle),this._setUpHandlerEvents(this._neHandle,-1,1),this._setUpHandlerEvents(this._swHandle,1,-1),this._setUpHandlerEvents(this._seHandle,-1,-1),this.map.on("moveend",this._onMapChange,this),this.map.on("zoomend",this._onMapChange,this),this.map.on("resize",this._onMapResize,this),this.fire("change"))},_setUpHandlerEvents:function(t,e,s){e=e||1,s=s||1;var i=this;function o(n){n.stopPropagation(),i.map.dragging.disable(),L.DomEvent.removeListener(this,"mousedown",o);var a=n.pageX,r=n.pageY,c=i.map.getSize();function l(t){i._width+=2*(a-t.originalEvent.pageX)*e,i._height+=2*(r-t.originalEvent.pageY)*s,i._width=Math.max(30,i._width),i._height=Math.max(30,i._height),i._width=Math.min(c.x-30,i._width),i._height=Math.min(c.y-30,i._height),a=t.originalEvent.pageX,r=t.originalEvent.pageY,i._render()}function u(e){i.map.dragging.enable(),L.DomEvent.removeListener(i.map,"mouseup",u),L.DomEvent.removeListener(i.map,"mousemove",l),L.DomEvent.addListener(t,"mousedown",o),i.fire("change")}L.DomEvent.addListener(i.map,"mousemove",l),L.DomEvent.addListener(i.map,"mouseup",u)}L.DomEvent.addListener(t,"mousedown",o)},_onMapResize:function(){this._render()},_onMapChange:function(){this.fire("change")},_render:function(){var t=this.map.getSize(),e=Math.round(this._nwHandle.offsetWidth/2),s=Math.round((t.y-this._height)/2),i=Math.round((t.x-this._width)/2);function o(t,e){t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.top=e.top+"px",t.style.left=e.left+"px",t.style.bottom=e.bottom+"px",t.style.right=e.right+"px"}o(this._topShade,{width:t.x,height:s,top:0,left:0}),o(this._bottomShade,{width:t.x,height:s,bottom:0,left:0}),o(this._leftShade,{width:i,height:t.y-2*s,top:s,left:0}),o(this._rightShade,{width:i,height:t.y-2*s,top:s,right:0}),o(this._nwHandle,{left:i-e,top:s-7}),o(this._neHandle,{right:i-e,top:s-7}),o(this._swHandle,{left:i-e,bottom:s-7}),o(this._seHandle,{right:i-e,bottom:s-7})}}),L.areaSelect=function(t){return new L.AreaSelect(t)};L.areaSelect,s("39fd");var ge={name:"EditorField",components:{draggable:pe.a,VueCtkDateTimePicker:ve.a},props:{field:Object,pass:{},isItem:{type:Boolean,default:!1}},data:function(){var t;if("temporal_extent"===this.type()&&k()(this.$props.pass)&&this.$props.pass.length>=2)t={start:this.$props.pass[0],end:this.$props.pass[1]};else if("array"===this.type())for(var e in t=[],this.$props.pass)t.push({id:e,value:this.$props.pass[e]});else t=this.$props.pass;return{value:t}},mounted:function(){var t=this;if("spatial_extent"===this.getFormat()){var e=new Pt.a.Map("areaSelector"),s=Pt.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{name:"OpenStreetMap",attribution:'Map data &copy; <a href="http://www.osm.org">OpenStreetMap</a>'});s.addTo(e);var i=Pt.a.areaSelect();i.addTo(e),this.$utils.isObject(this.value)&&f()(this.value).length>=4?(this.value=Pt.a.latLngBounds(Pt.a.latLng(this.value.south,this.value.west),Pt.a.latLng(this.value.north,this.value.east)),i.setBounds(this.value)):(e.setView([0,0],1),this.value=i.getBounds()),i.on("change",function(){t.value=i.getBounds()})}},computed:{fieldName:function(){return this.field.name+(this.field.isArray?"[]":"")}},methods:{type:function(){return"temporal_extent"===this.getFormat()?"temporal_extent":"spatial_extent"===this.getFormat()?"spatial_extent":this.field.isArray&&!this.isItem?"array":this.field.isEnum()?"enum":"boolean"===this.field.type?"boolean":"string"},getValue:function(){if("temporal_extent"===this.type())return[this.value.start,this.value.end];if("spatial_extent"===this.type())return{west:+this.value.getWest().toFixed(6),south:+this.value.getSouth().toFixed(6),east:+this.value.getEast().toFixed(6),north:+this.value.getNorth().toFixed(6)};if("array"===this.type()){var t=[];for(var e in this.$refs.arrayFields)t.push(this.$refs.arrayFields[e].getValue());return t}return this.value},getFormat:function(){return this.field.meta.schema.format},addField:function(){return this.value.push({id:this.value.length,value:null}),!1},removeField:function(t){return this.value.splice(t,1),!1}}},ye=ge,we=(s("ef75"),Object(_["a"])(ye,ue,he,!1,null,"167e7479",null)),ke=we.exports,Ce={name:"ProcessParameterEditor",components:{Description:le["a"],EditorField:ke},props:["editables","saveCallback"],methods:{save:function(){var t={};for(var e in this.$refs)t[e]=this.$refs[e][0].getValue();return this.saveCallback(t)}}},Se=Ce,xe=(s("ef28"),s("63ff"),Object(_["a"])(Se,re,ce,!1,null,"dc04f5ac",null)),$e=xe.exports,_e=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vue-component server-info"},[s("Capabilities",{attrs:{capabilities:t.capabilities,url:t.url}}),t.services?[s("h3",[t._v("Supported secondary web service types")]),s("SupportedServiceTypes",{attrs:{version:t.capabilities.version,services:t.services}})]:t._e(),t.formats?[s("h3",[t._v("Supported output file formats")]),s("SupportedFileFormats",{attrs:{version:t.capabilities.version,formats:t.formats}})]:t._e()],2)},Pe=[],Te=s("f0df"),Me=s("ca30"),De=s("48d5"),Le={name:"ServerInfoPanel",components:{Capabilities:Te["a"],SupportedFileFormats:Me["a"],SupportedServiceTypes:De["a"]},props:["url","capabilities","formats","services"]},Fe=Le,Ee=(s("e133"),Object(_["a"])(Fe,_e,Pe,!1,null,null,null)),Oe=Ee.exports,je={name:"Modal",components:{CredentialsForm:Ht,CollectionPanel:Zt,List:Vt,ProcessPanel:ae,ProcessParameterEditor:$e,ObjectTree:K["a"],ServerInfoPanel:Oe},data:function(){return{title:"",message:null,html:null,props:null,compname:null,shown:!1}},mounted:function(){v.$on("showModal",this.showModal),v.$on("showComponentModal",this.showComponentModal),v.$on("closeModal",this.close)},methods:{escCloseListener:function(t){if("Escape"==t.key)return v.$emit("closeModal"),t.preventDefault(),t.stopPropagation(),!1},show:function(){window.addEventListener("keydown",this.escCloseListener),this.shown=!0},close:function(){this.shown=!1,window.removeEventListener("keydown",this.escCloseListener),v.$emit("modalClosed")},possiblyClose:function(t){t.target==document.getElementById("modal")&&this.close()},initCommonModal:function(t){this.title=t,this.message=null,this.html=null,this.compname=null,this.props=null},initTextModal:function(t,e){this.initCommonModal(t),this.message=e},initHtmlModal:function(t,e){this.initCommonModal(t),this.html=e},initComponentModal:function(t,e,s){this.initCommonModal(t),this.compname=e,this.props=s},showModal:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"string"===typeof e?(s?this.initHtmlModal(t,e):this.initTextModal(t,e),this.show()):this.showComponentModal(t,"ObjectTree",{data:e})},showComponentModal:function(t,e,s){this.initComponentModal(t,e,s),this.show()}}},Ie=je,Be=(s("22d7"),Object(_["a"])(Ie,Et,Ot,!1,null,null,null)),Ue=Be.exports,Ne=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Ve=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"GraphBuilderEnvironment"}},[s("div",{attrs:{id:"pgEditor"}})])}],Ge=(s("ac6a"),function(t){this.historySize=30,this.blocks=t,this.history=[],this.enabled=!0});Ge.prototype.enable=function(t){this.enabled=t},Ge.prototype.save=function(){this.enabled&&(this.history.push(this.blocks.export()),this.history.length>this.historySize&&this.history.shift())},Ge.prototype.size=function(){return this.history.length},Ge.prototype.restoreLast=function(){if(this.history.length){var t=this.history.pop();this.blocks.importData(t)}};var Je=Ge,Ae=(s("28a5"),function(t){this.meta=t,this.attrs=t.attrs,"undefined"==typeof this.meta.schema.type?this.type="string":k()(this.meta.schema.type)&&this.meta.schema.type.length>0?this.type="null"===this.meta.schema.type[0]?this.meta.schema.type[1]:this.meta.schema.type[0]:this.type=this.meta.schema.type?this.meta.schema.type:"any",this.isArray=!1;var e=this.meta.schema;("array"===e.type||k()(e.type)&&e.type.includes("array"))&&(this.isArray=!0,this.type="object"===Object(C["a"])(e.items)?e.items.type:"any"),this.card="card"in t?t.card:"*",this.card=this.parseCardinality(this.card,"output"==this.attrs),this.name=t.name.toLowerCase(),this.label=t.name,this.choices="enum"in t.schema?t.schema.enum:null,this.hasValue=!1,"default"in this.meta.schema?(this.value=this.meta.schema.default,this.hasValue=!0):this.isArray?this.value=[]:"string"===this.type?this.value="":"integer"===this.type||"number"===this.type?this.value=0:"boolean"===this.type?this.value=!1:this.value=null});Ae.prototype.isEnum=function(){return"choice"==this.type||this.choices},Ae.prototype.getEnumChoices=function(){return this.choices},Ae.prototype.isEditable=function(){return"eodata"!==this.meta.schema.format},Ae.prototype.getValue=function(){return this.value},Ae.prototype.getLabel=function(){return this.label},Ae.prototype.setValue=function(t){"boolean"==this.type&&(t=!!t),this.value=t,this.hasValue=!0},Ae.prototype.parseCardinality=function(t,e){var s=[0,1];if(e&&(s=[0,"*"]),void 0!=t)if("string"!=typeof t)s=[0,t];else{var i=t.split("-");s=1==i.length?[0,i[0]]:i}for(var o in s)"*"!=s[o]&&(s[o]=be()(s[o]));return s};var Re=Ae,ze=function(t){for(var e in this.block=t,this.meta=this.block.meta,this.fields=[],this.meta.fields)this.fields.push(new Re(this.meta.fields[e]));for(var e in this.inputs=[],this.outputs=[],this.editables=[],this.indexedFields={},this.fields){var s=this.fields[e];this.indexedFields[s.name]=s,s.isEditable()&&this.editables.push(s),"input"==s.attrs&&this.inputs.push(s),"output"==s.attrs&&this.outputs.push(s)}};ze.prototype.getField=function(t){return t=t.toLowerCase(),t in this.indexedFields?this.indexedFields[t]:null},ze.prototype.show=function(){var t=this,e=this.block.meta.name+" #"+this.block.id,s={editables:this.editables,saveCallback:function(e){return t.save(e),v.$emit("closeModal"),!1}};v.$emit("showComponentModal",e,"ProcessParameterEditor",s)},ze.prototype.save=function(t){var e={};for(var s in this.indexedFields)"boolean"==this.indexedFields[s].type&&(e[s]=this.indexedFields[s]);for(var i in t){var o=i,n=!1;"[]"==o.substr(o.length-2,2)&&(o=o.substr(0,o.length-2),n=!0),null==t[i]&&n&&(t[i]=[]),o in e&&delete e[o],this.getField(o).setValue(t[i])}for(var i in e)this.getField(i).setValue(!1);this.block.render(),this.block.redraw()};var He=ze,We=function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.index=null,"undefined"===typeof e)if("string"===typeof t){var i=t.split("_");this.name=i[0],this.type=i[1],3==i.length&&(this.index=i[2])}else{if(!(k()(t)&&t.length>=2))throw"Unable to create Connector";this.name=t[0],this.type=t[1],t.length>2&&(this.index=t[2])}else this.name=t,this.type=e,null!=s&&(this.index=be()(s))};We.prototype.id=function(){var t=this.name+"_"+this.type;return null!=this.index&&(t+="_"+this.index),t},We.prototype.isInput=function(){return"input"==this.type},We.prototype.isOutput=function(){return"output"==this.type},We.prototype.same=function(t){return this.name==t.name&&this.index==t.index&&this.type==t.type},We.prototype.export=function(){var t=[this.name,this.type];return null!==this.index&&t.push(this.index),t};var qe=We,Ye=function(t,e,s){this.blocks=t,this.meta=e,this.defaultFont=10,this.historySaved=!1,this.id=s,this.hasFocus=!1,this.div=null,this.drag=null,this.lastScale=null,this.fields=new He(this),this.x=0,this.y=0,this.ios={},this.focusedConnector=null,this.edges={},this.connectors=[]};Ye.prototype.getWidth=function(){return this.hasInputs()?this.blocks.compactMode?110:170:this.blocks.compactMode?70:120},Ye.prototype.hasInputs=function(){return this.fields.fields.length>1},Ye.prototype.setValues=function(t){for(var e in t){var s=this.fields.getField(e);null!==s&&s.setValue(t[e])}},Ye.prototype.getValues=function(t){t={};for(var e in this.fields.editables){var s=this.fields.editables[e];t[s.name]=s.getValue()}return t},Ye.prototype.getValue=function(t){var e=this.fields.getField(t);return e?e.getValue():null},Ye.prototype.htmlentities=function(t){return t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t=t.replace(/'/g,"&apos;"),t},Ye.prototype.getHtml=function(){this.connectors=[];var t=this.meta.name+' <span class="blockId">#'+this.id+"</span>",e=this.meta.name+" #"+this.id,s='<div class="blockTitle"><span class="titleText" title="'+e+'">'+t+"</span>";s+='<div class="blockicon">',this.blocks.compactMode||(s+='<span class="delete" title="Remove (DEL)"><i class="fas fa-trash"></i></span>',s+='<span class="info" title="Details"><i class="fas fa-info"></i></span>'),this.fields.editables.length>0&&(s+='<span class="settings" title="Change parameter values"><i class="fas fa-sliders-h"></i></span>'),s+="</div></div>",s+='<div class="inout">';var i=this,o=function(t,e){for(var o in s+='<div class="'+t+'s">',e){var n=e[o],a=n.name.toLowerCase()+"_"+t,r="";if(n&&n.isEditable()&&!i.blocks.compactMode){var c=n.getValue();"object"===Object(C["a"])(c)?null===c?r="N/A":(r=k()(c)?"List("+c.length+")":"Object",r='<span title="'+i.htmlentities(d()(c))+'">'+r+"</span>"):r="string"===typeof c&&c.length>10?'<span title="'+i.htmlentities(d()(c))+'">'+c.substr(0,10)+"...</span>":"boolean"===typeof c?c?"✔️":"❌":c,r=": "+r}var l='<div class="circle"></div>',u="";"output"==t&&(u=l,l="");var h,p=[t,"type_"+n.type,"connector",a,n.hasValue||!0!==n.meta.required||"output"==t?"hasValue":"noValue"];h=i.blocks.compactMode&&"output"==t?"":i.htmlentities(n.getLabel()),s+='<div class="'+p.join(" ")+'" rel="'+a+'">'+l+h+r+u+"</div>",i.connectors.push(a)}s+="</div>"};return o("input",this.fields.inputs),o("output",this.fields.outputs),s+="</div>",s},Ye.prototype.render=function(){this.lastScale=null,this.hasFocus=!1,this.div.html(this.getHtml()),this.initListeners(),this.redraw()},Ye.prototype.maxEntry=function(t){var e=0;for(var s in this.edges)if(this.edges[s].length){var i=new qe(s);i.name==t&&(e=Math.max(be()(i.index)+1,e))}return e},Ye.prototype.create=function(t){var e='<div id="block'+this.id+'" class="block '+this.meta["class"]+'"></div>';t.append(e),this.div=t.find("#block"+this.id),this.render()},Ye.prototype.redraw=function(t){for(var e in this.div.css("margin-left",this.blocks.center.x+this.x*this.blocks.scale+"px"),this.div.css("margin-top",this.blocks.center.y+this.y*this.blocks.scale+"px"),this.blocks.showIcons&&this.blocks.scale>.8?this.div.find(".blockicon").show():this.div.find(".blockicon").hide(),this.lastScale!=this.blocks.scale&&(this.div.css("font-size",Math.round(this.blocks.scale*this.defaultFont)+"px"),this.div.css("width",Math.round(this.blocks.scale*this.getWidth())+"px"),this.lastScale=this.blocks.scale),this.connectors){var s=this.connectors[e],i=this.div.find("."+s),o=i.find(".circle");if(o.removeClass("io_active"),o.removeClass("io_selected"),i.hasClass("hasValue")||i.addClass("noValue"),s in this.edges&&this.edges[s].length)for(var n in o.addClass("io_active"),i.removeClass("noValue"),this.edges[s])this.edges[s][n].selected&&o.addClass("io_selected")}this.div.removeClass("block_selected"),t&&this.div.addClass("block_selected")},Ye.prototype.initListeners=function(){var t=this;t.div.find(".blockTitle").on("mousedown",function(e){1==e.which&&(t.historySaved=!1,t.drag=[t.blocks.mouseX/t.blocks.scale-t.x,t.blocks.mouseY/t.blocks.scale-t.y])}),t.div.hover(function(){t.hasFocus=!0},function(){t.hasFocus=!1}),t.div.find(".connector").hover(function(){t.focusedConnector=$(this).attr("rel")},function(){t.focusedConnector=null}),$("html").on("mousemove",function(e){t.drag&&(t.historySaved||(t.blocks.history.save(),t.historySaved=!0),t.x=t.blocks.mouseX/t.blocks.scale-t.drag[0],t.y=t.blocks.mouseY/t.blocks.scale-t.drag[1],t.blocks.redraw())}),$("html").on("mouseup",function(){t.drag=null}),t.div.find(".connector").on("mousedown",function(e){1==e.which&&(t.blocks.beginLink(t,$(this).attr("rel")),e.preventDefault())}),t.div.find(".settings").on("click",function(){t.fields.show()}),t.div.find(".delete").on("click",function(){t.blocks.removeBlock(t.blocks.getBlockId(t))}),t.div.find(".info").on("click",function(){switch(t.meta.module){case"process":v.$emit("showProcessInfo",t.meta.name);break;case"collection":v.$emit("showCollectionInfo",t.meta.name);break}})},Ye.prototype.linkPositionFor=function(t){var e=t;t instanceof Object&&(e=t.id());try{var s=this.div.find("."+e+" .circle"),i=s.offset().left-this.blocks.div.offset().left+s.width()/2,o=s.offset().top-this.blocks.div.offset().top+s.height()/2}catch(error){throw"Unable to find link position for "+e+" ("+error+")"}return{x:i,y:o}},Ye.prototype.canLink=function(t){var e=[],s=t.id();s in this.edges&&(e=this.edges[s]);var i=this.fields.getField(t.name).card;return"*"==i[1]||e.length<i[1]},Ye.prototype.addEdge=function(t,e){var s=[],i=t.id();void 0!=this.edges[i]&&(s=this.edges[i]),s.push(e),this.edges[i]=s},Ye.prototype.eraseEdge=function(t,e){var s=t.id();if(void 0!=this.edges[s])for(var i in this.edges[s])if(this.edges[s][i]==e){this.edges[s].splice(i,1);break}},Ye.prototype.erase=function(){this.div.remove()},Ye.prototype.allSuccessors=function(){var t={},e=[this],s=[this.id];t[this.id]=!0;while(e.length>0){var i=e.pop();for(var o in i.edges)for(var n in i.edges[o]){var a=i.edges[o][n],r=a.fromTo();if(r[0]==i){var c=r[1];c.id in t||(t[c.id]=!0,e.push(c),s.push(c.id))}}}return s},Ye.prototype.export=function(){return{id:this.id,x:this.x,y:this.y,type:this.meta.name,module:this.meta.module,values:this.getValues()}},Ye.prototype.getField=function(t){return this.fields.getField(t)},Ye.prototype.hasConnector=function(t){var e=this.getField(t.name);return!!e&&null==t.index};var Xe=Ye,Ke=function(t,e,s,i){this.x=t,this.y=e,this.dx=s,this.dy=i};Ke.prototype.distance=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},Ke.prototype.distanceP=function(t){var e=this.normal();e.x=t.x,e.y=t.y;var s=this.intersection(e);return[s[0],this.distance(e.alpha(s[1]),t)]},Ke.prototype.normal=function(){return new Ke(this.x,this.y,this.dy,-this.dx)},Ke.prototype.intersection=function(t){var e=this.dx,s=-t.dx,i=this.dy,o=-t.dy,n=t.x-this.x,a=t.y-this.y,r=e*o-s*i;if(0==r)return null;var c=(o*n-s*a)/r,l=(-i*n+e*a)/r;return[c,l]},Ke.prototype.alpha=function(t){var e={};return e.x=this.x+this.dx*t,e.y=this.y+this.dy*t,e};var Qe=Ke,Ze=function(t,e,s,i,o,n){if(this.blocks=n,this.id=be()(t),this.block1=e,this.connector1=s,this.block2=i,this.connector2=o,this.selected=!1,this.defaultSize=3,this.defaultFontSize=10,this.position1=null,this.position2=null,this.segment=null,!e.hasConnector(s)||!i.hasConnector(o))throw"Can't create edge because a connector don't exist"};Ze.prototype.fromTo=function(){return[this.block1,this.block2]},Ze.prototype.draw=function(t){this.position1=this.block1.linkPositionFor(this.connector1),this.position2=this.block2.linkPositionFor(this.connector2),this.segment=new Qe(this.position1.x,this.position1.y,this.position2.x-this.position1.x,this.position2.y-this.position1.y);var e=this.defaultSize*this.blocks.scale;if(this.selected)var s="rgba(0, 200, 0, 1)";else s="rgba(255, 200, 0, 1)";t.line(this.position1.x,this.position1.y,this.position2.x,this.position2.y,{stroke:s,strokeWidth:e});var i=(this.position1.x+this.position2.x)/2,o=(this.position1.y+this.position2.y)/2,n=Math.sqrt(Math.pow(this.position1.x-this.position2.x,2)+Math.pow(this.position1.y-this.position2.y,2)),a=30;a=a*Math.PI/180;var r=Math.cos(a),c=Math.sin(a),l=Math.cos(-a),u=Math.sin(-a),h=(this.position1.x-i)*this.blocks.scale*10/(n/2),d=(this.position1.y-o)*this.blocks.scale*10/(n/2);e=this.defaultSize*this.blocks.scale/3;t.line(i,o,i+(h*r-d*c),o+(d*r+h*c),{stroke:s,strokeWidth:e}),t.line(i,o,i+(h*l-d*u),o+(d*l+h*u),{stroke:s,strokeWidth:e})},Ze.prototype.collide=function(t,e){var s=this.segment.distanceP({x:t,y:e});return s[0]>=0&&s[0]<=1&&s[1]<this.defaultSize*this.blocks.scale*2&&s[0]},Ze.prototype.create=function(){if(this.block1==this.block2)throw"You can't link a block to itself";if(this.connector1.type==this.connector2.type)throw"You have to link an input with an output";if(!this.block1.canLink(this.connector1)||!this.block2.canLink(this.connector2))throw"Can't create such an edge because of the cardinalities";this.block1.addEdge(this.connector1,this),this.block2.addEdge(this.connector2,this),this.block1.render(),this.block2.render()},Ze.prototype.getTypes=function(){return[this.block1.getField(this.connector1.name).type,this.block2.getField(this.connector2.name).type]},Ze.prototype.erase=function(){this.block1.eraseEdge(this.connector1,this),this.block2.eraseEdge(this.connector2,this),this.block1.render(),this.block2.render()},Ze.prototype.same=function(t){return!(this.block1!=t.block1||this.block2!=t.block2||!this.connector1.same(t.connector1)||!this.connector2.same(t.connector2))||!(this.block1!=t.block1||this.block2!=t.block2||!this.connector1.same(t.connector2)||!this.connector2.same(t.connector1))},Ze.prototype.export=function(){return{id:this.id,block1:this.block1.id,connector1:this.connector1.export(),block2:this.block2.id,connector2:this.connector2.export()}};var ts=Ze,es=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.errorHandler=t,this.center={},this.scale=1.3,this.redrawTimeout=null,this.history=null,this.moving=null,this.isReady=!1,this.compactMode=!1,this.mouseX=0,this.mouseY=0,this.linking=null,this.selectedLink=null,this.selectedSide=null,this.selectedBlock=null,this.div=null,this.context=null,this.moduleTypes={},this.blocks=[],this.edges=[],this.id=1,this.edgeId=1,this.clear=function(){this.edges=[],this.blocks=[],this.id=1,this.edgeId=1,this.div.find(".blocks").html(""),this.redraw()},this.showIcons=!0};es.prototype.run=function(t){var e=this;$(document).ready(function(){e.div=$(t),e.div.length||alert("blocks.js: Unable to find "+t),e.div.html('<div class="blocks_js_editor"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="canvas"></svg><div class="blocks"></div></div>'),e.div.find("svg").css("width","100%"),e.div.find("svg").css("height","100%"),e.context=e.div.find("svg"),e.center.x=e.div.width()/2,e.center.y=e.div.height()/2,e.div[0].addEventListener("mousemove",function(t){e.mouseX=t.pageX-e.div.offset().left,e.mouseY=t.pageY-e.div.offset().top,e.move(t)}),$("html").on("mouseup",function(t){e.linking&&1==t.which&&(e.tryEndLink(),e.linking=null,e.redraw()),!e.moving||2!=t.which&&1!=t.which||(e.moving=null)}),e.div.on("mousedown",function(t){e.canvasClicked()&&t.preventDefault(),2!=t.which&&(e.selectedLink||e.selectedBlock||1!=t.which)||(e.moving=[e.mouseX,e.mouseY])}),e.context.svg(),$(document).on("keydown",function(t){$("input").is(":focus")||46==t.keyCode&&e.deleteEvent()}),e.div.bind("mousewheel",function(t,s,i,o){var n=e.mouseX-e.center.x,a=e.mouseY-e.center.y,r=Math.pow(1.1,o);e.center.x-=n*(r-1),e.center.y-=a*(r-1),e.scale*=r,e.redraw(),t.preventDefault()}),e.history=new Je(e),e.isReady||e.postReady()})},es.prototype.postReady=function(){if(this.isReady=!0,void 0!=this.readyQueue)for(var t in this.readyQueue)this.readyQueue[t]()},es.prototype.ready=function(t){if(this.isReady)t();else{var e=[];void 0!=this.readyQueue&&(e=this.readyQueue),e.push(t),this.readyQueue=e}},es.prototype.getPosition=function(){var t={};return t.x=(this.mouseX-this.center.x)/this.scale,t.y=(this.mouseY-this.center.y)/this.scale,t},es.prototype.hasUndo=function(){return null===this.history?0:this.history.size()>0},es.prototype.undo=function(){null!==this.history&&this.history.restoreLast()},es.prototype.addCollection=function(t,e,s){return this.addBlock(t,"collection",e,s)},es.prototype.addProcess=function(t,e,s){return this.addBlock(t,"process",e,s)},es.prototype.addBlock=function(t,e,s,i){if(!(e in this.moduleTypes))throw"Invalid module type specified.";if(!(t in this.moduleTypes[e]))throw"'"+t+"' not available.";var o=this.moduleTypes[e][t],n=new Xe(this,o,this.id);return n.x=s,n.y=i,n.create(this.div.find(".blocks")),this.history.save(),this.blocks.push(n),this.id++,n},es.prototype.registerProcess=function(t){var e=bt()({},t);for(var s in"string"===typeof e.id?e.name=e.id:e.id=e.name,e.fields=[],e.returns.name="Output",e.returns.attrs="output",e.returns.schema||(e.returns.schema={}),e.fields.push(e.returns),e.parameters)e.parameters[s].schema||(e.parameters[s].schema={}),e.parameters[s].name=s,e.parameters[s].attrs="input",e.fields.push(e.parameters[s]);this.register(e,"process")},es.prototype.registerCollection=function(t){var e=bt()({},t);"string"===typeof e.id?e.name=e.id:e.id=e.name,e.returns={name:"Output",attrs:"output",schema:{type:"object",format:"eodata"}},e.fields=[e.returns],this.register(e,"collection")},es.prototype.register=function(t,e){e in this.moduleTypes||(this.moduleTypes[e]={}),t.module=e,this.moduleTypes[e][t.name]=t},es.prototype.beginLink=function(t,e){this.linking=[t,e]},es.prototype.move=function(){if(this.selectedSide){var t=Math.sqrt(Math.pow(this.mouseX-this.selectedSide[1],2)+Math.pow(this.mouseY-this.selectedSide[2],2));if(t>15){var e=this.edges[this.selectedLink];2==this.selectedSide[0]?this.linking=[e.block1,e.connector1.id()]:this.linking=[e.block2,e.connector2.id()],this.removeEdge(this.selectedLink),this.selectedSide=null,null!=this.selectedLink&&this.selectedLink in this.edges&&(this.edges[this.selectedLink].selected=!1),this.selectedLink=null,this.redraw()}}this.moving&&(this.center.x+=this.mouseX-this.moving[0],this.center.y+=this.mouseY-this.moving[1],this.moving=[this.mouseX,this.mouseY],this.redraw()),this.linking&&this.redraw()},es.prototype.canvasClicked=function(){var t=!1;for(var e in this.selectedBlock=null,null!=this.selectedLink&&(this.edges[this.selectedLink].selected=!1),this.selectedLink=null,this.selectedSide=null,this.blocks){var s=this.blocks[e];s.hasFocus&&(this.selectedBlock=e)}if(!this.selectedBlock)for(var e in this.edges){var i=this.edges[e].collide(this.mouseX,this.mouseY);if(0!=i){i<.2?this.selectedSide=[1,this.mouseX,this.mouseY]:i>.8&&(this.selectedSide=[2,this.mouseX,this.mouseY]),this.selectedLink=e,this.edges[e].selected=!0,t=!0;break}}return this.redraw(),t},es.prototype.removeEdge=function(t){this.history.save(),this.edges[t].erase(),this.edges.splice(t,1)},es.prototype.getEdgeId=function(t){for(var e in this.edges)if(t==this.edges[e])return e;return!1},es.prototype.removeBlock=function(t){var e=this.blocks[t],s=[];for(var i in this.edges){var o=this.edges[i];o.block1==e||o.block2==e?o.erase():s.push(o)}this.edges=s,e.erase(),this.blocks.splice(this.selectedBlock,1),this.redraw()},es.prototype.getBlockId=function(t){for(var e in this.blocks)if(this.blocks[e]==t)return e;return null},es.prototype.getBlockById=function(t){for(var e in this.blocks)if(this.blocks[e].id==t)return this.blocks[e];return null},es.prototype.canDelete=function(){return null!=this.selectedBlock||null!=this.selectedLink},es.prototype.deleteEvent=function(){null!=this.selectedBlock&&(this.history.save(),this.removeBlock(this.selectedBlock),this.selectedBlock=null),null!=this.selectedLink&&(this.history.save(),this.removeEdge(this.selectedLink),this.selectedLink=null,this.redraw())},es.prototype.doRedraw=function(){for(var t in this.blocks)this.blocks[t].redraw(this.selectedBlock==t);var e=this.context.svg("get");for(var t in e.clear(),this.edges)this.edges[t].draw(e);if(this.linking)try{var s=this.linking[0].linkPositionFor(this.linking[1]);e.line(s.x,s.y,this.mouseX,this.mouseY,{stroke:"rgba(0,0,0,0.4)",strokeWidth:3*this.scale})}catch(error){this.linking=null}this.redrawTimeout=null},es.prototype.redraw=function(){var t=this;this.redrawTimeout||(this.redrawTimeout=setTimeout(function(){t.doRedraw()},25))},es.prototype.tryEndLink=function(){for(var t in this.blocks){var e=this.blocks[t];if(e.hasFocus&&e.focusedConnector){this.endLink(e,e.focusedConnector);break}}},es.prototype.addEdge=function(t,e,s,i){var o=this.edgeId++;if(e instanceof qe||(e=new qe(e,"output")),i instanceof qe||(i=new qe(i,"input")),e.isOutput())var n=new ts(o,t,e,s,i,this);else n=new ts(o,s,i,t,e,this);for(var a in this.edges){var r=this.edges[a];if(r.same(n))throw"This edge already exists"}var c=n.fromTo();if(-1!=c[1].allSuccessors().indexOf(c[0].id))throw"You can not create a loop";this.history.save(),n.create();var l=this.edges.push(n)-1,u=n.getTypes();if(!this.isTypeCompatible(u[0],u[1]))throw this.removeEdge(l),"Types "+u[0]+" and "+u[1]+" are not compatible";this.redraw()},es.prototype.endLink=function(t,e){try{this.addEdge(this.linking[0],new qe(this.linking[1]),t,new qe(e))}catch(error){this.showError(error)}this.linking=null,this.selectedBlock=null},es.prototype.isTypeCompatible=function(t,e){return t===e||("number"===t&&"integer"===e||"integer"===t&&"number"===e)},es.prototype.showError=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"function"===typeof this.errorHandler?this.errorHandler(t,e):console.log(e,t)},es.prototype.toggleCompact=function(){for(var t in this.compactMode=!this.compactMode,this.blocks)this.blocks[t].render();this.redraw()},es.prototype.export=function(){var t=[],e=[];for(var s in this.blocks)t.push(this.blocks[s].export());for(var s in this.edges)e.push(this.edges[s].export());return{edges:e,blocks:t}},es.prototype.importData=function(t){this.clear(),this.doLoad(t,!1)},es.prototype.load=function(t){this.doLoad(t,!0)},es.prototype.doLoad=function(t,e){var s=this;this.ready(function(){try{var i=[];if(s.id=1,s.edgeId=1,"object"!=Object(C["a"])(t)||t instanceof Array)throw"Scene is not an object";if(!("blocks"in t)||!(t.blocks instanceof Array))throw"Scene has no blocks section";if(!("edges"in t)||!(t.edges instanceof Array))throw"Scene has no blocks section";for(var o in t.blocks)try{var n=t.blocks[o],a=s.blockImport(n);s.id=Math.max(s.id,a.id+1),a.create(s.div.find(".blocks")),s.blocks.push(a)}catch(error){i.push("Block #"+o+":"+error)}for(var o in t.edges)try{n=t.edges[o];var r=s.edgeImport(n);s.edgeId=Math.max(s.edgeId,r.id+1),r.create(),s.edges.push(r)}catch(error){i.push("Edge #"+o+" :"+error)}if(i.length)for(var o in i)s.showError(i[o],"Loading error");s.redraw(),e&&s.perfectScale()}catch(error){s.showError(error,"Unable to create edge")}})},es.prototype.edgeImport=function(t){if(!1 in t)throw"An edge does not have an id";var e=this.getBlockById(t.block1),s=this.getBlockById(t.block2);if(!e||!s)throw"Error while importing an edge, a block did not exists";return new ts(t.id,e,new qe(t.connector1),s,new qe(t.connector2),this)},es.prototype.blockImport=function(t){if(t.module in this.moduleTypes&&t.type in this.moduleTypes[t.module]){var e=this.moduleTypes[t.module][t.type],s=new Xe(this,e,t.id);return s.x=t.x,s.y=t.y,s.setValues(t.values),s}throw"Unable to create a block of type "+t.type},es.prototype.perfectScale=function(){if(this.div&&0!==this.blocks.length){var t=null,e=null,s=null,i=null;for(var o in this.blocks){var n=this.blocks[o];null==t?(t=n.x-15,e=n.x+n.getWidth()+18,s=n.y-15,i=n.y+115):(t=Math.min(t,n.x-15),e=Math.max(e,n.x+n.getWidth()+18),s=Math.min(s,n.y-15),i=Math.max(i,n.y+115))}var a=this.div.width()/(e-t),r=this.div.height()/(i-s),c=Math.min(a,r);this.scale=c,this.center.x=this.div.width()/2-c*(t+e)/2,this.center.y=this.div.height()/2-c*(s+i)/2,this.redraw()}},es.prototype.setLabels=function(t){for(var e in this.edges){var s=this.edges[e];s.id in t&&s.setLabel(t[e])}};var ss=es,is={name:"GraphBuilderEnvironment",props:["active"],data:function(){return{blocks:null}},beforeMount:function(){this.blocks=new ss(this.errorHandler)},mounted:function(){this.blocks.run("#pgEditor"),v.$on("propagateCollections",this.propagateCollections),v.$on("propagateProcesses",this.propagateProcesses),v.$on("addProcessToEditor",this.insertProcess),v.$on("addCollectionToEditor",this.insertCollection),v.$on("insertProcessGraph",this.insertProcessGraph)},methods:{errorHandler:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$utils.exception(this,t,e)},getProcessGraph:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t(this.makeProcessGraph(e))},makeModel:function(t){var e=!0;this.blocks.history.save(),this.blocks.clear(),this.blocks.history.enable(!1);try{this.importProcessGraph(t),this.blocks.perfectScale()}catch(error){this.$utils.exception(this,error,"Process graph invalid"),this.blocks.history.restoreLast(),e=!1}return this.blocks.history.enable(!0),e},importProcessGraph:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!this.$utils.isObject(t))return null;if("get_collection"===t.process_id)return this.blocks.addCollection(t.name,e,s);if("process_id"in t){var i=this.blocks.addProcess(t.process_id,e,s);for(var o in i&&(i.setValues(t),i.render()),t)if(this.$utils.isObject(t[o])&&"process_id"in t[o]){var n=this.importProcessGraph(t[o],e-(i.getWidth()+20),s);this.blocks.addEdge(n,"output",i,o)}return i}return null},makeProcessGraph:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.blocks.export(),s=e.edges,i=e.blocks;if(0===i.length)return t||this.$utils.error(this,"There must be exactly one output"),{};var o={};for(var n in i){var a=i[n].id;o[a]=i[n]}var r=f()(o);for(n in s){s[n].block1ref=o[s[n].block1];var c=r.indexOf(s[n].block1.toString());c>-1&&r.splice(c,1)}1===r.length||t||this.$utils.error(this,"There must be exactly one output");var l=r[0];return this.makeProcessGraphFromEdges(s,o[l])},makeProcessGraphFromEdges:function(t,e){if(!e)return{};var s=[];for(var i in t)t[i].block2==e.id&&s.push(this.makeProcessGraphFromEdges(t,t[i].block1ref));if("collection"==e.module)return{process_id:"get_collection",name:e.type};var o=e.values;return 1==s.length?o.imagery=s[0]:o.imagery=s,o.process_id=e.type,o},propagateProcesses:function(t){for(var e in t)this.blocks.registerProcess(t[e])},propagateCollections:function(t){for(var e in t)this.blocks.registerCollection(t[e])},insertProcessGraph:function(t){this.active&&this.makeModel(t)},insertCollection:function(t){if(this.active)try{this.blocks.addCollection(t,0,0)}catch(error){this.$utils.exception(this,error)}},insertProcess:function(t){if(this.active)try{this.blocks.addProcess(t,0,0)}catch(error){this.$utils.exception(this,error)}}}},os=is,ns=(s("c9b0"),Object(_["a"])(os,Ne,Ve,!1,null,null,null)),as=ns.exports,rs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("DataTable",{ref:"table",attrs:{dataSource:t.listProcessGraphs,columns:t.columns,id:"ProcessGraphPanel"},scopedSlots:t._u([{key:"actions",fn:function(e){return[s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("describeProcessGraph"),expression:"supports('describeProcessGraph')"}],attrs:{title:"Details"},on:{click:function(s){return t.graphInfo(e.row)}}},[s("i",{staticClass:"fas fa-info"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("describeProcessGraph"),expression:"supports('describeProcessGraph')"}],attrs:{title:"Show in Editor"},on:{click:function(s){return t.showInEditor(e.row)}}},[s("i",{staticClass:"fas fa-code-branch"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("updateProcessGraph"),expression:"supports('updateProcessGraph')"}],attrs:{title:"Edit"},on:{click:function(s){return t.editGraph(e.row)}}},[s("i",{staticClass:"fas fa-edit"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("deleteProcessGraph"),expression:"supports('deleteProcessGraph')"}],attrs:{title:"Delete"},on:{click:function(s){return t.deleteGraph(e.row)}}},[s("i",{staticClass:"fas fa-trash"})])]}}])},[s("template",{slot:"toolbar"},[s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("createProcessGraph"),expression:"supports('createProcessGraph')"}],attrs:{title:"Add new process graph"},on:{click:t.addGraph}},[s("i",{staticClass:"fas fa-plus"}),t._v(" Add")]),s("button",{attrs:{title:"Refresh process graphs"},on:{click:function(e){return t.updateData()}}},[s("i",{staticClass:"fas fa-sync-alt"})])])],2)},cs=[],ls={name:"ProcessGraphPanel",mixins:[B],data:function(){return{columns:{title:{name:"Title"},processGraphId:{name:"ID",primaryKey:!0},actions:{name:"Actions",filterable:!1}}}},methods:{listProcessGraphs:function(){return this.connection.listProcessGraphs()},updateData:function(){this.updateTable(this.$refs.table,"listProcessGraphs","createProcessGraph")},refreshProcessGraph:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.describeProcessGraph().then(function(t){"function"===typeof s&&s(t),e.updateProcessGraphData(t)}).catch(function(t){return e.$utils.exception(e,t,"Sorry, could not load process graph.")})},showInEditor:function(t){this.refreshProcessGraph(t,function(t){v.$emit("insertProcessGraph",t.processGraph)})},addGraph:function(){var t=this,e=prompt("Please specify a title for the process graph:");null!==e&&("string"===typeof e&&0!==e.length||(e=null),v.$emit("getProcessGraph",function(s){t.connection.createProcessGraph(s,e).then(function(e){t.$refs.table.addData(e),t.$utils.ok(t,"Process Graph stored at back-end!")}).catch(function(e){return t.$utils.exception(t,e,"Sorry, could not save the process graph.")})}))},graphInfo:function(t){this.refreshProcessGraph(t,function(t){v.$emit("showModal","Process Graph Details",t.getAll())})},editGraph:function(t){var e=this;v.$emit("getProcessGraph",function(s){var i={process_graph:s};t.updateProcessGraph(i).then(function(t){e.$utils.ok(e,"Process Graph updated!"),e.updateProcessGraphData(t)}).catch(function(t){return e.$utils.exception(e,t,"Sorry, could not update the process graph.")})})},deleteGraph:function(t){var e=this;t.deleteProcessGraph().then(function(){e.$refs.table.removeData(t.processGraphId)}).catch(function(t){return e.$utils.exception(e,t,"Sorry, could not delete process graph.")})},updateProcessGraphData:function(t){this.$refs.table.replaceData(t)}}},us=ls,hs=Object(_["a"])(us,rs,cs,!1,null,null,null),ds=hs.exports,ps=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("DataTable",{ref:"table",attrs:{dataSource:t.listServices,columns:t.columns,id:"ServicePanel"},scopedSlots:t._u([{key:"enabled",fn:function(t){return[s("span",{staticClass:"enabled"},[!0===t.row.enabled?s("i",{staticClass:"fas fa-check-circle"}):!1===t.row.enabled?s("i",{staticClass:"fas fa-times-circle"}):s("i",{staticClass:"fas fa-question-circle"})])]}},{key:"actions",fn:function(e){return[s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("describeService"),expression:"supports('describeService')"}],attrs:{title:"Details"},on:{click:function(s){return t.serviceInfo(e.row)}}},[s("i",{staticClass:"fas fa-info"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("describeService"),expression:"supports('describeService')"}],attrs:{title:"Show in Editorr"},on:{click:function(s){return t.showInEditor(e.row)}}},[s("i",{staticClass:"fas fa-code-branch"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("updateService"),expression:"supports('updateService')"}],attrs:{title:"Edit"},on:{click:function(s){return t.editService(e.row)}}},[s("i",{staticClass:"fas fa-edit"})]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("deleteService"),expression:"supports('deleteService')"}],attrs:{title:"Delete"},on:{click:function(s){return t.deleteService(e.row)}}},[s("i",{staticClass:"fas fa-trash"})]),s("button",{attrs:{title:"View on map"},on:{click:function(s){return t.viewService(e.row)}}},[s("i",{staticClass:"fas fa-map"})])]}}])},[s("template",{slot:"toolbar"},[s("button",{directives:[{name:"show",rawName:"v-show",value:t.supports("createService"),expression:"supports('createService')"}],attrs:{title:"Add new service"},on:{click:function(e){return t.createServiceFromScript()}}},[s("i",{staticClass:"fas fa-plus"}),t._v(" Add")]),s("button",{attrs:{title:"Refresh services"},on:{click:function(e){return t.updateData()}}},[s("i",{staticClass:"fas fa-sync-alt"})])])],2)},fs=[],vs={name:"ServicePanel",mixins:[B],data:function(){return{columns:{serviceId:{name:"ID",primaryKey:!0,hide:!0},title:{name:"Title",computedValue:function(t,e){return!e&&t.serviceId?"Service #"+t.serviceId.toUpperCase().substr(0,6):e}},type:{name:"Type",format:"UpperCase"},enabled:{name:"Enabled"},submitted:{name:"Submitted",format:"DateTime"},actions:{name:"Actions",filterable:!1}}}},created:function(){v.$on("serviceCreated",this.serviceCreated)},methods:{listServices:function(){return this.connection.listServices()},updateData:function(){this.updateTable(this.$refs.table,"listServices","createService")},refreshService:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.describeService().then(function(t){"function"===typeof s&&s(t),e.updateServiceData(t)}).catch(function(t){return e.$utils.exception(e,t,"Sorry, could not load service information.")})},showInEditor:function(t){this.refreshService(t,function(t){v.$emit("insertProcessGraph",t.processGraph)})},serviceCreated:function(t){var e=this;if(this.$refs.table){this.$refs.table.addData(t);var s=[{text:"View on map",action:function(){return e.viewService(t)}}];this.supports("describeService")&&s.push({text:"Details",action:function(){return e.serviceInfo(t)}}),this.supports("deleteService")&&s.push({text:"Delete",action:function(){return e.deleteService(t)}}),this.$utils.confirm(this,"Web Service created!",s)}},createService:function(t,e){var s=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.connection.createService(t,e,i).then(function(t){v.$emit("serviceCreated",t)}).catch(function(t){s.$utils.exception(s,t,"Sorry, could not create the web service.")})},createServiceFromScript:function(){var t=this,e=prompt("Please specify a title for the service:");if(null!==e){"string"===typeof e&&0!==e.length||(e=null);var s=f()(this.connection.supportedServices).map(function(t){return t.toUpperCase()}),i="";if(1==s.length)i=s[0];else do{var o="";""!==i&&(o="Specified service type is invalid.\r\n");i=prompt(o+"Please specify the service type:\r\nOne of: ".serviceTypes.join(", "),i);if(null===i)return;"string"===typeof i?(i=i.toUpperCase(),s.includes(i)||(i="")):i=""}while(0==i.length);v.$emit("getProcessGraph",function(s){t.createService(s,i,e)})}},serviceInfo:function(t){this.refreshService(t,function(t){v.$emit("showModal","Web Service Details",t.getAll())})},editService:function(t){var e=this;v.$emit("getProcessGraph",function(s){t.updateService(s).then(function(t){e.$utils.ok(e,"Service successfully updated."),e.updateServiceData(t)}).catch(function(t){return e.$utils.exception(e,t,"Sorry, could not update service.")})},!1)},deleteService:function(t){var e=this;t.deleteService().then(function(){e.$refs.table.removeData(t.serviceId),v.$emit("removeWebService",t.serviceId)}).catch(function(t){e.$utils.exception(e,t,"Sorry, could not delete service.")})},viewService:function(t){this.$utils.info(this,"Requesting tiles from server. Please wait..."),v.$emit("viewWebService",t),v.$emit("showMapViewer")},updateServiceData:function(t){this.$refs.table.replaceData(t)}}},ms=vs,bs=(s("916f"),Object(_["a"])(ms,ps,fs,!1,null,null,null)),gs=bs.exports,ys=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ws=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"SourceEnvironment"}},[s("div",{attrs:{id:"sourceCodeEditor"}})])}],ks=(s("a7be"),s("f9d4"),s("56b3")),Cs=s.n(ks),Ss={name:"SourceEnvironment",props:["active"],data:function(){return{editorOptions:{mode:"javascript",indentUnit:2,lineNumbers:!0},editor:null}},watch:{active:function(){this.editor.refresh()}},mounted:function(){this.editor=Cs()(document.getElementById("sourceCodeEditor"),this.editorOptions),this.editor.setSize(null,"100%"),v.$on("insertProcessGraph",this.insertProcessGraph),v.$on("addProcessToEditor",this.insertToEditor),v.$on("addCollectionToEditor",this.insertToEditor)},methods:{getProcessGraph:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this.editor.getSelection();s||(s=this.editor.getValue());var i=null;if(s)try{i=JSON.parse(s)}catch(error){return console.log(error),void this.$utils.error(this,"The source code must be valid JSON.")}null!==i?t(i):e||this.$utils.error(this,"No valid model or source code specified.")},insertToEditor:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.active&&(e?(this.editor.setValue(t),this.scriptName=""):this.editor.replaceSelection(t))},insertProcessGraph:function(t){this.active&&this.insertToEditor(d()(t,null,2),!0)}}},xs=Ss,$s=(s("69ba"),Object(_["a"])(xs,ys,ws,!1,null,"2a5f7f01",null)),_s=$s.exports,Ps=s("bc3a"),Ts=s.n(Ps),Ms=s("e97b");window.axios=Ts.a;var Ds={name:"openeo-web-editor",components:{AccountPanel:J,BackendPanel:q,DataViewer:et,GraphBuilderEnvironment:as,ImageViewer:pt,FilePanel:rt,JobPanel:kt,MapViewer:Ft,Modal:Ue,ProcessGraphPanel:ds,ServicePanel:gs,SourceEnvironment:_s},data:function(){return{connection:null,isVisualBuilderActive:!0,savedScripts:{},scriptName:null}},created:function(){v.$on("changeServerUrl",this.changeServer),v.$on("serverChanged",this.serverChanged)},mounted:function(){this.resetActiveTab("userContent"),this.resetActiveTab("processGraphContent"),v.$on("showEditor",this.showEditor),v.$on("showInViewer",this.showInViewer),v.$on("showMapViewer",this.showMapViewer),v.$on("showImageViewer",this.showImageViewer),v.$on("showDataViewer",this.showDataViewer),v.$on("getProcessGraph",this.getProcessGraph);var t=localStorage.getItem("savedScripts");null!==t&&(this.savedScripts=JSON.parse(t))},computed:{savedScriptNames:function(){return f()(this.savedScripts)}},watch:{savedScripts:{handler:function(t,e){localStorage.setItem("savedScripts",d()(t))},deep:!0}},methods:{blocksDelete:function(){this.$refs.graphBuilder&&this.$refs.graphBuilder.blocks.deleteEvent()},blocksUndo:function(){this.$refs.graphBuilder&&this.$refs.graphBuilder.blocks.undo()},blocksToggleCompact:function(){this.$refs.graphBuilder&&this.$refs.graphBuilder.blocks.toggleCompact()},blocksPerfectScale:function(){this.$refs.graphBuilder&&(this.$refs.graphBuilder.blocks.perfectScale(),this.$refs.graphBuilder.$forceUpdate())},blocksCanDelete:function(){return!!this.$refs.graphBuilder&&this.$refs.graphBuilder.blocks.canDelete()},blocksHasUndo:function(){return!!this.$refs.graphBuilder&&this.$refs.graphBuilder.blocks.hasUndo()},blocksCompactMode:function(){return!!this.$refs.graphBuilder&&this.$refs.graphBuilder.blocks.compactMode},changeServer:function(t){var e=this;if("https:"!==window.location.protocol||"https:"===t.toLowerCase().substr(0,6))try{var s=new Ms["OpenEO"];s.connect(t).then(function(t){e.connection=t,e.requestCapabilities()}).catch(function(t){e.$utils.exception(e,t)})}catch(i){this.$utils.exception(this,error)}else this.$utils.error(this,"You are trying to connect to a back-end with HTTP instead of HTTPS, which is insecure and prohibited by web browsers. Please use HTTPS instead.")},serverChanged:function(){this.resetActiveTab("userContent")},supports:function(t){return this.connection&&this.connection.capabilitiesObject&&this.connection.capabilitiesObject.hasFeature(t)},requestCapabilities:function(){var t=this;this.connection.capabilities().then(function(e){t.connection.capabilitiesObject=e,t.requestSupportedOutputFormats(),t.requestSupportedServices(),t.requestAuth()}).catch(function(e){console.log(e),t.$utils.error(t,"Sorry, server is not responding.")})},requestSupportedOutputFormats:function(){var t=this;this.supports("listFileTypes")&&this.connection.listFileTypes().then(function(e){return t.connection.supportedOutputFormats=e})},requestSupportedServices:function(){var t=this;this.supports("listServiceTypes")&&this.connection.listServiceTypes().then(function(e){return t.connection.supportedServices=e})},requestAuth:function(){var t=this;if(this.supports("authenticateBasic")){var e={submitLoginCallback:function(e,s){return t.connection.authenticateBasic(e,s).then(function(e){return v.$emit("serverChanged"),t.$utils.ok(t,"Login successful."),e}).catch(function(e){throw t.$utils.error(t,"Sorry, credentials are wrong."),e})},cancelCallback:function(){v.$emit("serverChanged")}};v.$emit("showComponentModal","Enter your credentials","CredentialsForm",e)}else this.supports("authenticateOIDC")?(v.$emit("serverChanged"),this.$utils.info(this,"Sorry, the authentication methods supported by the back-end is not supported by the Web Editor.")):(v.$emit("serverChanged"),this.$utils.info(this,"You are working without authorization. Your data will be publicly available!"))},newScript:function(){var t=confirm("Do you really want to clear the existing script to create a new one?");t&&(v.$emit("insertProcessGraph",{}),this.scriptName=null)},loadScript:function(t){var e=this.savedScripts[t];return e?(v.$emit("insertProcessGraph",e),this.scriptName=t,!0):(this.$utils.info(this,'No script with the name "'+t+'" found.'),!1)},openScriptChooser:function(){var t=this;v.$emit("showComponentModal","Select script to load","List",{dataSource:function(){return t.savedScriptNames},actions:[{callback:this.loadScript,icon:"check",title:"Load script"},{callback:this.deleteScript,icon:"trash",title:"Delete script"}]})},saveScript:function(){var t=this,e=prompt("Name for the script:",this.scriptName);e&&v.$emit("getProcessGraph",function(s){t.$set(t.savedScripts,e,s),t.scriptName=e})},deleteScript:function(t){this.$delete(this.savedScripts,t)},resetActiveTab:function(t){var e=document.getElementById(t).getElementsByClassName("tabItem")[0];this.showTab(t,e.name)},setTabActive:function(t){t.className&&-1!==t.className.indexOf(" tabActive")||(t.className+=" tabActive")},supportsJobs:function(){return!(!this.connection||!this.connection.capabilitiesObject)&&(this.connection.capabilitiesObject.hasFeature("listJobs")||this.connection.capabilitiesObject.hasFeature("createJob"))},supportsServices:function(){return!(!this.connection||!this.connection.capabilitiesObject)&&(this.connection.capabilitiesObject.hasFeature("listServices")||this.connection.capabilitiesObject.hasFeature("createService"))},supportsProcessGraphs:function(){return!(!this.connection||!this.connection.capabilitiesObject)&&(this.connection.capabilitiesObject.hasFeature("listProcessGraphs")||this.connection.capabilitiesObject.hasFeature("createProcessGraph"))},supportsFiles:function(){return!(!this.connection||!this.connection.capabilitiesObject)&&(this.connection.capabilitiesObject.hasFeature("listFiles")||this.connection.capabilitiesObject.hasFeature("uploadFile"))},changeUserTab:function(t){this.changeTab("userContent",t)},changeProcessGraphTab:function(t){this.changeTab("processGraphContent",t),this.enableVisualBuilder(this.isTabActive("graphTab"))},changeViewerTab:function(t){this.changeTab("viewer",t)},changeTab:function(t,e){this.showTab(t,e.currentTarget.name)},showTab:function(t,e){for(var s=document.getElementById(t),i=s.getElementsByClassName("tabContent"),o=0;o<i.length;o++)i[o].className=i[o].className.replace(" tabActive",""),i[o].id==e&&this.setTabActive(i[o]);var n=s.getElementsByClassName("tabItem");for(o=0;o<n.length;o++)n[o].className=n[o].className.replace(" tabActive",""),n[o].name==e&&this.setTabActive(n[o])},isTabActive:function(t){var e=document.getElementById(t);return!(!this.$utils.isObject(e)||"string"!==typeof e.className||-1===e.className.indexOf(" tabActive"))},showEditor:function(){this.showTab("processGraphContent","sourceTab"),this.enableVisualBuilder(this.isTabActive("graphTab"))},showMapViewer:function(){this.showTab("viewer","mapTab")},showImageViewer:function(){this.showTab("viewer","imageTab")},showDataViewer:function(){this.showTab("viewer","dataTab")},showInViewer:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(t instanceof Blob))throw"No blob specified.";var s=t.type;switch(null===e||s&&-1!==s.indexOf("/")&&-1===s.indexOf("*")||(s=this.getMimeTypeForOutputFormat(e)),"string"===typeof s&&(s=s.toLowerCase()),s){case"image/png":case"image/jpg":case"image/jpeg":case"image/gif":this.$refs.imageViewer.showImageBlob(t);break;case"application/json":case"text/plain":this.$refs.dataViewer.showBlob(t,s);break;case"image/tif":case"image/tiff":this.$refs.mapViewer.updateTiffLayerBlob(t);break;default:this.$utils.error(this,"Sorry, the returned content type is not supported to view.")}},enableVisualBuilder:function(t){var e=this;this.isVisualBuilderActive!==t&&v.$emit("getProcessGraph",function(s){e.isVisualBuilderActive=t,e.$nextTick(function(){v.$emit("insertProcessGraph",s)})},!0)},getProcessGraph:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isVisualBuilderActive?this.$refs.graphBuilder.getProcessGraph(t,e):this.$refs.sourceEditor.getProcessGraph(t,e)},executeProcessGraph:function(){var t=this,e=prompt("Please specify the file format:","");null!==e&&(this.$utils.info(this,"Data requested. Please wait..."),v.$emit("getProcessGraph",function(s){t.connection.execute(s,e).then(function(t){return v.$emit("showInViewer",t,e)}).catch(function(e){return t.$utils.exception(t,e,"Sorry, could not execute process graph.")})}))},getMimeTypeForOutputFormat:function(t){if(!t.format)return null;var e=t.format.toLowerCase();switch(e){case"png":case"jpeg":case"jpg":case"gif":return"image/"+e;case"tif":case"tiff":case"gtiff":return"image/tiff";case"json":return"application/json";default:return null}}}},Ls=Ds,Fs=(s("c8c0"),Object(_["a"])(Ls,l,u,!1,null,null,null)),Es=Fs.exports,Os=s("f213"),js=(s("fbfd"),s("4917"),s("386d"),{snotifyDefaults:{timeout:5e3,titleMaxLength:30,showProgressBar:!0,closeOnClick:!0,pauseOnHover:!0},exception:function(t,e,s){console.log(e);var i=null,o=s;this.isObject(e)&&"string"===typeof e.message?(i=e.code>0?"Error #"+e.code:s,o=e.message):"string"===typeof e&&(o=e,i=s),this.error(t,o,i)},error:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.$snotify.error(e,s,this.snotifyDefaults)},info:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.$snotify.info(e,s,this.snotifyDefaults)},ok:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i={timeout:2e3};t.$snotify.success(e,s,bt()({},this.snotifyDefaults,i))},confirm:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i={timeout:1e4,closeOnClick:!1,buttons:s};t.$snotify.confirm(e,null,bt()({},this.snotifyDefaults,i))},blobToText:function(t,e){var s=new FileReader;s.onload=e,s.readAsText(t)},isChildOfModal:function(t){return t.$parent&&"Modal"==t.$parent.$options.name},getFileNameFromURL:function(t){return t=t.substring(0,-1==t.indexOf("#")?t.length:t.indexOf("#")),t=t.substring(0,-1==t.indexOf("?")?t.length:t.indexOf("?")),t=t.substring(t.lastIndexOf("/")+1,t.length),t},formatDateTime:function(t){if(!t)return"";var e=new Date(t);return e.toISOString().replace("T"," ").replace("Z","").substring(0,19)},param:function(t){var e=new URLSearchParams(window.location.search);return e.get(t)},isUrl:function(t){return"string"===typeof t&&t.length>0&&null!==t.match(/^https?:\/\//i)},isObject:function(t){return"object"===Object(C["a"])(t)&&null!==t&&!k()(t)}});r["a"].use(Os["a"]),r["a"].prototype.$config=c,r["a"].prototype.$utils=js,r["a"].config.productionTip=!1,r["a"].config.errorHandler=function(t,e,s){console.log(t),e&&e.$snotify&&e.$snotify.error(t.message||t,"Fatal error",js.snotifyDefaults)},window.App=new r["a"]({render:function(t){return t(Es)}}).$mount("#app")},"59a3":function(t,e,s){},"5ebb":function(t,e,s){},"60dd":function(t,e,s){},6224:function(t,e,s){"use strict";var i=s("468d"),o=s.n(i);o.a},"63ff":function(t,e,s){"use strict";var i=s("18b7"),o=s.n(i);o.a},6998:function(t,e,s){},"69ba":function(t,e,s){"use strict";var i=s("59a3"),o=s.n(i);o.a},"6a47":function(t,e,s){"use strict";var i=s("c896"),o=s.n(i);o.a},"74f2":function(t,e,s){},"785f":function(t,e,s){},"916f":function(t,e,s){"use strict";var i=s("a36c"),o=s.n(i);o.a},9215:function(t,e,s){},9961:function(t,e,s){"use strict";var i=s("9215"),o=s.n(i);o.a},"9b3a":function(t,e,s){"use strict";var i=s("d2ca"),o=s.n(i);o.a},a36c:function(t,e,s){},addd:function(t,e,s){},b014:function(t,e,s){},b52e:function(t,e,s){},c6f2:function(t,e,s){"use strict";var i=s("60dd"),o=s.n(i);o.a},c896:function(t,e,s){},c8c0:function(t,e,s){"use strict";var i=s("1999"),o=s.n(i);o.a},c9b0:function(t,e,s){"use strict";var i=s("22ae"),o=s.n(i);o.a},cf05:function(t,e,s){t.exports=s.p+"img/logo.637896da.png"},d019:function(t,e,s){"use strict";var i=s("6998"),o=s.n(i);o.a},d2ca:function(t,e,s){},d31b:function(t,e,s){},e133:function(t,e,s){"use strict";var i=s("74f2"),o=s.n(i);o.a},ef28:function(t,e,s){"use strict";var i=s("b014"),o=s.n(i);o.a},ef75:function(t,e,s){"use strict";var i=s("d31b"),o=s.n(i);o.a},f281:function(t,e,s){}});
//# sourceMappingURL=app.8bd98f07.js.map