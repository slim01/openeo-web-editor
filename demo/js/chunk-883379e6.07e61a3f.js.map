{"version":3,"sources":["webpack:///./node_modules/ol/layer/VectorRenderType.js","webpack:///./node_modules/ol/render/EventType.js","webpack:///./node_modules/ol/layer/VectorTileRenderType.js","webpack:///./node_modules/ol/layer/Layer.js","webpack:///./node_modules/ol/render/ReplayGroup.js","webpack:///./node_modules/ol/render/canvas/Instruction.js","webpack:///./node_modules/ol/render/canvas/Replay.js","webpack:///./node_modules/ol/render/canvas/ImageReplay.js","webpack:///./node_modules/ol/render/canvas/LineStringReplay.js","webpack:///./node_modules/ol/render/canvas/PolygonReplay.js","webpack:///./node_modules/ol/render/canvas/TextReplay.js","webpack:///./node_modules/ol/render/canvas/ReplayGroup.js","webpack:///./node_modules/ol/proj/epsg3857.js","webpack:///./node_modules/ol/proj/epsg4326.js","webpack:///./node_modules/ol/proj/projections.js","webpack:///./node_modules/ol/proj/transforms.js","webpack:///./node_modules/ol/proj.js","webpack:///./node_modules/ol/render/Event.js","webpack:///./node_modules/ol/obj.js","webpack:///./node_modules/ol/interaction/Property.js","webpack:///./node_modules/ol/interaction/Interaction.js","webpack:///./node_modules/ol/interaction/DoubleClickZoom.js","webpack:///./node_modules/ol/interaction/Pointer.js","webpack:///./node_modules/ol/interaction/DragPan.js","webpack:///./node_modules/ol/interaction/DragRotate.js","webpack:///./node_modules/ol/render/Box.js","webpack:///./node_modules/ol/interaction/DragBox.js","webpack:///./node_modules/ol/interaction/DragZoom.js","webpack:///./node_modules/ol/interaction/KeyboardPan.js","webpack:///./node_modules/ol/interaction/KeyboardZoom.js","webpack:///./node_modules/ol/interaction/MouseWheelZoom.js","webpack:///./node_modules/ol/interaction/PinchRotate.js","webpack:///./node_modules/ol/interaction/PinchZoom.js","webpack:///./node_modules/ol/interaction.js","webpack:///./node_modules/ol/layer/Vector.js","webpack:///./node_modules/ol/layer/Heatmap.js","webpack:///./node_modules/ol/layer/Tile.js","webpack:///./node_modules/ol/layer/Base.js","webpack:///./node_modules/ol/has.js","webpack:///./node_modules/ol/loadingstrategy.js","webpack:///./node_modules/ol/math.js","webpack:///./node_modules/ol/layer/VectorTile.js","webpack:///./node_modules/ol/render/replay.js","webpack:///./node_modules/ol/layer/Group.js","webpack:///./node_modules/ol/layer/TileProperty.js","webpack:///./node_modules/ol/render/ReplayType.js","webpack:///./node_modules/ol/pointer/EventSource.js","webpack:///./node_modules/ol/pointer/MouseSource.js","webpack:///./node_modules/ol/pointer/MsSource.js","webpack:///./node_modules/ol/pointer/NativeSource.js","webpack:///./node_modules/ol/pointer/PointerEvent.js","webpack:///./node_modules/ol/pointer/TouchSource.js","webpack:///./node_modules/ol/pointer/PointerEventHandler.js","webpack:///./node_modules/ol/layer/Image.js","webpack:///./node_modules/ol/render/canvas/Immediate.js","webpack:///./node_modules/ol/pointer/EventType.js","webpack:///./node_modules/ol/render/canvas.js","webpack:///./node_modules/ol/layer/Property.js","webpack:///./node_modules/ol/net.js","webpack:///./node_modules/ol/proj/Projection.js","webpack:///./node_modules/ol/render/VectorContext.js","webpack:///./node_modules/ol/proj/Units.js"],"names":["__webpack_exports__","IMAGE","VECTOR","POSTCOMPOSE","PRECOMPOSE","RENDER","RENDERCOMPLETE","HYBRID","__webpack_require__","d","visibleAtResolution","_events_js__WEBPACK_IMPORTED_MODULE_0__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_1__","_util_js__WEBPACK_IMPORTED_MODULE_2__","_Object_js__WEBPACK_IMPORTED_MODULE_3__","_Base_js__WEBPACK_IMPORTED_MODULE_4__","_Property_js__WEBPACK_IMPORTED_MODULE_5__","_obj_js__WEBPACK_IMPORTED_MODULE_6__","_render_EventType_js__WEBPACK_IMPORTED_MODULE_7__","_source_State_js__WEBPACK_IMPORTED_MODULE_8__","Layer","BaseLayer","options","baseOptions","Object","source","call","this","mapPrecomposeKey_","mapRenderKey_","sourceChangeKey_","map","setMap","SOURCE","handleSourcePropertyChange_","setSource","__proto__","prototype","create","constructor","getLayersArray","opt_array","array","push","getLayerStatesArray","opt_states","states","getLayerState","getSource","get","getSourceState","getState","UNDEFINED","handleSourceChange_","changed","CHANGE","evt","renderEvent","layerState","managed","undefined","getZIndex","zIndex","Infinity","frameState","layerStatesArray","layerStates","render","set","resolution","visible","minResolution","maxResolution","ReplayGroup_ReplayGroup","getReplay","replayType","util","isEmpty","addDeclutter","group","render_ReplayGroup","Instruction","BEGIN_GEOMETRY","BEGIN_PATH","CIRCLE","CLOSE_PATH","CUSTOM","DRAW_CHARS","DRAW_IMAGE","END_GEOMETRY","FILL","MOVE_TO_LINE_TO","SET_FILL_STYLE","SET_STROKE_STYLE","STROKE","Instruction_fillInstruction","Instruction_strokeInstruction","beginPathInstruction","closePathInstruction","canvas_Instruction","tmpExtent","ol_extent","tmpTransform","ol_transform","Replay_CanvasReplay","VectorContext","CanvasReplay","tolerance","maxExtent","pixelRatio","overlaps","declutterTree","maxLineWidth","alignFill_","beginGeometryInstruction1_","beginGeometryInstruction2_","bufferedMaxExtent_","instructions","coordinates","coordinateCache_","renderedTransform_","hitDetectionInstructions","pixelCoordinates_","state","viewRotation_","replayTextBackground_","context","p1","p2","p3","p4","fillInstruction","strokeInstruction","beginPath","moveTo","apply","lineTo","fill_","setStrokeStyle_","stroke","replayImage_","x","y","image","anchorX","anchorY","declutterGroup","height","opacity","originX","originY","rotation","scale","snapToPixel","width","padding","fillStroke","w","h","boxW","boxH","boxX","boxY","transform","centerX","centerY","canvas","strokePadding","intersects","Math","round","declutterArgs","slice","render_canvas","applyPixelRatio","dashArray","dash","appendFlatCoordinates","flatCoordinates","offset","end","stride","closed","skipFirst","myEnd","length","extent","getBufferedMaxExtent","i","lastRel","nextRel","lastCoord","nextCoord","NaN","skipped","Relationship","INTERSECTING","drawCustomCoordinates_","ends","replayEnds","ii","replayEnd","drawCustom","geometry","feature","renderer","beginGeometry","replayEndss","type","getType","getStride","replayBegin","GeometryType","MULTI_POLYGON","getOrientedFlatCoordinates","endss","getEndss","myEnds","inflate","POLYGON","MULTI_LINE_STRING","getFlatCoordinates","getEnds","LINE_STRING","MULTI_POINT","POINT","endGeometry","finish","origin","repeatSize","translate","rotate","fill","setTransform","instruction","strokeStyle","lineWidth","lineCap","lineJoin","miterLimit","has","lineDashOffset","setLineDash","renderDeclutter_","groupCount","box","minX","minY","maxX","maxY","value","collides","insert","j","jj","declutterData","replay_","skippedFeaturesHash","featureCallback","opt_hitExtent","pixelCoordinates","flat_transform","dd","prevX","prevY","roundX","roundY","skipFeatures","obj","pendingFill","pendingStroke","lastFillInstruction","lastStrokeInstruction","coordinateCache","viewRotation","batchSize","getGeometry","getExtent","x1","y1","x2","y2","dx","dy","r","sqrt","arc","PI","closePath","fn","coords","rotateWithView","backgroundFill","backgroundStroke","begin","baseline","overflow","fillKey","maxAngle","measure","offsetY","strokeKey","strokeWidth","text","textKey","textScale","pathLength","flat_length","textLength","textReplay","textAlign","textStates","startM","render_replay","parts","textpath","c","cc","chars","label","part","getImage","result","fillStyle","replay","replayHitDetection","opt_featureCallback","reverseHitDetectionInstructions","reverse","n","setFillStrokeStyle","fillStyleColor","getColor","colorlike","strokeStyleColor","strokeStyleLineCap","getLineCap","strokeStyleLineDash","getLineDash","lineDash","strokeStyleLineDashOffset","getLineDashOffset","strokeStyleLineJoin","getLineJoin","strokeStyleWidth","getWidth","strokeStyleMiterLimit","getMiterLimit","createFill","applyStroke","createStroke","updateFillStyle","currentFillStyle","updateStrokeStyle","currentStrokeStyle","currentLineCap","currentLineDash","currentLineDashOffset","currentLineJoin","currentLineWidth","currentMiterLimit","endGeometryInstruction","render_VectorContext","Replay","ImageReplay_CanvasImageReplay","CanvasImageReplay","declutterGroup_","hitDetectionImage_","image_","anchorX_","anchorY_","height_","opacity_","originX_","originY_","rotateWithView_","rotation_","scale_","width_","drawCoordinates_","drawPoint","pointGeometry","myBegin","drawMultiPoint","multiPointGeometry","setImageStyle","imageStyle","anchor","getAnchor","size","getSize","hitDetectionImage","getHitDetectionImage","getOrigin","getOpacity","getRotateWithView","getRotation","getScale","ImageReplay","LineStringReplay_CanvasLineStringReplay","CanvasLineStringReplay","drawFlatCoordinates_","moveToLineToInstruction","drawLineString","lineStringGeometry","drawMultiLineString","multiLineStringGeometry","lastStroke","LineStringReplay","PolygonReplay_CanvasPolygonReplay","CanvasPolygonReplay","drawFlatCoordinatess_","numEnds","drawCircle","circleGeometry","setFillStrokeStyles_","color","circleInstruction","drawPolygon","polygonGeometry","drawMultiPolygon","multiPolygonGeometry","simplify","PolygonReplay","TextReplay_CanvasTextReplay","CanvasTextReplay","labels_","text_","textOffsetX_","textOffsetY_","textRotateWithView_","textRotation_","textFillState_","fillStates","textStrokeState_","strokeStates","textState_","textKey_","fillKey_","strokeKey_","widths_","prune","drawText","fillState","strokeState","textState","geometryType","placement","TextPlacement","LINE","flatEnd","flatOffset","o","oo","range","straightchunk","drawChars_","getFlatMidpoint","getCenter","getFlatMidpoints","getFlatInteriorPoint","interiorPoints","getFlatInteriorPoints","drawTextImage_","key","containsKey","align","lines","split","numLines","widths","measureTextWidths","font","lineHeight","renderWidth","dom","ceil","textBaseline","leftRight","strokeText","fillText","p","setTextStyle","textStyle","textFillStyle","getFill","textStrokeStyle","getStroke","getFont","getOverflow","getMaxAngle","getPlacement","getTextAlign","getTextBaseline","getBackgroundFill","getBackgroundStroke","getPadding","textOffsetX","getOffsetX","textOffsetY","getOffsetY","textRotateWithView","textRotation","getText","join","currentWidth","max","TextReplay","replayDeclutter","BATCH_CONSTRUCTORS","Circle","Default","Image","LineString","Polygon","Text","ReplayGroup_CanvasReplayGroup","ReplayGroup","CanvasReplayGroup","opt_renderBuffer","declutterTree_","tolerance_","maxExtent_","overlaps_","pixelRatio_","resolution_","renderBuffer_","replaysByZIndex_","hitDetectionContext_","hitDetectionTransform_","declutter","clip","flatClipCoords","getClipCoords","hasReplays","replays","candidates","zKey","replayKey","forEachFeatureAtCoordinate","coordinate","hitTolerance","callback","declutterReplays","hitExtent","contextSize","clearRect","declutteredFeatures","mask","getCircleArray","imageData","getImageData","data","ReplayType","TEXT","indexOf","all","entry","zs","keys","Number","sort","zIndexKey","toString","Constructor","getReplays","opt_replayTypes","opt_declutterReplays","save","replayTypes","restore","circleArrayCache","0","fillCircleArrayRowToMiddle","radius","floor","arraySize","arr","Array","error","skippedFeatureUids","z","zz","replayData","RADIUS","HALF_SIZE","EXTENT","WORLD_EXTENT","epsg3857_EPSG3857Projection","Projection","EPSG3857Projection","code","units","Units","METERS","global","worldExtent","getPointResolution","point","math","proj_Projection","PROJECTIONS","fromEPSG4326","input","opt_output","opt_dimension","dimension","output","halfSize","log","tan","epsg3857_toEPSG4326","atan","exp","epsg4326_RADIUS","epsg4326_EXTENT","METERS_PER_UNIT","epsg4326_EPSG4326Projection","EPSG4326Projection","opt_axisOrientation","DEGREES","axisOrientation","metersPerUnit","epsg4326_PROJECTIONS","cache","add","projection","transforms","transforms_add","destination","transformFn","sourceCode","getCode","destinationCode","transforms_get","cloneTransform","identityTransform","addProjection","addProjections","projections","forEach","proj_get","projectionLike","opt_units","pointResolution","getter","getPointResolutionFunc","getUnits","toEPSG4326","getTransformFromProjections","vertices","sphere","getMetersPerUnit","addEquivalentProjections","addEquivalentTransforms","projections1","projections2","forwardTransform","inverseTransform","projection1","projection2","createProjection","defaultCode","fromLonLat","opt_projection","proj_transform","toLonLat","lonLat","lon","equivalent","equalUnits","transformFunc","sourceProjection","destinationProjection","getTransform","addCommon","_events_Event_js__WEBPACK_IMPORTED_MODULE_0__","RenderEvent","Event","opt_vectorContext","opt_frameState","opt_context","opt_glContext","vectorContext","glContext","assign","clear","getValues","target","var_sources","arguments$1","arguments","TypeError","hasOwnProperty","object","property","values","Property","ACTIVE","Interaction_Interaction","BaseObject","Interaction","handleEvent","map_","setActive","getActive","getMap","mapBrowserEvent","active","ol_Object","pan","view","delta","opt_duration","currentCenter","center","constrainCenter","animate","duration","easing","setCenter","opt_anchor","constrainRotation","rotateWithoutConstraints","currentRotation","zoom","opt_direction","constrainResolution","zoomWithoutConstraints","zoomByDelta","currentResolution","getResolution","resolutions","getResolutions","getMinResolution","getMaxResolution","calculateCenterZoom","setResolution","interaction_Interaction","DoubleClickZoom","opt_options","DoubleClickZoom_handleEvent","delta_","duration_","stopEvent","MapBrowserEventType","DBLCLICK","browserEvent","shiftKey","getView","preventDefault","interaction_DoubleClickZoom","Pointer_PointerInteraction","PointerInteraction","handleDownEvent","handleDragEvent","handleMoveEvent","handleUpEvent","stopDown","handlingDownUpSequence","trackedPointers_","targetPointers","updateTrackedPointers_","POINTERDRAG","POINTERUP","handledUp","POINTERDOWN","handled","POINTERMOVE","isPointerDraggingEvent","event","pointerEvent","id","pointerId","Pointer_centroid","pointerEvents","clientX","clientY","Pointer","DragPan_DragPan","DragPan","functions","kinetic_","kinetic","lastCentroid","lastPointersCount_","panning_","condition_","condition","events_condition","noKinetic_","setHint","ViewHint","INTERACTING","centroid","update","deltaX","deltaY","distance","getDistance","angle","getAngle","centerpx","getPixelFromCoordinate","dest","getCoordinateFromPixel","cos","sin","getAnimating","viewState","interaction_DragPan","DragRotate_DragRotate","DragRotate","lastAngle_","getConstraints","rotationconstraint","pixel","theta","atan2","interaction_DragRotate","Box_RenderBox","Disposable","RenderBox","className","geometry_","element_","document","createElement","style","position","startPixel_","endPixel_","disposeInternal","render_","startPixel","endPixel","px","left","min","top","abs","getOverlayContainer","removeChild","appendChild","setPixels","createOrUpdateGeometry","pixels","setCoordinates","ol_Disposable","Box","DragBoxEventType","BOXSTART","BOXDRAG","BOXEND","DragBoxEvent","DragBox_DragBox","DragBox","box_","minArea_","minArea","onBoxEnd_","onBoxEnd","boxEndCondition_","boxEndCondition","defaultBoxEndCondition","dispatchEvent","interaction_DragBox","DragZoom_DragZoom","DragZoom","out_","out","mapExtent","calculateExtent","boxPixelExtent","factor","getResolutionForExtent","interaction_DragZoom","KeyboardPan_KeyboardPan","KeyboardPan","KeyboardPan_handleEvent","defaultCondition_","pixelDelta_","pixelDelta","EventType","KEYDOWN","keyEvent","keyCode","KeyCode","DOWN","LEFT","RIGHT","UP","mapUnitsDelta","interaction_KeyboardPan","KeyboardZoom_KeyboardZoom","KeyboardZoom","KeyboardZoom_handleEvent","KEYPRESS","charCode","charCodeAt","interaction_KeyboardZoom","MAX_DELTA","Mode","TRACKPAD","WHEEL","MouseWheelZoom_MouseWheelZoom","MouseWheelZoom","timeout_","timeout","useAnchor_","useAnchor","constrainResolution_","lastAnchor_","startTime_","timeoutId_","mode_","trackpadEventGap_","trackpadTimeoutId_","trackpadDeltaPerZoom_","trackpadZoomBuffer_","decrementInteractingHint_","MOUSEWHEEL","wheelEvent","deltaMode","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","wheelDeltaY","now","Date","clearTimeout","setTimeout","bind","pow","rebound","timeLeft","handleWheelZoom_","cancelAnimations","maxDelta","setMouseAnchor","interaction_MouseWheelZoom","PinchRotate_PinchRotate","PinchRotate","pointerOptions","anchor_","rotating_","rotationDelta_","threshold_","threshold","rotationDelta","touch0","touch1","viewportPosition","getViewport","getBoundingClientRect","interaction_PinchRotate","PinchZoom_PinchZoom","PinchZoom","lastDistance_","lastScaleDelta_","scaleDelta","newResolution","direction","interaction_PinchZoom","defaults","interactions","Collection","Kinetic","altShiftDragRotate","doubleClickZoom","zoomDelta","zoomDuration","dragPan","onFocusOnly","pinchRotate","pinchZoom","keyboard","mouseWheelZoom","shiftDragZoom","_LayerType_js__WEBPACK_IMPORTED_MODULE_0__","_Layer_js__WEBPACK_IMPORTED_MODULE_1__","_VectorRenderType_js__WEBPACK_IMPORTED_MODULE_2__","_obj_js__WEBPACK_IMPORTED_MODULE_3__","_style_Style_js__WEBPACK_IMPORTED_MODULE_4__","RENDER_ORDER","VectorLayer","renderBuffer","updateWhileAnimating","updateWhileInteracting","declutter_","style_","styleFunction_","setStyle","updateWhileAnimating_","updateWhileInteracting_","renderMode_","renderMode","getDeclutter","setDeclutter","getRenderBuffer","getRenderOrder","getStyle","getStyleFunction","getUpdateWhileAnimating","getUpdateWhileInteracting","setRenderOrder","renderOrder","getRenderMode","_Object_js__WEBPACK_IMPORTED_MODULE_1__","_dom_js__WEBPACK_IMPORTED_MODULE_2__","_Vector_js__WEBPACK_IMPORTED_MODULE_3__","_math_js__WEBPACK_IMPORTED_MODULE_4__","_obj_js__WEBPACK_IMPORTED_MODULE_5__","_render_EventType_js__WEBPACK_IMPORTED_MODULE_6__","_style_Icon_js__WEBPACK_IMPORTED_MODULE_7__","_style_Style_js__WEBPACK_IMPORTED_MODULE_8__","BLUR","GRADIENT","DEFAULT_GRADIENT","Heatmap","gradient","blur","shadow","weight","gradient_","shadow_","circleImage_","styleCache_","handleGradientChanged_","setGradient","setBlur","setRadius","handleStyleChanged_","weightFunction","index","src","handleRender_","createCircle_","getRadius","getBlur","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","toDataURL","getGradient","createGradient","view8","alpha","putImageData","colors","createLinearGradient","step","addColorStop","fillRect","_TileProperty_js__WEBPACK_IMPORTED_MODULE_2__","TileLayer","preload","useInterimTilesOnError","setPreload","setUseInterimTilesOnError","TILE","getPreload","PRELOAD","getUseInterimTilesOnError","USE_INTERIM_TILES_ON_ERROR","_util_js__WEBPACK_IMPORTED_MODULE_0__","_Property_js__WEBPACK_IMPORTED_MODULE_2__","_math_js__WEBPACK_IMPORTED_MODULE_3__","_obj_js__WEBPACK_IMPORTED_MODULE_4__","properties","OPACITY","VISIBLE","Z_INDEX","MAX_RESOLUTION","MIN_RESOLUTION","setProperties","state_","layer","sourceState","getVisible","setExtent","setMaxResolution","setMinResolution","setOpacity","setVisible","setZIndex","zindex","FIREFOX","SAFARI","WEBKIT","MAC","DEVICE_PIXEL_RATIO","CANVAS_LINE_DASH","TOUCH","POINTER","MSPOINTER","ua","navigator","userAgent","toLowerCase","window","devicePixelRatio","getContext","e","clamp","cosh","squaredSegmentDistance","squaredDistance","solveLinearSystem","toDegrees","toRadians","modulo","lerp","t","mat","maxRow","maxEl","absValue","tmp","coef","k","l","m","angleInRadians","angleInDegrees","a","b","_asserts_js__WEBPACK_IMPORTED_MODULE_1__","_VectorTileRenderType_js__WEBPACK_IMPORTED_MODULE_4__","VectorTileLayer","VECTOR_TILE","ORDER","TEXT_ALIGN","_ReplayType_js__WEBPACK_IMPORTED_MODULE_0__","DEFAULT","right","start","middle","hanging","alphabetic","ideographic","bottom","_Collection_js__WEBPACK_IMPORTED_MODULE_1__","_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_2__","_ObjectEventType_js__WEBPACK_IMPORTED_MODULE_4__","_asserts_js__WEBPACK_IMPORTED_MODULE_5__","_events_js__WEBPACK_IMPORTED_MODULE_6__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_7__","_extent_js__WEBPACK_IMPORTED_MODULE_8__","_Base_js__WEBPACK_IMPORTED_MODULE_9__","_obj_js__WEBPACK_IMPORTED_MODULE_10__","_source_State_js__WEBPACK_IMPORTED_MODULE_11__","LAYERS","LayerGroup","layers","layersListenerKeys_","listenerKeys_","handleLayersChanged_","isArray","unique","getArray","setLayers","handleLayerChange_","getLayers","ADD","handleLayersAdd_","REMOVE","handleLayersRemove_","layersArray","PROPERTYCHANGE","collectionEvent","pos","ownLayerState","READY","EventSource_EventSource","dispatcher","mapping","mapping_","getEvents","getHandlerForEvent","eventType","pointer_EventSource","POINTER_ID","POINTER_TYPE","DEDUP_DIST","mousedown","inEvent","isEventSimulatedFromTouch_","pointerMap","cancel","prepareEvent","down","mousemove","move","mouseup","button","up","cleanupMouse","mouseover","enterOver","mouseout","leaveOut","MouseSource","EventSource","lastTouches","lts","cloneEvent","pd","isPrimary","pointerType","pointer_MouseSource","POINTER_TYPES","msPointerDown","prepareEvent_","msPointerMove","msPointerUp","cleanup","msPointerOut","msPointerOver","msPointerCancel","msLostPointerCapture","makeEvent","msGotPointerCapture","MsSource","MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture","pointer_MsSource","pointerDown","fireNativeEvent","pointerMove","pointerUp","pointerOut","pointerOver","pointerCancel","lostPointerCapture","gotPointerCapture","NativeSource","pointerdown","pointermove","pointerup","pointerout","pointerover","pointercancel","gotpointercapture","lostpointercapture","pointer_NativeSource","HAS_BUTTONS","PointerEvent","_Event","originalEvent","opt_eventDict","eventDict","buttons","getButtons","pressure","getPressure","bubbles","cancelable","detail","screenX","screenY","ctrlKey","altKey","metaKey","relatedTarget","tiltX","tiltY","hwTimestamp","which","ev","MouseEvent","pointer_PointerEvent","CLICK_COUNT_TIMEOUT","TouchSource_POINTER_TYPE","touchstart","vacuumTouches_","setPrimaryTouch_","changedTouches","dedupSynthMouse_","clickCount_","processTouches_","overDown_","touchmove","moveOverOut_","touchend","upOut_","touchcancel","cancelOut_","TouchSource_TouchSource","TouchSource","mouseSource","firstTouchId_","resetId_","dedupTimeout_","isPrimaryTouch_","inTouch","identifier","count","cancelResetClickCount_","removePrimaryPointer_","inPointer","resetClickCount_","resetClickCountHandler_","touchToPointer_","radiusX","radiusY","force","inFunction","touches","pointer","findTouch_","touchList","searchId","touch","i$1","outTarget","over","enter","outEvent","leave","cleanUpPointer_","lt","pointer_TouchSource","CLONE_PROPS","PointerEventHandler_PointerEventHandler","EventTarget","PointerEventHandler","element","eventMap_","eventSourceList_","registerSources","registerSource","register_","name","s","newEvents","handler","eventSource","addEvents_","unregister_","removeEvents_","eventHandler_","events","eventName","ol_events","eventCopy","fireEvent","POINTERENTER","POINTERLEAVE","POINTEROVER","POINTEROUT","POINTERCANCEL","contains_","container","contained","contains","inType","wrapMouseEvent","Target","ImageLayer","_array_js__WEBPACK_IMPORTED_MODULE_0__","_colorlike_js__WEBPACK_IMPORTED_MODULE_1__","_extent_js__WEBPACK_IMPORTED_MODULE_2__","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_3__","_geom_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_4__","_geom_flat_transform_js__WEBPACK_IMPORTED_MODULE_5__","_has_js__WEBPACK_IMPORTED_MODULE_6__","_VectorContext_js__WEBPACK_IMPORTED_MODULE_7__","_canvas_js__WEBPACK_IMPORTED_MODULE_8__","_transform_js__WEBPACK_IMPORTED_MODULE_9__","CanvasImmediateRenderer","context_","extent_","transform_","contextFillState_","contextStrokeState_","contextTextState_","fillState_","strokeState_","imageAnchorX_","imageAnchorY_","imageHeight_","imageOpacity_","imageOriginX_","imageOriginY_","imageRotateWithView_","imageRotation_","imageScale_","imageWidth_","textScale_","tmpLocalTransform_","drawImages_","localTransform","globalAlpha","drawImage","drawText_","setContextFillState_","setContextStrokeState_","setContextTextState_","moveToLineTo_","close","drawRings_","drawGeometry","GEOMETRY_COLLECTION","drawGeometryCollection","drawFeature","getGeometryFunction","geometries","getGeometriesArray","flatMidpoint","geometryExtent","flatMidpoints","flatInteriorPoint","flatInteriorPoints","contextFillState","contextStrokeState","contextTextState","imageAnchor","imageImage","imageOrigin","imageSize","textFillStyleColor","textStrokeStyleColor","textStrokeStyleLineCap","textStrokeStyleLineDash","textStrokeStyleLineDashOffset","textStrokeStyleLineJoin","textStrokeStyleWidth","textStrokeStyleMiterLimit","textFont","textText","textTextAlign","textTextBaseline","defaultFont","defaultFillStyle","defaultLineCap","defaultLineDash","defaultLineDashOffset","defaultLineJoin","defaultMiterLimit","defaultStrokeStyle","defaultTextAlign","defaultTextBaseline","defaultPadding","defaultLineWidth","labelCache","checkFont","measureTextHeight","measureTextWidth","rotateAtOffset","resetTransform","_css_js__WEBPACK_IMPORTED_MODULE_0__","_dom_js__WEBPACK_IMPORTED_MODULE_1__","_obj_js__WEBPACK_IMPORTED_MODULE_2__","_structs_LRUCache_js__WEBPACK_IMPORTED_MODULE_3__","_transform_js__WEBPACK_IMPORTED_MODULE_4__","checkedFonts","measureContext","textHeights","interval","referenceWidth","retries","checked","referenceFonts","len","isAvailable","getMeasureContext","fontWeight","available","referenceFont","measureText","check","done","clearInterval","fontSpec","fontFamilies","fontFamily","setInterval","span","heights","textContent","margin","body","offsetHeight","offsetX","jsonp","url","opt_errback","opt_callbackParam","script","parentNode","async","timer","getElementsByTagName","_Units_js__WEBPACK_IMPORTED_MODULE_0__","code_","units_","worldExtent_","axisOrientation_","global_","canWrapX_","getPointResolutionFunc_","defaultTileGrid_","metersPerUnit_","canWrapX","getWorldExtent","getAxisOrientation","isGlobal","setGlobal","getDefaultTileGrid","setDefaultTileGrid","tileGrid","setWorldExtent","setGetPointResolution","func","geometryCollectionGeometry","opt_declutterGroup","FEET","PIXELS","TILE_PIXELS","USFEET"],"mappings":"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","file":"js/chunk-883379e6.07e61a3f.js","sourcesContent":["/**\n * @module ol/layer/VectorRenderType\n */\n\n/**\n * @enum {string}\n * Render mode for vector layers:\n *  * `'image'`: Vector layers are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'vector'`: Vector layers are rendered as vectors. Most accurate rendering\n *    even during animations, but slower performance.\n * @api\n */\nexport default {\n  IMAGE: 'image',\n  VECTOR: 'vector'\n};\n\n//# sourceMappingURL=VectorRenderType.js.map","/**\n * @module ol/render/EventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * @event module:ol/render/Event~RenderEvent#postcompose\n   * @api\n   */\n  POSTCOMPOSE: 'postcompose',\n  /**\n   * @event module:ol/render/Event~RenderEvent#precompose\n   * @api\n   */\n  PRECOMPOSE: 'precompose',\n  /**\n   * @event module:ol/render/Event~RenderEvent#render\n   * @api\n   */\n  RENDER: 'render',\n  /**\n   * Triggered when rendering is complete, i.e. all sources and tiles have\n   * finished loading for the current viewport, and all tiles are faded in.\n   * @event module:ol/render/Event~RenderEvent#rendercomplete\n   * @api\n   */\n  RENDERCOMPLETE: 'rendercomplete'\n};\n\n//# sourceMappingURL=EventType.js.map","/**\n * @module ol/layer/VectorTileRenderType\n */\n\n/**\n * @enum {string}\n * Render mode for vector tiles:\n *  * `'image'`: Vector tiles are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'hybrid'`: Polygon and line elements are rendered as images, so pixels\n *    are scaled during zoom animations. Point symbols and texts are accurately\n *    rendered as vectors and can stay upright on rotated views.\n *  * `'vector'`: Vector tiles are rendered as vectors. Most accurate rendering\n *    even during animations, but slower performance than the other options.\n * @api\n */\nexport default {\n  IMAGE: 'image',\n  HYBRID: 'hybrid',\n  VECTOR: 'vector'\n};\n\n//# sourceMappingURL=VectorTileRenderType.js.map","/**\n * @module ol/layer/Layer\n */\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getUid} from '../util.js';\nimport {getChangeEventType} from '../Object.js';\nimport BaseLayer from './Base.js';\nimport LayerProperty from './Property.js';\nimport {assign} from '../obj.js';\nimport RenderEventType from '../render/EventType.js';\nimport SourceState from '../source/State.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../source/Source.js\").default} [source] Source for this layer.  If not provided to the constructor,\n * the source can be set by calling {@link module:ol/layer/Layer#setSource layer.setSource(source)} after\n * construction.\n * @property {import(\"../PluggableMap.js\").default} [map] Map.\n */\n\n\n/**\n * @typedef {Object} State\n * @property {import(\"./Base.js\").default} layer\n * @property {number} opacity\n * @property {SourceState} sourceState\n * @property {boolean} visible\n * @property {boolean} managed\n * @property {import(\"../extent.js\").Extent} [extent]\n * @property {number} zIndex\n * @property {number} maxResolution\n * @property {number} minResolution\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * A visual representation of raster or vector map data.\n * Layers group together those properties that pertain to how the data is to be\n * displayed, irrespective of the source of that data.\n *\n * Layers are usually added to a map with {@link module:ol/Map#addLayer}. Components\n * like {@link module:ol/interaction/Select~Select} use unmanaged layers\n * internally. These unmanaged layers are associated with the map using\n * {@link module:ol/layer/Layer~Layer#setMap} instead.\n *\n * A generic `change` event is fired when the state of the source changes.\n *\n * @fires import(\"../render/Event.js\").RenderEvent\n */\nvar Layer = /*@__PURE__*/(function (BaseLayer) {\n  function Layer(options) {\n\n    var baseOptions = assign({}, options);\n    delete baseOptions.source;\n\n    BaseLayer.call(this, baseOptions);\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.mapPrecomposeKey_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.mapRenderKey_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.sourceChangeKey_ = null;\n\n    if (options.map) {\n      this.setMap(options.map);\n    }\n\n    listen(this,\n      getChangeEventType(LayerProperty.SOURCE),\n      this.handleSourcePropertyChange_, this);\n\n    var source = options.source ? options.source : null;\n    this.setSource(source);\n  }\n\n  if ( BaseLayer ) Layer.__proto__ = BaseLayer;\n  Layer.prototype = Object.create( BaseLayer && BaseLayer.prototype );\n  Layer.prototype.constructor = Layer;\n\n  /**\n   * @inheritDoc\n   */\n  Layer.prototype.getLayersArray = function getLayersArray (opt_array) {\n    var array = opt_array ? opt_array : [];\n    array.push(this);\n    return array;\n  };\n\n  /**\n   * @inheritDoc\n   */\n  Layer.prototype.getLayerStatesArray = function getLayerStatesArray (opt_states) {\n    var states = opt_states ? opt_states : [];\n    states.push(this.getLayerState());\n    return states;\n  };\n\n  /**\n   * Get the layer source.\n   * @return {import(\"../source/Source.js\").default} The layer source (or `null` if not yet set).\n   * @observable\n   * @api\n   */\n  Layer.prototype.getSource = function getSource () {\n    var source = this.get(LayerProperty.SOURCE);\n    return (\n      /** @type {import(\"../source/Source.js\").default} */ (source) || null\n    );\n  };\n\n  /**\n    * @inheritDoc\n    */\n  Layer.prototype.getSourceState = function getSourceState () {\n    var source = this.getSource();\n    return !source ? SourceState.UNDEFINED : source.getState();\n  };\n\n  /**\n   * @private\n   */\n  Layer.prototype.handleSourceChange_ = function handleSourceChange_ () {\n    this.changed();\n  };\n\n  /**\n   * @private\n   */\n  Layer.prototype.handleSourcePropertyChange_ = function handleSourcePropertyChange_ () {\n    if (this.sourceChangeKey_) {\n      unlistenByKey(this.sourceChangeKey_);\n      this.sourceChangeKey_ = null;\n    }\n    var source = this.getSource();\n    if (source) {\n      this.sourceChangeKey_ = listen(source,\n        EventType.CHANGE, this.handleSourceChange_, this);\n    }\n    this.changed();\n  };\n\n  /**\n   * Sets the layer to be rendered on top of other layers on a map. The map will\n   * not manage this layer in its layers collection, and the callback in\n   * {@link module:ol/Map#forEachLayerAtPixel} will receive `null` as layer. This\n   * is useful for temporary layers. To remove an unmanaged layer from the map,\n   * use `#setMap(null)`.\n   *\n   * To add the layer to a map and have it managed by the map, use\n   * {@link module:ol/Map#addLayer} instead.\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   * @api\n   */\n  Layer.prototype.setMap = function setMap (map) {\n    if (this.mapPrecomposeKey_) {\n      unlistenByKey(this.mapPrecomposeKey_);\n      this.mapPrecomposeKey_ = null;\n    }\n    if (!map) {\n      this.changed();\n    }\n    if (this.mapRenderKey_) {\n      unlistenByKey(this.mapRenderKey_);\n      this.mapRenderKey_ = null;\n    }\n    if (map) {\n      this.mapPrecomposeKey_ = listen(map, RenderEventType.PRECOMPOSE, function(evt) {\n        var renderEvent = /** @type {import(\"../render/Event.js\").default} */ (evt);\n        var layerState = this.getLayerState();\n        layerState.managed = false;\n        if (this.getZIndex() === undefined) {\n          layerState.zIndex = Infinity;\n        }\n        renderEvent.frameState.layerStatesArray.push(layerState);\n        renderEvent.frameState.layerStates[getUid(this)] = layerState;\n      }, this);\n      this.mapRenderKey_ = listen(this, EventType.CHANGE, map.render, map);\n      this.changed();\n    }\n  };\n\n  /**\n   * Set the layer source.\n   * @param {import(\"../source/Source.js\").default} source The layer source.\n   * @observable\n   * @api\n   */\n  Layer.prototype.setSource = function setSource (source) {\n    this.set(LayerProperty.SOURCE, source);\n  };\n\n  return Layer;\n}(BaseLayer));\n\n\n/**\n * Return `true` if the layer is visible, and if the passed resolution is\n * between the layer's minResolution and maxResolution. The comparison is\n * inclusive for `minResolution` and exclusive for `maxResolution`.\n * @param {State} layerState Layer state.\n * @param {number} resolution Resolution.\n * @return {boolean} The layer is visible at the given resolution.\n */\nexport function visibleAtResolution(layerState, resolution) {\n  return layerState.visible && resolution >= layerState.minResolution &&\n      resolution < layerState.maxResolution;\n}\n\n\nexport default Layer;\n\n//# sourceMappingURL=Layer.js.map","/**\n * @module ol/render/ReplayGroup\n */\nimport {abstract} from '../util.js';\n\n/**\n * Base class for replay groups.\n */\nvar ReplayGroup = function ReplayGroup () {};\n\nReplayGroup.prototype.getReplay = function getReplay (zIndex, replayType) {\n  return abstract();\n};\n\n/**\n * @abstract\n * @return {boolean} Is empty.\n */\nReplayGroup.prototype.isEmpty = function isEmpty () {\n  return abstract();\n};\n\n/**\n * @abstract\n * @param {boolean} group Group with previous replay\n * @return {Array<*>} The resulting instruction group\n */\nReplayGroup.prototype.addDeclutter = function addDeclutter (group) {\n  return abstract();\n};\n\nexport default ReplayGroup;\n\n//# sourceMappingURL=ReplayGroup.js.map","/**\n * @module ol/render/canvas/Instruction\n */\n\n/**\n * @enum {number}\n */\nvar Instruction = {\n  BEGIN_GEOMETRY: 0,\n  BEGIN_PATH: 1,\n  CIRCLE: 2,\n  CLOSE_PATH: 3,\n  CUSTOM: 4,\n  DRAW_CHARS: 5,\n  DRAW_IMAGE: 6,\n  END_GEOMETRY: 7,\n  FILL: 8,\n  MOVE_TO_LINE_TO: 9,\n  SET_FILL_STYLE: 10,\n  SET_STROKE_STYLE: 11,\n  STROKE: 12\n};\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport var fillInstruction = [Instruction.FILL];\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport var strokeInstruction = [Instruction.STROKE];\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport var beginPathInstruction = [Instruction.BEGIN_PATH];\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport var closePathInstruction = [Instruction.CLOSE_PATH];\n\n\nexport default Instruction;\n\n//# sourceMappingURL=Instruction.js.map","/**\n * @module ol/render/canvas/Replay\n */\nimport {getUid} from '../../util.js';\nimport {equals, reverseSubArray} from '../../array.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {buffer, clone, coordinateRelationship, createEmpty, createOrUpdate,\n  createOrUpdateEmpty, extend, extendCoordinate, intersects} from '../../extent.js';\nimport Relationship from '../../extent/Relationship.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {inflateCoordinates, inflateCoordinatesArray, inflateMultiCoordinatesArray} from '../../geom/flat/inflate.js';\nimport {lineStringLength} from '../../geom/flat/length.js';\nimport {drawTextOnPath} from '../../geom/flat/textpath.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {CANVAS_LINE_DASH} from '../../has.js';\nimport {isEmpty} from '../../obj.js';\nimport VectorContext from '../VectorContext.js';\nimport {drawImage, resetTransform, defaultPadding, defaultFillStyle, defaultStrokeStyle,\n  defaultMiterLimit, defaultLineWidth, defaultLineJoin, defaultLineDashOffset,\n  defaultLineDash, defaultLineCap} from '../canvas.js';\nimport CanvasInstruction from './Instruction.js';\nimport {TEXT_ALIGN} from '../replay.js';\nimport {\n  create as createTransform,\n  compose as composeTransform,\n  apply as applyTransform,\n  setFromArray as transformSetFromArray\n} from '../../transform.js';\n\n\n/**\n * @type {import(\"../../extent.js\").Extent}\n */\nvar tmpExtent = createEmpty();\n\n\n/**\n * @type {!import(\"../../transform.js\").Transform}\n */\nvar tmpTransform = createTransform();\n\n\nvar CanvasReplay = /*@__PURE__*/(function (VectorContext) {\n  function CanvasReplay(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    VectorContext.call(this);\n\n    /**\n     * @type {?}\n     */\n    this.declutterTree = declutterTree;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.tolerance = tolerance;\n\n    /**\n     * @protected\n     * @const\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.maxExtent = maxExtent;\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.overlaps = overlaps;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.pixelRatio = pixelRatio;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.maxLineWidth = 0;\n\n    /**\n     * @protected\n     * @const\n     * @type {number}\n     */\n    this.resolution = resolution;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.alignFill_;\n\n    /**\n     * @private\n     * @type {Array<*>}\n     */\n    this.beginGeometryInstruction1_ = null;\n\n    /**\n     * @private\n     * @type {Array<*>}\n     */\n    this.beginGeometryInstruction2_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.bufferedMaxExtent_ = null;\n\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n    this.instructions = [];\n\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n    this.coordinates = [];\n\n    /**\n     * @private\n     * @type {!Object<number,import(\"../../coordinate.js\").Coordinate|Array<import(\"../../coordinate.js\").Coordinate>|Array<Array<import(\"../../coordinate.js\").Coordinate>>>}\n     */\n    this.coordinateCache_ = {};\n\n    /**\n     * @private\n     * @type {!import(\"../../transform.js\").Transform}\n     */\n    this.renderedTransform_ = createTransform();\n\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n    this.hitDetectionInstructions = [];\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.pixelCoordinates_ = null;\n\n    /**\n     * @protected\n     * @type {import(\"../canvas.js\").FillStrokeState}\n     */\n    this.state = /** @type {import(\"../canvas.js\").FillStrokeState} */ ({});\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.viewRotation_ = 0;\n\n  }\n\n  if ( VectorContext ) CanvasReplay.__proto__ = VectorContext;\n  CanvasReplay.prototype = Object.create( VectorContext && VectorContext.prototype );\n  CanvasReplay.prototype.constructor = CanvasReplay;\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../coordinate.js\").Coordinate} p1 1st point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p2 2nd point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p3 3rd point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p4 4th point of the background box.\n   * @param {Array<*>} fillInstruction Fill instruction.\n   * @param {Array<*>} strokeInstruction Stroke instruction.\n   */\n  CanvasReplay.prototype.replayTextBackground_ = function replayTextBackground_ (context, p1, p2, p3, p4, fillInstruction, strokeInstruction) {\n    context.beginPath();\n    context.moveTo.apply(context, p1);\n    context.lineTo.apply(context, p2);\n    context.lineTo.apply(context, p3);\n    context.lineTo.apply(context, p4);\n    context.lineTo.apply(context, p1);\n    if (fillInstruction) {\n      this.alignFill_ = /** @type {boolean} */ (fillInstruction[2]);\n      this.fill_(context);\n    }\n    if (strokeInstruction) {\n      this.setStrokeStyle_(context, /** @type {Array<*>} */ (strokeInstruction));\n      context.stroke();\n    }\n  };\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image Image.\n   * @param {number} anchorX Anchor X.\n   * @param {number} anchorY Anchor Y.\n   * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n   * @param {number} height Height.\n   * @param {number} opacity Opacity.\n   * @param {number} originX Origin X.\n   * @param {number} originY Origin Y.\n   * @param {number} rotation Rotation.\n   * @param {number} scale Scale.\n   * @param {boolean} snapToPixel Snap to pixel.\n   * @param {number} width Width.\n   * @param {Array<number>} padding Padding.\n   * @param {Array<*>} fillInstruction Fill instruction.\n   * @param {Array<*>} strokeInstruction Stroke instruction.\n   */\n  CanvasReplay.prototype.replayImage_ = function replayImage_ (\n    context,\n    x,\n    y,\n    image,\n    anchorX,\n    anchorY,\n    declutterGroup,\n    height,\n    opacity,\n    originX,\n    originY,\n    rotation,\n    scale,\n    snapToPixel,\n    width,\n    padding,\n    fillInstruction,\n    strokeInstruction\n  ) {\n    var fillStroke = fillInstruction || strokeInstruction;\n    anchorX *= scale;\n    anchorY *= scale;\n    x -= anchorX;\n    y -= anchorY;\n\n    var w = (width + originX > image.width) ? image.width - originX : width;\n    var h = (height + originY > image.height) ? image.height - originY : height;\n    var boxW = padding[3] + w * scale + padding[1];\n    var boxH = padding[0] + h * scale + padding[2];\n    var boxX = x - padding[3];\n    var boxY = y - padding[0];\n\n    /** @type {import(\"../../coordinate.js\").Coordinate} */\n    var p1;\n    /** @type {import(\"../../coordinate.js\").Coordinate} */\n    var p2;\n    /** @type {import(\"../../coordinate.js\").Coordinate} */\n    var p3;\n    /** @type {import(\"../../coordinate.js\").Coordinate} */\n    var p4;\n    if (fillStroke || rotation !== 0) {\n      p1 = [boxX, boxY];\n      p2 = [boxX + boxW, boxY];\n      p3 = [boxX + boxW, boxY + boxH];\n      p4 = [boxX, boxY + boxH];\n    }\n\n    var transform = null;\n    if (rotation !== 0) {\n      var centerX = x + anchorX;\n      var centerY = y + anchorY;\n      transform = composeTransform(tmpTransform, centerX, centerY, 1, 1, rotation, -centerX, -centerY);\n\n      createOrUpdateEmpty(tmpExtent);\n      extendCoordinate(tmpExtent, applyTransform(tmpTransform, p1));\n      extendCoordinate(tmpExtent, applyTransform(tmpTransform, p2));\n      extendCoordinate(tmpExtent, applyTransform(tmpTransform, p3));\n      extendCoordinate(tmpExtent, applyTransform(tmpTransform, p4));\n    } else {\n      createOrUpdate(boxX, boxY, boxX + boxW, boxY + boxH, tmpExtent);\n    }\n    var canvas = context.canvas;\n    var strokePadding = strokeInstruction ? (strokeInstruction[2] * scale / 2) : 0;\n    var intersects =\n        tmpExtent[0] - strokePadding <= canvas.width && tmpExtent[2] + strokePadding >= 0 &&\n        tmpExtent[1] - strokePadding <= canvas.height && tmpExtent[3] + strokePadding >= 0;\n\n    if (snapToPixel) {\n      x = Math.round(x);\n      y = Math.round(y);\n    }\n\n    if (declutterGroup) {\n      if (!intersects && declutterGroup[4] == 1) {\n        return;\n      }\n      extend(declutterGroup, tmpExtent);\n      var declutterArgs = intersects ?\n        [context, transform ? transform.slice(0) : null, opacity, image, originX, originY, w, h, x, y, scale] :\n        null;\n      if (declutterArgs && fillStroke) {\n        declutterArgs.push(fillInstruction, strokeInstruction, p1, p2, p3, p4);\n      }\n      declutterGroup.push(declutterArgs);\n    } else if (intersects) {\n      if (fillStroke) {\n        this.replayTextBackground_(context, p1, p2, p3, p4,\n          /** @type {Array<*>} */ (fillInstruction),\n          /** @type {Array<*>} */ (strokeInstruction));\n      }\n      drawImage(context, transform, opacity, image, originX, originY, w, h, x, y, scale);\n    }\n  };\n\n  /**\n   * @protected\n   * @param {Array<number>} dashArray Dash array.\n   * @return {Array<number>} Dash array with pixel ratio applied\n   */\n  CanvasReplay.prototype.applyPixelRatio = function applyPixelRatio (dashArray) {\n    var pixelRatio = this.pixelRatio;\n    return pixelRatio == 1 ? dashArray : dashArray.map(function(dash) {\n      return dash * pixelRatio;\n    });\n  };\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @param {boolean} closed Last input coordinate equals first.\n   * @param {boolean} skipFirst Skip first coordinate.\n   * @protected\n   * @return {number} My end.\n   */\n  CanvasReplay.prototype.appendFlatCoordinates = function appendFlatCoordinates (flatCoordinates, offset, end, stride, closed, skipFirst) {\n\n    var myEnd = this.coordinates.length;\n    var extent = this.getBufferedMaxExtent();\n    if (skipFirst) {\n      offset += stride;\n    }\n    var lastCoord = [flatCoordinates[offset], flatCoordinates[offset + 1]];\n    var nextCoord = [NaN, NaN];\n    var skipped = true;\n\n    var i, lastRel, nextRel;\n    for (i = offset + stride; i < end; i += stride) {\n      nextCoord[0] = flatCoordinates[i];\n      nextCoord[1] = flatCoordinates[i + 1];\n      nextRel = coordinateRelationship(extent, nextCoord);\n      if (nextRel !== lastRel) {\n        if (skipped) {\n          this.coordinates[myEnd++] = lastCoord[0];\n          this.coordinates[myEnd++] = lastCoord[1];\n        }\n        this.coordinates[myEnd++] = nextCoord[0];\n        this.coordinates[myEnd++] = nextCoord[1];\n        skipped = false;\n      } else if (nextRel === Relationship.INTERSECTING) {\n        this.coordinates[myEnd++] = nextCoord[0];\n        this.coordinates[myEnd++] = nextCoord[1];\n        skipped = false;\n      } else {\n        skipped = true;\n      }\n      lastCoord[0] = nextCoord[0];\n      lastCoord[1] = nextCoord[1];\n      lastRel = nextRel;\n    }\n\n    // Last coordinate equals first or only one point to append:\n    if ((closed && skipped) || i === offset + stride) {\n      this.coordinates[myEnd++] = lastCoord[0];\n      this.coordinates[myEnd++] = lastCoord[1];\n    }\n    return myEnd;\n  };\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @param {Array<number>} replayEnds Replay ends.\n   * @return {number} Offset.\n   */\n  CanvasReplay.prototype.drawCustomCoordinates_ = function drawCustomCoordinates_ (flatCoordinates, offset, ends, stride, replayEnds) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n      var end = ends[i];\n      var replayEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n      replayEnds.push(replayEnd);\n      offset = end;\n    }\n    return offset;\n  };\n\n  /**\n   * @inheritDoc.\n   */\n  CanvasReplay.prototype.drawCustom = function drawCustom (geometry, feature, renderer) {\n    this.beginGeometry(geometry, feature);\n    var type = geometry.getType();\n    var stride = geometry.getStride();\n    var replayBegin = this.coordinates.length;\n    var flatCoordinates, replayEnd, replayEnds, replayEndss;\n    var offset;\n    if (type == GeometryType.MULTI_POLYGON) {\n      geometry = /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry);\n      flatCoordinates = geometry.getOrientedFlatCoordinates();\n      replayEndss = [];\n      var endss = geometry.getEndss();\n      offset = 0;\n      for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var myEnds = [];\n        offset = this.drawCustomCoordinates_(flatCoordinates, offset, endss[i], stride, myEnds);\n        replayEndss.push(myEnds);\n      }\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        replayBegin, replayEndss, geometry, renderer, inflateMultiCoordinatesArray]);\n    } else if (type == GeometryType.POLYGON || type == GeometryType.MULTI_LINE_STRING) {\n      replayEnds = [];\n      flatCoordinates = (type == GeometryType.POLYGON) ?\n        /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry).getOrientedFlatCoordinates() :\n        geometry.getFlatCoordinates();\n      offset = this.drawCustomCoordinates_(flatCoordinates, 0,\n        /** @type {import(\"../../geom/Polygon.js\").default|import(\"../../geom/MultiLineString.js\").default} */ (geometry).getEnds(),\n        stride, replayEnds);\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        replayBegin, replayEnds, geometry, renderer, inflateCoordinatesArray]);\n    } else if (type == GeometryType.LINE_STRING || type == GeometryType.MULTI_POINT) {\n      flatCoordinates = geometry.getFlatCoordinates();\n      replayEnd = this.appendFlatCoordinates(\n        flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        replayBegin, replayEnd, geometry, renderer, inflateCoordinates]);\n    } else if (type == GeometryType.POINT) {\n      flatCoordinates = geometry.getFlatCoordinates();\n      this.coordinates.push(flatCoordinates[0], flatCoordinates[1]);\n      replayEnd = this.coordinates.length;\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        replayBegin, replayEnd, geometry, renderer]);\n    }\n    this.endGeometry(geometry, feature);\n  };\n\n  /**\n   * @protected\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   * @param {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} feature Feature.\n   */\n  CanvasReplay.prototype.beginGeometry = function beginGeometry (geometry, feature) {\n    this.beginGeometryInstruction1_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0];\n    this.instructions.push(this.beginGeometryInstruction1_);\n    this.beginGeometryInstruction2_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0];\n    this.hitDetectionInstructions.push(this.beginGeometryInstruction2_);\n  };\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  CanvasReplay.prototype.finish = function finish () {};\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   */\n  CanvasReplay.prototype.fill_ = function fill_ (context) {\n    if (this.alignFill_) {\n      var origin = applyTransform(this.renderedTransform_, [0, 0]);\n      var repeatSize = 512 * this.pixelRatio;\n      context.translate(origin[0] % repeatSize, origin[1] % repeatSize);\n      context.rotate(this.viewRotation_);\n    }\n    context.fill();\n    if (this.alignFill_) {\n      context.setTransform.apply(context, resetTransform);\n    }\n  };\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {Array<*>} instruction Instruction.\n   */\n  CanvasReplay.prototype.setStrokeStyle_ = function setStrokeStyle_ (context, instruction) {\n    context.strokeStyle = /** @type {import(\"../../colorlike.js\").ColorLike} */ (instruction[1]);\n    context.lineWidth = /** @type {number} */ (instruction[2]);\n    context.lineCap = /** @type {CanvasLineCap} */ (instruction[3]);\n    context.lineJoin = /** @type {CanvasLineJoin} */ (instruction[4]);\n    context.miterLimit = /** @type {number} */ (instruction[5]);\n    if (CANVAS_LINE_DASH) {\n      context.lineDashOffset = /** @type {number} */ (instruction[7]);\n      context.setLineDash(/** @type {Array<number>} */ (instruction[6]));\n    }\n  };\n\n  /**\n   * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n   * @param {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} feature Feature.\n   */\n  CanvasReplay.prototype.renderDeclutter_ = function renderDeclutter_ (declutterGroup, feature) {\n    if (declutterGroup && declutterGroup.length > 5) {\n      var groupCount = declutterGroup[4];\n      if (groupCount == 1 || groupCount == declutterGroup.length - 5) {\n        /** @type {import(\"../../structs/RBush.js\").Entry} */\n        var box = {\n          minX: /** @type {number} */ (declutterGroup[0]),\n          minY: /** @type {number} */ (declutterGroup[1]),\n          maxX: /** @type {number} */ (declutterGroup[2]),\n          maxY: /** @type {number} */ (declutterGroup[3]),\n          value: feature\n        };\n        if (!this.declutterTree.collides(box)) {\n          this.declutterTree.insert(box);\n          for (var j = 5, jj = declutterGroup.length; j < jj; ++j) {\n            var declutterData = /** @type {Array} */ (declutterGroup[j]);\n            if (declutterData) {\n              if (declutterData.length > 11) {\n                this.replayTextBackground_(declutterData[0],\n                  declutterData[13], declutterData[14], declutterData[15], declutterData[16],\n                  declutterData[11], declutterData[12]);\n              }\n              drawImage.apply(undefined, declutterData);\n            }\n          }\n        }\n        declutterGroup.length = 5;\n        createOrUpdateEmpty(declutterGroup);\n      }\n    }\n  };\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features\n   *     to skip.\n   * @param {Array<*>} instructions Instructions array.\n   * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n   * @param {function((import(\"../../Feature.js\").default|import(\"../Feature.js\").default)): T|undefined} featureCallback Feature callback.\n   * @param {import(\"../../extent.js\").Extent=} opt_hitExtent Only check features that intersect this\n   *     extent.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  CanvasReplay.prototype.replay_ = function replay_ (\n    context,\n    transform,\n    skippedFeaturesHash,\n    instructions,\n    snapToPixel,\n    featureCallback,\n    opt_hitExtent\n  ) {\n    /** @type {Array<number>} */\n    var pixelCoordinates;\n    if (this.pixelCoordinates_ && equals(transform, this.renderedTransform_)) {\n      pixelCoordinates = this.pixelCoordinates_;\n    } else {\n      if (!this.pixelCoordinates_) {\n        this.pixelCoordinates_ = [];\n      }\n      pixelCoordinates = transform2D(\n        this.coordinates, 0, this.coordinates.length, 2,\n        transform, this.pixelCoordinates_);\n      transformSetFromArray(this.renderedTransform_, transform);\n    }\n    var skipFeatures = !isEmpty(skippedFeaturesHash);\n    var i = 0; // instruction index\n    var ii = instructions.length; // end of instructions\n    var d = 0; // data index\n    var dd; // end of per-instruction data\n    var anchorX, anchorY, prevX, prevY, roundX, roundY, declutterGroup, image;\n    var pendingFill = 0;\n    var pendingStroke = 0;\n    var lastFillInstruction = null;\n    var lastStrokeInstruction = null;\n    var coordinateCache = this.coordinateCache_;\n    var viewRotation = this.viewRotation_;\n\n    var state = /** @type {import(\"../../render.js\").State} */ ({\n      context: context,\n      pixelRatio: this.pixelRatio,\n      resolution: this.resolution,\n      rotation: viewRotation\n    });\n\n    // When the batch size gets too big, performance decreases. 200 is a good\n    // balance between batch size and number of fill/stroke instructions.\n    var batchSize = this.instructions != instructions || this.overlaps ? 0 : 200;\n    var /** @type {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} */ feature;\n    var x, y;\n    while (i < ii) {\n      var instruction = instructions[i];\n      var type = /** @type {CanvasInstruction} */ (instruction[0]);\n      switch (type) {\n        case CanvasInstruction.BEGIN_GEOMETRY:\n          feature = /** @type {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} */ (instruction[1]);\n          if ((skipFeatures && skippedFeaturesHash[getUid(feature)]) || !feature.getGeometry()) {\n            i = /** @type {number} */ (instruction[2]);\n          } else if (opt_hitExtent !== undefined && !intersects(\n            opt_hitExtent, feature.getGeometry().getExtent())) {\n            i = /** @type {number} */ (instruction[2]) + 1;\n          } else {\n            ++i;\n          }\n          break;\n        case CanvasInstruction.BEGIN_PATH:\n          if (pendingFill > batchSize) {\n            this.fill_(context);\n            pendingFill = 0;\n          }\n          if (pendingStroke > batchSize) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n          if (!pendingFill && !pendingStroke) {\n            context.beginPath();\n            prevX = prevY = NaN;\n          }\n          ++i;\n          break;\n        case CanvasInstruction.CIRCLE:\n          d = /** @type {number} */ (instruction[1]);\n          var x1 = pixelCoordinates[d];\n          var y1 = pixelCoordinates[d + 1];\n          var x2 = pixelCoordinates[d + 2];\n          var y2 = pixelCoordinates[d + 3];\n          var dx = x2 - x1;\n          var dy = y2 - y1;\n          var r = Math.sqrt(dx * dx + dy * dy);\n          context.moveTo(x1 + r, y1);\n          context.arc(x1, y1, r, 0, 2 * Math.PI, true);\n          ++i;\n          break;\n        case CanvasInstruction.CLOSE_PATH:\n          context.closePath();\n          ++i;\n          break;\n        case CanvasInstruction.CUSTOM:\n          d = /** @type {number} */ (instruction[1]);\n          dd = instruction[2];\n          var geometry = /** @type {import(\"../../geom/SimpleGeometry.js\").default} */ (instruction[3]);\n          var renderer = instruction[4];\n          var fn = instruction.length == 6 ? instruction[5] : undefined;\n          state.geometry = geometry;\n          state.feature = feature;\n          if (!(i in coordinateCache)) {\n            coordinateCache[i] = [];\n          }\n          var coords = coordinateCache[i];\n          if (fn) {\n            fn(pixelCoordinates, d, dd, 2, coords);\n          } else {\n            coords[0] = pixelCoordinates[d];\n            coords[1] = pixelCoordinates[d + 1];\n            coords.length = 2;\n          }\n          renderer(coords, state);\n          ++i;\n          break;\n        case CanvasInstruction.DRAW_IMAGE:\n          d = /** @type {number} */ (instruction[1]);\n          dd = /** @type {number} */ (instruction[2]);\n          image = /** @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} */\n              (instruction[3]);\n          // Remaining arguments in DRAW_IMAGE are in alphabetical order\n          anchorX = /** @type {number} */ (instruction[4]);\n          anchorY = /** @type {number} */ (instruction[5]);\n          declutterGroup = featureCallback ? null : /** @type {import(\"../canvas.js\").DeclutterGroup} */ (instruction[6]);\n          var height = /** @type {number} */ (instruction[7]);\n          var opacity = /** @type {number} */ (instruction[8]);\n          var originX = /** @type {number} */ (instruction[9]);\n          var originY = /** @type {number} */ (instruction[10]);\n          var rotateWithView = /** @type {boolean} */ (instruction[11]);\n          var rotation = /** @type {number} */ (instruction[12]);\n          var scale = /** @type {number} */ (instruction[13]);\n          var width = /** @type {number} */ (instruction[14]);\n\n          var padding = (void 0), backgroundFill = (void 0), backgroundStroke = (void 0);\n          if (instruction.length > 16) {\n            padding = /** @type {Array<number>} */ (instruction[15]);\n            backgroundFill = /** @type {boolean} */ (instruction[16]);\n            backgroundStroke = /** @type {boolean} */ (instruction[17]);\n          } else {\n            padding = defaultPadding;\n            backgroundFill = backgroundStroke = false;\n          }\n\n          if (rotateWithView) {\n            rotation += viewRotation;\n          }\n          for (; d < dd; d += 2) {\n            this.replayImage_(context,\n              pixelCoordinates[d], pixelCoordinates[d + 1], image, anchorX, anchorY,\n              declutterGroup, height, opacity, originX, originY, rotation, scale,\n              snapToPixel, width, padding,\n              backgroundFill ? /** @type {Array<*>} */ (lastFillInstruction) : null,\n              backgroundStroke ? /** @type {Array<*>} */ (lastStrokeInstruction) : null);\n          }\n          this.renderDeclutter_(declutterGroup, feature);\n          ++i;\n          break;\n        case CanvasInstruction.DRAW_CHARS:\n          var begin = /** @type {number} */ (instruction[1]);\n          var end = /** @type {number} */ (instruction[2]);\n          var baseline = /** @type {number} */ (instruction[3]);\n          declutterGroup = featureCallback ? null : /** @type {import(\"../canvas.js\").DeclutterGroup} */ (instruction[4]);\n          var overflow = /** @type {number} */ (instruction[5]);\n          var fillKey = /** @type {string} */ (instruction[6]);\n          var maxAngle = /** @type {number} */ (instruction[7]);\n          var measure = /** @type {function(string):number} */ (instruction[8]);\n          var offsetY = /** @type {number} */ (instruction[9]);\n          var strokeKey = /** @type {string} */ (instruction[10]);\n          var strokeWidth = /** @type {number} */ (instruction[11]);\n          var text = /** @type {string} */ (instruction[12]);\n          var textKey = /** @type {string} */ (instruction[13]);\n          var textScale = /** @type {number} */ (instruction[14]);\n\n          var pathLength = lineStringLength(pixelCoordinates, begin, end, 2);\n          var textLength = measure(text);\n          if (overflow || textLength <= pathLength) {\n            /** @type {import(\"./TextReplay.js\").default} */\n            var textReplay = /** @type {?} */ (this);\n            var textAlign = textReplay.textStates[textKey].textAlign;\n            var startM = (pathLength - textLength) * TEXT_ALIGN[textAlign];\n            var parts = drawTextOnPath(\n              pixelCoordinates, begin, end, 2, text, measure, startM, maxAngle);\n            if (parts) {\n              var c = (void 0), cc = (void 0), chars = (void 0), label = (void 0), part = (void 0);\n              if (strokeKey) {\n                for (c = 0, cc = parts.length; c < cc; ++c) {\n                  part = parts[c]; // x, y, anchorX, rotation, chunk\n                  chars = /** @type {string} */ (part[4]);\n                  label = textReplay.getImage(chars, textKey, '', strokeKey);\n                  anchorX = /** @type {number} */ (part[2]) + strokeWidth;\n                  anchorY = baseline * label.height + (0.5 - baseline) * 2 * strokeWidth - offsetY;\n                  this.replayImage_(context,\n                    /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label,\n                    anchorX, anchorY, declutterGroup, label.height, 1, 0, 0,\n                    /** @type {number} */ (part[3]), textScale, false, label.width,\n                    defaultPadding, null, null);\n                }\n              }\n              if (fillKey) {\n                for (c = 0, cc = parts.length; c < cc; ++c) {\n                  part = parts[c]; // x, y, anchorX, rotation, chunk\n                  chars = /** @type {string} */ (part[4]);\n                  label = textReplay.getImage(chars, textKey, fillKey, '');\n                  anchorX = /** @type {number} */ (part[2]);\n                  anchorY = baseline * label.height - offsetY;\n                  this.replayImage_(context,\n                    /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label,\n                    anchorX, anchorY, declutterGroup, label.height, 1, 0, 0,\n                    /** @type {number} */ (part[3]), textScale, false, label.width,\n                    defaultPadding, null, null);\n                }\n              }\n            }\n          }\n          this.renderDeclutter_(declutterGroup, feature);\n          ++i;\n          break;\n        case CanvasInstruction.END_GEOMETRY:\n          if (featureCallback !== undefined) {\n            feature = /** @type {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} */ (instruction[1]);\n            var result = featureCallback(feature);\n            if (result) {\n              return result;\n            }\n          }\n          ++i;\n          break;\n        case CanvasInstruction.FILL:\n          if (batchSize) {\n            pendingFill++;\n          } else {\n            this.fill_(context);\n          }\n          ++i;\n          break;\n        case CanvasInstruction.MOVE_TO_LINE_TO:\n          d = /** @type {number} */ (instruction[1]);\n          dd = /** @type {number} */ (instruction[2]);\n          x = pixelCoordinates[d];\n          y = pixelCoordinates[d + 1];\n          roundX = (x + 0.5) | 0;\n          roundY = (y + 0.5) | 0;\n          if (roundX !== prevX || roundY !== prevY) {\n            context.moveTo(x, y);\n            prevX = roundX;\n            prevY = roundY;\n          }\n          for (d += 2; d < dd; d += 2) {\n            x = pixelCoordinates[d];\n            y = pixelCoordinates[d + 1];\n            roundX = (x + 0.5) | 0;\n            roundY = (y + 0.5) | 0;\n            if (d == dd - 2 || roundX !== prevX || roundY !== prevY) {\n              context.lineTo(x, y);\n              prevX = roundX;\n              prevY = roundY;\n            }\n          }\n          ++i;\n          break;\n        case CanvasInstruction.SET_FILL_STYLE:\n          lastFillInstruction = instruction;\n          this.alignFill_ = instruction[2];\n\n          if (pendingFill) {\n            this.fill_(context);\n            pendingFill = 0;\n            if (pendingStroke) {\n              context.stroke();\n              pendingStroke = 0;\n            }\n          }\n\n          context.fillStyle = /** @type {import(\"../../colorlike.js\").ColorLike} */ (instruction[1]);\n          ++i;\n          break;\n        case CanvasInstruction.SET_STROKE_STYLE:\n          lastStrokeInstruction = instruction;\n          if (pendingStroke) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n          this.setStrokeStyle_(context, /** @type {Array<*>} */ (instruction));\n          ++i;\n          break;\n        case CanvasInstruction.STROKE:\n          if (batchSize) {\n            pendingStroke++;\n          } else {\n            context.stroke();\n          }\n          ++i;\n          break;\n        default:\n          ++i; // consume the instruction anyway, to avoid an infinite loop\n          break;\n      }\n    }\n    if (pendingFill) {\n      this.fill_(context);\n    }\n    if (pendingStroke) {\n      context.stroke();\n    }\n    return undefined;\n  };\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features\n   *     to skip.\n   * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n   */\n  CanvasReplay.prototype.replay = function replay (context, transform, viewRotation, skippedFeaturesHash, snapToPixel) {\n    this.viewRotation_ = viewRotation;\n    this.replay_(context, transform,\n      skippedFeaturesHash, this.instructions, snapToPixel, undefined, undefined);\n  };\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features\n   *     to skip.\n   * @param {function((import(\"../../Feature.js\").default|import(\"../Feature.js\").default)): T=} opt_featureCallback\n   *     Feature callback.\n   * @param {import(\"../../extent.js\").Extent=} opt_hitExtent Only check features that intersect this\n   *     extent.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  CanvasReplay.prototype.replayHitDetection = function replayHitDetection (\n    context,\n    transform,\n    viewRotation,\n    skippedFeaturesHash,\n    opt_featureCallback,\n    opt_hitExtent\n  ) {\n    this.viewRotation_ = viewRotation;\n    return this.replay_(context, transform, skippedFeaturesHash,\n      this.hitDetectionInstructions, true, opt_featureCallback, opt_hitExtent);\n  };\n\n  /**\n   * Reverse the hit detection instructions.\n   */\n  CanvasReplay.prototype.reverseHitDetectionInstructions = function reverseHitDetectionInstructions () {\n    var hitDetectionInstructions = this.hitDetectionInstructions;\n    // step 1 - reverse array\n    hitDetectionInstructions.reverse();\n    // step 2 - reverse instructions within geometry blocks\n    var i;\n    var n = hitDetectionInstructions.length;\n    var instruction;\n    var type;\n    var begin = -1;\n    for (i = 0; i < n; ++i) {\n      instruction = hitDetectionInstructions[i];\n      type = /** @type {CanvasInstruction} */ (instruction[0]);\n      if (type == CanvasInstruction.END_GEOMETRY) {\n        begin = i;\n      } else if (type == CanvasInstruction.BEGIN_GEOMETRY) {\n        instruction[2] = i;\n        reverseSubArray(this.hitDetectionInstructions, begin, i);\n        begin = -1;\n      }\n    }\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasReplay.prototype.setFillStrokeStyle = function setFillStrokeStyle (fillStyle, strokeStyle) {\n    var state = this.state;\n    if (fillStyle) {\n      var fillStyleColor = fillStyle.getColor();\n      state.fillStyle = asColorLike(fillStyleColor ?\n        fillStyleColor : defaultFillStyle);\n    } else {\n      state.fillStyle = undefined;\n    }\n    if (strokeStyle) {\n      var strokeStyleColor = strokeStyle.getColor();\n      state.strokeStyle = asColorLike(strokeStyleColor ?\n        strokeStyleColor : defaultStrokeStyle);\n      var strokeStyleLineCap = strokeStyle.getLineCap();\n      state.lineCap = strokeStyleLineCap !== undefined ?\n        strokeStyleLineCap : defaultLineCap;\n      var strokeStyleLineDash = strokeStyle.getLineDash();\n      state.lineDash = strokeStyleLineDash ?\n        strokeStyleLineDash.slice() : defaultLineDash;\n      var strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n      state.lineDashOffset = strokeStyleLineDashOffset ?\n        strokeStyleLineDashOffset : defaultLineDashOffset;\n      var strokeStyleLineJoin = strokeStyle.getLineJoin();\n      state.lineJoin = strokeStyleLineJoin !== undefined ?\n        strokeStyleLineJoin : defaultLineJoin;\n      var strokeStyleWidth = strokeStyle.getWidth();\n      state.lineWidth = strokeStyleWidth !== undefined ?\n        strokeStyleWidth : defaultLineWidth;\n      var strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n      state.miterLimit = strokeStyleMiterLimit !== undefined ?\n        strokeStyleMiterLimit : defaultMiterLimit;\n\n      if (state.lineWidth > this.maxLineWidth) {\n        this.maxLineWidth = state.lineWidth;\n        // invalidate the buffered max extent cache\n        this.bufferedMaxExtent_ = null;\n      }\n    } else {\n      state.strokeStyle = undefined;\n      state.lineCap = undefined;\n      state.lineDash = null;\n      state.lineDashOffset = undefined;\n      state.lineJoin = undefined;\n      state.lineWidth = undefined;\n      state.miterLimit = undefined;\n    }\n  };\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   * @return {Array<*>} Fill instruction.\n   */\n  CanvasReplay.prototype.createFill = function createFill (state, geometry) {\n    var fillStyle = state.fillStyle;\n    /** @type {Array<*>} */\n    var fillInstruction = [CanvasInstruction.SET_FILL_STYLE, fillStyle];\n    if (typeof fillStyle !== 'string') {\n      // Fill is a pattern or gradient - align it!\n      fillInstruction.push(true);\n    }\n    return fillInstruction;\n  };\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   */\n  CanvasReplay.prototype.applyStroke = function applyStroke (state) {\n    this.instructions.push(this.createStroke(state));\n  };\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @return {Array<*>} Stroke instruction.\n   */\n  CanvasReplay.prototype.createStroke = function createStroke (state) {\n    return [\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth * this.pixelRatio, state.lineCap,\n      state.lineJoin, state.miterLimit,\n      this.applyPixelRatio(state.lineDash), state.lineDashOffset * this.pixelRatio\n    ];\n  };\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @param {function(this:CanvasReplay, import(\"../canvas.js\").FillStrokeState, (import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default)):Array<*>} createFill Create fill.\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   */\n  CanvasReplay.prototype.updateFillStyle = function updateFillStyle (state, createFill, geometry) {\n    var fillStyle = state.fillStyle;\n    if (typeof fillStyle !== 'string' || state.currentFillStyle != fillStyle) {\n      if (fillStyle !== undefined) {\n        this.instructions.push(createFill.call(this, state, geometry));\n      }\n      state.currentFillStyle = fillStyle;\n    }\n  };\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @param {function(this:CanvasReplay, import(\"../canvas.js\").FillStrokeState)} applyStroke Apply stroke.\n   */\n  CanvasReplay.prototype.updateStrokeStyle = function updateStrokeStyle (state, applyStroke) {\n    var strokeStyle = state.strokeStyle;\n    var lineCap = state.lineCap;\n    var lineDash = state.lineDash;\n    var lineDashOffset = state.lineDashOffset;\n    var lineJoin = state.lineJoin;\n    var lineWidth = state.lineWidth;\n    var miterLimit = state.miterLimit;\n    if (state.currentStrokeStyle != strokeStyle ||\n        state.currentLineCap != lineCap ||\n        (lineDash != state.currentLineDash && !equals(state.currentLineDash, lineDash)) ||\n        state.currentLineDashOffset != lineDashOffset ||\n        state.currentLineJoin != lineJoin ||\n        state.currentLineWidth != lineWidth ||\n        state.currentMiterLimit != miterLimit) {\n      if (strokeStyle !== undefined) {\n        applyStroke.call(this, state);\n      }\n      state.currentStrokeStyle = strokeStyle;\n      state.currentLineCap = lineCap;\n      state.currentLineDash = lineDash;\n      state.currentLineDashOffset = lineDashOffset;\n      state.currentLineJoin = lineJoin;\n      state.currentLineWidth = lineWidth;\n      state.currentMiterLimit = miterLimit;\n    }\n  };\n\n  /**\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   * @param {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} feature Feature.\n   */\n  CanvasReplay.prototype.endGeometry = function endGeometry (geometry, feature) {\n    this.beginGeometryInstruction1_[2] = this.instructions.length;\n    this.beginGeometryInstruction1_ = null;\n    this.beginGeometryInstruction2_[2] = this.hitDetectionInstructions.length;\n    this.beginGeometryInstruction2_ = null;\n    var endGeometryInstruction = [CanvasInstruction.END_GEOMETRY, feature];\n    this.instructions.push(endGeometryInstruction);\n    this.hitDetectionInstructions.push(endGeometryInstruction);\n  };\n\n  /**\n   * Get the buffered rendering extent.  Rendering will be clipped to the extent\n   * provided to the constructor.  To account for symbolizers that may intersect\n   * this extent, we calculate a buffered extent (e.g. based on stroke width).\n   * @return {import(\"../../extent.js\").Extent} The buffered rendering extent.\n   * @protected\n   */\n  CanvasReplay.prototype.getBufferedMaxExtent = function getBufferedMaxExtent () {\n    if (!this.bufferedMaxExtent_) {\n      this.bufferedMaxExtent_ = clone(this.maxExtent);\n      if (this.maxLineWidth > 0) {\n        var width = this.resolution * (this.maxLineWidth + 1) / 2;\n        buffer(this.bufferedMaxExtent_, width, this.bufferedMaxExtent_);\n      }\n    }\n    return this.bufferedMaxExtent_;\n  };\n\n  return CanvasReplay;\n}(VectorContext));\n\n\nexport default CanvasReplay;\n\n//# sourceMappingURL=Replay.js.map","/**\n * @module ol/render/canvas/ImageReplay\n */\nimport CanvasInstruction from './Instruction.js';\nimport CanvasReplay from './Replay.js';\n\nvar CanvasImageReplay = /*@__PURE__*/(function (CanvasReplay) {\n  function CanvasImageReplay(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    CanvasReplay.call(this, tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n\n    /**\n     * @private\n     * @type {import(\"../canvas.js\").DeclutterGroup}\n     */\n    this.declutterGroup_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.hitDetectionImage_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.anchorX_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.anchorY_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.height_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.opacity_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.originX_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.originY_ = undefined;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.rotateWithView_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.scale_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.width_ = undefined;\n\n  }\n\n  if ( CanvasReplay ) CanvasImageReplay.__proto__ = CanvasReplay;\n  CanvasImageReplay.prototype = Object.create( CanvasReplay && CanvasReplay.prototype );\n  CanvasImageReplay.prototype.constructor = CanvasImageReplay;\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} My end.\n   */\n  CanvasImageReplay.prototype.drawCoordinates_ = function drawCoordinates_ (flatCoordinates, offset, end, stride) {\n    return this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasImageReplay.prototype.drawPoint = function drawPoint (pointGeometry, feature) {\n    if (!this.image_) {\n      return;\n    }\n    this.beginGeometry(pointGeometry, feature);\n    var flatCoordinates = pointGeometry.getFlatCoordinates();\n    var stride = pointGeometry.getStride();\n    var myBegin = this.coordinates.length;\n    var myEnd = this.drawCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n    this.instructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_ * this.pixelRatio, this.width_\n    ]);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_, this.width_\n    ]);\n    this.endGeometry(pointGeometry, feature);\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasImageReplay.prototype.drawMultiPoint = function drawMultiPoint (multiPointGeometry, feature) {\n    if (!this.image_) {\n      return;\n    }\n    this.beginGeometry(multiPointGeometry, feature);\n    var flatCoordinates = multiPointGeometry.getFlatCoordinates();\n    var stride = multiPointGeometry.getStride();\n    var myBegin = this.coordinates.length;\n    var myEnd = this.drawCoordinates_(\n      flatCoordinates, 0, flatCoordinates.length, stride);\n    this.instructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_ * this.pixelRatio, this.width_\n    ]);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_, this.width_\n    ]);\n    this.endGeometry(multiPointGeometry, feature);\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasImageReplay.prototype.finish = function finish () {\n    this.reverseHitDetectionInstructions();\n    // FIXME this doesn't really protect us against further calls to draw*Geometry\n    this.anchorX_ = undefined;\n    this.anchorY_ = undefined;\n    this.hitDetectionImage_ = null;\n    this.image_ = null;\n    this.height_ = undefined;\n    this.scale_ = undefined;\n    this.opacity_ = undefined;\n    this.originX_ = undefined;\n    this.originY_ = undefined;\n    this.rotateWithView_ = undefined;\n    this.rotation_ = undefined;\n    this.width_ = undefined;\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasImageReplay.prototype.setImageStyle = function setImageStyle (imageStyle, declutterGroup) {\n    var anchor = imageStyle.getAnchor();\n    var size = imageStyle.getSize();\n    var hitDetectionImage = imageStyle.getHitDetectionImage(1);\n    var image = imageStyle.getImage(1);\n    var origin = imageStyle.getOrigin();\n    this.anchorX_ = anchor[0];\n    this.anchorY_ = anchor[1];\n    this.declutterGroup_ = /** @type {import(\"../canvas.js\").DeclutterGroup} */ (declutterGroup);\n    this.hitDetectionImage_ = hitDetectionImage;\n    this.image_ = image;\n    this.height_ = size[1];\n    this.opacity_ = imageStyle.getOpacity();\n    this.originX_ = origin[0];\n    this.originY_ = origin[1];\n    this.rotateWithView_ = imageStyle.getRotateWithView();\n    this.rotation_ = imageStyle.getRotation();\n    this.scale_ = imageStyle.getScale();\n    this.width_ = size[0];\n  };\n\n  return CanvasImageReplay;\n}(CanvasReplay));\n\n\nexport default CanvasImageReplay;\n\n//# sourceMappingURL=ImageReplay.js.map","/**\n * @module ol/render/canvas/LineStringReplay\n */\nimport CanvasInstruction, {strokeInstruction, beginPathInstruction} from './Instruction.js';\nimport CanvasReplay from './Replay.js';\n\nvar CanvasLineStringReplay = /*@__PURE__*/(function (CanvasReplay) {\n  function CanvasLineStringReplay(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    CanvasReplay.call(this, tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n  }\n\n  if ( CanvasReplay ) CanvasLineStringReplay.__proto__ = CanvasReplay;\n  CanvasLineStringReplay.prototype = Object.create( CanvasReplay && CanvasReplay.prototype );\n  CanvasLineStringReplay.prototype.constructor = CanvasLineStringReplay;\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} end.\n   */\n  CanvasLineStringReplay.prototype.drawFlatCoordinates_ = function drawFlatCoordinates_ (flatCoordinates, offset, end, stride) {\n    var myBegin = this.coordinates.length;\n    var myEnd = this.appendFlatCoordinates(\n      flatCoordinates, offset, end, stride, false, false);\n    var moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n    this.instructions.push(moveToLineToInstruction);\n    this.hitDetectionInstructions.push(moveToLineToInstruction);\n    return end;\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasLineStringReplay.prototype.drawLineString = function drawLineString (lineStringGeometry, feature) {\n    var state = this.state;\n    var strokeStyle = state.strokeStyle;\n    var lineWidth = state.lineWidth;\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(lineStringGeometry, feature);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n      state.miterLimit, state.lineDash, state.lineDashOffset\n    ], beginPathInstruction);\n    var flatCoordinates = lineStringGeometry.getFlatCoordinates();\n    var stride = lineStringGeometry.getStride();\n    this.drawFlatCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(lineStringGeometry, feature);\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasLineStringReplay.prototype.drawMultiLineString = function drawMultiLineString (multiLineStringGeometry, feature) {\n    var state = this.state;\n    var strokeStyle = state.strokeStyle;\n    var lineWidth = state.lineWidth;\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(multiLineStringGeometry, feature);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n      state.miterLimit, state.lineDash, state.lineDashOffset\n    ], beginPathInstruction);\n    var ends = multiLineStringGeometry.getEnds();\n    var flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\n    var stride = multiLineStringGeometry.getStride();\n    var offset = 0;\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinates_(flatCoordinates, offset, ends[i], stride);\n    }\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(multiLineStringGeometry, feature);\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasLineStringReplay.prototype.finish = function finish () {\n    var state = this.state;\n    if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n      this.instructions.push(strokeInstruction);\n    }\n    this.reverseHitDetectionInstructions();\n    this.state = null;\n  };\n\n  /**\n   * @inheritDoc.\n   */\n  CanvasLineStringReplay.prototype.applyStroke = function applyStroke (state) {\n    if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n      this.instructions.push(strokeInstruction);\n      state.lastStroke = this.coordinates.length;\n    }\n    state.lastStroke = 0;\n    CanvasReplay.prototype.applyStroke.call(this, state);\n    this.instructions.push(beginPathInstruction);\n  };\n\n  return CanvasLineStringReplay;\n}(CanvasReplay));\n\n\nexport default CanvasLineStringReplay;\n\n//# sourceMappingURL=LineStringReplay.js.map","/**\n * @module ol/render/canvas/PolygonReplay\n */\nimport {asString} from '../../color.js';\nimport {snap} from '../../geom/flat/simplify.js';\nimport {defaultFillStyle} from '../canvas.js';\nimport CanvasInstruction, {\n  fillInstruction, strokeInstruction, beginPathInstruction, closePathInstruction\n} from './Instruction.js';\nimport CanvasReplay from './Replay.js';\n\n\nvar CanvasPolygonReplay = /*@__PURE__*/(function (CanvasReplay) {\n  function CanvasPolygonReplay(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    CanvasReplay.call(this, tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n  }\n\n  if ( CanvasReplay ) CanvasPolygonReplay.__proto__ = CanvasReplay;\n  CanvasPolygonReplay.prototype = Object.create( CanvasReplay && CanvasReplay.prototype );\n  CanvasPolygonReplay.prototype.constructor = CanvasPolygonReplay;\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} End.\n   */\n  CanvasPolygonReplay.prototype.drawFlatCoordinatess_ = function drawFlatCoordinatess_ (flatCoordinates, offset, ends, stride) {\n    var state = this.state;\n    var fill = state.fillStyle !== undefined;\n    var stroke = state.strokeStyle != undefined;\n    var numEnds = ends.length;\n    this.instructions.push(beginPathInstruction);\n    this.hitDetectionInstructions.push(beginPathInstruction);\n    for (var i = 0; i < numEnds; ++i) {\n      var end = ends[i];\n      var myBegin = this.coordinates.length;\n      var myEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, true, !stroke);\n      var moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n      this.instructions.push(moveToLineToInstruction);\n      this.hitDetectionInstructions.push(moveToLineToInstruction);\n      if (stroke) {\n        // Performance optimization: only call closePath() when we have a stroke.\n        // Otherwise the ring is closed already (see appendFlatCoordinates above).\n        this.instructions.push(closePathInstruction);\n        this.hitDetectionInstructions.push(closePathInstruction);\n      }\n      offset = end;\n    }\n    if (fill) {\n      this.instructions.push(fillInstruction);\n      this.hitDetectionInstructions.push(fillInstruction);\n    }\n    if (stroke) {\n      this.instructions.push(strokeInstruction);\n      this.hitDetectionInstructions.push(strokeInstruction);\n    }\n    return offset;\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasPolygonReplay.prototype.drawCircle = function drawCircle (circleGeometry, feature) {\n    var state = this.state;\n    var fillStyle = state.fillStyle;\n    var strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_(circleGeometry);\n    this.beginGeometry(circleGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        asString(defaultFillStyle)\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n        state.miterLimit, state.lineDash, state.lineDashOffset\n      ]);\n    }\n    var flatCoordinates = circleGeometry.getFlatCoordinates();\n    var stride = circleGeometry.getStride();\n    var myBegin = this.coordinates.length;\n    this.appendFlatCoordinates(\n      flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n    var circleInstruction = [CanvasInstruction.CIRCLE, myBegin];\n    this.instructions.push(beginPathInstruction, circleInstruction);\n    this.hitDetectionInstructions.push(beginPathInstruction, circleInstruction);\n    this.hitDetectionInstructions.push(fillInstruction);\n    if (state.fillStyle !== undefined) {\n      this.instructions.push(fillInstruction);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.instructions.push(strokeInstruction);\n      this.hitDetectionInstructions.push(strokeInstruction);\n    }\n    this.endGeometry(circleGeometry, feature);\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasPolygonReplay.prototype.drawPolygon = function drawPolygon (polygonGeometry, feature) {\n    var state = this.state;\n    var fillStyle = state.fillStyle;\n    var strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_(polygonGeometry);\n    this.beginGeometry(polygonGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        asString(defaultFillStyle)\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n        state.miterLimit, state.lineDash, state.lineDashOffset\n      ]);\n    }\n    var ends = polygonGeometry.getEnds();\n    var flatCoordinates = polygonGeometry.getOrientedFlatCoordinates();\n    var stride = polygonGeometry.getStride();\n    this.drawFlatCoordinatess_(flatCoordinates, 0, ends, stride);\n    this.endGeometry(polygonGeometry, feature);\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasPolygonReplay.prototype.drawMultiPolygon = function drawMultiPolygon (multiPolygonGeometry, feature) {\n    var state = this.state;\n    var fillStyle = state.fillStyle;\n    var strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_(multiPolygonGeometry);\n    this.beginGeometry(multiPolygonGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        asString(defaultFillStyle)\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n        state.miterLimit, state.lineDash, state.lineDashOffset\n      ]);\n    }\n    var endss = multiPolygonGeometry.getEndss();\n    var flatCoordinates = multiPolygonGeometry.getOrientedFlatCoordinates();\n    var stride = multiPolygonGeometry.getStride();\n    var offset = 0;\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinatess_(flatCoordinates, offset, endss[i], stride);\n    }\n    this.endGeometry(multiPolygonGeometry, feature);\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasPolygonReplay.prototype.finish = function finish () {\n    this.reverseHitDetectionInstructions();\n    this.state = null;\n    // We want to preserve topology when drawing polygons.  Polygons are\n    // simplified using quantization and point elimination. However, we might\n    // have received a mix of quantized and non-quantized geometries, so ensure\n    // that all are quantized by quantizing all coordinates in the batch.\n    var tolerance = this.tolerance;\n    if (tolerance !== 0) {\n      var coordinates = this.coordinates;\n      for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        coordinates[i] = snap(coordinates[i], tolerance);\n      }\n    }\n  };\n\n  /**\n   * @private\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   */\n  CanvasPolygonReplay.prototype.setFillStrokeStyles_ = function setFillStrokeStyles_ (geometry) {\n    var state = this.state;\n    var fillStyle = state.fillStyle;\n    if (fillStyle !== undefined) {\n      this.updateFillStyle(state, this.createFill, geometry);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.updateStrokeStyle(state, this.applyStroke);\n    }\n  };\n\n  return CanvasPolygonReplay;\n}(CanvasReplay));\n\n\nexport default CanvasPolygonReplay;\n\n//# sourceMappingURL=PolygonReplay.js.map","/**\n * @module ol/render/canvas/TextReplay\n */\nimport {getUid} from '../../util.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {intersects} from '../../extent.js';\nimport {matchingChunk} from '../../geom/flat/straightchunk.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {CANVAS_LINE_DASH} from '../../has.js';\nimport {labelCache, measureTextWidth, defaultTextAlign, measureTextHeight, defaultPadding, defaultLineCap, defaultLineDashOffset, defaultLineDash, defaultLineJoin, defaultFillStyle, checkFont, defaultFont, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline} from '../canvas.js';\nimport CanvasInstruction from './Instruction.js';\nimport CanvasReplay from './Replay.js';\nimport {TEXT_ALIGN} from '../replay.js';\nimport TextPlacement from '../../style/TextPlacement.js';\n\nvar CanvasTextReplay = /*@__PURE__*/(function (CanvasReplay) {\n  function CanvasTextReplay(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    CanvasReplay.call(this, tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n\n    /**\n     * @private\n     * @type {import(\"../canvas.js\").DeclutterGroup}\n     */\n    this.declutterGroup_;\n\n    /**\n     * @private\n     * @type {Array<HTMLCanvasElement>}\n     */\n    this.labels_ = null;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.text_ = '';\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.textRotateWithView_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textRotation_ = 0;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.textFillState_ = null;\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").FillState>}\n     */\n    this.fillStates = {};\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.textStrokeState_ = null;\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n     */\n    this.strokeStates = {};\n\n    /**\n     * @private\n     * @type {import(\"../canvas.js\").TextState}\n     */\n    this.textState_ = /** @type {import(\"../canvas.js\").TextState} */ ({});\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").TextState>}\n     */\n    this.textStates = {};\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.textKey_ = '';\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.fillKey_ = '';\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.strokeKey_ = '';\n\n    /**\n     * @private\n     * @type {Object<string, Object<string, number>>}\n     */\n    this.widths_ = {};\n\n    labelCache.prune();\n\n  }\n\n  if ( CanvasReplay ) CanvasTextReplay.__proto__ = CanvasReplay;\n  CanvasTextReplay.prototype = Object.create( CanvasReplay && CanvasReplay.prototype );\n  CanvasTextReplay.prototype.constructor = CanvasTextReplay;\n\n  /**\n   * @inheritDoc\n   */\n  CanvasTextReplay.prototype.drawText = function drawText (geometry, feature) {\n    var fillState = this.textFillState_;\n    var strokeState = this.textStrokeState_;\n    var textState = this.textState_;\n    if (this.text_ === '' || !textState || (!fillState && !strokeState)) {\n      return;\n    }\n\n    var begin = this.coordinates.length;\n\n    var geometryType = geometry.getType();\n    var flatCoordinates = null;\n    var end = 2;\n    var stride = 2;\n    var i, ii;\n\n    if (textState.placement === TextPlacement.LINE) {\n      if (!intersects(this.getBufferedMaxExtent(), geometry.getExtent())) {\n        return;\n      }\n      var ends;\n      flatCoordinates = geometry.getFlatCoordinates();\n      stride = geometry.getStride();\n      if (geometryType == GeometryType.LINE_STRING) {\n        ends = [flatCoordinates.length];\n      } else if (geometryType == GeometryType.MULTI_LINE_STRING) {\n        ends = geometry.getEnds();\n      } else if (geometryType == GeometryType.POLYGON) {\n        ends = geometry.getEnds().slice(0, 1);\n      } else if (geometryType == GeometryType.MULTI_POLYGON) {\n        var endss = geometry.getEndss();\n        ends = [];\n        for (i = 0, ii = endss.length; i < ii; ++i) {\n          ends.push(endss[i][0]);\n        }\n      }\n      this.beginGeometry(geometry, feature);\n      var textAlign = textState.textAlign;\n      var flatOffset = 0;\n      var flatEnd;\n      for (var o = 0, oo = ends.length; o < oo; ++o) {\n        if (textAlign == undefined) {\n          var range = matchingChunk(textState.maxAngle, flatCoordinates, flatOffset, ends[o], stride);\n          flatOffset = range[0];\n          flatEnd = range[1];\n        } else {\n          flatEnd = ends[o];\n        }\n        for (i = flatOffset; i < flatEnd; i += stride) {\n          this.coordinates.push(flatCoordinates[i], flatCoordinates[i + 1]);\n        }\n        end = this.coordinates.length;\n        flatOffset = ends[o];\n        this.drawChars_(begin, end, this.declutterGroup_);\n        begin = end;\n      }\n      this.endGeometry(geometry, feature);\n\n    } else {\n      var label = this.getImage(this.text_, this.textKey_, this.fillKey_, this.strokeKey_);\n      var width = label.width / this.pixelRatio;\n      switch (geometryType) {\n        case GeometryType.POINT:\n        case GeometryType.MULTI_POINT:\n          flatCoordinates = geometry.getFlatCoordinates();\n          end = flatCoordinates.length;\n          break;\n        case GeometryType.LINE_STRING:\n          flatCoordinates = /** @type {import(\"../../geom/LineString.js\").default} */ (geometry).getFlatMidpoint();\n          break;\n        case GeometryType.CIRCLE:\n          flatCoordinates = /** @type {import(\"../../geom/Circle.js\").default} */ (geometry).getCenter();\n          break;\n        case GeometryType.MULTI_LINE_STRING:\n          flatCoordinates = /** @type {import(\"../../geom/MultiLineString.js\").default} */ (geometry).getFlatMidpoints();\n          end = flatCoordinates.length;\n          break;\n        case GeometryType.POLYGON:\n          flatCoordinates = /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry).getFlatInteriorPoint();\n          if (!textState.overflow && flatCoordinates[2] / this.resolution < width) {\n            return;\n          }\n          stride = 3;\n          break;\n        case GeometryType.MULTI_POLYGON:\n          var interiorPoints = /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry).getFlatInteriorPoints();\n          flatCoordinates = [];\n          for (i = 0, ii = interiorPoints.length; i < ii; i += 3) {\n            if (textState.overflow || interiorPoints[i + 2] / this.resolution >= width) {\n              flatCoordinates.push(interiorPoints[i], interiorPoints[i + 1]);\n            }\n          }\n          end = flatCoordinates.length;\n          if (end == 0) {\n            return;\n          }\n          break;\n        default:\n      }\n      end = this.appendFlatCoordinates(flatCoordinates, 0, end, stride, false, false);\n      if (textState.backgroundFill || textState.backgroundStroke) {\n        this.setFillStrokeStyle(textState.backgroundFill, textState.backgroundStroke);\n        if (textState.backgroundFill) {\n          this.updateFillStyle(this.state, this.createFill, geometry);\n          this.hitDetectionInstructions.push(this.createFill(this.state, geometry));\n        }\n        if (textState.backgroundStroke) {\n          this.updateStrokeStyle(this.state, this.applyStroke);\n          this.hitDetectionInstructions.push(this.createStroke(this.state));\n        }\n      }\n      this.beginGeometry(geometry, feature);\n      this.drawTextImage_(label, begin, end);\n      this.endGeometry(geometry, feature);\n    }\n  };\n\n  /**\n   * @param {string} text Text.\n   * @param {string} textKey Text style key.\n   * @param {string} fillKey Fill style key.\n   * @param {string} strokeKey Stroke style key.\n   * @return {HTMLCanvasElement} Image.\n   */\n  CanvasTextReplay.prototype.getImage = function getImage (text, textKey, fillKey, strokeKey) {\n    var label;\n    var key = strokeKey + textKey + text + fillKey + this.pixelRatio;\n\n    if (!labelCache.containsKey(key)) {\n      var strokeState = strokeKey ? this.strokeStates[strokeKey] || this.textStrokeState_ : null;\n      var fillState = fillKey ? this.fillStates[fillKey] || this.textFillState_ : null;\n      var textState = this.textStates[textKey] || this.textState_;\n      var pixelRatio = this.pixelRatio;\n      var scale = textState.scale * pixelRatio;\n      var align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n      var strokeWidth = strokeKey && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n      var lines = text.split('\\n');\n      var numLines = lines.length;\n      var widths = [];\n      var width = measureTextWidths(textState.font, lines, widths);\n      var lineHeight = measureTextHeight(textState.font);\n      var height = lineHeight * numLines;\n      var renderWidth = (width + strokeWidth);\n      var context = createCanvasContext2D(\n        Math.ceil(renderWidth * scale),\n        Math.ceil((height + strokeWidth) * scale));\n      label = context.canvas;\n      labelCache.set(key, label);\n      if (scale != 1) {\n        context.scale(scale, scale);\n      }\n      context.font = textState.font;\n      if (strokeKey) {\n        context.strokeStyle = strokeState.strokeStyle;\n        context.lineWidth = strokeWidth;\n        context.lineCap = /** @type {CanvasLineCap} */ (strokeState.lineCap);\n        context.lineJoin = /** @type {CanvasLineJoin} */ (strokeState.lineJoin);\n        context.miterLimit = strokeState.miterLimit;\n        if (CANVAS_LINE_DASH && strokeState.lineDash.length) {\n          context.setLineDash(strokeState.lineDash);\n          context.lineDashOffset = strokeState.lineDashOffset;\n        }\n      }\n      if (fillKey) {\n        context.fillStyle = fillState.fillStyle;\n      }\n      context.textBaseline = 'middle';\n      context.textAlign = 'center';\n      var leftRight = (0.5 - align);\n      var x = align * label.width / scale + leftRight * strokeWidth;\n      var i;\n      if (strokeKey) {\n        for (i = 0; i < numLines; ++i) {\n          context.strokeText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n        }\n      }\n      if (fillKey) {\n        for (i = 0; i < numLines; ++i) {\n          context.fillText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n        }\n      }\n    }\n    return labelCache.get(key);\n  };\n\n  /**\n   * @private\n   * @param {HTMLCanvasElement} label Label.\n   * @param {number} begin Begin.\n   * @param {number} end End.\n   */\n  CanvasTextReplay.prototype.drawTextImage_ = function drawTextImage_ (label, begin, end) {\n    var textState = this.textState_;\n    var strokeState = this.textStrokeState_;\n    var pixelRatio = this.pixelRatio;\n    var align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n    var baseline = TEXT_ALIGN[textState.textBaseline];\n    var strokeWidth = strokeState && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n    var anchorX = align * label.width / pixelRatio + 2 * (0.5 - align) * strokeWidth;\n    var anchorY = baseline * label.height / pixelRatio + 2 * (0.5 - baseline) * strokeWidth;\n    this.instructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n      label, (anchorX - this.textOffsetX_) * pixelRatio, (anchorY - this.textOffsetY_) * pixelRatio,\n      this.declutterGroup_, label.height, 1, 0, 0, this.textRotateWithView_, this.textRotation_,\n      1, label.width,\n      textState.padding == defaultPadding ?\n        defaultPadding : textState.padding.map(function(p) {\n          return p * pixelRatio;\n        }),\n      !!textState.backgroundFill, !!textState.backgroundStroke\n    ]);\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n      label, (anchorX - this.textOffsetX_) * pixelRatio, (anchorY - this.textOffsetY_) * pixelRatio,\n      this.declutterGroup_, label.height, 1, 0, 0, this.textRotateWithView_, this.textRotation_,\n      1 / pixelRatio, label.width, textState.padding,\n      !!textState.backgroundFill, !!textState.backgroundStroke\n    ]);\n  };\n\n  /**\n   * @private\n   * @param {number} begin Begin.\n   * @param {number} end End.\n   * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n   */\n  CanvasTextReplay.prototype.drawChars_ = function drawChars_ (begin, end, declutterGroup) {\n    var strokeState = this.textStrokeState_;\n    var textState = this.textState_;\n    var fillState = this.textFillState_;\n\n    var strokeKey = this.strokeKey_;\n    if (strokeState) {\n      if (!(strokeKey in this.strokeStates)) {\n        this.strokeStates[strokeKey] = /** @type {import(\"../canvas.js\").StrokeState} */ ({\n          strokeStyle: strokeState.strokeStyle,\n          lineCap: strokeState.lineCap,\n          lineDashOffset: strokeState.lineDashOffset,\n          lineWidth: strokeState.lineWidth,\n          lineJoin: strokeState.lineJoin,\n          miterLimit: strokeState.miterLimit,\n          lineDash: strokeState.lineDash\n        });\n      }\n    }\n    var textKey = this.textKey_;\n    if (!(this.textKey_ in this.textStates)) {\n      this.textStates[this.textKey_] = /** @type {import(\"../canvas.js\").TextState} */ ({\n        font: textState.font,\n        textAlign: textState.textAlign || defaultTextAlign,\n        scale: textState.scale\n      });\n    }\n    var fillKey = this.fillKey_;\n    if (fillState) {\n      if (!(fillKey in this.fillStates)) {\n        this.fillStates[fillKey] = /** @type {import(\"../canvas.js\").FillState} */ ({\n          fillStyle: fillState.fillStyle\n        });\n      }\n    }\n\n    var pixelRatio = this.pixelRatio;\n    var baseline = TEXT_ALIGN[textState.textBaseline];\n\n    var offsetY = this.textOffsetY_ * pixelRatio;\n    var text = this.text_;\n    var font = textState.font;\n    var textScale = textState.scale;\n    var strokeWidth = strokeState ? strokeState.lineWidth * textScale / 2 : 0;\n    var widths = this.widths_[font];\n    if (!widths) {\n      this.widths_[font] = widths = {};\n    }\n    this.instructions.push([CanvasInstruction.DRAW_CHARS,\n      begin, end, baseline, declutterGroup,\n      textState.overflow, fillKey, textState.maxAngle,\n      function(text) {\n        var width = widths[text];\n        if (!width) {\n          width = widths[text] = measureTextWidth(font, text);\n        }\n        return width * textScale * pixelRatio;\n      },\n      offsetY, strokeKey, strokeWidth * pixelRatio, text, textKey, 1\n    ]);\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_CHARS,\n      begin, end, baseline, declutterGroup,\n      textState.overflow, fillKey, textState.maxAngle,\n      function(text) {\n        var width = widths[text];\n        if (!width) {\n          width = widths[text] = measureTextWidth(font, text);\n        }\n        return width * textScale;\n      },\n      offsetY, strokeKey, strokeWidth, text, textKey, 1 / pixelRatio\n    ]);\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasTextReplay.prototype.setTextStyle = function setTextStyle (textStyle, declutterGroup) {\n    var textState, fillState, strokeState;\n    if (!textStyle) {\n      this.text_ = '';\n    } else {\n      this.declutterGroup_ = /** @type {import(\"../canvas.js\").DeclutterGroup} */ (declutterGroup);\n\n      var textFillStyle = textStyle.getFill();\n      if (!textFillStyle) {\n        fillState = this.textFillState_ = null;\n      } else {\n        fillState = this.textFillState_;\n        if (!fillState) {\n          fillState = this.textFillState_ = /** @type {import(\"../canvas.js\").FillState} */ ({});\n        }\n        fillState.fillStyle = asColorLike(\n          textFillStyle.getColor() || defaultFillStyle);\n      }\n\n      var textStrokeStyle = textStyle.getStroke();\n      if (!textStrokeStyle) {\n        strokeState = this.textStrokeState_ = null;\n      } else {\n        strokeState = this.textStrokeState_;\n        if (!strokeState) {\n          strokeState = this.textStrokeState_ = /** @type {import(\"../canvas.js\").StrokeState} */ ({});\n        }\n        var lineDash = textStrokeStyle.getLineDash();\n        var lineDashOffset = textStrokeStyle.getLineDashOffset();\n        var lineWidth = textStrokeStyle.getWidth();\n        var miterLimit = textStrokeStyle.getMiterLimit();\n        strokeState.lineCap = textStrokeStyle.getLineCap() || defaultLineCap;\n        strokeState.lineDash = lineDash ? lineDash.slice() : defaultLineDash;\n        strokeState.lineDashOffset =\n            lineDashOffset === undefined ? defaultLineDashOffset : lineDashOffset;\n        strokeState.lineJoin = textStrokeStyle.getLineJoin() || defaultLineJoin;\n        strokeState.lineWidth =\n            lineWidth === undefined ? defaultLineWidth : lineWidth;\n        strokeState.miterLimit =\n            miterLimit === undefined ? defaultMiterLimit : miterLimit;\n        strokeState.strokeStyle = asColorLike(\n          textStrokeStyle.getColor() || defaultStrokeStyle);\n      }\n\n      textState = this.textState_;\n      var font = textStyle.getFont() || defaultFont;\n      checkFont(font);\n      var textScale = textStyle.getScale();\n      textState.overflow = textStyle.getOverflow();\n      textState.font = font;\n      textState.maxAngle = textStyle.getMaxAngle();\n      textState.placement = textStyle.getPlacement();\n      textState.textAlign = textStyle.getTextAlign();\n      textState.textBaseline = textStyle.getTextBaseline() || defaultTextBaseline;\n      textState.backgroundFill = textStyle.getBackgroundFill();\n      textState.backgroundStroke = textStyle.getBackgroundStroke();\n      textState.padding = textStyle.getPadding() || defaultPadding;\n      textState.scale = textScale === undefined ? 1 : textScale;\n\n      var textOffsetX = textStyle.getOffsetX();\n      var textOffsetY = textStyle.getOffsetY();\n      var textRotateWithView = textStyle.getRotateWithView();\n      var textRotation = textStyle.getRotation();\n      this.text_ = textStyle.getText() || '';\n      this.textOffsetX_ = textOffsetX === undefined ? 0 : textOffsetX;\n      this.textOffsetY_ = textOffsetY === undefined ? 0 : textOffsetY;\n      this.textRotateWithView_ = textRotateWithView === undefined ? false : textRotateWithView;\n      this.textRotation_ = textRotation === undefined ? 0 : textRotation;\n\n      this.strokeKey_ = strokeState ?\n        (typeof strokeState.strokeStyle == 'string' ? strokeState.strokeStyle : getUid(strokeState.strokeStyle)) +\n        strokeState.lineCap + strokeState.lineDashOffset + '|' + strokeState.lineWidth +\n        strokeState.lineJoin + strokeState.miterLimit + '[' + strokeState.lineDash.join() + ']' :\n        '';\n      this.textKey_ = textState.font + textState.scale + (textState.textAlign || '?');\n      this.fillKey_ = fillState ?\n        (typeof fillState.fillStyle == 'string' ? fillState.fillStyle : ('|' + getUid(fillState.fillStyle))) :\n        '';\n    }\n  };\n\n  return CanvasTextReplay;\n}(CanvasReplay));\n\n\n/**\n * @param {string} font Font to use for measuring.\n * @param {Array<string>} lines Lines to measure.\n * @param {Array<number>} widths Array will be populated with the widths of\n * each line.\n * @return {number} Width of the whole text.\n */\nexport function measureTextWidths(font, lines, widths) {\n  var numLines = lines.length;\n  var width = 0;\n  for (var i = 0; i < numLines; ++i) {\n    var currentWidth = measureTextWidth(font, lines[i]);\n    width = Math.max(width, currentWidth);\n    widths.push(currentWidth);\n  }\n  return width;\n}\n\n\nexport default CanvasTextReplay;\n\n//# sourceMappingURL=TextReplay.js.map","/**\n * @module ol/render/canvas/ReplayGroup\n */\n\nimport {numberSafeCompareFunction} from '../../array.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {buffer, createEmpty, extendCoordinate} from '../../extent.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {isEmpty} from '../../obj.js';\nimport ReplayGroup from '../ReplayGroup.js';\nimport ReplayType from '../ReplayType.js';\nimport CanvasReplay from './Replay.js';\nimport CanvasImageReplay from './ImageReplay.js';\nimport CanvasLineStringReplay from './LineStringReplay.js';\nimport CanvasPolygonReplay from './PolygonReplay.js';\nimport CanvasTextReplay from './TextReplay.js';\nimport {ORDER} from '../replay.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n\n/**\n * @type {Object<ReplayType, typeof CanvasReplay>}\n */\nvar BATCH_CONSTRUCTORS = {\n  'Circle': CanvasPolygonReplay,\n  'Default': CanvasReplay,\n  'Image': CanvasImageReplay,\n  'LineString': CanvasLineStringReplay,\n  'Polygon': CanvasPolygonReplay,\n  'Text': CanvasTextReplay\n};\n\n\nvar CanvasReplayGroup = /*@__PURE__*/(function (ReplayGroup) {\n  function CanvasReplayGroup(\n    tolerance,\n    maxExtent,\n    resolution,\n    pixelRatio,\n    overlaps,\n    declutterTree,\n    opt_renderBuffer\n  ) {\n    ReplayGroup.call(this);\n\n    /**\n     * Declutter tree.\n     * @private\n     */\n    this.declutterTree_ = declutterTree;\n\n    /**\n     * @type {import(\"../canvas.js\").DeclutterGroup}\n     * @private\n     */\n    this.declutterGroup_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tolerance_ = tolerance;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.maxExtent_ = maxExtent;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overlaps_ = overlaps;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.resolution_ = resolution;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.renderBuffer_ = opt_renderBuffer;\n\n    /**\n     * @private\n     * @type {!Object<string, !Object<ReplayType, CanvasReplay>>}\n     */\n    this.replaysByZIndex_ = {};\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.hitDetectionContext_ = createCanvasContext2D(1, 1);\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.hitDetectionTransform_ = createTransform();\n  }\n\n  if ( ReplayGroup ) CanvasReplayGroup.__proto__ = ReplayGroup;\n  CanvasReplayGroup.prototype = Object.create( ReplayGroup && ReplayGroup.prototype );\n  CanvasReplayGroup.prototype.constructor = CanvasReplayGroup;\n\n  /**\n   * @inheritDoc\n   */\n  CanvasReplayGroup.prototype.addDeclutter = function addDeclutter (group) {\n    var declutter = null;\n    if (this.declutterTree_) {\n      if (group) {\n        declutter = this.declutterGroup_;\n        /** @type {number} */ (declutter[4])++;\n      } else {\n        declutter = this.declutterGroup_ = createEmpty();\n        declutter.push(1);\n      }\n    }\n    return declutter;\n  };\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   */\n  CanvasReplayGroup.prototype.clip = function clip (context, transform) {\n    var flatClipCoords = this.getClipCoords(transform);\n    context.beginPath();\n    context.moveTo(flatClipCoords[0], flatClipCoords[1]);\n    context.lineTo(flatClipCoords[2], flatClipCoords[3]);\n    context.lineTo(flatClipCoords[4], flatClipCoords[5]);\n    context.lineTo(flatClipCoords[6], flatClipCoords[7]);\n    context.clip();\n  };\n\n  /**\n   * @param {Array<ReplayType>} replays Replays.\n   * @return {boolean} Has replays of the provided types.\n   */\n  CanvasReplayGroup.prototype.hasReplays = function hasReplays (replays) {\n    for (var zIndex in this.replaysByZIndex_) {\n      var candidates = this.replaysByZIndex_[zIndex];\n      for (var i = 0, ii = replays.length; i < ii; ++i) {\n        if (replays[i] in candidates) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  CanvasReplayGroup.prototype.finish = function finish () {\n    for (var zKey in this.replaysByZIndex_) {\n      var replays = this.replaysByZIndex_[zKey];\n      for (var replayKey in replays) {\n        replays[replayKey].finish();\n      }\n    }\n  };\n\n  /**\n   * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {number} rotation Rotation.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features to skip.\n   * @param {function((import(\"../../Feature.js\").default|import(\"../Feature.js\").default)): T} callback Feature callback.\n   * @param {Object<string, import(\"../canvas.js\").DeclutterGroup>} declutterReplays Declutter replays.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  CanvasReplayGroup.prototype.forEachFeatureAtCoordinate = function forEachFeatureAtCoordinate (\n    coordinate,\n    resolution,\n    rotation,\n    hitTolerance,\n    skippedFeaturesHash,\n    callback,\n    declutterReplays\n  ) {\n\n    hitTolerance = Math.round(hitTolerance);\n    var contextSize = hitTolerance * 2 + 1;\n    var transform = composeTransform(this.hitDetectionTransform_,\n      hitTolerance + 0.5, hitTolerance + 0.5,\n      1 / resolution, -1 / resolution,\n      -rotation,\n      -coordinate[0], -coordinate[1]);\n    var context = this.hitDetectionContext_;\n\n    if (context.canvas.width !== contextSize || context.canvas.height !== contextSize) {\n      context.canvas.width = contextSize;\n      context.canvas.height = contextSize;\n    } else {\n      context.clearRect(0, 0, contextSize, contextSize);\n    }\n\n    /**\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    var hitExtent;\n    if (this.renderBuffer_ !== undefined) {\n      hitExtent = createEmpty();\n      extendCoordinate(hitExtent, coordinate);\n      buffer(hitExtent, resolution * (this.renderBuffer_ + hitTolerance), hitExtent);\n    }\n\n    var mask = getCircleArray(hitTolerance);\n    var declutteredFeatures;\n    if (this.declutterTree_) {\n      declutteredFeatures = this.declutterTree_.all().map(function(entry) {\n        return entry.value;\n      });\n    }\n\n    var replayType;\n\n    /**\n     * @param {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} feature Feature.\n     * @return {?} Callback result.\n     */\n    function featureCallback(feature) {\n      var imageData = context.getImageData(0, 0, contextSize, contextSize).data;\n      for (var i = 0; i < contextSize; i++) {\n        for (var j = 0; j < contextSize; j++) {\n          if (mask[i][j]) {\n            if (imageData[(j * contextSize + i) * 4 + 3] > 0) {\n              var result = (void 0);\n              if (!(declutteredFeatures && (replayType == ReplayType.IMAGE || replayType == ReplayType.TEXT)) ||\n                  declutteredFeatures.indexOf(feature) !== -1) {\n                result = callback(feature);\n              }\n              if (result) {\n                return result;\n              } else {\n                context.clearRect(0, 0, contextSize, contextSize);\n                return undefined;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    /** @type {Array<number>} */\n    var zs = Object.keys(this.replaysByZIndex_).map(Number);\n    zs.sort(numberSafeCompareFunction);\n\n    var i, j, replays, replay, result;\n    for (i = zs.length - 1; i >= 0; --i) {\n      var zIndexKey = zs[i].toString();\n      replays = this.replaysByZIndex_[zIndexKey];\n      for (j = ORDER.length - 1; j >= 0; --j) {\n        replayType = ORDER[j];\n        replay = replays[replayType];\n        if (replay !== undefined) {\n          if (declutterReplays &&\n              (replayType == ReplayType.IMAGE || replayType == ReplayType.TEXT)) {\n            var declutter = declutterReplays[zIndexKey];\n            if (!declutter) {\n              declutterReplays[zIndexKey] = [replay, transform.slice(0)];\n            } else {\n              declutter.push(replay, transform.slice(0));\n            }\n          } else {\n            result = replay.replayHitDetection(context, transform, rotation,\n              skippedFeaturesHash, featureCallback, hitExtent);\n            if (result) {\n              return result;\n            }\n          }\n        }\n      }\n    }\n    return undefined;\n  };\n\n  /**\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @return {Array<number>} Clip coordinates.\n   */\n  CanvasReplayGroup.prototype.getClipCoords = function getClipCoords (transform) {\n    var maxExtent = this.maxExtent_;\n    var minX = maxExtent[0];\n    var minY = maxExtent[1];\n    var maxX = maxExtent[2];\n    var maxY = maxExtent[3];\n    var flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY];\n    transform2D(\n      flatClipCoords, 0, 8, 2, transform, flatClipCoords);\n    return flatClipCoords;\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasReplayGroup.prototype.getReplay = function getReplay (zIndex, replayType) {\n    var zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n    var replays = this.replaysByZIndex_[zIndexKey];\n    if (replays === undefined) {\n      replays = {};\n      this.replaysByZIndex_[zIndexKey] = replays;\n    }\n    var replay = replays[replayType];\n    if (replay === undefined) {\n      var Constructor = BATCH_CONSTRUCTORS[replayType];\n      replay = new Constructor(this.tolerance_, this.maxExtent_,\n        this.resolution_, this.pixelRatio_, this.overlaps_, this.declutterTree_);\n      replays[replayType] = replay;\n    }\n    return replay;\n  };\n\n  /**\n   * @return {Object<string, Object<ReplayType, CanvasReplay>>} Replays.\n   */\n  CanvasReplayGroup.prototype.getReplays = function getReplays () {\n    return this.replaysByZIndex_;\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasReplayGroup.prototype.isEmpty = function isEmpty$1 () {\n    return isEmpty(this.replaysByZIndex_);\n  };\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features to skip.\n   * @param {boolean} snapToPixel Snap point symbols and test to integer pixel.\n   * @param {Array<ReplayType>=} opt_replayTypes Ordered replay types to replay.\n   *     Default is {@link module:ol/render/replay~ORDER}\n   * @param {Object<string, import(\"../canvas.js\").DeclutterGroup>=} opt_declutterReplays Declutter replays.\n   */\n  CanvasReplayGroup.prototype.replay = function replay (\n    context,\n    transform,\n    viewRotation,\n    skippedFeaturesHash,\n    snapToPixel,\n    opt_replayTypes,\n    opt_declutterReplays\n  ) {\n\n    /** @type {Array<number>} */\n    var zs = Object.keys(this.replaysByZIndex_).map(Number);\n    zs.sort(numberSafeCompareFunction);\n\n    // setup clipping so that the parts of over-simplified geometries are not\n    // visible outside the current extent when panning\n    context.save();\n    this.clip(context, transform);\n\n    var replayTypes = opt_replayTypes ? opt_replayTypes : ORDER;\n    var i, ii, j, jj, replays, replay;\n    for (i = 0, ii = zs.length; i < ii; ++i) {\n      var zIndexKey = zs[i].toString();\n      replays = this.replaysByZIndex_[zIndexKey];\n      for (j = 0, jj = replayTypes.length; j < jj; ++j) {\n        var replayType = replayTypes[j];\n        replay = replays[replayType];\n        if (replay !== undefined) {\n          if (opt_declutterReplays &&\n              (replayType == ReplayType.IMAGE || replayType == ReplayType.TEXT)) {\n            var declutter = opt_declutterReplays[zIndexKey];\n            if (!declutter) {\n              opt_declutterReplays[zIndexKey] = [replay, transform.slice(0)];\n            } else {\n              declutter.push(replay, transform.slice(0));\n            }\n          } else {\n            replay.replay(context, transform, viewRotation, skippedFeaturesHash, snapToPixel);\n          }\n        }\n      }\n    }\n\n    context.restore();\n  };\n\n  return CanvasReplayGroup;\n}(ReplayGroup));\n\n\n/**\n * This cache is used for storing calculated pixel circles for increasing performance.\n * It is a static property to allow each Replaygroup to access it.\n * @type {Object<number, Array<Array<(boolean|undefined)>>>}\n */\nvar circleArrayCache = {\n  0: [[true]]\n};\n\n\n/**\n * This method fills a row in the array from the given coordinate to the\n * middle with `true`.\n * @param {Array<Array<(boolean|undefined)>>} array The array that will be altered.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n */\nfunction fillCircleArrayRowToMiddle(array, x, y) {\n  var i;\n  var radius = Math.floor(array.length / 2);\n  if (x >= radius) {\n    for (i = radius; i < x; i++) {\n      array[i][y] = true;\n    }\n  } else if (x < radius) {\n    for (i = x + 1; i < radius; i++) {\n      array[i][y] = true;\n    }\n  }\n}\n\n\n/**\n * This methods creates a circle inside a fitting array. Points inside the\n * circle are marked by true, points on the outside are undefined.\n * It uses the midpoint circle algorithm.\n * A cache is used to increase performance.\n * @param {number} radius Radius.\n * @returns {Array<Array<(boolean|undefined)>>} An array with marked circle points.\n */\nexport function getCircleArray(radius) {\n  if (circleArrayCache[radius] !== undefined) {\n    return circleArrayCache[radius];\n  }\n\n  var arraySize = radius * 2 + 1;\n  var arr = new Array(arraySize);\n  for (var i = 0; i < arraySize; i++) {\n    arr[i] = new Array(arraySize);\n  }\n\n  var x = radius;\n  var y = 0;\n  var error = 0;\n\n  while (x >= y) {\n    fillCircleArrayRowToMiddle(arr, radius + x, radius + y);\n    fillCircleArrayRowToMiddle(arr, radius + y, radius + x);\n    fillCircleArrayRowToMiddle(arr, radius - y, radius + x);\n    fillCircleArrayRowToMiddle(arr, radius - x, radius + y);\n    fillCircleArrayRowToMiddle(arr, radius - x, radius - y);\n    fillCircleArrayRowToMiddle(arr, radius - y, radius - x);\n    fillCircleArrayRowToMiddle(arr, radius + y, radius - x);\n    fillCircleArrayRowToMiddle(arr, radius + x, radius - y);\n\n    y++;\n    error += 1 + 2 * y;\n    if (2 * (error - x) + 1 > 0) {\n      x -= 1;\n      error += 1 - 2 * x;\n    }\n  }\n\n  circleArrayCache[radius] = arr;\n  return arr;\n}\n\n\n/**\n * @param {!Object<string, Array<*>>} declutterReplays Declutter replays.\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n */\nexport function replayDeclutter(declutterReplays, context, rotation, snapToPixel) {\n  var zs = Object.keys(declutterReplays).map(Number).sort(numberSafeCompareFunction);\n  var skippedFeatureUids = {};\n  for (var z = 0, zz = zs.length; z < zz; ++z) {\n    var replayData = declutterReplays[zs[z].toString()];\n    for (var i = 0, ii = replayData.length; i < ii;) {\n      var replay = replayData[i++];\n      var transform = replayData[i++];\n      replay.replay(context, transform, rotation, skippedFeatureUids, snapToPixel);\n    }\n  }\n}\n\n\nexport default CanvasReplayGroup;\n\n//# sourceMappingURL=ReplayGroup.js.map","/**\n * @module ol/proj/epsg3857\n */\nimport {cosh} from '../math.js';\nimport Projection from './Projection.js';\nimport Units from './Units.js';\n\n\n/**\n * Radius of WGS84 sphere\n *\n * @const\n * @type {number}\n */\nexport var RADIUS = 6378137;\n\n\n/**\n * @const\n * @type {number}\n */\nexport var HALF_SIZE = Math.PI * RADIUS;\n\n\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport var EXTENT = [\n  -HALF_SIZE, -HALF_SIZE,\n  HALF_SIZE, HALF_SIZE\n];\n\n\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport var WORLD_EXTENT = [-180, -85, 180, 85];\n\n\n/**\n * @classdesc\n * Projection object for web/spherical Mercator (EPSG:3857).\n */\nvar EPSG3857Projection = /*@__PURE__*/(function (Projection) {\n  function EPSG3857Projection(code) {\n    Projection.call(this, {\n      code: code,\n      units: Units.METERS,\n      extent: EXTENT,\n      global: true,\n      worldExtent: WORLD_EXTENT,\n      getPointResolution: function(resolution, point) {\n        return resolution / cosh(point[1] / RADIUS);\n      }\n    });\n\n  }\n\n  if ( Projection ) EPSG3857Projection.__proto__ = Projection;\n  EPSG3857Projection.prototype = Object.create( Projection && Projection.prototype );\n  EPSG3857Projection.prototype.constructor = EPSG3857Projection;\n\n  return EPSG3857Projection;\n}(Projection));\n\n\n/**\n * Projections equal to EPSG:3857.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport var PROJECTIONS = [\n  new EPSG3857Projection('EPSG:3857'),\n  new EPSG3857Projection('EPSG:102100'),\n  new EPSG3857Projection('EPSG:102113'),\n  new EPSG3857Projection('EPSG:900913'),\n  new EPSG3857Projection('urn:ogc:def:crs:EPSG:6.18:3:3857'),\n  new EPSG3857Projection('urn:ogc:def:crs:EPSG::3857'),\n  new EPSG3857Projection('http://www.opengis.net/gml/srs/epsg.xml#3857')\n];\n\n\n/**\n * Transformation from EPSG:4326 to EPSG:3857.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function fromEPSG4326(input, opt_output, opt_dimension) {\n  var length = input.length;\n  var dimension = opt_dimension > 1 ? opt_dimension : 2;\n  var output = opt_output;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  var halfSize = HALF_SIZE;\n  for (var i = 0; i < length; i += dimension) {\n    output[i] = halfSize * input[i] / 180;\n    var y = RADIUS *\n        Math.log(Math.tan(Math.PI * (input[i + 1] + 90) / 360));\n    if (y > halfSize) {\n      y = halfSize;\n    } else if (y < -halfSize) {\n      y = -halfSize;\n    }\n    output[i + 1] = y;\n  }\n  return output;\n}\n\n\n/**\n * Transformation from EPSG:3857 to EPSG:4326.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function toEPSG4326(input, opt_output, opt_dimension) {\n  var length = input.length;\n  var dimension = opt_dimension > 1 ? opt_dimension : 2;\n  var output = opt_output;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  for (var i = 0; i < length; i += dimension) {\n    output[i] = 180 * input[i] / HALF_SIZE;\n    output[i + 1] = 360 * Math.atan(\n      Math.exp(input[i + 1] / RADIUS)) / Math.PI - 90;\n  }\n  return output;\n}\n\n//# sourceMappingURL=epsg3857.js.map","/**\n * @module ol/proj/epsg4326\n */\nimport Projection from './Projection.js';\nimport Units from './Units.js';\n\n\n/**\n * Semi-major radius of the WGS84 ellipsoid.\n *\n * @const\n * @type {number}\n */\nexport var RADIUS = 6378137;\n\n\n/**\n * Extent of the EPSG:4326 projection which is the whole world.\n *\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport var EXTENT = [-180, -90, 180, 90];\n\n\n/**\n * @const\n * @type {number}\n */\nexport var METERS_PER_UNIT = Math.PI * RADIUS / 180;\n\n\n/**\n * @classdesc\n * Projection object for WGS84 geographic coordinates (EPSG:4326).\n *\n * Note that OpenLayers does not strictly comply with the EPSG definition.\n * The EPSG registry defines 4326 as a CRS for Latitude,Longitude (y,x).\n * OpenLayers treats EPSG:4326 as a pseudo-projection, with x,y coordinates.\n */\nvar EPSG4326Projection = /*@__PURE__*/(function (Projection) {\n  function EPSG4326Projection(code, opt_axisOrientation) {\n    Projection.call(this, {\n      code: code,\n      units: Units.DEGREES,\n      extent: EXTENT,\n      axisOrientation: opt_axisOrientation,\n      global: true,\n      metersPerUnit: METERS_PER_UNIT,\n      worldExtent: EXTENT\n    });\n\n  }\n\n  if ( Projection ) EPSG4326Projection.__proto__ = Projection;\n  EPSG4326Projection.prototype = Object.create( Projection && Projection.prototype );\n  EPSG4326Projection.prototype.constructor = EPSG4326Projection;\n\n  return EPSG4326Projection;\n}(Projection));\n\n\n/**\n * Projections equal to EPSG:4326.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport var PROJECTIONS = [\n  new EPSG4326Projection('CRS:84'),\n  new EPSG4326Projection('EPSG:4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:EPSG::4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:EPSG:6.6:4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:1.3:CRS84'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:2:84'),\n  new EPSG4326Projection('http://www.opengis.net/gml/srs/epsg.xml#4326', 'neu'),\n  new EPSG4326Projection('urn:x-ogc:def:crs:EPSG:4326', 'neu')\n];\n\n//# sourceMappingURL=epsg4326.js.map","/**\n * @module ol/proj/projections\n */\n\n\n/**\n * @type {Object<string, import(\"./Projection.js\").default>}\n */\nvar cache = {};\n\n\n/**\n * Clear the projections cache.\n */\nexport function clear() {\n  cache = {};\n}\n\n\n/**\n * Get a cached projection by code.\n * @param {string} code The code for the projection.\n * @return {import(\"./Projection.js\").default} The projection (if cached).\n */\nexport function get(code) {\n  return cache[code] || null;\n}\n\n\n/**\n * Add a projection to the cache.\n * @param {string} code The projection code.\n * @param {import(\"./Projection.js\").default} projection The projection to cache.\n */\nexport function add(code, projection) {\n  cache[code] = projection;\n}\n\n//# sourceMappingURL=projections.js.map","/**\n * @module ol/proj/transforms\n */\nimport {isEmpty} from '../obj.js';\n\n\n/**\n * @private\n * @type {!Object<string, Object<string, import(\"../proj.js\").TransformFunction>>}\n */\nvar transforms = {};\n\n\n/**\n * Clear the transform cache.\n */\nexport function clear() {\n  transforms = {};\n}\n\n\n/**\n * Registers a conversion function to convert coordinates from the source\n * projection to the destination projection.\n *\n * @param {import(\"./Projection.js\").default} source Source.\n * @param {import(\"./Projection.js\").default} destination Destination.\n * @param {import(\"../proj.js\").TransformFunction} transformFn Transform.\n */\nexport function add(source, destination, transformFn) {\n  var sourceCode = source.getCode();\n  var destinationCode = destination.getCode();\n  if (!(sourceCode in transforms)) {\n    transforms[sourceCode] = {};\n  }\n  transforms[sourceCode][destinationCode] = transformFn;\n}\n\n\n/**\n * Unregisters the conversion function to convert coordinates from the source\n * projection to the destination projection.  This method is used to clean up\n * cached transforms during testing.\n *\n * @param {import(\"./Projection.js\").default} source Source projection.\n * @param {import(\"./Projection.js\").default} destination Destination projection.\n * @return {import(\"../proj.js\").TransformFunction} transformFn The unregistered transform.\n */\nexport function remove(source, destination) {\n  var sourceCode = source.getCode();\n  var destinationCode = destination.getCode();\n  var transform = transforms[sourceCode][destinationCode];\n  delete transforms[sourceCode][destinationCode];\n  if (isEmpty(transforms[sourceCode])) {\n    delete transforms[sourceCode];\n  }\n  return transform;\n}\n\n\n/**\n * Get a transform given a source code and a destination code.\n * @param {string} sourceCode The code for the source projection.\n * @param {string} destinationCode The code for the destination projection.\n * @return {import(\"../proj.js\").TransformFunction|undefined} The transform function (if found).\n */\nexport function get(sourceCode, destinationCode) {\n  var transform;\n  if (sourceCode in transforms && destinationCode in transforms[sourceCode]) {\n    transform = transforms[sourceCode][destinationCode];\n  }\n  return transform;\n}\n\n//# sourceMappingURL=transforms.js.map","/**\n * @module ol/proj\n */\n\n/**\n * The ol/proj module stores:\n * * a list of {@link module:ol/proj/Projection}\n * objects, one for each projection supported by the application\n * * a list of transform functions needed to convert coordinates in one projection\n * into another.\n *\n * The static functions are the methods used to maintain these.\n * Each transform function can handle not only simple coordinate pairs, but also\n * large arrays of coordinates such as vector geometries.\n *\n * When loaded, the library adds projection objects for EPSG:4326 (WGS84\n * geographic coordinates) and EPSG:3857 (Web or Spherical Mercator, as used\n * for example by Bing Maps or OpenStreetMap), together with the relevant\n * transform functions.\n *\n * Additional transforms may be added by using the http://proj4js.org/\n * library (version 2.2 or later). You can use the full build supplied by\n * Proj4js, or create a custom build to support those projections you need; see\n * the Proj4js website for how to do this. You also need the Proj4js definitions\n * for the required projections. These definitions can be obtained from\n * https://epsg.io/, and are a JS function, so can be loaded in a script\n * tag (as in the examples) or pasted into your application.\n *\n * After all required projection definitions are added to proj4's registry (by\n * using `proj4.defs()`), simply call `register(proj4)` from the `ol/proj/proj4`\n * package. Existing transforms are not changed by this function. See\n * examples/wms-image-custom-proj for an example of this.\n *\n * Additional projection definitions can be registered with `proj4.defs()` any\n * time. Just make sure to call `register(proj4)` again; for example, with user-supplied data where you don't\n * know in advance what projections are needed, you can initially load minimal\n * support and then load whichever are requested.\n *\n * Note that Proj4js does not support projection extents. If you want to add\n * one for creating default tile grids, you can add it after the Projection\n * object has been created with `setExtent`, for example,\n * `get('EPSG:1234').setExtent(extent)`.\n *\n * In addition to Proj4js support, any transform functions can be added with\n * {@link module:ol/proj~addCoordinateTransforms}. To use this, you must first create\n * a {@link module:ol/proj/Projection} object for the new projection and add it with\n * {@link module:ol/proj~addProjection}. You can then add the forward and inverse\n * functions with {@link module:ol/proj~addCoordinateTransforms}. See\n * examples/wms-custom-proj for an example of this.\n *\n * Note that if no transforms are needed and you only need to define the\n * projection, just add a {@link module:ol/proj/Projection} with\n * {@link module:ol/proj~addProjection}. See examples/wms-no-proj for an example of\n * this.\n */\nimport {getDistance} from './sphere.js';\nimport {applyTransform} from './extent.js';\nimport {modulo} from './math.js';\nimport {toEPSG4326, fromEPSG4326, PROJECTIONS as EPSG3857_PROJECTIONS} from './proj/epsg3857.js';\nimport {PROJECTIONS as EPSG4326_PROJECTIONS} from './proj/epsg4326.js';\nimport Projection from './proj/Projection.js';\nimport Units, {METERS_PER_UNIT} from './proj/Units.js';\nimport * as projections from './proj/projections.js';\nimport {add as addTransformFunc, clear as clearTransformFuncs, get as getTransformFunc} from './proj/transforms.js';\n\n\n/**\n * A projection as {@link module:ol/proj/Projection}, SRS identifier\n * string or undefined.\n * @typedef {Projection|string|undefined} ProjectionLike\n * @api\n */\n\n\n/**\n * A transform function accepts an array of input coordinate values, an optional\n * output array, and an optional dimension (default should be 2).  The function\n * transforms the input coordinate values, populates the output array, and\n * returns the output array.\n *\n * @typedef {function(Array<number>, Array<number>=, number=): Array<number>} TransformFunction\n * @api\n */\n\n\nexport {METERS_PER_UNIT};\n\nexport {Projection};\n\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array<number>} Output coordinate array (new array, same coordinate\n *     values).\n */\nexport function cloneTransform(input, opt_output, opt_dimension) {\n  var output;\n  if (opt_output !== undefined) {\n    for (var i = 0, ii = input.length; i < ii; ++i) {\n      opt_output[i] = input[i];\n    }\n    output = opt_output;\n  } else {\n    output = input.slice();\n  }\n  return output;\n}\n\n\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array<number>} Input coordinate array (same array as input).\n */\nexport function identityTransform(input, opt_output, opt_dimension) {\n  if (opt_output !== undefined && input !== opt_output) {\n    for (var i = 0, ii = input.length; i < ii; ++i) {\n      opt_output[i] = input[i];\n    }\n    input = opt_output;\n  }\n  return input;\n}\n\n\n/**\n * Add a Projection object to the list of supported projections that can be\n * looked up by their code.\n *\n * @param {Projection} projection Projection instance.\n * @api\n */\nexport function addProjection(projection) {\n  projections.add(projection.getCode(), projection);\n  addTransformFunc(projection, projection, cloneTransform);\n}\n\n\n/**\n * @param {Array<Projection>} projections Projections.\n */\nexport function addProjections(projections) {\n  projections.forEach(addProjection);\n}\n\n\n/**\n * Fetches a Projection object for the code specified.\n *\n * @param {ProjectionLike} projectionLike Either a code string which is\n *     a combination of authority and identifier such as \"EPSG:4326\", or an\n *     existing projection object, or undefined.\n * @return {Projection} Projection object, or null if not in list.\n * @api\n */\nexport function get(projectionLike) {\n  return typeof projectionLike === 'string' ?\n    projections.get(/** @type {string} */ (projectionLike)) :\n    (/** @type {Projection} */ (projectionLike) || null);\n}\n\n\n/**\n * Get the resolution of the point in degrees or distance units.\n * For projections with degrees as the unit this will simply return the\n * provided resolution. For other projections the point resolution is\n * by default estimated by transforming the 'point' pixel to EPSG:4326,\n * measuring its width and height on the normal sphere,\n * and taking the average of the width and height.\n * A custom function can be provided for a specific projection, either\n * by setting the `getPointResolution` option in the\n * {@link module:ol/proj/Projection~Projection} constructor or by using\n * {@link module:ol/proj/Projection~Projection#setGetPointResolution} to change an existing\n * projection object.\n * @param {ProjectionLike} projection The projection.\n * @param {number} resolution Nominal resolution in projection units.\n * @param {import(\"./coordinate.js\").Coordinate} point Point to find adjusted resolution at.\n * @param {Units=} opt_units Units to get the point resolution in.\n * Default is the projection's units.\n * @return {number} Point resolution.\n * @api\n */\nexport function getPointResolution(projection, resolution, point, opt_units) {\n  projection = get(projection);\n  var pointResolution;\n  var getter = projection.getPointResolutionFunc();\n  if (getter) {\n    pointResolution = getter(resolution, point);\n  } else {\n    var units = projection.getUnits();\n    if (units == Units.DEGREES && !opt_units || opt_units == Units.DEGREES) {\n      pointResolution = resolution;\n    } else {\n      // Estimate point resolution by transforming the center pixel to EPSG:4326,\n      // measuring its width and height on the normal sphere, and taking the\n      // average of the width and height.\n      var toEPSG4326 = getTransformFromProjections(projection, get('EPSG:4326'));\n      var vertices = [\n        point[0] - resolution / 2, point[1],\n        point[0] + resolution / 2, point[1],\n        point[0], point[1] - resolution / 2,\n        point[0], point[1] + resolution / 2\n      ];\n      vertices = toEPSG4326(vertices, vertices, 2);\n      var width = getDistance(vertices.slice(0, 2), vertices.slice(2, 4));\n      var height = getDistance(vertices.slice(4, 6), vertices.slice(6, 8));\n      pointResolution = (width + height) / 2;\n      var metersPerUnit = opt_units ?\n        METERS_PER_UNIT[opt_units] :\n        projection.getMetersPerUnit();\n      if (metersPerUnit !== undefined) {\n        pointResolution /= metersPerUnit;\n      }\n    }\n  }\n  return pointResolution;\n}\n\n\n/**\n * Registers transformation functions that don't alter coordinates. Those allow\n * to transform between projections with equal meaning.\n *\n * @param {Array<Projection>} projections Projections.\n * @api\n */\nexport function addEquivalentProjections(projections) {\n  addProjections(projections);\n  projections.forEach(function(source) {\n    projections.forEach(function(destination) {\n      if (source !== destination) {\n        addTransformFunc(source, destination, cloneTransform);\n      }\n    });\n  });\n}\n\n\n/**\n * Registers transformation functions to convert coordinates in any projection\n * in projection1 to any projection in projection2.\n *\n * @param {Array<Projection>} projections1 Projections with equal\n *     meaning.\n * @param {Array<Projection>} projections2 Projections with equal\n *     meaning.\n * @param {TransformFunction} forwardTransform Transformation from any\n *   projection in projection1 to any projection in projection2.\n * @param {TransformFunction} inverseTransform Transform from any projection\n *   in projection2 to any projection in projection1..\n */\nexport function addEquivalentTransforms(projections1, projections2, forwardTransform, inverseTransform) {\n  projections1.forEach(function(projection1) {\n    projections2.forEach(function(projection2) {\n      addTransformFunc(projection1, projection2, forwardTransform);\n      addTransformFunc(projection2, projection1, inverseTransform);\n    });\n  });\n}\n\n\n/**\n * Clear all cached projections and transforms.\n */\nexport function clearAllProjections() {\n  projections.clear();\n  clearTransformFuncs();\n}\n\n\n/**\n * @param {Projection|string|undefined} projection Projection.\n * @param {string} defaultCode Default code.\n * @return {Projection} Projection.\n */\nexport function createProjection(projection, defaultCode) {\n  if (!projection) {\n    return get(defaultCode);\n  } else if (typeof projection === 'string') {\n    return get(projection);\n  } else {\n    return (\n      /** @type {Projection} */ (projection)\n    );\n  }\n}\n\n\n/**\n * Creates a {@link module:ol/proj~TransformFunction} from a simple 2D coordinate transform\n * function.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} coordTransform Coordinate\n *     transform.\n * @return {TransformFunction} Transform function.\n */\nexport function createTransformFromCoordinateTransform(coordTransform) {\n  return (\n    /**\n     * @param {Array<number>} input Input.\n     * @param {Array<number>=} opt_output Output.\n     * @param {number=} opt_dimension Dimension.\n     * @return {Array<number>} Output.\n     */\n    function(input, opt_output, opt_dimension) {\n      var length = input.length;\n      var dimension = opt_dimension !== undefined ? opt_dimension : 2;\n      var output = opt_output !== undefined ? opt_output : new Array(length);\n      for (var i = 0; i < length; i += dimension) {\n        var point = coordTransform([input[i], input[i + 1]]);\n        output[i] = point[0];\n        output[i + 1] = point[1];\n        for (var j = dimension - 1; j >= 2; --j) {\n          output[i + j] = input[i + j];\n        }\n      }\n      return output;\n    });\n}\n\n\n/**\n * Registers coordinate transform functions to convert coordinates between the\n * source projection and the destination projection.\n * The forward and inverse functions convert coordinate pairs; this function\n * converts these into the functions used internally which also handle\n * extents and coordinate arrays.\n *\n * @param {ProjectionLike} source Source projection.\n * @param {ProjectionLike} destination Destination projection.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} forward The forward transform\n *     function (that is, from the source projection to the destination\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} inverse The inverse transform\n *     function (that is, from the destination projection to the source\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @api\n */\nexport function addCoordinateTransforms(source, destination, forward, inverse) {\n  var sourceProj = get(source);\n  var destProj = get(destination);\n  addTransformFunc(sourceProj, destProj, createTransformFromCoordinateTransform(forward));\n  addTransformFunc(destProj, sourceProj, createTransformFromCoordinateTransform(inverse));\n}\n\n\n/**\n * Transforms a coordinate from longitude/latitude to a different projection.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate as longitude and latitude, i.e.\n *     an array with longitude as 1st and latitude as 2nd element.\n * @param {ProjectionLike=} opt_projection Target projection. The\n *     default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate projected to the target projection.\n * @api\n */\nexport function fromLonLat(coordinate, opt_projection) {\n  return transform(coordinate, 'EPSG:4326',\n    opt_projection !== undefined ? opt_projection : 'EPSG:3857');\n}\n\n\n/**\n * Transforms a coordinate to longitude/latitude.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Projected coordinate.\n * @param {ProjectionLike=} opt_projection Projection of the coordinate.\n *     The default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate as longitude and latitude, i.e. an array\n *     with longitude as 1st and latitude as 2nd element.\n * @api\n */\nexport function toLonLat(coordinate, opt_projection) {\n  var lonLat = transform(coordinate,\n    opt_projection !== undefined ? opt_projection : 'EPSG:3857', 'EPSG:4326');\n  var lon = lonLat[0];\n  if (lon < -180 || lon > 180) {\n    lonLat[0] = modulo(lon + 180, 360) - 180;\n  }\n  return lonLat;\n}\n\n\n/**\n * Checks if two projections are the same, that is every coordinate in one\n * projection does represent the same geographic point as the same coordinate in\n * the other projection.\n *\n * @param {Projection} projection1 Projection 1.\n * @param {Projection} projection2 Projection 2.\n * @return {boolean} Equivalent.\n * @api\n */\nexport function equivalent(projection1, projection2) {\n  if (projection1 === projection2) {\n    return true;\n  }\n  var equalUnits = projection1.getUnits() === projection2.getUnits();\n  if (projection1.getCode() === projection2.getCode()) {\n    return equalUnits;\n  } else {\n    var transformFunc = getTransformFromProjections(projection1, projection2);\n    return transformFunc === cloneTransform && equalUnits;\n  }\n}\n\n\n/**\n * Searches in the list of transform functions for the function for converting\n * coordinates from the source projection to the destination projection.\n *\n * @param {Projection} sourceProjection Source Projection object.\n * @param {Projection} destinationProjection Destination Projection\n *     object.\n * @return {TransformFunction} Transform function.\n */\nexport function getTransformFromProjections(sourceProjection, destinationProjection) {\n  var sourceCode = sourceProjection.getCode();\n  var destinationCode = destinationProjection.getCode();\n  var transformFunc = getTransformFunc(sourceCode, destinationCode);\n  if (!transformFunc) {\n    transformFunc = identityTransform;\n  }\n  return transformFunc;\n}\n\n\n/**\n * Given the projection-like objects, searches for a transformation\n * function to convert a coordinates array from the source projection to the\n * destination projection.\n *\n * @param {ProjectionLike} source Source.\n * @param {ProjectionLike} destination Destination.\n * @return {TransformFunction} Transform function.\n * @api\n */\nexport function getTransform(source, destination) {\n  var sourceProjection = get(source);\n  var destinationProjection = get(destination);\n  return getTransformFromProjections(sourceProjection, destinationProjection);\n}\n\n\n/**\n * Transforms a coordinate from source projection to destination projection.\n * This returns a new coordinate (and does not modify the original).\n *\n * See {@link module:ol/proj~transformExtent} for extent transformation.\n * See the transform method of {@link module:ol/geom/Geometry~Geometry} and its\n * subclasses for geometry transforms.\n *\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n * @api\n */\nexport function transform(coordinate, source, destination) {\n  var transformFunc = getTransform(source, destination);\n  return transformFunc(coordinate, undefined, coordinate.length);\n}\n\n\n/**\n * Transforms an extent from source projection to destination projection.  This\n * returns a new extent (and does not modify the original).\n *\n * @param {import(\"./extent.js\").Extent} extent The extent to transform.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @return {import(\"./extent.js\").Extent} The transformed extent.\n * @api\n */\nexport function transformExtent(extent, source, destination) {\n  var transformFunc = getTransform(source, destination);\n  return applyTransform(extent, transformFunc);\n}\n\n\n/**\n * Transforms the given point to the destination projection.\n *\n * @param {import(\"./coordinate.js\").Coordinate} point Point.\n * @param {Projection} sourceProjection Source projection.\n * @param {Projection} destinationProjection Destination projection.\n * @return {import(\"./coordinate.js\").Coordinate} Point.\n */\nexport function transformWithProjections(point, sourceProjection, destinationProjection) {\n  var transformFunc = getTransformFromProjections(sourceProjection, destinationProjection);\n  return transformFunc(point);\n}\n\n/**\n * Add transforms to and from EPSG:4326 and EPSG:3857.  This function is called\n * by when this module is executed and should only need to be called again after\n * `clearAllProjections()` is called (e.g. in tests).\n */\nexport function addCommon() {\n  // Add transformations that don't alter coordinates to convert within set of\n  // projections with equal meaning.\n  addEquivalentProjections(EPSG3857_PROJECTIONS);\n  addEquivalentProjections(EPSG4326_PROJECTIONS);\n  // Add transformations to convert EPSG:4326 like coordinates to EPSG:3857 like\n  // coordinates and back.\n  addEquivalentTransforms(EPSG4326_PROJECTIONS, EPSG3857_PROJECTIONS, fromEPSG4326, toEPSG4326);\n}\n\naddCommon();\n\n//# sourceMappingURL=proj.js.map","/**\n * @module ol/render/Event\n */\n\nimport Event from '../events/Event.js';\n\nvar RenderEvent = /*@__PURE__*/(function (Event) {\n  function RenderEvent(type, opt_vectorContext, opt_frameState, opt_context, opt_glContext) {\n\n    Event.call(this, type);\n\n    /**\n     * For canvas, this is an instance of {@link module:ol/render/canvas/Immediate}.\n     * @type {import(\"./VectorContext.js\").default|undefined}\n     * @api\n     */\n    this.vectorContext = opt_vectorContext;\n\n    /**\n     * An object representing the current render frame state.\n     * @type {import(\"../PluggableMap.js\").FrameState|undefined}\n     * @api\n     */\n    this.frameState = opt_frameState;\n\n    /**\n     * Canvas context. Only available when a Canvas renderer is used, null\n     * otherwise.\n     * @type {CanvasRenderingContext2D|null|undefined}\n     * @api\n     */\n    this.context = opt_context;\n\n    /**\n     * WebGL context. Only available when a WebGL renderer is used, null\n     * otherwise.\n     * @type {import(\"../webgl/Context.js\").default|null|undefined}\n     * @api\n     */\n    this.glContext = opt_glContext;\n\n  }\n\n  if ( Event ) RenderEvent.__proto__ = Event;\n  RenderEvent.prototype = Object.create( Event && Event.prototype );\n  RenderEvent.prototype.constructor = RenderEvent;\n\n  return RenderEvent;\n}(Event));\n\nexport default RenderEvent;\n\n//# sourceMappingURL=Event.js.map","/**\n * @module ol/obj\n */\n\n\n/**\n * Polyfill for Object.assign().  Assigns enumerable and own properties from\n * one or more source objects to a target object.\n * See https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign.\n *\n * @param {!Object} target The target object.\n * @param {...Object} var_sources The source object(s).\n * @return {!Object} The modified target object.\n */\nexport var assign = (typeof Object.assign === 'function') ? Object.assign : function(target, var_sources) {\n  var arguments$1 = arguments;\n\n  if (target === undefined || target === null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  var output = Object(target);\n  for (var i = 1, ii = arguments.length; i < ii; ++i) {\n    var source = arguments$1[i];\n    if (source !== undefined && source !== null) {\n      for (var key in source) {\n        if (source.hasOwnProperty(key)) {\n          output[key] = source[key];\n        }\n      }\n    }\n  }\n  return output;\n};\n\n\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\nexport function clear(object) {\n  for (var property in object) {\n    delete object[property];\n  }\n}\n\n\n/**\n * Get an array of property values from an object.\n * @param {Object<K,V>} object The object from which to get the values.\n * @return {!Array<V>} The property values.\n * @template K,V\n */\nexport function getValues(object) {\n  var values = [];\n  for (var property in object) {\n    values.push(object[property]);\n  }\n  return values;\n}\n\n\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n  var property;\n  for (property in object) {\n    return false;\n  }\n  return !property;\n}\n\n//# sourceMappingURL=obj.js.map","/**\n * @module ol/interaction/Property\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  ACTIVE: 'active'\n};\n\n//# sourceMappingURL=Property.js.map","/**\n * @module ol/interaction/Interaction\n */\nimport BaseObject from '../Object.js';\nimport {easeOut, linear} from '../easing.js';\nimport InteractionProperty from './Property.js';\nimport {clamp} from '../math.js';\n\n\n/**\n * Object literal with config options for interactions.\n * @typedef {Object} InteractionOptions\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} handleEvent\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. If the function returns a falsy value, propagation of\n * the event to other interactions in the map's interactions chain will be\n * prevented (this includes functions with no explicit return).\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * User actions that change the state of the map. Some are similar to controls,\n * but are not associated with a DOM element.\n * For example, {@link module:ol/interaction/KeyboardZoom~KeyboardZoom} is\n * functionally the same as {@link module:ol/control/Zoom~Zoom}, but triggered\n * by a keyboard event not a button element event.\n * Although interactions do not have a DOM element, some of them do render\n * vectors and so are visible on the screen.\n * @api\n */\nvar Interaction = /*@__PURE__*/(function (BaseObject) {\n  function Interaction(options) {\n    BaseObject.call(this);\n\n    if (options.handleEvent) {\n      this.handleEvent = options.handleEvent;\n    }\n\n    /**\n     * @private\n     * @type {import(\"../PluggableMap.js\").default}\n     */\n    this.map_ = null;\n\n    this.setActive(true);\n  }\n\n  if ( BaseObject ) Interaction.__proto__ = BaseObject;\n  Interaction.prototype = Object.create( BaseObject && BaseObject.prototype );\n  Interaction.prototype.constructor = Interaction;\n\n  /**\n   * Return whether the interaction is currently active.\n   * @return {boolean} `true` if the interaction is active, `false` otherwise.\n   * @observable\n   * @api\n   */\n  Interaction.prototype.getActive = function getActive () {\n    return /** @type {boolean} */ (this.get(InteractionProperty.ACTIVE));\n  };\n\n  /**\n   * Get the map associated with this interaction.\n   * @return {import(\"../PluggableMap.js\").default} Map.\n   * @api\n   */\n  Interaction.prototype.getMap = function getMap () {\n    return this.map_;\n  };\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent map browser event}.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n   * @return {boolean} `false` to stop event propagation.\n   * @api\n   */\n  Interaction.prototype.handleEvent = function handleEvent (mapBrowserEvent) {\n    return true;\n  };\n\n  /**\n   * Activate or deactivate the interaction.\n   * @param {boolean} active Active.\n   * @observable\n   * @api\n   */\n  Interaction.prototype.setActive = function setActive (active) {\n    this.set(InteractionProperty.ACTIVE, active);\n  };\n\n  /**\n   * Remove the interaction from its current map and attach it to the new map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n  Interaction.prototype.setMap = function setMap (map) {\n    this.map_ = map;\n  };\n\n  return Interaction;\n}(BaseObject));\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {import(\"../coordinate.js\").Coordinate} delta Delta.\n * @param {number=} opt_duration Duration.\n */\nexport function pan(view, delta, opt_duration) {\n  var currentCenter = view.getCenter();\n  if (currentCenter) {\n    var center = view.constrainCenter(\n      [currentCenter[0] + delta[0], currentCenter[1] + delta[1]]);\n    if (opt_duration) {\n      view.animate({\n        duration: opt_duration,\n        easing: linear,\n        center: center\n      });\n    } else {\n      view.setCenter(center);\n    }\n  }\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number|undefined} rotation Rotation.\n * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function rotate(view, rotation, opt_anchor, opt_duration) {\n  rotation = view.constrainRotation(rotation, 0);\n  rotateWithoutConstraints(view, rotation, opt_anchor, opt_duration);\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number|undefined} rotation Rotation.\n * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function rotateWithoutConstraints(view, rotation, opt_anchor, opt_duration) {\n  if (rotation !== undefined) {\n    var currentRotation = view.getRotation();\n    var currentCenter = view.getCenter();\n    if (currentRotation !== undefined && currentCenter && opt_duration > 0) {\n      view.animate({\n        rotation: rotation,\n        anchor: opt_anchor,\n        duration: opt_duration,\n        easing: easeOut\n      });\n    } else {\n      view.rotate(rotation, opt_anchor);\n    }\n  }\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number|undefined} resolution Resolution to go to.\n * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n * @param {number=} opt_direction Zooming direction; > 0 indicates\n *     zooming out, in which case the constraints system will select\n *     the largest nearest resolution; < 0 indicates zooming in, in\n *     which case the constraints system will select the smallest\n *     nearest resolution; == 0 indicates that the zooming direction\n *     is unknown/not relevant, in which case the constraints system\n *     will select the nearest resolution. If not defined 0 is\n *     assumed.\n */\nexport function zoom(view, resolution, opt_anchor, opt_duration, opt_direction) {\n  resolution = view.constrainResolution(resolution, 0, opt_direction);\n  zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration);\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number} delta Delta from previous zoom level.\n * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function zoomByDelta(view, delta, opt_anchor, opt_duration) {\n  var currentResolution = view.getResolution();\n  var resolution = view.constrainResolution(currentResolution, delta, 0);\n\n  if (resolution !== undefined) {\n    var resolutions = view.getResolutions();\n    resolution = clamp(\n      resolution,\n      view.getMinResolution() || resolutions[resolutions.length - 1],\n      view.getMaxResolution() || resolutions[0]);\n  }\n\n  // If we have a constraint on center, we need to change the anchor so that the\n  // new center is within the extent. We first calculate the new center, apply\n  // the constraint to it, and then calculate back the anchor\n  if (opt_anchor && resolution !== undefined && resolution !== currentResolution) {\n    var currentCenter = view.getCenter();\n    var center = view.calculateCenterZoom(resolution, opt_anchor);\n    center = view.constrainCenter(center);\n\n    opt_anchor = [\n      (resolution * currentCenter[0] - currentResolution * center[0]) /\n          (resolution - currentResolution),\n      (resolution * currentCenter[1] - currentResolution * center[1]) /\n          (resolution - currentResolution)\n    ];\n  }\n\n  zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration);\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number|undefined} resolution Resolution to go to.\n * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration) {\n  if (resolution) {\n    var currentResolution = view.getResolution();\n    var currentCenter = view.getCenter();\n    if (currentResolution !== undefined && currentCenter &&\n        resolution !== currentResolution && opt_duration) {\n      view.animate({\n        resolution: resolution,\n        anchor: opt_anchor,\n        duration: opt_duration,\n        easing: easeOut\n      });\n    } else {\n      if (opt_anchor) {\n        var center = view.calculateCenterZoom(resolution, opt_anchor);\n        view.setCenter(center);\n      }\n      view.setResolution(resolution);\n    }\n  }\n}\n\nexport default Interaction;\n\n//# sourceMappingURL=Interaction.js.map","/**\n * @module ol/interaction/DoubleClickZoom\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport Interaction, {zoomByDelta} from './Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [delta=1] The zoom delta applied on each double click.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom by double-clicking on the map.\n * @api\n */\nvar DoubleClickZoom = /*@__PURE__*/(function (Interaction) {\n  function DoubleClickZoom(opt_options) {\n    Interaction.call(this, {\n      handleEvent: handleEvent\n    });\n\n    var options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delta_ = options.delta ? options.delta : 1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n  if ( Interaction ) DoubleClickZoom.__proto__ = Interaction;\n  DoubleClickZoom.prototype = Object.create( Interaction && Interaction.prototype );\n  DoubleClickZoom.prototype.constructor = DoubleClickZoom;\n\n  return DoubleClickZoom;\n}(Interaction));\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a\n * doubleclick) and eventually zooms the map.\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {DoubleClickZoom}\n */\nfunction handleEvent(mapBrowserEvent) {\n  var stopEvent = false;\n  if (mapBrowserEvent.type == MapBrowserEventType.DBLCLICK) {\n    var browserEvent = /** @type {MouseEvent} */ (mapBrowserEvent.originalEvent);\n    var map = mapBrowserEvent.map;\n    var anchor = mapBrowserEvent.coordinate;\n    var delta = browserEvent.shiftKey ? -this.delta_ : this.delta_;\n    var view = map.getView();\n    zoomByDelta(view, delta, anchor, this.duration_);\n    mapBrowserEvent.preventDefault();\n    stopEvent = true;\n  }\n  return !stopEvent;\n}\n\nexport default DoubleClickZoom;\n\n//# sourceMappingURL=DoubleClickZoom.js.map","/**\n * @module ol/interaction/Pointer\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport Interaction from './Interaction.js';\nimport {getValues} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default):boolean} [handleDownEvent]\n * Function handling \"down\" events. If the function returns `true` then a drag\n * sequence is started.\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default)} [handleDragEvent]\n * Function handling \"drag\" events. This function is called on \"move\" events\n * during a drag sequence.\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} [handleEvent]\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. The function may return `false` to prevent the\n * propagation of the event to other interactions in the map's interactions\n * chain.\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default)} [handleMoveEvent]\n * Function handling \"move\" events. This function is called on \"move\" events,\n * also during a drag sequence (so during a drag sequence both the\n * `handleDragEvent` function and this function are called).\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default):boolean} [handleUpEvent]\n *  Function handling \"up\" events. If the function returns `false` then the\n * current drag sequence is stopped.\n * @property {function(boolean):boolean} [stopDown]\n * Should the down event be propagated to other interactions, or should be\n * stopped?\n */\n\n\n/**\n * @classdesc\n * Base class that calls user-defined functions on `down`, `move` and `up`\n * events. This class also manages \"drag sequences\".\n *\n * When the `handleDownEvent` user function returns `true` a drag sequence is\n * started. During a drag sequence the `handleDragEvent` user function is\n * called on `move` events. The drag sequence ends when the `handleUpEvent`\n * user function is called and returns `false`.\n * @api\n */\nvar PointerInteraction = /*@__PURE__*/(function (Interaction) {\n  function PointerInteraction(opt_options) {\n\n    var options = opt_options ? opt_options : {};\n\n    Interaction.call(/** @type {import(\"./Interaction.js\").InteractionOptions} */ this, (options));\n\n    if (options.handleDownEvent) {\n      this.handleDownEvent = options.handleDownEvent;\n    }\n\n    if (options.handleDragEvent) {\n      this.handleDragEvent = options.handleDragEvent;\n    }\n\n    if (options.handleMoveEvent) {\n      this.handleMoveEvent = options.handleMoveEvent;\n    }\n\n    if (options.handleUpEvent) {\n      this.handleUpEvent = options.handleUpEvent;\n    }\n\n    if (options.stopDown) {\n      this.stopDown = options.stopDown;\n    }\n\n    /**\n     * @type {boolean}\n     * @protected\n     */\n    this.handlingDownUpSequence = false;\n\n    /**\n     * @type {!Object<string, import(\"../pointer/PointerEvent.js\").default>}\n     * @private\n     */\n    this.trackedPointers_ = {};\n\n    /**\n     * @type {Array<import(\"../pointer/PointerEvent.js\").default>}\n     * @protected\n     */\n    this.targetPointers = [];\n\n  }\n\n  if ( Interaction ) PointerInteraction.__proto__ = Interaction;\n  PointerInteraction.prototype = Object.create( Interaction && Interaction.prototype );\n  PointerInteraction.prototype.constructor = PointerInteraction;\n\n  /**\n   * Handle pointer down events.\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   * @protected\n   */\n  PointerInteraction.prototype.handleDownEvent = function handleDownEvent (mapBrowserEvent) {\n    return false;\n  };\n\n  /**\n   * Handle pointer drag events.\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @protected\n   */\n  PointerInteraction.prototype.handleDragEvent = function handleDragEvent (mapBrowserEvent) {};\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent map browser event} and may call into\n   * other functions, if event sequences like e.g. 'drag' or 'down-up' etc. are\n   * detected.\n   * @override\n   * @api\n   */\n  PointerInteraction.prototype.handleEvent = function handleEvent (mapBrowserEvent) {\n    if (!(/** @type {import(\"../MapBrowserPointerEvent.js\").default} */ (mapBrowserEvent).pointerEvent)) {\n      return true;\n    }\n\n    var stopEvent = false;\n    this.updateTrackedPointers_(mapBrowserEvent);\n    if (this.handlingDownUpSequence) {\n      if (mapBrowserEvent.type == MapBrowserEventType.POINTERDRAG) {\n        this.handleDragEvent(mapBrowserEvent);\n      } else if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n        var handledUp = this.handleUpEvent(mapBrowserEvent);\n        this.handlingDownUpSequence = handledUp && this.targetPointers.length > 0;\n      }\n    } else {\n      if (mapBrowserEvent.type == MapBrowserEventType.POINTERDOWN) {\n        var handled = this.handleDownEvent(mapBrowserEvent);\n        if (handled) {\n          mapBrowserEvent.preventDefault();\n        }\n        this.handlingDownUpSequence = handled;\n        stopEvent = this.stopDown(handled);\n      } else if (mapBrowserEvent.type == MapBrowserEventType.POINTERMOVE) {\n        this.handleMoveEvent(mapBrowserEvent);\n      }\n    }\n    return !stopEvent;\n  };\n\n  /**\n   * Handle pointer move events.\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @protected\n   */\n  PointerInteraction.prototype.handleMoveEvent = function handleMoveEvent (mapBrowserEvent) {};\n\n  /**\n   * Handle pointer up events.\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   * @protected\n   */\n  PointerInteraction.prototype.handleUpEvent = function handleUpEvent (mapBrowserEvent) {\n    return false;\n  };\n\n  /**\n   * This function is used to determine if \"down\" events should be propagated\n   * to other interactions or should be stopped.\n   * @param {boolean} handled Was the event handled by the interaction?\n   * @return {boolean} Should the `down` event be stopped?\n   */\n  PointerInteraction.prototype.stopDown = function stopDown (handled) {\n    return handled;\n  };\n\n  /**\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @private\n   */\n  PointerInteraction.prototype.updateTrackedPointers_ = function updateTrackedPointers_ (mapBrowserEvent) {\n    if (isPointerDraggingEvent(mapBrowserEvent)) {\n      var event = mapBrowserEvent.pointerEvent;\n\n      var id = event.pointerId.toString();\n      if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n        delete this.trackedPointers_[id];\n      } else if (mapBrowserEvent.type ==\n          MapBrowserEventType.POINTERDOWN) {\n        this.trackedPointers_[id] = event;\n      } else if (id in this.trackedPointers_) {\n        // update only when there was a pointerdown event for this pointer\n        this.trackedPointers_[id] = event;\n      }\n      this.targetPointers = getValues(this.trackedPointers_);\n    }\n  };\n\n  return PointerInteraction;\n}(Interaction));\n\n\n/**\n * @param {Array<import(\"../pointer/PointerEvent.js\").default>} pointerEvents List of events.\n * @return {import(\"../pixel.js\").Pixel} Centroid pixel.\n */\nexport function centroid(pointerEvents) {\n  var length = pointerEvents.length;\n  var clientX = 0;\n  var clientY = 0;\n  for (var i = 0; i < length; i++) {\n    clientX += pointerEvents[i].clientX;\n    clientY += pointerEvents[i].clientY;\n  }\n  return [clientX / length, clientY / length];\n}\n\n\n/**\n * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n * @return {boolean} Whether the event is a pointerdown, pointerdrag\n *     or pointerup event.\n */\nfunction isPointerDraggingEvent(mapBrowserEvent) {\n  var type = mapBrowserEvent.type;\n  return type === MapBrowserEventType.POINTERDOWN ||\n    type === MapBrowserEventType.POINTERDRAG ||\n    type === MapBrowserEventType.POINTERUP;\n}\n\n\nexport default PointerInteraction;\n\n//# sourceMappingURL=Pointer.js.map","/**\n * @module ol/interaction/DragPan\n */\nimport ViewHint from '../ViewHint.js';\nimport {scale as scaleCoordinate, rotate as rotateCoordinate, add as addCoordinate} from '../coordinate.js';\nimport {easeOut} from '../easing.js';\nimport {noModifierKeys} from '../events/condition.js';\nimport {FALSE} from '../functions.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from './Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~noModifierKeys}.\n * @property {import(\"../Kinetic.js\").default} [kinetic] Kinetic inertia to apply to the pan.\n */\n\n\n/**\n * @classdesc\n * Allows the user to pan the map by dragging the map.\n * @api\n */\nvar DragPan = /*@__PURE__*/(function (PointerInteraction) {\n  function DragPan(opt_options) {\n\n    PointerInteraction.call(this, {\n      stopDown: FALSE\n    });\n\n    var options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {import(\"../Kinetic.js\").default|undefined}\n     */\n    this.kinetic_ = options.kinetic;\n\n    /**\n     * @type {import(\"../pixel.js\").Pixel}\n     */\n    this.lastCentroid = null;\n\n    /**\n     * @type {number}\n     */\n    this.lastPointersCount_;\n\n    /**\n     * @type {boolean}\n     */\n    this.panning_ = false;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : noModifierKeys;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.noKinetic_ = false;\n\n  }\n\n  if ( PointerInteraction ) DragPan.__proto__ = PointerInteraction;\n  DragPan.prototype = Object.create( PointerInteraction && PointerInteraction.prototype );\n  DragPan.prototype.constructor = DragPan;\n\n  /**\n   * @inheritDoc\n   */\n  DragPan.prototype.handleDragEvent = function handleDragEvent (mapBrowserEvent) {\n    if (!this.panning_) {\n      this.panning_ = true;\n      this.getMap().getView().setHint(ViewHint.INTERACTING, 1);\n    }\n    var targetPointers = this.targetPointers;\n    var centroid = centroidFromPointers(targetPointers);\n    if (targetPointers.length == this.lastPointersCount_) {\n      if (this.kinetic_) {\n        this.kinetic_.update(centroid[0], centroid[1]);\n      }\n      if (this.lastCentroid) {\n        var deltaX = this.lastCentroid[0] - centroid[0];\n        var deltaY = centroid[1] - this.lastCentroid[1];\n        var map = mapBrowserEvent.map;\n        var view = map.getView();\n        var center = [deltaX, deltaY];\n        scaleCoordinate(center, view.getResolution());\n        rotateCoordinate(center, view.getRotation());\n        addCoordinate(center, view.getCenter());\n        center = view.constrainCenter(center);\n        view.setCenter(center);\n      }\n    } else if (this.kinetic_) {\n      // reset so we don't overestimate the kinetic energy after\n      // after one finger down, tiny drag, second finger down\n      this.kinetic_.begin();\n    }\n    this.lastCentroid = centroid;\n    this.lastPointersCount_ = targetPointers.length;\n  };\n\n  /**\n   * @inheritDoc\n   */\n  DragPan.prototype.handleUpEvent = function handleUpEvent (mapBrowserEvent) {\n    var map = mapBrowserEvent.map;\n    var view = map.getView();\n    if (this.targetPointers.length === 0) {\n      if (!this.noKinetic_ && this.kinetic_ && this.kinetic_.end()) {\n        var distance = this.kinetic_.getDistance();\n        var angle = this.kinetic_.getAngle();\n        var center = /** @type {!import(\"../coordinate.js\").Coordinate} */ (view.getCenter());\n        var centerpx = map.getPixelFromCoordinate(center);\n        var dest = map.getCoordinateFromPixel([\n          centerpx[0] - distance * Math.cos(angle),\n          centerpx[1] - distance * Math.sin(angle)\n        ]);\n        view.animate({\n          center: view.constrainCenter(dest),\n          duration: 500,\n          easing: easeOut\n        });\n      }\n      if (this.panning_) {\n        this.panning_ = false;\n        view.setHint(ViewHint.INTERACTING, -1);\n      }\n      return false;\n    } else {\n      if (this.kinetic_) {\n        // reset so we don't overestimate the kinetic energy after\n        // after one finger up, tiny drag, second finger up\n        this.kinetic_.begin();\n      }\n      this.lastCentroid = null;\n      return true;\n    }\n  };\n\n  /**\n   * @inheritDoc\n   */\n  DragPan.prototype.handleDownEvent = function handleDownEvent (mapBrowserEvent) {\n    if (this.targetPointers.length > 0 && this.condition_(mapBrowserEvent)) {\n      var map = mapBrowserEvent.map;\n      var view = map.getView();\n      this.lastCentroid = null;\n      // stop any current animation\n      if (view.getAnimating()) {\n        view.setCenter(mapBrowserEvent.frameState.viewState.center);\n      }\n      if (this.kinetic_) {\n        this.kinetic_.begin();\n      }\n      // No kinetic as soon as more than one pointer on the screen is\n      // detected. This is to prevent nasty pans after pinch.\n      this.noKinetic_ = this.targetPointers.length > 1;\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  return DragPan;\n}(PointerInteraction));\n\nexport default DragPan;\n\n//# sourceMappingURL=DragPan.js.map","/**\n * @module ol/interaction/DragRotate\n */\nimport {disable} from '../rotationconstraint.js';\nimport ViewHint from '../ViewHint.js';\nimport {altShiftKeysOnly, mouseOnly, mouseActionButton} from '../events/condition.js';\nimport {FALSE} from '../functions.js';\nimport {rotate, rotateWithoutConstraints} from './Interaction.js';\nimport PointerInteraction from './Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an\n * {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~altShiftKeysOnly}.\n * @property {number} [duration=250] Animation duration in milliseconds.\n */\n\n\n/**\n * @classdesc\n * Allows the user to rotate the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the alt and shift keys are held down.\n *\n * This interaction is only supported for mouse devices.\n * @api\n */\nvar DragRotate = /*@__PURE__*/(function (PointerInteraction) {\n  function DragRotate(opt_options) {\n\n    var options = opt_options ? opt_options : {};\n\n    PointerInteraction.call(this, {\n      stopDown: FALSE\n    });\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : altShiftKeysOnly;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastAngle_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n  if ( PointerInteraction ) DragRotate.__proto__ = PointerInteraction;\n  DragRotate.prototype = Object.create( PointerInteraction && PointerInteraction.prototype );\n  DragRotate.prototype.constructor = DragRotate;\n\n  /**\n   * @inheritDoc\n   */\n  DragRotate.prototype.handleDragEvent = function handleDragEvent (mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return;\n    }\n\n    var map = mapBrowserEvent.map;\n    var view = map.getView();\n    if (view.getConstraints().rotation === disable) {\n      return;\n    }\n    var size = map.getSize();\n    var offset = mapBrowserEvent.pixel;\n    var theta =\n        Math.atan2(size[1] / 2 - offset[1], offset[0] - size[0] / 2);\n    if (this.lastAngle_ !== undefined) {\n      var delta = theta - this.lastAngle_;\n      var rotation = view.getRotation();\n      rotateWithoutConstraints(view, rotation - delta);\n    }\n    this.lastAngle_ = theta;\n  };\n\n\n  /**\n   * @inheritDoc\n   */\n  DragRotate.prototype.handleUpEvent = function handleUpEvent (mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return true;\n    }\n\n    var map = mapBrowserEvent.map;\n    var view = map.getView();\n    view.setHint(ViewHint.INTERACTING, -1);\n    var rotation = view.getRotation();\n    rotate(view, rotation, undefined, this.duration_);\n    return false;\n  };\n\n\n  /**\n   * @inheritDoc\n   */\n  DragRotate.prototype.handleDownEvent = function handleDownEvent (mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return false;\n    }\n\n    if (mouseActionButton(mapBrowserEvent) && this.condition_(mapBrowserEvent)) {\n      var map = mapBrowserEvent.map;\n      map.getView().setHint(ViewHint.INTERACTING, 1);\n      this.lastAngle_ = undefined;\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  return DragRotate;\n}(PointerInteraction));\n\nexport default DragRotate;\n\n//# sourceMappingURL=DragRotate.js.map","/**\n * @module ol/render/Box\n */\n\nimport Disposable from '../Disposable.js';\nimport Polygon from '../geom/Polygon.js';\n\nvar RenderBox = /*@__PURE__*/(function (Disposable) {\n  function RenderBox(className) {\n    Disposable.call(this);\n\n    /**\n     * @type {import(\"../geom/Polygon.js\").default}\n     * @private\n     */\n    this.geometry_ = null;\n\n    /**\n     * @type {HTMLDivElement}\n     * @private\n     */\n    this.element_ = /** @type {HTMLDivElement} */ (document.createElement('div'));\n    this.element_.style.position = 'absolute';\n    this.element_.className = 'ol-box ' + className;\n\n    /**\n     * @private\n     * @type {import(\"../PluggableMap.js\").default}\n     */\n    this.map_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../pixel.js\").Pixel}\n     */\n    this.startPixel_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../pixel.js\").Pixel}\n     */\n    this.endPixel_ = null;\n\n  }\n\n  if ( Disposable ) RenderBox.__proto__ = Disposable;\n  RenderBox.prototype = Object.create( Disposable && Disposable.prototype );\n  RenderBox.prototype.constructor = RenderBox;\n\n  /**\n   * @inheritDoc\n   */\n  RenderBox.prototype.disposeInternal = function disposeInternal () {\n    this.setMap(null);\n  };\n\n  /**\n   * @private\n   */\n  RenderBox.prototype.render_ = function render_ () {\n    var startPixel = this.startPixel_;\n    var endPixel = this.endPixel_;\n    var px = 'px';\n    var style = this.element_.style;\n    style.left = Math.min(startPixel[0], endPixel[0]) + px;\n    style.top = Math.min(startPixel[1], endPixel[1]) + px;\n    style.width = Math.abs(endPixel[0] - startPixel[0]) + px;\n    style.height = Math.abs(endPixel[1] - startPixel[1]) + px;\n  };\n\n  /**\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n  RenderBox.prototype.setMap = function setMap (map) {\n    if (this.map_) {\n      this.map_.getOverlayContainer().removeChild(this.element_);\n      var style = this.element_.style;\n      style.left = style.top = style.width = style.height = 'inherit';\n    }\n    this.map_ = map;\n    if (this.map_) {\n      this.map_.getOverlayContainer().appendChild(this.element_);\n    }\n  };\n\n  /**\n   * @param {import(\"../pixel.js\").Pixel} startPixel Start pixel.\n   * @param {import(\"../pixel.js\").Pixel} endPixel End pixel.\n   */\n  RenderBox.prototype.setPixels = function setPixels (startPixel, endPixel) {\n    this.startPixel_ = startPixel;\n    this.endPixel_ = endPixel;\n    this.createOrUpdateGeometry();\n    this.render_();\n  };\n\n  /**\n   * Creates or updates the cached geometry.\n   */\n  RenderBox.prototype.createOrUpdateGeometry = function createOrUpdateGeometry () {\n    var startPixel = this.startPixel_;\n    var endPixel = this.endPixel_;\n    var pixels = [\n      startPixel,\n      [startPixel[0], endPixel[1]],\n      endPixel,\n      [endPixel[0], startPixel[1]]\n    ];\n    var coordinates = pixels.map(this.map_.getCoordinateFromPixel, this.map_);\n    // close the polygon\n    coordinates[4] = coordinates[0].slice();\n    if (!this.geometry_) {\n      this.geometry_ = new Polygon([coordinates]);\n    } else {\n      this.geometry_.setCoordinates([coordinates]);\n    }\n  };\n\n  /**\n   * @return {import(\"../geom/Polygon.js\").default} Geometry.\n   */\n  RenderBox.prototype.getGeometry = function getGeometry () {\n    return this.geometry_;\n  };\n\n  return RenderBox;\n}(Disposable));\n\n\nexport default RenderBox;\n\n//# sourceMappingURL=Box.js.map","/**\n * @module ol/interaction/DragBox\n */\n// FIXME draw drag box\nimport Event from '../events/Event.js';\nimport {always, mouseOnly, mouseActionButton} from '../events/condition.js';\nimport {VOID} from '../functions.js';\nimport PointerInteraction from './Pointer.js';\nimport RenderBox from '../render/Box.js';\n\n\n/**\n * A function that takes a {@link module:ol/MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s and returns a `{boolean}`. If the condition is met,\n * true should be returned.\n * @typedef {function(this: ?, import(\"../MapBrowserEvent.js\").default, import(\"../pixel.js\").Pixel, import(\"../pixel.js\").Pixel):boolean} EndCondition\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragbox'] CSS class name for styling the box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link ol/events/condition~always}.\n * @property {number} [minArea=64] The minimum area of the box in pixel, this value is used by the default\n * `boxEndCondition` function.\n * @property {EndCondition} [boxEndCondition] A function that takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s to indicate whether a `boxend` event should be fired.\n * Default is `true` if the area of the box is bigger than the `minArea` option.\n * @property {function(this:DragBox, import(\"../MapBrowserEvent.js\").default)} onBoxEnd Code to execute just\n * before `boxend` is fired.\n */\n\n\n/**\n * @enum {string}\n */\nvar DragBoxEventType = {\n  /**\n   * Triggered upon drag box start.\n   * @event DragBoxEvent#boxstart\n   * @api\n   */\n  BOXSTART: 'boxstart',\n\n  /**\n   * Triggered on drag when box is active.\n   * @event DragBoxEvent#boxdrag\n   * @api\n   */\n  BOXDRAG: 'boxdrag',\n\n  /**\n   * Triggered upon drag box end.\n   * @event DragBoxEvent#boxend\n   * @api\n   */\n  BOXEND: 'boxend'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/DragBox~DragBox} instances are instances of\n * this type.\n */\nvar DragBoxEvent = /*@__PURE__*/(function (Event) {\n  function DragBoxEvent(type, coordinate, mapBrowserEvent) {\n    Event.call(this, type);\n\n    /**\n     * The coordinate of the drag event.\n     * @const\n     * @type {import(\"../coordinate.js\").Coordinate}\n     * @api\n     */\n    this.coordinate = coordinate;\n\n    /**\n     * @const\n     * @type {import(\"../MapBrowserEvent.js\").default}\n     * @api\n     */\n    this.mapBrowserEvent = mapBrowserEvent;\n\n  }\n\n  if ( Event ) DragBoxEvent.__proto__ = Event;\n  DragBoxEvent.prototype = Object.create( Event && Event.prototype );\n  DragBoxEvent.prototype.constructor = DragBoxEvent;\n\n  return DragBoxEvent;\n}(Event));\n\n\n/**\n * @classdesc\n * Allows the user to draw a vector box by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the shift or other key is held down. This is used, for example,\n * for zooming to a specific area of the map\n * (see {@link module:ol/interaction/DragZoom~DragZoom} and\n * {@link module:ol/interaction/DragRotateAndZoom}).\n *\n * This interaction is only supported for mouse devices.\n *\n * @fires DragBoxEvent\n * @api\n */\nvar DragBox = /*@__PURE__*/(function (PointerInteraction) {\n  function DragBox(opt_options) {\n\n    PointerInteraction.call(this);\n\n    var options = opt_options ? opt_options : {};\n\n    /**\n    * @type {import(\"../render/Box.js\").default}\n    * @private\n    */\n    this.box_ = new RenderBox(options.className || 'ol-dragbox');\n\n    /**\n    * @type {number}\n    * @private\n    */\n    this.minArea_ = options.minArea !== undefined ? options.minArea : 64;\n\n    /**\n     * Function to execute just before `onboxend` is fired\n     * @type {function(this:DragBox, import(\"../MapBrowserEvent.js\").default)}\n     * @private\n     */\n    this.onBoxEnd_ = options.onBoxEnd ? options.onBoxEnd : VOID;\n\n    /**\n    * @type {import(\"../pixel.js\").Pixel}\n    * @private\n    */\n    this.startPixel_ = null;\n\n    /**\n    * @private\n    * @type {import(\"../events/condition.js\").Condition}\n    */\n    this.condition_ = options.condition ? options.condition : always;\n\n    /**\n    * @private\n    * @type {EndCondition}\n    */\n    this.boxEndCondition_ = options.boxEndCondition ?\n      options.boxEndCondition : this.defaultBoxEndCondition;\n  }\n\n  if ( PointerInteraction ) DragBox.__proto__ = PointerInteraction;\n  DragBox.prototype = Object.create( PointerInteraction && PointerInteraction.prototype );\n  DragBox.prototype.constructor = DragBox;\n\n  /**\n   * The default condition for determining whether the boxend event\n   * should fire.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent The originating MapBrowserEvent\n   *     leading to the box end.\n   * @param {import(\"../pixel.js\").Pixel} startPixel The starting pixel of the box.\n   * @param {import(\"../pixel.js\").Pixel} endPixel The end pixel of the box.\n   * @return {boolean} Whether or not the boxend condition should be fired.\n   */\n  DragBox.prototype.defaultBoxEndCondition = function defaultBoxEndCondition (mapBrowserEvent, startPixel, endPixel) {\n    var width = endPixel[0] - startPixel[0];\n    var height = endPixel[1] - startPixel[1];\n    return width * width + height * height >= this.minArea_;\n  };\n\n  /**\n  * Returns geometry of last drawn box.\n  * @return {import(\"../geom/Polygon.js\").default} Geometry.\n  * @api\n  */\n  DragBox.prototype.getGeometry = function getGeometry () {\n    return this.box_.getGeometry();\n  };\n\n  /**\n   * @inheritDoc\n   */\n  DragBox.prototype.handleDragEvent = function handleDragEvent (mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return;\n    }\n\n    this.box_.setPixels(this.startPixel_, mapBrowserEvent.pixel);\n\n    this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,\n      mapBrowserEvent.coordinate, mapBrowserEvent));\n  };\n\n  /**\n   * @inheritDoc\n   */\n  DragBox.prototype.handleUpEvent = function handleUpEvent (mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return true;\n    }\n\n    this.box_.setMap(null);\n\n    if (this.boxEndCondition_(mapBrowserEvent, this.startPixel_, mapBrowserEvent.pixel)) {\n      this.onBoxEnd_(mapBrowserEvent);\n      this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXEND,\n        mapBrowserEvent.coordinate, mapBrowserEvent));\n    }\n    return false;\n  };\n\n  /**\n   * @inheritDoc\n   */\n  DragBox.prototype.handleDownEvent = function handleDownEvent (mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return false;\n    }\n\n    if (mouseActionButton(mapBrowserEvent) &&\n        this.condition_(mapBrowserEvent)) {\n      this.startPixel_ = mapBrowserEvent.pixel;\n      this.box_.setMap(mapBrowserEvent.map);\n      this.box_.setPixels(this.startPixel_, this.startPixel_);\n      this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,\n        mapBrowserEvent.coordinate, mapBrowserEvent));\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  return DragBox;\n}(PointerInteraction));\n\n\nexport default DragBox;\n\n//# sourceMappingURL=DragBox.js.map","/**\n * @module ol/interaction/DragZoom\n */\nimport {easeOut} from '../easing.js';\nimport {shiftKeyOnly} from '../events/condition.js';\nimport {createOrUpdateFromCoordinates, getBottomLeft, getCenter, getTopRight, scaleFromCenter} from '../extent.js';\nimport DragBox from './DragBox.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragzoom'] CSS class name for styling the\n * box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~shiftKeyOnly}.\n * @property {number} [duration=200] Animation duration in milliseconds.\n * @property {boolean} [out=false] Use interaction for zooming out.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when a key, shift by default, is held down.\n *\n * To change the style of the box, use CSS and the `.ol-dragzoom` selector, or\n * your custom one configured with `className`.\n * @api\n */\nvar DragZoom = /*@__PURE__*/(function (DragBox) {\n  function DragZoom(opt_options) {\n    var options = opt_options ? opt_options : {};\n\n    var condition = options.condition ? options.condition : shiftKeyOnly;\n\n    DragBox.call(this, {\n      condition: condition,\n      className: options.className || 'ol-dragzoom',\n      onBoxEnd: onBoxEnd\n    });\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 200;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.out_ = options.out !== undefined ? options.out : false;\n  }\n\n  if ( DragBox ) DragZoom.__proto__ = DragBox;\n  DragZoom.prototype = Object.create( DragBox && DragBox.prototype );\n  DragZoom.prototype.constructor = DragZoom;\n\n  return DragZoom;\n}(DragBox));\n\n\n/**\n * @this {DragZoom}\n */\nfunction onBoxEnd() {\n  var map = this.getMap();\n  var view = /** @type {!import(\"../View.js\").default} */ (map.getView());\n  var size = /** @type {!import(\"../size.js\").Size} */ (map.getSize());\n  var extent = this.getGeometry().getExtent();\n\n  if (this.out_) {\n    var mapExtent = view.calculateExtent(size);\n    var boxPixelExtent = createOrUpdateFromCoordinates([\n      map.getPixelFromCoordinate(getBottomLeft(extent)),\n      map.getPixelFromCoordinate(getTopRight(extent))]);\n    var factor = view.getResolutionForExtent(boxPixelExtent, size);\n\n    scaleFromCenter(mapExtent, 1 / factor);\n    extent = mapExtent;\n  }\n\n  var resolution = view.constrainResolution(\n    view.getResolutionForExtent(extent, size));\n\n  var center = getCenter(extent);\n  center = view.constrainCenter(center);\n\n  view.animate({\n    resolution: resolution,\n    center: center,\n    duration: this.duration_,\n    easing: easeOut\n  });\n}\n\n\nexport default DragZoom;\n\n//# sourceMappingURL=DragZoom.js.map","/**\n * @module ol/interaction/KeyboardPan\n */\nimport {rotate as rotateCoordinate} from '../coordinate.js';\nimport EventType from '../events/EventType.js';\nimport KeyCode from '../events/KeyCode.js';\nimport {noModifierKeys, targetNotEditable} from '../events/condition.js';\nimport Interaction, {pan} from './Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~noModifierKeys} and\n * {@link module:ol/events/condition~targetNotEditable}.\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {number} [pixelDelta=128] The amount of pixels to pan on each key\n * press.\n */\n\n\n/**\n * @classdesc\n * Allows the user to pan the map using keyboard arrows.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}.\n * @api\n */\nvar KeyboardPan = /*@__PURE__*/(function (Interaction) {\n  function KeyboardPan(opt_options) {\n\n    Interaction.call(this, {\n      handleEvent: handleEvent\n    });\n\n    var options = opt_options || {};\n\n    /**\n     * @private\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Browser event.\n     * @return {boolean} Combined condition result.\n     */\n    this.defaultCondition_ = function(mapBrowserEvent) {\n      return noModifierKeys(mapBrowserEvent) &&\n        targetNotEditable(mapBrowserEvent);\n    };\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition !== undefined ?\n      options.condition : this.defaultCondition_;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 100;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelDelta_ = options.pixelDelta !== undefined ?\n      options.pixelDelta : 128;\n\n  }\n\n  if ( Interaction ) KeyboardPan.__proto__ = Interaction;\n  KeyboardPan.prototype = Object.create( Interaction && Interaction.prototype );\n  KeyboardPan.prototype.constructor = KeyboardPan;\n\n  return KeyboardPan;\n}(Interaction));\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n * `KeyEvent`, and decides the direction to pan to (if an arrow key was\n * pressed).\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {KeyboardPan}\n */\nfunction handleEvent(mapBrowserEvent) {\n  var stopEvent = false;\n  if (mapBrowserEvent.type == EventType.KEYDOWN) {\n    var keyEvent = /** @type {KeyboardEvent} */ (mapBrowserEvent.originalEvent);\n    var keyCode = keyEvent.keyCode;\n    if (this.condition_(mapBrowserEvent) &&\n        (keyCode == KeyCode.DOWN ||\n        keyCode == KeyCode.LEFT ||\n        keyCode == KeyCode.RIGHT ||\n        keyCode == KeyCode.UP)) {\n      var map = mapBrowserEvent.map;\n      var view = map.getView();\n      var mapUnitsDelta = view.getResolution() * this.pixelDelta_;\n      var deltaX = 0, deltaY = 0;\n      if (keyCode == KeyCode.DOWN) {\n        deltaY = -mapUnitsDelta;\n      } else if (keyCode == KeyCode.LEFT) {\n        deltaX = -mapUnitsDelta;\n      } else if (keyCode == KeyCode.RIGHT) {\n        deltaX = mapUnitsDelta;\n      } else {\n        deltaY = mapUnitsDelta;\n      }\n      var delta = [deltaX, deltaY];\n      rotateCoordinate(delta, view.getRotation());\n      pan(view, delta, this.duration_);\n      mapBrowserEvent.preventDefault();\n      stopEvent = true;\n    }\n  }\n  return !stopEvent;\n}\n\nexport default KeyboardPan;\n\n//# sourceMappingURL=KeyboardPan.js.map","/**\n * @module ol/interaction/KeyboardZoom\n */\nimport EventType from '../events/EventType.js';\nimport {targetNotEditable} from '../events/condition.js';\nimport Interaction, {zoomByDelta} from './Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~targetNotEditable}.\n * @property {number} [delta=1] The zoom level delta on each key press.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map using keyboard + and -.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardPan~KeyboardPan}.\n * @api\n */\nvar KeyboardZoom = /*@__PURE__*/(function (Interaction) {\n  function KeyboardZoom(opt_options) {\n\n    Interaction.call(this, {\n      handleEvent: handleEvent\n    });\n\n    var options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : targetNotEditable;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delta_ = options.delta ? options.delta : 1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 100;\n\n  }\n\n  if ( Interaction ) KeyboardZoom.__proto__ = Interaction;\n  KeyboardZoom.prototype = Object.create( Interaction && Interaction.prototype );\n  KeyboardZoom.prototype.constructor = KeyboardZoom;\n\n  return KeyboardZoom;\n}(Interaction));\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n * `KeyEvent`, and decides whether to zoom in or out (depending on whether the\n * key pressed was '+' or '-').\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {KeyboardZoom}\n */\nfunction handleEvent(mapBrowserEvent) {\n  var stopEvent = false;\n  if (mapBrowserEvent.type == EventType.KEYDOWN ||\n      mapBrowserEvent.type == EventType.KEYPRESS) {\n    var keyEvent = /** @type {KeyboardEvent} */ (mapBrowserEvent.originalEvent);\n    var charCode = keyEvent.charCode;\n    if (this.condition_(mapBrowserEvent) &&\n        (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))) {\n      var map = mapBrowserEvent.map;\n      var delta = (charCode == '+'.charCodeAt(0)) ? this.delta_ : -this.delta_;\n      var view = map.getView();\n      zoomByDelta(view, delta, undefined, this.duration_);\n      mapBrowserEvent.preventDefault();\n      stopEvent = true;\n    }\n  }\n  return !stopEvent;\n}\n\nexport default KeyboardZoom;\n\n//# sourceMappingURL=KeyboardZoom.js.map","/**\n * @module ol/interaction/MouseWheelZoom\n */\nimport ViewHint from '../ViewHint.js';\nimport {always} from '../events/condition.js';\nimport {easeOut} from '../easing.js';\nimport EventType from '../events/EventType.js';\nimport {DEVICE_PIXEL_RATIO, FIREFOX, SAFARI} from '../has.js';\nimport Interaction, {zoomByDelta} from './Interaction.js';\nimport {clamp} from '../math.js';\n\n\n/**\n * Maximum mouse wheel delta.\n * @type {number}\n */\nvar MAX_DELTA = 1;\n\n\n/**\n * @enum {string}\n */\nexport var Mode = {\n  TRACKPAD: 'trackpad',\n  WHEEL: 'wheel'\n};\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~always}.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [timeout=80] Mouse wheel timeout duration in milliseconds.\n * @property {boolean} [constrainResolution=false] When using a trackpad or\n * magic mouse, zoom to the closest integer zoom level after the scroll gesture\n * ends.\n * @property {boolean} [useAnchor=true] Enable zooming using the mouse's\n * location as the anchor. When set to `false`, zooming in and out will zoom to\n * the center of the screen instead of zooming on the mouse's location.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by scrolling the mouse wheel.\n * @api\n */\nvar MouseWheelZoom = /*@__PURE__*/(function (Interaction) {\n  function MouseWheelZoom(opt_options) {\n\n    var options = opt_options ? opt_options : {};\n\n    Interaction.call(/** @type {import(\"./Interaction.js\").InteractionOptions} */ this, (options));\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delta_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.timeout_ = options.timeout !== undefined ? options.timeout : 80;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.useAnchor_ = options.useAnchor !== undefined ? options.useAnchor : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.constrainResolution_ = options.constrainResolution || false;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : always;\n\n    /**\n     * @private\n     * @type {?import(\"../coordinate.js\").Coordinate}\n     */\n    this.lastAnchor_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.startTime_ = undefined;\n\n    /**\n     * @private\n     * @type {?}\n     */\n    this.timeoutId_;\n\n    /**\n     * @private\n     * @type {Mode|undefined}\n     */\n    this.mode_ = undefined;\n\n    /**\n     * Trackpad events separated by this delay will be considered separate\n     * interactions.\n     * @type {number}\n     */\n    this.trackpadEventGap_ = 400;\n\n    /**\n     * @type {?}\n     */\n    this.trackpadTimeoutId_;\n\n    /**\n     * The number of delta values per zoom level\n     * @private\n     * @type {number}\n     */\n    this.trackpadDeltaPerZoom_ = 300;\n\n    /**\n     * The zoom factor by which scroll zooming is allowed to exceed the limits.\n     * @private\n     * @type {number}\n     */\n    this.trackpadZoomBuffer_ = 1.5;\n\n  }\n\n  if ( Interaction ) MouseWheelZoom.__proto__ = Interaction;\n  MouseWheelZoom.prototype = Object.create( Interaction && Interaction.prototype );\n  MouseWheelZoom.prototype.constructor = MouseWheelZoom;\n\n  /**\n   * @private\n   */\n  MouseWheelZoom.prototype.decrementInteractingHint_ = function decrementInteractingHint_ () {\n    this.trackpadTimeoutId_ = undefined;\n    var view = this.getMap().getView();\n    view.setHint(ViewHint.INTERACTING, -1);\n  };\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a mousewheel-event) and eventually\n   * zooms the map.\n   * @override\n   */\n  MouseWheelZoom.prototype.handleEvent = function handleEvent (mapBrowserEvent) {\n    if (!this.condition_(mapBrowserEvent)) {\n      return true;\n    }\n    var type = mapBrowserEvent.type;\n    if (type !== EventType.WHEEL && type !== EventType.MOUSEWHEEL) {\n      return true;\n    }\n\n    mapBrowserEvent.preventDefault();\n\n    var map = mapBrowserEvent.map;\n    var wheelEvent = /** @type {WheelEvent} */ (mapBrowserEvent.originalEvent);\n\n    if (this.useAnchor_) {\n      this.lastAnchor_ = mapBrowserEvent.coordinate;\n    }\n\n    // Delta normalisation inspired by\n    // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n    var delta;\n    if (mapBrowserEvent.type == EventType.WHEEL) {\n      delta = wheelEvent.deltaY;\n      if (FIREFOX &&\n          wheelEvent.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n        delta /= DEVICE_PIXEL_RATIO;\n      }\n      if (wheelEvent.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n        delta *= 40;\n      }\n    } else if (mapBrowserEvent.type == EventType.MOUSEWHEEL) {\n      delta = -wheelEvent.wheelDeltaY;\n      if (SAFARI) {\n        delta /= 3;\n      }\n    }\n\n    if (delta === 0) {\n      return false;\n    }\n\n    var now = Date.now();\n\n    if (this.startTime_ === undefined) {\n      this.startTime_ = now;\n    }\n\n    if (!this.mode_ || now - this.startTime_ > this.trackpadEventGap_) {\n      this.mode_ = Math.abs(delta) < 4 ?\n        Mode.TRACKPAD :\n        Mode.WHEEL;\n    }\n\n    if (this.mode_ === Mode.TRACKPAD) {\n      var view = map.getView();\n      if (this.trackpadTimeoutId_) {\n        clearTimeout(this.trackpadTimeoutId_);\n      } else {\n        view.setHint(ViewHint.INTERACTING, 1);\n      }\n      this.trackpadTimeoutId_ = setTimeout(this.decrementInteractingHint_.bind(this), this.trackpadEventGap_);\n      var resolution = view.getResolution() * Math.pow(2, delta / this.trackpadDeltaPerZoom_);\n      var minResolution = view.getMinResolution();\n      var maxResolution = view.getMaxResolution();\n      var rebound = 0;\n      if (resolution < minResolution) {\n        resolution = Math.max(resolution, minResolution / this.trackpadZoomBuffer_);\n        rebound = 1;\n      } else if (resolution > maxResolution) {\n        resolution = Math.min(resolution, maxResolution * this.trackpadZoomBuffer_);\n        rebound = -1;\n      }\n      if (this.lastAnchor_) {\n        var center = view.calculateCenterZoom(resolution, this.lastAnchor_);\n        view.setCenter(view.constrainCenter(center));\n      }\n      view.setResolution(resolution);\n\n      if (rebound === 0 && this.constrainResolution_) {\n        view.animate({\n          resolution: view.constrainResolution(resolution, delta > 0 ? -1 : 1),\n          easing: easeOut,\n          anchor: this.lastAnchor_,\n          duration: this.duration_\n        });\n      }\n\n      if (rebound > 0) {\n        view.animate({\n          resolution: minResolution,\n          easing: easeOut,\n          anchor: this.lastAnchor_,\n          duration: 500\n        });\n      } else if (rebound < 0) {\n        view.animate({\n          resolution: maxResolution,\n          easing: easeOut,\n          anchor: this.lastAnchor_,\n          duration: 500\n        });\n      }\n      this.startTime_ = now;\n      return false;\n    }\n\n    this.delta_ += delta;\n\n    var timeLeft = Math.max(this.timeout_ - (now - this.startTime_), 0);\n\n    clearTimeout(this.timeoutId_);\n    this.timeoutId_ = setTimeout(this.handleWheelZoom_.bind(this, map), timeLeft);\n\n    return false;\n  };\n\n  /**\n   * @private\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n  MouseWheelZoom.prototype.handleWheelZoom_ = function handleWheelZoom_ (map) {\n    var view = map.getView();\n    if (view.getAnimating()) {\n      view.cancelAnimations();\n    }\n    var maxDelta = MAX_DELTA;\n    var delta = clamp(this.delta_, -maxDelta, maxDelta);\n    zoomByDelta(view, -delta, this.lastAnchor_, this.duration_);\n    this.mode_ = undefined;\n    this.delta_ = 0;\n    this.lastAnchor_ = null;\n    this.startTime_ = undefined;\n    this.timeoutId_ = undefined;\n  };\n\n  /**\n   * Enable or disable using the mouse's location as an anchor when zooming\n   * @param {boolean} useAnchor true to zoom to the mouse's location, false\n   * to zoom to the center of the map\n   * @api\n   */\n  MouseWheelZoom.prototype.setMouseAnchor = function setMouseAnchor (useAnchor) {\n    this.useAnchor_ = useAnchor;\n    if (!useAnchor) {\n      this.lastAnchor_ = null;\n    }\n  };\n\n  return MouseWheelZoom;\n}(Interaction));\n\nexport default MouseWheelZoom;\n\n//# sourceMappingURL=MouseWheelZoom.js.map","/**\n * @module ol/interaction/PinchRotate\n */\nimport ViewHint from '../ViewHint.js';\nimport {FALSE} from '../functions.js';\nimport {rotate, rotateWithoutConstraints} from './Interaction.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from './Pointer.js';\nimport {disable} from '../rotationconstraint.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] The duration of the animation in\n * milliseconds.\n * @property {number} [threshold=0.3] Minimal angle in radians to start a rotation.\n */\n\n\n/**\n * @classdesc\n * Allows the user to rotate the map by twisting with two fingers\n * on a touch screen.\n * @api\n */\nvar PinchRotate = /*@__PURE__*/(function (PointerInteraction) {\n  function PinchRotate(opt_options) {\n\n    var options = opt_options ? opt_options : {};\n\n    var pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n\n    if (!pointerOptions.stopDown) {\n      pointerOptions.stopDown = FALSE;\n    }\n\n    PointerInteraction.call(this, pointerOptions);\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.anchor_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastAngle_ = undefined;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.rotating_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.rotationDelta_ = 0.0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.threshold_ = options.threshold !== undefined ? options.threshold : 0.3;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n  if ( PointerInteraction ) PinchRotate.__proto__ = PointerInteraction;\n  PinchRotate.prototype = Object.create( PointerInteraction && PointerInteraction.prototype );\n  PinchRotate.prototype.constructor = PinchRotate;\n\n  /**\n   * @inheritDoc\n   */\n  PinchRotate.prototype.handleDragEvent = function handleDragEvent (mapBrowserEvent) {\n    var rotationDelta = 0.0;\n\n    var touch0 = this.targetPointers[0];\n    var touch1 = this.targetPointers[1];\n\n    // angle between touches\n    var angle = Math.atan2(\n      touch1.clientY - touch0.clientY,\n      touch1.clientX - touch0.clientX);\n\n    if (this.lastAngle_ !== undefined) {\n      var delta = angle - this.lastAngle_;\n      this.rotationDelta_ += delta;\n      if (!this.rotating_ &&\n          Math.abs(this.rotationDelta_) > this.threshold_) {\n        this.rotating_ = true;\n      }\n      rotationDelta = delta;\n    }\n    this.lastAngle_ = angle;\n\n    var map = mapBrowserEvent.map;\n    var view = map.getView();\n    if (view.getConstraints().rotation === disable) {\n      return;\n    }\n\n    // rotate anchor point.\n    // FIXME: should be the intersection point between the lines:\n    //     touch0,touch1 and previousTouch0,previousTouch1\n    var viewportPosition = map.getViewport().getBoundingClientRect();\n    var centroid = centroidFromPointers(this.targetPointers);\n    centroid[0] -= viewportPosition.left;\n    centroid[1] -= viewportPosition.top;\n    this.anchor_ = map.getCoordinateFromPixel(centroid);\n\n    // rotate\n    if (this.rotating_) {\n      var rotation = view.getRotation();\n      map.render();\n      rotateWithoutConstraints(view, rotation + rotationDelta, this.anchor_);\n    }\n  };\n\n  /**\n   * @inheritDoc\n   */\n  PinchRotate.prototype.handleUpEvent = function handleUpEvent (mapBrowserEvent) {\n    if (this.targetPointers.length < 2) {\n      var map = mapBrowserEvent.map;\n      var view = map.getView();\n      view.setHint(ViewHint.INTERACTING, -1);\n      if (this.rotating_) {\n        var rotation = view.getRotation();\n        rotate(view, rotation, this.anchor_, this.duration_);\n      }\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  /**\n   * @inheritDoc\n   */\n  PinchRotate.prototype.handleDownEvent = function handleDownEvent (mapBrowserEvent) {\n    if (this.targetPointers.length >= 2) {\n      var map = mapBrowserEvent.map;\n      this.anchor_ = null;\n      this.lastAngle_ = undefined;\n      this.rotating_ = false;\n      this.rotationDelta_ = 0.0;\n      if (!this.handlingDownUpSequence) {\n        map.getView().setHint(ViewHint.INTERACTING, 1);\n      }\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  return PinchRotate;\n}(PointerInteraction));\n\nexport default PinchRotate;\n\n//# sourceMappingURL=PinchRotate.js.map","/**\n * @module ol/interaction/PinchZoom\n */\nimport ViewHint from '../ViewHint.js';\nimport {FALSE} from '../functions.js';\nimport {zoom, zoomWithoutConstraints} from './Interaction.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from './Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=400] Animation duration in milliseconds.\n * @property {boolean} [constrainResolution=false] Zoom to the closest integer\n * zoom level after the pinch gesture ends.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by pinching with two fingers\n * on a touch screen.\n * @api\n */\nvar PinchZoom = /*@__PURE__*/(function (PointerInteraction) {\n  function PinchZoom(opt_options) {\n\n    var options = opt_options ? opt_options : {};\n\n    var pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n\n    if (!pointerOptions.stopDown) {\n      pointerOptions.stopDown = FALSE;\n    }\n\n    PointerInteraction.call(this, pointerOptions);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.constrainResolution_ = options.constrainResolution || false;\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.anchor_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 400;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastDistance_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.lastScaleDelta_ = 1;\n\n  }\n\n  if ( PointerInteraction ) PinchZoom.__proto__ = PointerInteraction;\n  PinchZoom.prototype = Object.create( PointerInteraction && PointerInteraction.prototype );\n  PinchZoom.prototype.constructor = PinchZoom;\n\n  /**\n   * @inheritDoc\n   */\n  PinchZoom.prototype.handleDragEvent = function handleDragEvent (mapBrowserEvent) {\n    var scaleDelta = 1.0;\n\n    var touch0 = this.targetPointers[0];\n    var touch1 = this.targetPointers[1];\n    var dx = touch0.clientX - touch1.clientX;\n    var dy = touch0.clientY - touch1.clientY;\n\n    // distance between touches\n    var distance = Math.sqrt(dx * dx + dy * dy);\n\n    if (this.lastDistance_ !== undefined) {\n      scaleDelta = this.lastDistance_ / distance;\n    }\n    this.lastDistance_ = distance;\n\n\n    var map = mapBrowserEvent.map;\n    var view = map.getView();\n    var resolution = view.getResolution();\n    var maxResolution = view.getMaxResolution();\n    var minResolution = view.getMinResolution();\n    var newResolution = resolution * scaleDelta;\n    if (newResolution > maxResolution) {\n      scaleDelta = maxResolution / resolution;\n      newResolution = maxResolution;\n    } else if (newResolution < minResolution) {\n      scaleDelta = minResolution / resolution;\n      newResolution = minResolution;\n    }\n\n    if (scaleDelta != 1.0) {\n      this.lastScaleDelta_ = scaleDelta;\n    }\n\n    // scale anchor point.\n    var viewportPosition = map.getViewport().getBoundingClientRect();\n    var centroid = centroidFromPointers(this.targetPointers);\n    centroid[0] -= viewportPosition.left;\n    centroid[1] -= viewportPosition.top;\n    this.anchor_ = map.getCoordinateFromPixel(centroid);\n\n    // scale, bypass the resolution constraint\n    map.render();\n    zoomWithoutConstraints(view, newResolution, this.anchor_);\n  };\n\n  /**\n   * @inheritDoc\n   */\n  PinchZoom.prototype.handleUpEvent = function handleUpEvent (mapBrowserEvent) {\n    if (this.targetPointers.length < 2) {\n      var map = mapBrowserEvent.map;\n      var view = map.getView();\n      view.setHint(ViewHint.INTERACTING, -1);\n      var resolution = view.getResolution();\n      if (this.constrainResolution_ ||\n          resolution < view.getMinResolution() ||\n          resolution > view.getMaxResolution()) {\n        // Zoom to final resolution, with an animation, and provide a\n        // direction not to zoom out/in if user was pinching in/out.\n        // Direction is > 0 if pinching out, and < 0 if pinching in.\n        var direction = this.lastScaleDelta_ - 1;\n        zoom(view, resolution, this.anchor_, this.duration_, direction);\n      }\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  /**\n   * @inheritDoc\n   */\n  PinchZoom.prototype.handleDownEvent = function handleDownEvent (mapBrowserEvent) {\n    if (this.targetPointers.length >= 2) {\n      var map = mapBrowserEvent.map;\n      this.anchor_ = null;\n      this.lastDistance_ = undefined;\n      this.lastScaleDelta_ = 1;\n      if (!this.handlingDownUpSequence) {\n        map.getView().setHint(ViewHint.INTERACTING, 1);\n      }\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  return PinchZoom;\n}(PointerInteraction));\n\nexport default PinchZoom;\n\n//# sourceMappingURL=PinchZoom.js.map","/**\n * @module ol/interaction\n */\nimport Collection from './Collection.js';\nimport Kinetic from './Kinetic.js';\nimport DoubleClickZoom from './interaction/DoubleClickZoom.js';\nimport DragPan from './interaction/DragPan.js';\nimport DragRotate from './interaction/DragRotate.js';\nimport DragZoom from './interaction/DragZoom.js';\nimport KeyboardPan from './interaction/KeyboardPan.js';\nimport KeyboardZoom from './interaction/KeyboardZoom.js';\nimport MouseWheelZoom from './interaction/MouseWheelZoom.js';\nimport PinchRotate from './interaction/PinchRotate.js';\nimport PinchZoom from './interaction/PinchZoom.js';\nimport {focus} from './events/condition.js';\n\nexport {default as DoubleClickZoom} from './interaction/DoubleClickZoom.js';\nexport {default as DragAndDrop} from './interaction/DragAndDrop.js';\nexport {default as DragBox} from './interaction/DragBox.js';\nexport {default as DragPan} from './interaction/DragPan.js';\nexport {default as DragRotate} from './interaction/DragRotate.js';\nexport {default as DragRotateAndZoom} from './interaction/DragRotateAndZoom.js';\nexport {default as DragZoom} from './interaction/DragZoom.js';\nexport {default as Draw} from './interaction/Draw.js';\nexport {default as Extent} from './interaction/Extent.js';\nexport {default as Interaction} from './interaction/Interaction.js';\nexport {default as KeyboardPan} from './interaction/KeyboardPan.js';\nexport {default as KeyboardZoom} from './interaction/KeyboardZoom.js';\nexport {default as Modify} from './interaction/Modify.js';\nexport {default as MouseWheelZoom} from './interaction/MouseWheelZoom.js';\nexport {default as PinchRotate} from './interaction/PinchRotate.js';\nexport {default as PinchZoom} from './interaction/PinchZoom.js';\nexport {default as Pointer} from './interaction/Pointer.js';\nexport {default as Select} from './interaction/Select.js';\nexport {default as Snap} from './interaction/Snap.js';\nexport {default as Translate} from './interaction/Translate.js';\n\n\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [altShiftDragRotate=true] Whether Alt-Shift-drag rotate is\n * desired.\n * @property {boolean} [onFocusOnly=false] Interact only when the map has the\n * focus. This affects the `MouseWheelZoom` and `DragPan` interactions and is\n * useful when page scroll is desired for maps that do not have the browser's\n * focus.\n * @property {boolean} [constrainResolution=false] Zoom to the closest integer\n * zoom level after the wheel/trackpad or pinch gesture ends.\n * @property {boolean} [doubleClickZoom=true] Whether double click zoom is\n * desired.\n * @property {boolean} [keyboard=true] Whether keyboard interaction is desired.\n * @property {boolean} [mouseWheelZoom=true] Whether mousewheel zoom is desired.\n * @property {boolean} [shiftDragZoom=true] Whether Shift-drag zoom is desired.\n * @property {boolean} [dragPan=true] Whether drag pan is desired.\n * @property {boolean} [pinchRotate=true] Whether pinch rotate is desired.\n * @property {boolean} [pinchZoom=true] Whether pinch zoom is desired.\n * @property {number} [zoomDelta] Zoom level delta when using keyboard or\n * mousewheel zoom.\n * @property {number} [zoomDuration] Duration of the zoom animation in\n * milliseconds.\n */\n\n\n/**\n * Set of interactions included in maps by default. Specific interactions can be\n * excluded by setting the appropriate option to false in the constructor\n * options, but the order of the interactions is fixed.  If you want to specify\n * a different order for interactions, you will need to create your own\n * {@link module:ol/interaction/Interaction} instances and insert\n * them into a {@link module:ol/Collection} in the order you want\n * before creating your {@link module:ol/Map~Map} instance. The default set of\n * interactions, in sequence, is:\n * * {@link module:ol/interaction/DragRotate~DragRotate}\n * * {@link module:ol/interaction/DoubleClickZoom~DoubleClickZoom}\n * * {@link module:ol/interaction/DragPan~DragPan}\n * * {@link module:ol/interaction/PinchRotate~PinchRotate}\n * * {@link module:ol/interaction/PinchZoom~PinchZoom}\n * * {@link module:ol/interaction/KeyboardPan~KeyboardPan}\n * * {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}\n * * {@link module:ol/interaction/MouseWheelZoom~MouseWheelZoom}\n * * {@link module:ol/interaction/DragZoom~DragZoom}\n *\n * @param {DefaultsOptions=} opt_options Defaults options.\n * @return {import(\"./Collection.js\").default<import(\"./interaction/Interaction.js\").default>}\n * A collection of interactions to be used with the {@link module:ol/Map~Map}\n * constructor's `interactions` option.\n * @api\n */\nexport function defaults(opt_options) {\n\n  var options = opt_options ? opt_options : {};\n\n  var interactions = new Collection();\n\n  var kinetic = new Kinetic(-0.005, 0.05, 100);\n\n  var altShiftDragRotate = options.altShiftDragRotate !== undefined ?\n    options.altShiftDragRotate : true;\n  if (altShiftDragRotate) {\n    interactions.push(new DragRotate());\n  }\n\n  var doubleClickZoom = options.doubleClickZoom !== undefined ?\n    options.doubleClickZoom : true;\n  if (doubleClickZoom) {\n    interactions.push(new DoubleClickZoom({\n      delta: options.zoomDelta,\n      duration: options.zoomDuration\n    }));\n  }\n\n  var dragPan = options.dragPan !== undefined ? options.dragPan : true;\n  if (dragPan) {\n    interactions.push(new DragPan({\n      condition: options.onFocusOnly ? focus : undefined,\n      kinetic: kinetic\n    }));\n  }\n\n  var pinchRotate = options.pinchRotate !== undefined ? options.pinchRotate :\n    true;\n  if (pinchRotate) {\n    interactions.push(new PinchRotate());\n  }\n\n  var pinchZoom = options.pinchZoom !== undefined ? options.pinchZoom : true;\n  if (pinchZoom) {\n    interactions.push(new PinchZoom({\n      constrainResolution: options.constrainResolution,\n      duration: options.zoomDuration\n    }));\n  }\n\n  var keyboard = options.keyboard !== undefined ? options.keyboard : true;\n  if (keyboard) {\n    interactions.push(new KeyboardPan());\n    interactions.push(new KeyboardZoom({\n      delta: options.zoomDelta,\n      duration: options.zoomDuration\n    }));\n  }\n\n  var mouseWheelZoom = options.mouseWheelZoom !== undefined ?\n    options.mouseWheelZoom : true;\n  if (mouseWheelZoom) {\n    interactions.push(new MouseWheelZoom({\n      condition: options.onFocusOnly ? focus : undefined,\n      constrainResolution: options.constrainResolution,\n      duration: options.zoomDuration\n    }));\n  }\n\n  var shiftDragZoom = options.shiftDragZoom !== undefined ?\n    options.shiftDragZoom : true;\n  if (shiftDragZoom) {\n    interactions.push(new DragZoom({\n      duration: options.zoomDuration\n    }));\n  }\n\n  return interactions;\n\n}\n\n//# sourceMappingURL=interaction.js.map","/**\n * @module ol/layer/Vector\n */\nimport LayerType from '../LayerType.js';\nimport Layer from './Layer.js';\nimport VectorRenderType from './VectorRenderType.js';\nimport {assign} from '../obj.js';\nimport {createDefaultStyle, toFunction as toStyleFunction} from '../style/Style.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the viewport extent used by the\n * renderer when getting features from the vector source for the rendering or hit-detection.\n * Recommended value: the size of the largest symbol, line width or label.\n * @property {import(\"./VectorRenderType.js\").default|string} [renderMode='vector'] Render mode for vector layers:\n *  * `'image'`: Vector layers are rendered as images. Great performance, but point symbols and\n *    texts are always rotated with the view and pixels are scaled during zoom animations.\n *  * `'vector'`: Vector layers are rendered as vectors. Most accurate rendering even during\n *    animations, but slower performance.\n * @property {import(\"../source/Vector.js\").default} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles, and the priority is defined by the z-index of the style. Lower z-index\n * means higher priority.\n * @property {import(\"../style/Style.js\").StyleLike} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [updateWhileAnimating=false] When set to `true` and `renderMode`\n * is `vector`, feature batches will be recreated during animations. This means that no\n * vectors will be shown clipped, but the setting will have a performance impact for large\n * amounts of vector data. When set to `false`, batches will be recreated when no animation\n * is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true` and `renderMode`\n * is `vector`, feature batches will be recreated during interactions. See also\n * `updateWhileAnimating`.\n */\n\n\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n  RENDER_ORDER: 'renderOrder'\n};\n\n\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @api\n */\nvar VectorLayer = /*@__PURE__*/(function (Layer) {\n  function VectorLayer(opt_options) {\n    var options = opt_options ?\n      opt_options : /** @type {Options} */ ({});\n\n    var baseOptions = assign({}, options);\n\n    delete baseOptions.style;\n    delete baseOptions.renderBuffer;\n    delete baseOptions.updateWhileAnimating;\n    delete baseOptions.updateWhileInteracting;\n    Layer.call(this, baseOptions);\n\n    /**\n    * @private\n    * @type {boolean}\n    */\n    this.declutter_ = options.declutter !== undefined ? options.declutter : false;\n\n    /**\n    * @type {number}\n    * @private\n    */\n    this.renderBuffer_ = options.renderBuffer !== undefined ?\n      options.renderBuffer : 100;\n\n    /**\n    * User provided style.\n    * @type {import(\"../style/Style.js\").StyleLike}\n    * @private\n    */\n    this.style_ = null;\n\n    /**\n    * Style function for use within the library.\n    * @type {import(\"../style/Style.js\").StyleFunction|undefined}\n    * @private\n    */\n    this.styleFunction_ = undefined;\n\n    this.setStyle(options.style);\n\n    /**\n    * @type {boolean}\n    * @private\n    */\n    this.updateWhileAnimating_ = options.updateWhileAnimating !== undefined ?\n      options.updateWhileAnimating : false;\n\n    /**\n    * @type {boolean}\n    * @private\n    */\n    this.updateWhileInteracting_ = options.updateWhileInteracting !== undefined ?\n      options.updateWhileInteracting : false;\n\n    /**\n    * @private\n    * @type {import(\"./VectorTileRenderType.js\").default|string}\n    */\n    this.renderMode_ = options.renderMode || VectorRenderType.VECTOR;\n\n    /**\n    * The layer type.\n    * @protected\n    * @type {import(\"../LayerType.js\").default}\n    */\n    this.type = LayerType.VECTOR;\n\n  }\n\n  if ( Layer ) VectorLayer.__proto__ = Layer;\n  VectorLayer.prototype = Object.create( Layer && Layer.prototype );\n  VectorLayer.prototype.constructor = VectorLayer;\n\n  /**\n  * @return {boolean} Declutter.\n  */\n  VectorLayer.prototype.getDeclutter = function getDeclutter () {\n    return this.declutter_;\n  };\n\n  /**\n  * @param {boolean} declutter Declutter.\n  */\n  VectorLayer.prototype.setDeclutter = function setDeclutter (declutter) {\n    this.declutter_ = declutter;\n  };\n\n  /**\n  * @return {number|undefined} Render buffer.\n  */\n  VectorLayer.prototype.getRenderBuffer = function getRenderBuffer () {\n    return this.renderBuffer_;\n  };\n\n  /**\n  * @return {function(import(\"../Feature.js\").default, import(\"../Feature.js\").default): number|null|undefined} Render\n  *     order.\n  */\n  VectorLayer.prototype.getRenderOrder = function getRenderOrder () {\n    return (\n    /** @type {import(\"../render.js\").OrderFunction|null|undefined} */ (this.get(Property.RENDER_ORDER))\n    );\n  };\n\n  /**\n  * Get the style for features.  This returns whatever was passed to the `style`\n  * option at construction or to the `setStyle` method.\n  * @return {import(\"../style/Style.js\").StyleLike}\n  *     Layer style.\n  * @api\n  */\n  VectorLayer.prototype.getStyle = function getStyle () {\n    return this.style_;\n  };\n\n  /**\n  * Get the style function.\n  * @return {import(\"../style/Style.js\").StyleFunction|undefined} Layer style function.\n  * @api\n  */\n  VectorLayer.prototype.getStyleFunction = function getStyleFunction () {\n    return this.styleFunction_;\n  };\n\n  /**\n  * @return {boolean} Whether the rendered layer should be updated while\n  *     animating.\n  */\n  VectorLayer.prototype.getUpdateWhileAnimating = function getUpdateWhileAnimating () {\n    return this.updateWhileAnimating_;\n  };\n\n  /**\n  * @return {boolean} Whether the rendered layer should be updated while\n  *     interacting.\n  */\n  VectorLayer.prototype.getUpdateWhileInteracting = function getUpdateWhileInteracting () {\n    return this.updateWhileInteracting_;\n  };\n\n  /**\n  * @param {import(\"../render.js\").OrderFunction|null|undefined} renderOrder\n  *     Render order.\n  */\n  VectorLayer.prototype.setRenderOrder = function setRenderOrder (renderOrder) {\n    this.set(Property.RENDER_ORDER, renderOrder);\n  };\n\n  /**\n  * Set the style for features.  This can be a single style object, an array\n  * of styles, or a function that takes a feature and resolution and returns\n  * an array of styles. If it is `undefined` the default style is used. If\n  * it is `null` the layer has no style (a `null` style), so only features\n  * that have their own styles will be rendered in the layer. See\n  * {@link module:ol/style} for information on the default style.\n  * @param {import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction|null|undefined} style Layer style.\n  * @api\n  */\n  VectorLayer.prototype.setStyle = function setStyle (style) {\n    this.style_ = style !== undefined ? style : createDefaultStyle;\n    this.styleFunction_ = style === null ?\n      undefined : toStyleFunction(this.style_);\n    this.changed();\n  };\n\n  /**\n  * @return {import(\"./VectorRenderType.js\").default|string} The render mode.\n  */\n  VectorLayer.prototype.getRenderMode = function getRenderMode () {\n    return this.renderMode_;\n  };\n\n  return VectorLayer;\n}(Layer));\n\n\n/**\n * Return the associated {@link module:ol/source/Vector vectorsource} of the layer.\n * @function\n * @return {import(\"../source/Vector.js\").default} Source.\n * @api\n */\nVectorLayer.prototype.getSource;\n\n\nexport default VectorLayer;\n\n//# sourceMappingURL=Vector.js.map","/**\n * @module ol/layer/Heatmap\n */\nimport {listen} from '../events.js';\nimport {getChangeEventType} from '../Object.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport VectorLayer from './Vector.js';\nimport {clamp} from '../math.js';\nimport {assign} from '../obj.js';\nimport RenderEventType from '../render/EventType.js';\nimport Icon from '../style/Icon.js';\nimport Style from '../style/Style.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {Array<string>} [gradient=['#00f', '#0ff', '#0f0', '#ff0', '#f00']] The color gradient\n * of the heatmap, specified as an array of CSS color strings.\n * @property {number} [radius=8] Radius size in pixels.\n * @property {number} [blur=15] Blur size in pixels.\n * @property {number} [shadow=250] Shadow size in pixels.\n * @property {string|function(import(\"../Feature.js\").default):number} [weight='weight'] The feature\n * attribute to use for the weight or a function that returns a weight from a feature. Weight values\n * should range from 0 to 1 (and values outside will be clamped to that range).\n * @property {import(\"./VectorRenderType.js\").default|string} [renderMode='vector'] Render mode for vector layers:\n *  * `'image'`: Vector layers are rendered as images. Great performance, but point symbols and\n *    texts are always rotated with the view and pixels are scaled during zoom animations.\n *  * `'vector'`: Vector layers are rendered as vectors. Most accurate rendering even during\n *    animations, but slower performance.\n * @property {import(\"../source/Vector.js\").default} [source] Source.\n */\n\n\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n  BLUR: 'blur',\n  GRADIENT: 'gradient',\n  RADIUS: 'radius'\n};\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nvar DEFAULT_GRADIENT = ['#00f', '#0ff', '#0f0', '#ff0', '#f00'];\n\n\n/**\n * @classdesc\n * Layer for rendering vector data as a heatmap.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @fires import(\"../render/Event.js\").RenderEvent\n * @api\n */\nvar Heatmap = /*@__PURE__*/(function (VectorLayer) {\n  function Heatmap(opt_options) {\n    var options = opt_options ? opt_options : {};\n\n    var baseOptions = assign({}, options);\n\n    delete baseOptions.gradient;\n    delete baseOptions.radius;\n    delete baseOptions.blur;\n    delete baseOptions.shadow;\n    delete baseOptions.weight;\n    VectorLayer.call(this, baseOptions);\n\n    /**\n     * @private\n     * @type {Uint8ClampedArray}\n     */\n    this.gradient_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.shadow_ = options.shadow !== undefined ? options.shadow : 250;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.circleImage_ = undefined;\n\n    /**\n     * @private\n     * @type {Array<Array<import(\"../style/Style.js\").default>>}\n     */\n    this.styleCache_ = null;\n\n    listen(this,\n      getChangeEventType(Property.GRADIENT),\n      this.handleGradientChanged_, this);\n\n    this.setGradient(options.gradient ? options.gradient : DEFAULT_GRADIENT);\n\n    this.setBlur(options.blur !== undefined ? options.blur : 15);\n\n    this.setRadius(options.radius !== undefined ? options.radius : 8);\n\n    listen(this,\n      getChangeEventType(Property.BLUR),\n      this.handleStyleChanged_, this);\n    listen(this,\n      getChangeEventType(Property.RADIUS),\n      this.handleStyleChanged_, this);\n\n    this.handleStyleChanged_();\n\n    var weight = options.weight ? options.weight : 'weight';\n    var weightFunction;\n    if (typeof weight === 'string') {\n      weightFunction = function(feature) {\n        return feature.get(weight);\n      };\n    } else {\n      weightFunction = weight;\n    }\n\n    this.setStyle(function(feature, resolution) {\n      var weight = weightFunction(feature);\n      var opacity = weight !== undefined ? clamp(weight, 0, 1) : 1;\n      // cast to 8 bits\n      var index = (255 * opacity) | 0;\n      var style = this.styleCache_[index];\n      if (!style) {\n        style = [\n          new Style({\n            image: new Icon({\n              opacity: opacity,\n              src: this.circleImage_\n            })\n          })\n        ];\n        this.styleCache_[index] = style;\n      }\n      return style;\n    }.bind(this));\n\n    // For performance reasons, don't sort the features before rendering.\n    // The render order is not relevant for a heatmap representation.\n    this.setRenderOrder(null);\n\n    listen(this, RenderEventType.RENDER, this.handleRender_, this);\n  }\n\n  if ( VectorLayer ) Heatmap.__proto__ = VectorLayer;\n  Heatmap.prototype = Object.create( VectorLayer && VectorLayer.prototype );\n  Heatmap.prototype.constructor = Heatmap;\n\n  /**\n   * @return {string} Data URL for a circle.\n   * @private\n   */\n  Heatmap.prototype.createCircle_ = function createCircle_ () {\n    var radius = this.getRadius();\n    var blur = this.getBlur();\n    var halfSize = radius + blur + 1;\n    var size = 2 * halfSize;\n    var context = createCanvasContext2D(size, size);\n    context.shadowOffsetX = context.shadowOffsetY = this.shadow_;\n    context.shadowBlur = blur;\n    context.shadowColor = '#000';\n    context.beginPath();\n    var center = halfSize - this.shadow_;\n    context.arc(center, center, radius, 0, Math.PI * 2, true);\n    context.fill();\n    return context.canvas.toDataURL();\n  };\n\n  /**\n   * Return the blur size in pixels.\n   * @return {number} Blur size in pixels.\n   * @api\n   * @observable\n   */\n  Heatmap.prototype.getBlur = function getBlur () {\n    return /** @type {number} */ (this.get(Property.BLUR));\n  };\n\n  /**\n   * Return the gradient colors as array of strings.\n   * @return {Array<string>} Colors.\n   * @api\n   * @observable\n   */\n  Heatmap.prototype.getGradient = function getGradient () {\n    return /** @type {Array<string>} */ (this.get(Property.GRADIENT));\n  };\n\n  /**\n   * Return the size of the radius in pixels.\n   * @return {number} Radius size in pixel.\n   * @api\n   * @observable\n   */\n  Heatmap.prototype.getRadius = function getRadius () {\n    return /** @type {number} */ (this.get(Property.RADIUS));\n  };\n\n  /**\n   * @private\n   */\n  Heatmap.prototype.handleGradientChanged_ = function handleGradientChanged_ () {\n    this.gradient_ = createGradient(this.getGradient());\n  };\n\n  /**\n   * @private\n   */\n  Heatmap.prototype.handleStyleChanged_ = function handleStyleChanged_ () {\n    this.circleImage_ = this.createCircle_();\n    this.styleCache_ = new Array(256);\n    this.changed();\n  };\n\n  /**\n   * @param {import(\"../render/Event.js\").default} event Post compose event\n   * @private\n   */\n  Heatmap.prototype.handleRender_ = function handleRender_ (event) {\n    var context = event.context;\n    var canvas = context.canvas;\n    var image = context.getImageData(0, 0, canvas.width, canvas.height);\n    var view8 = image.data;\n    for (var i = 0, ii = view8.length; i < ii; i += 4) {\n      var alpha = view8[i + 3] * 4;\n      if (alpha) {\n        view8[i] = this.gradient_[alpha];\n        view8[i + 1] = this.gradient_[alpha + 1];\n        view8[i + 2] = this.gradient_[alpha + 2];\n      }\n    }\n    context.putImageData(image, 0, 0);\n  };\n\n  /**\n   * Set the blur size in pixels.\n   * @param {number} blur Blur size in pixels.\n   * @api\n   * @observable\n   */\n  Heatmap.prototype.setBlur = function setBlur (blur) {\n    this.set(Property.BLUR, blur);\n  };\n\n  /**\n   * Set the gradient colors as array of strings.\n   * @param {Array<string>} colors Gradient.\n   * @api\n   * @observable\n   */\n  Heatmap.prototype.setGradient = function setGradient (colors) {\n    this.set(Property.GRADIENT, colors);\n  };\n\n  /**\n   * Set the size of the radius in pixels.\n   * @param {number} radius Radius size in pixel.\n   * @api\n   * @observable\n   */\n  Heatmap.prototype.setRadius = function setRadius (radius) {\n    this.set(Property.RADIUS, radius);\n  };\n\n  return Heatmap;\n}(VectorLayer));\n\n\n/**\n * @param {Array<string>} colors A list of colored.\n * @return {Uint8ClampedArray} An array.\n */\nfunction createGradient(colors) {\n  var width = 1;\n  var height = 256;\n  var context = createCanvasContext2D(width, height);\n\n  var gradient = context.createLinearGradient(0, 0, width, height);\n  var step = 1 / (colors.length - 1);\n  for (var i = 0, ii = colors.length; i < ii; ++i) {\n    gradient.addColorStop(i * step, colors[i]);\n  }\n\n  context.fillStyle = gradient;\n  context.fillRect(0, 0, width, height);\n\n  return context.getImageData(0, 0, width, height).data;\n}\n\n\nexport default Heatmap;\n\n//# sourceMappingURL=Heatmap.js.map","/**\n * @module ol/layer/Tile\n */\nimport LayerType from '../LayerType.js';\nimport Layer from './Layer.js';\nimport TileProperty from './TileProperty.js';\nimport {assign} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {import(\"../source/Tile.js\").default} [source] Source for this layer.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n */\n\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @api\n */\nvar TileLayer = /*@__PURE__*/(function (Layer) {\n  function TileLayer(opt_options) {\n    var options = opt_options ? opt_options : {};\n\n    var baseOptions = assign({}, options);\n\n    delete baseOptions.preload;\n    delete baseOptions.useInterimTilesOnError;\n    Layer.call(this, baseOptions);\n\n    this.setPreload(options.preload !== undefined ? options.preload : 0);\n    this.setUseInterimTilesOnError(options.useInterimTilesOnError !== undefined ?\n      options.useInterimTilesOnError : true);\n\n    /**\n    * The layer type.\n    * @protected\n    * @type {import(\"../LayerType.js\").default}\n    */\n    this.type = LayerType.TILE;\n\n  }\n\n  if ( Layer ) TileLayer.__proto__ = Layer;\n  TileLayer.prototype = Object.create( Layer && Layer.prototype );\n  TileLayer.prototype.constructor = TileLayer;\n\n  /**\n  * Return the level as number to which we will preload tiles up to.\n  * @return {number} The level to preload tiles up to.\n  * @observable\n  * @api\n  */\n  TileLayer.prototype.getPreload = function getPreload () {\n    return /** @type {number} */ (this.get(TileProperty.PRELOAD));\n  };\n\n  /**\n  * Set the level as number to which we will preload tiles up to.\n  * @param {number} preload The level to preload tiles up to.\n  * @observable\n  * @api\n  */\n  TileLayer.prototype.setPreload = function setPreload (preload) {\n    this.set(TileProperty.PRELOAD, preload);\n  };\n\n  /**\n  * Whether we use interim tiles on error.\n  * @return {boolean} Use interim tiles on error.\n  * @observable\n  * @api\n  */\n  TileLayer.prototype.getUseInterimTilesOnError = function getUseInterimTilesOnError () {\n    return /** @type {boolean} */ (this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR));\n  };\n\n  /**\n  * Set whether we use interim tiles on error.\n  * @param {boolean} useInterimTilesOnError Use interim tiles on error.\n  * @observable\n  * @api\n  */\n  TileLayer.prototype.setUseInterimTilesOnError = function setUseInterimTilesOnError (useInterimTilesOnError) {\n    this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR, useInterimTilesOnError);\n  };\n\n  return TileLayer;\n}(Layer));\n\n\n/**\n * Return the associated {@link module:ol/source/Tile tilesource} of the layer.\n * @function\n * @return {import(\"../source/Tile.js\").default} Source.\n * @api\n */\nTileLayer.prototype.getSource;\n\n\nexport default TileLayer;\n\n//# sourceMappingURL=Tile.js.map","/**\n * @module ol/layer/Base\n */\nimport {abstract} from '../util.js';\nimport BaseObject from '../Object.js';\nimport LayerProperty from './Property.js';\nimport {clamp} from '../math.js';\nimport {assign} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Note that with {@link module:ol/layer/Base} and all its subclasses, any property set in\n * the options is set as a {@link module:ol/Object} property on the layer object, so\n * is observable, and has get/set accessors.\n *\n * @api\n */\nvar BaseLayer = /*@__PURE__*/(function (BaseObject) {\n  function BaseLayer(options) {\n\n    BaseObject.call(this);\n\n    /**\n     * @type {Object<string, *>}\n     */\n    var properties = assign({}, options);\n    properties[LayerProperty.OPACITY] =\n       options.opacity !== undefined ? options.opacity : 1;\n    properties[LayerProperty.VISIBLE] =\n       options.visible !== undefined ? options.visible : true;\n    properties[LayerProperty.Z_INDEX] = options.zIndex;\n    properties[LayerProperty.MAX_RESOLUTION] =\n       options.maxResolution !== undefined ? options.maxResolution : Infinity;\n    properties[LayerProperty.MIN_RESOLUTION] =\n       options.minResolution !== undefined ? options.minResolution : 0;\n\n    this.setProperties(properties);\n\n    /**\n     * @type {import(\"./Layer.js\").State}\n     * @private\n     */\n    this.state_ = null;\n\n    /**\n     * The layer type.\n     * @type {import(\"../LayerType.js\").default}\n     * @protected;\n     */\n    this.type;\n\n  }\n\n  if ( BaseObject ) BaseLayer.__proto__ = BaseObject;\n  BaseLayer.prototype = Object.create( BaseObject && BaseObject.prototype );\n  BaseLayer.prototype.constructor = BaseLayer;\n\n  /**\n   * Get the layer type (used when creating a layer renderer).\n   * @return {import(\"../LayerType.js\").default} The layer type.\n   */\n  BaseLayer.prototype.getType = function getType () {\n    return this.type;\n  };\n\n  /**\n   * @return {import(\"./Layer.js\").State} Layer state.\n   */\n  BaseLayer.prototype.getLayerState = function getLayerState () {\n    /** @type {import(\"./Layer.js\").State} */\n    var state = this.state_ || /** @type {?} */ ({\n      layer: this,\n      managed: true\n    });\n    state.opacity = clamp(this.getOpacity(), 0, 1);\n    state.sourceState = this.getSourceState();\n    state.visible = this.getVisible();\n    state.extent = this.getExtent();\n    state.zIndex = this.getZIndex() || 0;\n    state.maxResolution = this.getMaxResolution();\n    state.minResolution = Math.max(this.getMinResolution(), 0);\n    this.state_ = state;\n\n    return state;\n  };\n\n  /**\n   * @abstract\n   * @param {Array<import(\"./Layer.js\").default>=} opt_array Array of layers (to be\n   *     modified in place).\n   * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n   */\n  BaseLayer.prototype.getLayersArray = function getLayersArray (opt_array) {\n    return abstract();\n  };\n\n  /**\n   * @abstract\n   * @param {Array<import(\"./Layer.js\").State>=} opt_states Optional list of layer\n   *     states (to be modified in place).\n   * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n   */\n  BaseLayer.prototype.getLayerStatesArray = function getLayerStatesArray (opt_states) {\n    return abstract();\n  };\n\n  /**\n   * Return the {@link module:ol/extent~Extent extent} of the layer or `undefined` if it\n   * will be visible regardless of extent.\n   * @return {import(\"../extent.js\").Extent|undefined} The layer extent.\n   * @observable\n   * @api\n   */\n  BaseLayer.prototype.getExtent = function getExtent () {\n    return (\n      /** @type {import(\"../extent.js\").Extent|undefined} */ (this.get(LayerProperty.EXTENT))\n    );\n  };\n\n  /**\n   * Return the maximum resolution of the layer.\n   * @return {number} The maximum resolution of the layer.\n   * @observable\n   * @api\n   */\n  BaseLayer.prototype.getMaxResolution = function getMaxResolution () {\n    return /** @type {number} */ (this.get(LayerProperty.MAX_RESOLUTION));\n  };\n\n  /**\n   * Return the minimum resolution of the layer.\n   * @return {number} The minimum resolution of the layer.\n   * @observable\n   * @api\n   */\n  BaseLayer.prototype.getMinResolution = function getMinResolution () {\n    return /** @type {number} */ (this.get(LayerProperty.MIN_RESOLUTION));\n  };\n\n  /**\n   * Return the opacity of the layer (between 0 and 1).\n   * @return {number} The opacity of the layer.\n   * @observable\n   * @api\n   */\n  BaseLayer.prototype.getOpacity = function getOpacity () {\n    return /** @type {number} */ (this.get(LayerProperty.OPACITY));\n  };\n\n  /**\n   * @abstract\n   * @return {import(\"../source/State.js\").default} Source state.\n   */\n  BaseLayer.prototype.getSourceState = function getSourceState () {\n    return abstract();\n  };\n\n  /**\n   * Return the visibility of the layer (`true` or `false`).\n   * @return {boolean} The visibility of the layer.\n   * @observable\n   * @api\n   */\n  BaseLayer.prototype.getVisible = function getVisible () {\n    return /** @type {boolean} */ (this.get(LayerProperty.VISIBLE));\n  };\n\n  /**\n   * Return the Z-index of the layer, which is used to order layers before\n   * rendering. The default Z-index is 0.\n   * @return {number} The Z-index of the layer.\n   * @observable\n   * @api\n   */\n  BaseLayer.prototype.getZIndex = function getZIndex () {\n    return /** @type {number} */ (this.get(LayerProperty.Z_INDEX));\n  };\n\n  /**\n   * Set the extent at which the layer is visible.  If `undefined`, the layer\n   * will be visible at all extents.\n   * @param {import(\"../extent.js\").Extent|undefined} extent The extent of the layer.\n   * @observable\n   * @api\n   */\n  BaseLayer.prototype.setExtent = function setExtent (extent) {\n    this.set(LayerProperty.EXTENT, extent);\n  };\n\n  /**\n   * Set the maximum resolution at which the layer is visible.\n   * @param {number} maxResolution The maximum resolution of the layer.\n   * @observable\n   * @api\n   */\n  BaseLayer.prototype.setMaxResolution = function setMaxResolution (maxResolution) {\n    this.set(LayerProperty.MAX_RESOLUTION, maxResolution);\n  };\n\n  /**\n   * Set the minimum resolution at which the layer is visible.\n   * @param {number} minResolution The minimum resolution of the layer.\n   * @observable\n   * @api\n   */\n  BaseLayer.prototype.setMinResolution = function setMinResolution (minResolution) {\n    this.set(LayerProperty.MIN_RESOLUTION, minResolution);\n  };\n\n  /**\n   * Set the opacity of the layer, allowed values range from 0 to 1.\n   * @param {number} opacity The opacity of the layer.\n   * @observable\n   * @api\n   */\n  BaseLayer.prototype.setOpacity = function setOpacity (opacity) {\n    this.set(LayerProperty.OPACITY, opacity);\n  };\n\n  /**\n   * Set the visibility of the layer (`true` or `false`).\n   * @param {boolean} visible The visibility of the layer.\n   * @observable\n   * @api\n   */\n  BaseLayer.prototype.setVisible = function setVisible (visible) {\n    this.set(LayerProperty.VISIBLE, visible);\n  };\n\n  /**\n   * Set Z-index of the layer, which is used to order layers before rendering.\n   * The default Z-index is 0.\n   * @param {number} zindex The z-index of the layer.\n   * @observable\n   * @api\n   */\n  BaseLayer.prototype.setZIndex = function setZIndex (zindex) {\n    this.set(LayerProperty.Z_INDEX, zindex);\n  };\n\n  return BaseLayer;\n}(BaseObject));\n\n\nexport default BaseLayer;\n\n//# sourceMappingURL=Base.js.map","/**\n * @module ol/has\n */\n\nvar ua = typeof navigator !== 'undefined' ?\n  navigator.userAgent.toLowerCase() : '';\n\n/**\n * User agent string says we are dealing with Firefox as browser.\n * @type {boolean}\n */\nexport var FIREFOX = ua.indexOf('firefox') !== -1;\n\n/**\n * User agent string says we are dealing with Safari as browser.\n * @type {boolean}\n */\nexport var SAFARI = ua.indexOf('safari') !== -1 && ua.indexOf('chrom') == -1;\n\n/**\n * User agent string says we are dealing with a WebKit engine.\n * @type {boolean}\n */\nexport var WEBKIT = ua.indexOf('webkit') !== -1 && ua.indexOf('edge') == -1;\n\n/**\n * User agent string says we are dealing with a Mac as platform.\n * @type {boolean}\n */\nexport var MAC = ua.indexOf('macintosh') !== -1;\n\n\n/**\n * The ratio between physical pixels and device-independent pixels\n * (dips) on the device (`window.devicePixelRatio`).\n * @const\n * @type {number}\n * @api\n */\nexport var DEVICE_PIXEL_RATIO = window.devicePixelRatio || 1;\n\n\n/**\n * True if the browser's Canvas implementation implements {get,set}LineDash.\n * @type {boolean}\n */\nexport var CANVAS_LINE_DASH = function() {\n  var has = false;\n  try {\n    has = !!document.createElement('canvas').getContext('2d').setLineDash;\n  } catch (e) {\n    // pass\n  }\n  return has;\n}();\n\n\n/**\n * Is HTML5 geolocation supported in the current browser?\n * @const\n * @type {boolean}\n * @api\n */\nexport var GEOLOCATION = 'geolocation' in navigator;\n\n\n/**\n * True if browser supports touch events.\n * @const\n * @type {boolean}\n * @api\n */\nexport var TOUCH = 'ontouchstart' in window;\n\n\n/**\n * True if browser supports pointer events.\n * @const\n * @type {boolean}\n */\nexport var POINTER = 'PointerEvent' in window;\n\n\n/**\n * True if browser supports ms pointer events (IE 10).\n * @const\n * @type {boolean}\n */\nexport var MSPOINTER = !!(navigator.msPointerEnabled);\n\n\nexport {HAS as WEBGL} from './webgl.js';\n\n//# sourceMappingURL=has.js.map","/**\n * @module ol/loadingstrategy\n */\n\n\n/**\n * Strategy function for loading all features with a single request.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function all(extent, resolution) {\n  return [[-Infinity, -Infinity, Infinity, Infinity]];\n}\n\n\n/**\n * Strategy function for loading features based on the view's extent and\n * resolution.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function bbox(extent, resolution) {\n  return [extent];\n}\n\n\n/**\n * Creates a strategy function for loading features based on a tile grid.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {function(import(\"./extent.js\").Extent, number): Array<import(\"./extent.js\").Extent>} Loading strategy.\n * @api\n */\nexport function tile(tileGrid) {\n  return (\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @return {Array<import(\"./extent.js\").Extent>} Extents.\n     */\n    function(extent, resolution) {\n      var z = tileGrid.getZForResolution(resolution);\n      var tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n      /** @type {Array<import(\"./extent.js\").Extent>} */\n      var extents = [];\n      /** @type {import(\"./tilecoord.js\").TileCoord} */\n      var tileCoord = [z, 0, 0];\n      for (tileCoord[1] = tileRange.minX; tileCoord[1] <= tileRange.maxX; ++tileCoord[1]) {\n        for (tileCoord[2] = tileRange.minY; tileCoord[2] <= tileRange.maxY; ++tileCoord[2]) {\n          extents.push(tileGrid.getTileCoordExtent(tileCoord));\n        }\n      }\n      return extents;\n    }\n  );\n}\n\n//# sourceMappingURL=loadingstrategy.js.map","/**\n * @module ol/math\n */\nimport {assert} from './asserts.js';\n\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\n\n/**\n * Return the hyperbolic cosine of a given number. The method will use the\n * native `Math.cosh` function if it is available, otherwise the hyperbolic\n * cosine will be calculated via the reference implementation of the Mozilla\n * developer network.\n *\n * @param {number} x X.\n * @return {number} Hyperbolic cosine of x.\n */\nexport var cosh = (function() {\n  // Wrapped in a iife, to save the overhead of checking for the native\n  // implementation on every invocation.\n  var cosh;\n  if ('cosh' in Math) {\n    // The environment supports the native Math.cosh function, use it\n    cosh = Math.cosh;\n  } else {\n    //  else, use the reference implementation of MDN:\n    cosh = function(x) {\n      var y = /** @type {Math} */ (Math).exp(x);\n      return (y + 1 / y) / 2;\n    };\n  }\n  return cosh;\n}());\n\n\n/**\n * @param {number} x X.\n * @return {number} The smallest power of two greater than or equal to x.\n */\nexport function roundUpToPowerOfTwo(x) {\n  assert(0 < x, 29); // `x` must be greater than `0`\n  return Math.pow(2, Math.ceil(Math.log(x) / Math.LN2));\n}\n\n\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n  var dx = x2 - x1;\n  var dy = y2 - y1;\n  if (dx !== 0 || dy !== 0) {\n    var t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      x1 = x2;\n      y1 = y2;\n    } else if (t > 0) {\n      x1 += dx * t;\n      y1 += dy * t;\n    }\n  }\n  return squaredDistance(x, y, x1, y1);\n}\n\n\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n  var dx = x2 - x1;\n  var dy = y2 - y1;\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array<Array<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n  var n = mat.length;\n\n  for (var i = 0; i < n; i++) {\n    // Find max in the i-th column (ignoring i - 1 first rows)\n    var maxRow = i;\n    var maxEl = Math.abs(mat[i][i]);\n    for (var r = i + 1; r < n; r++) {\n      var absValue = Math.abs(mat[r][i]);\n      if (absValue > maxEl) {\n        maxEl = absValue;\n        maxRow = r;\n      }\n    }\n\n    if (maxEl === 0) {\n      return null; // matrix is singular\n    }\n\n    // Swap max row with i-th (current) row\n    var tmp = mat[maxRow];\n    mat[maxRow] = mat[i];\n    mat[i] = tmp;\n\n    // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n    for (var j = i + 1; j < n; j++) {\n      var coef = -mat[j][i] / mat[i][i];\n      for (var k = i; k < n + 1; k++) {\n        if (i == k) {\n          mat[j][k] = 0;\n        } else {\n          mat[j][k] += coef * mat[i][k];\n        }\n      }\n    }\n  }\n\n  // Solve Ax=b for upper triangular matrix A (mat)\n  var x = new Array(n);\n  for (var l = n - 1; l >= 0; l--) {\n    x[l] = mat[l][n] / mat[l][l];\n    for (var m = l - 1; m >= 0; m--) {\n      mat[m][n] -= mat[m][l] * x[l];\n    }\n  }\n  return x;\n}\n\n\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return angleInRadians * 180 / Math.PI;\n}\n\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return angleInDegrees * Math.PI / 180;\n}\n\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n  var r = a % b;\n  return r * b < 0 ? r + b : r;\n}\n\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n  return a + x * (b - a);\n}\n\n//# sourceMappingURL=math.js.map","/**\n * @module ol/layer/VectorTile\n */\nimport LayerType from '../LayerType.js';\nimport {assert} from '../asserts.js';\nimport TileProperty from './TileProperty.js';\nimport VectorLayer from './Vector.js';\nimport VectorTileRenderType from './VectorTileRenderType.js';\nimport {assign} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the tile extent used by the\n * renderer when getting features from the vector tile for the rendering or hit-detection.\n * Recommended value: Vector tiles are usually generated with a buffer, so this value should match\n * the largest possible buffer of the used tiles. It should be at least the size of the largest\n * point symbol or line width.\n * @property {import(\"./VectorTileRenderType.js\").default|string} [renderMode='hybrid'] Render mode for vector tiles:\n *  * `'image'`: Vector tiles are rendered as images. Great performance, but point symbols and texts\n *    are always rotated with the view and pixels are scaled during zoom animations.\n *  * `'hybrid'`: Polygon and line elements are rendered as images, so pixels are scaled during zoom\n *    animations. Point symbols and texts are accurately rendered as vectors and can stay upright on\n *    rotated views.\n *  * `'vector'`: Vector tiles are rendered as vectors. Most accurate rendering even during\n *    animations, but slower performance than the other options.\n *\n * When `declutter` is set to `true`, `'hybrid'` will be used instead of `'image'`.\n * @property {import(\"../source/VectorTile.js\").default} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles, and the priority is defined by the z-index of the style. Lower z-index\n * means higher priority. When set to `true`, a `renderMode` of `'image'` will be overridden with\n * `'hybrid'`.\n * @property {import(\"../style/Style.js\").StyleLike} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will be\n * recreated during animations. This means that no vectors will be shown clipped, but the setting\n * will have a performance impact for large amounts of vector data. When set to `false`, batches\n * will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will be\n * recreated during interactions. See also `updateWhileAnimating`.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created.\n * @property {import(\"../style/Style.js\").StyleLike} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n */\n\n\n/**\n * @classdesc\n * Layer for vector tile data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @param {Options=} opt_options Options.\n * @api\n */\nvar VectorTileLayer = /*@__PURE__*/(function (VectorLayer) {\n  function VectorTileLayer(opt_options) {\n    var options = opt_options ? opt_options : {};\n\n    var renderMode = options.renderMode || VectorTileRenderType.HYBRID;\n    assert(renderMode == undefined ||\n       renderMode == VectorTileRenderType.IMAGE ||\n       renderMode == VectorTileRenderType.HYBRID ||\n       renderMode == VectorTileRenderType.VECTOR,\n    28); // `renderMode` must be `'image'`, `'hybrid'` or `'vector'`\n    if (options.declutter && renderMode == VectorTileRenderType.IMAGE) {\n      renderMode = VectorTileRenderType.HYBRID;\n    }\n    options.renderMode = renderMode;\n\n    var baseOptions = /** @type {Object} */ (assign({}, options));\n    delete baseOptions.preload;\n    delete baseOptions.useInterimTilesOnError;\n\n    VectorLayer.call(/** @type {import(\"./Vector.js\").Options} */ this, (baseOptions));\n\n    this.setPreload(options.preload ? options.preload : 0);\n    this.setUseInterimTilesOnError(options.useInterimTilesOnError !== undefined ?\n      options.useInterimTilesOnError : true);\n\n    /**\n    * The layer type.\n    * @protected\n    * @type {import(\"../LayerType.js\").default}\n    */\n    this.type = LayerType.VECTOR_TILE;\n\n  }\n\n  if ( VectorLayer ) VectorTileLayer.__proto__ = VectorLayer;\n  VectorTileLayer.prototype = Object.create( VectorLayer && VectorLayer.prototype );\n  VectorTileLayer.prototype.constructor = VectorTileLayer;\n\n  /**\n  * Return the level as number to which we will preload tiles up to.\n  * @return {number} The level to preload tiles up to.\n  * @observable\n  * @api\n  */\n  VectorTileLayer.prototype.getPreload = function getPreload () {\n    return /** @type {number} */ (this.get(TileProperty.PRELOAD));\n  };\n\n  /**\n  * Whether we use interim tiles on error.\n  * @return {boolean} Use interim tiles on error.\n  * @observable\n  * @api\n  */\n  VectorTileLayer.prototype.getUseInterimTilesOnError = function getUseInterimTilesOnError () {\n    return /** @type {boolean} */ (this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR));\n  };\n\n  /**\n  * Set the level as number to which we will preload tiles up to.\n  * @param {number} preload The level to preload tiles up to.\n  * @observable\n  * @api\n  */\n  VectorTileLayer.prototype.setPreload = function setPreload (preload) {\n    this.set(TileProperty.PRELOAD, preload);\n  };\n\n  /**\n  * Set whether we use interim tiles on error.\n  * @param {boolean} useInterimTilesOnError Use interim tiles on error.\n  * @observable\n  * @api\n  */\n  VectorTileLayer.prototype.setUseInterimTilesOnError = function setUseInterimTilesOnError (useInterimTilesOnError) {\n    this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR, useInterimTilesOnError);\n  };\n\n  return VectorTileLayer;\n}(VectorLayer));\n\n\n/**\n * Return the associated {@link module:ol/source/VectorTile vectortilesource} of the layer.\n * @function\n * @return {import(\"../source/VectorTile.js\").default} Source.\n * @api\n */\nVectorTileLayer.prototype.getSource;\nexport default VectorTileLayer;\n\n//# sourceMappingURL=VectorTile.js.map","/**\n * @module ol/render/replay\n */\nimport ReplayType from './ReplayType.js';\n\n\n/**\n * @const\n * @type {Array<ReplayType>}\n */\nexport var ORDER = [\n  ReplayType.POLYGON,\n  ReplayType.CIRCLE,\n  ReplayType.LINE_STRING,\n  ReplayType.IMAGE,\n  ReplayType.TEXT,\n  ReplayType.DEFAULT\n];\n\n/**\n * @const\n * @enum {number}\n */\nexport var TEXT_ALIGN = {};\nTEXT_ALIGN['left'] = 0;\nTEXT_ALIGN['end'] = 0;\nTEXT_ALIGN['center'] = 0.5;\nTEXT_ALIGN['right'] = 1;\nTEXT_ALIGN['start'] = 1;\nTEXT_ALIGN['top'] = 0;\nTEXT_ALIGN['middle'] = 0.5;\nTEXT_ALIGN['hanging'] = 0.2;\nTEXT_ALIGN['alphabetic'] = 0.8;\nTEXT_ALIGN['ideographic'] = 0.8;\nTEXT_ALIGN['bottom'] = 1;\n\n//# sourceMappingURL=replay.js.map","/**\n * @module ol/layer/Group\n */\nimport {getUid} from '../util.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport {getChangeEventType} from '../Object.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport {assert} from '../asserts.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getIntersection} from '../extent.js';\nimport BaseLayer from './Base.js';\nimport {assign, clear} from '../obj.js';\nimport SourceState from '../source/State.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {Array<import(\"./Base.js\").default>|import(\"../Collection.js\").default<import(\"./Base.js\").default>} [layers] Child layers.\n */\n\n\n/**\n * @enum {string}\n * @private\n */\nvar Property = {\n  LAYERS: 'layers'\n};\n\n\n/**\n * @classdesc\n * A {@link module:ol/Collection~Collection} of layers that are handled together.\n *\n * A generic `change` event is triggered when the group/Collection changes.\n *\n * @api\n */\nvar LayerGroup = /*@__PURE__*/(function (BaseLayer) {\n  function LayerGroup(opt_options) {\n\n    var options = opt_options || {};\n    var baseOptions = /** @type {Options} */ (assign({}, options));\n    delete baseOptions.layers;\n\n    var layers = options.layers;\n\n    BaseLayer.call(this, baseOptions);\n\n    /**\n     * @private\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n    this.layersListenerKeys_ = [];\n\n    /**\n     * @private\n     * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n     */\n    this.listenerKeys_ = {};\n\n    listen(this,\n      getChangeEventType(Property.LAYERS),\n      this.handleLayersChanged_, this);\n\n    if (layers) {\n      if (Array.isArray(layers)) {\n        layers = new Collection(layers.slice(), {unique: true});\n      } else {\n        assert(typeof /** @type {?} */ (layers).getArray === 'function',\n          43); // Expected `layers` to be an array or a `Collection`\n      }\n    } else {\n      layers = new Collection(undefined, {unique: true});\n    }\n\n    this.setLayers(layers);\n\n  }\n\n  if ( BaseLayer ) LayerGroup.__proto__ = BaseLayer;\n  LayerGroup.prototype = Object.create( BaseLayer && BaseLayer.prototype );\n  LayerGroup.prototype.constructor = LayerGroup;\n\n  /**\n   * @private\n   */\n  LayerGroup.prototype.handleLayerChange_ = function handleLayerChange_ () {\n    this.changed();\n  };\n\n  /**\n   * @private\n   */\n  LayerGroup.prototype.handleLayersChanged_ = function handleLayersChanged_ () {\n    this.layersListenerKeys_.forEach(unlistenByKey);\n    this.layersListenerKeys_.length = 0;\n\n    var layers = this.getLayers();\n    this.layersListenerKeys_.push(\n      listen(layers, CollectionEventType.ADD, this.handleLayersAdd_, this),\n      listen(layers, CollectionEventType.REMOVE, this.handleLayersRemove_, this)\n    );\n\n    for (var id in this.listenerKeys_) {\n      this.listenerKeys_[id].forEach(unlistenByKey);\n    }\n    clear(this.listenerKeys_);\n\n    var layersArray = layers.getArray();\n    for (var i = 0, ii = layersArray.length; i < ii; i++) {\n      var layer = layersArray[i];\n      this.listenerKeys_[getUid(layer)] = [\n        listen(layer, ObjectEventType.PROPERTYCHANGE, this.handleLayerChange_, this),\n        listen(layer, EventType.CHANGE, this.handleLayerChange_, this)\n      ];\n    }\n\n    this.changed();\n  };\n\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent} collectionEvent CollectionEvent.\n   * @private\n   */\n  LayerGroup.prototype.handleLayersAdd_ = function handleLayersAdd_ (collectionEvent) {\n    var layer = /** @type {import(\"./Base.js\").default} */ (collectionEvent.element);\n    this.listenerKeys_[getUid(layer)] = [\n      listen(layer, ObjectEventType.PROPERTYCHANGE, this.handleLayerChange_, this),\n      listen(layer, EventType.CHANGE, this.handleLayerChange_, this)\n    ];\n    this.changed();\n  };\n\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent} collectionEvent CollectionEvent.\n   * @private\n   */\n  LayerGroup.prototype.handleLayersRemove_ = function handleLayersRemove_ (collectionEvent) {\n    var layer = /** @type {import(\"./Base.js\").default} */ (collectionEvent.element);\n    var key = getUid(layer);\n    this.listenerKeys_[key].forEach(unlistenByKey);\n    delete this.listenerKeys_[key];\n    this.changed();\n  };\n\n  /**\n   * Returns the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n   * in this group.\n   * @return {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} Collection of\n   *   {@link module:ol/layer/Base layers} that are part of this group.\n   * @observable\n   * @api\n   */\n  LayerGroup.prototype.getLayers = function getLayers () {\n    return (\n      /** @type {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} */ (this.get(Property.LAYERS))\n    );\n  };\n\n  /**\n   * Set the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n   * in this group.\n   * @param {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} layers Collection of\n   *   {@link module:ol/layer/Base layers} that are part of this group.\n   * @observable\n   * @api\n   */\n  LayerGroup.prototype.setLayers = function setLayers (layers) {\n    this.set(Property.LAYERS, layers);\n  };\n\n  /**\n   * @inheritDoc\n   */\n  LayerGroup.prototype.getLayersArray = function getLayersArray (opt_array) {\n    var array = opt_array !== undefined ? opt_array : [];\n    this.getLayers().forEach(function(layer) {\n      layer.getLayersArray(array);\n    });\n    return array;\n  };\n\n  /**\n   * @inheritDoc\n   */\n  LayerGroup.prototype.getLayerStatesArray = function getLayerStatesArray (opt_states) {\n    var states = opt_states !== undefined ? opt_states : [];\n\n    var pos = states.length;\n\n    this.getLayers().forEach(function(layer) {\n      layer.getLayerStatesArray(states);\n    });\n\n    var ownLayerState = this.getLayerState();\n    for (var i = pos, ii = states.length; i < ii; i++) {\n      var layerState = states[i];\n      layerState.opacity *= ownLayerState.opacity;\n      layerState.visible = layerState.visible && ownLayerState.visible;\n      layerState.maxResolution = Math.min(\n        layerState.maxResolution, ownLayerState.maxResolution);\n      layerState.minResolution = Math.max(\n        layerState.minResolution, ownLayerState.minResolution);\n      if (ownLayerState.extent !== undefined) {\n        if (layerState.extent !== undefined) {\n          layerState.extent = getIntersection(layerState.extent, ownLayerState.extent);\n        } else {\n          layerState.extent = ownLayerState.extent;\n        }\n      }\n    }\n\n    return states;\n  };\n\n  /**\n   * @inheritDoc\n   */\n  LayerGroup.prototype.getSourceState = function getSourceState () {\n    return SourceState.READY;\n  };\n\n  return LayerGroup;\n}(BaseLayer));\n\n\nexport default LayerGroup;\n\n//# sourceMappingURL=Group.js.map","/**\n * @module ol/layer/TileProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  PRELOAD: 'preload',\n  USE_INTERIM_TILES_ON_ERROR: 'useInterimTilesOnError'\n};\n\n//# sourceMappingURL=TileProperty.js.map","/**\n * @module ol/render/ReplayType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  CIRCLE: 'Circle',\n  DEFAULT: 'Default',\n  IMAGE: 'Image',\n  LINE_STRING: 'LineString',\n  POLYGON: 'Polygon',\n  TEXT: 'Text'\n};\n\n//# sourceMappingURL=ReplayType.js.map","/**\n * @module ol/pointer/EventSource\n */\n\nvar EventSource = function EventSource(dispatcher, mapping) {\n\n  /**\n   * @type {import(\"./PointerEventHandler.js\").default}\n   */\n  this.dispatcher = dispatcher;\n\n  /**\n   * @private\n   * @const\n   * @type {!Object<string, function(Event)>}\n   */\n  this.mapping_ = mapping;\n};\n\n/**\n * List of events supported by this source.\n * @return {Array<string>} Event names\n */\nEventSource.prototype.getEvents = function getEvents () {\n  return Object.keys(this.mapping_);\n};\n\n/**\n * Returns the handler that should handle a given event type.\n * @param {string} eventType The event type.\n * @return {function(Event)} Handler\n */\nEventSource.prototype.getHandlerForEvent = function getHandlerForEvent (eventType) {\n  return this.mapping_[eventType];\n};\n\nexport default EventSource;\n\n//# sourceMappingURL=EventSource.js.map","/**\n * @module ol/pointer/MouseSource\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport EventSource from './EventSource.js';\n\n\n/**\n * @type {number}\n */\nexport var POINTER_ID = 1;\n\n\n/**\n * @type {string}\n */\nexport var POINTER_TYPE = 'mouse';\n\n\n/**\n * Radius around touchend that swallows mouse events.\n *\n * @type {number}\n */\nvar DEDUP_DIST = 25;\n\n/**\n * Handler for `mousedown`.\n *\n * @this {MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mousedown(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    // TODO(dfreedman) workaround for some elements not sending mouseup\n    // http://crbug/149091\n    if (POINTER_ID.toString() in this.pointerMap) {\n      this.cancel(inEvent);\n    }\n    var e = prepareEvent(inEvent, this.dispatcher);\n    this.pointerMap[POINTER_ID.toString()] = inEvent;\n    this.dispatcher.down(e, inEvent);\n  }\n}\n\n/**\n * Handler for `mousemove`.\n *\n * @this {MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mousemove(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    var e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.move(e, inEvent);\n  }\n}\n\n/**\n * Handler for `mouseup`.\n *\n * @this {MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mouseup(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    var p = this.pointerMap[POINTER_ID.toString()];\n\n    if (p && p.button === inEvent.button) {\n      var e = prepareEvent(inEvent, this.dispatcher);\n      this.dispatcher.up(e, inEvent);\n      this.cleanupMouse();\n    }\n  }\n}\n\n/**\n * Handler for `mouseover`.\n *\n * @this {MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mouseover(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    var e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.enterOver(e, inEvent);\n  }\n}\n\n/**\n * Handler for `mouseout`.\n *\n * @this {MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mouseout(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    var e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.leaveOut(e, inEvent);\n  }\n}\n\n\nvar MouseSource = /*@__PURE__*/(function (EventSource) {\n  function MouseSource(dispatcher) {\n    var mapping = {\n      'mousedown': mousedown,\n      'mousemove': mousemove,\n      'mouseup': mouseup,\n      'mouseover': mouseover,\n      'mouseout': mouseout\n    };\n    EventSource.call(this, dispatcher, mapping);\n\n    /**\n     * @const\n     * @type {!Object<string, Event|Object>}\n     */\n    this.pointerMap = dispatcher.pointerMap;\n\n    /**\n     * @const\n     * @type {Array<import(\"../pixel.js\").Pixel>}\n     */\n    this.lastTouches = [];\n  }\n\n  if ( EventSource ) MouseSource.__proto__ = EventSource;\n  MouseSource.prototype = Object.create( EventSource && EventSource.prototype );\n  MouseSource.prototype.constructor = MouseSource;\n\n  /**\n   * Detect if a mouse event was simulated from a touch by\n   * checking if previously there was a touch event at the\n   * same position.\n   *\n   * FIXME - Known problem with the native Android browser on\n   * Samsung GT-I9100 (Android 4.1.2):\n   * In case the page is scrolled, this function does not work\n   * correctly when a canvas is used (WebGL or canvas renderer).\n   * Mouse listeners on canvas elements (for this browser), create\n   * two mouse events: One 'good' and one 'bad' one (on other browsers or\n   * when a div is used, there is only one event). For the 'bad' one,\n   * clientX/clientY and also pageX/pageY are wrong when the page\n   * is scrolled. Because of that, this function can not detect if\n   * the events were simulated from a touch event. As result, a\n   * pointer event at a wrong position is dispatched, which confuses\n   * the map interactions.\n   * It is unclear, how one can get the correct position for the event\n   * or detect that the positions are invalid.\n   *\n   * @private\n   * @param {MouseEvent} inEvent The in event.\n   * @return {boolean} True, if the event was generated by a touch.\n   */\n  MouseSource.prototype.isEventSimulatedFromTouch_ = function isEventSimulatedFromTouch_ (inEvent) {\n    var lts = this.lastTouches;\n    var x = inEvent.clientX;\n    var y = inEvent.clientY;\n    for (var i = 0, l = lts.length, t = (void 0); i < l && (t = lts[i]); i++) {\n      // simulated mouse events will be swallowed near a primary touchend\n      var dx = Math.abs(x - t[0]);\n      var dy = Math.abs(y - t[1]);\n      if (dx <= DEDUP_DIST && dy <= DEDUP_DIST) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  /**\n   * Dispatches a `pointercancel` event.\n   *\n   * @param {Event} inEvent The in event.\n   */\n  MouseSource.prototype.cancel = function cancel (inEvent) {\n    var e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.cancel(e, inEvent);\n    this.cleanupMouse();\n  };\n\n  /**\n   * Remove the mouse from the list of active pointers.\n   */\n  MouseSource.prototype.cleanupMouse = function cleanupMouse () {\n    delete this.pointerMap[POINTER_ID.toString()];\n  };\n\n  return MouseSource;\n}(EventSource));\n\n\n/**\n * Creates a copy of the original event that will be used\n * for the fake pointer event.\n *\n * @param {Event} inEvent The in event.\n * @param {import(\"./PointerEventHandler.js\").default} dispatcher Event handler.\n * @return {Object} The copied event.\n */\nexport function prepareEvent(inEvent, dispatcher) {\n  var e = dispatcher.cloneEvent(inEvent, inEvent);\n\n  // forward mouse preventDefault\n  var pd = e.preventDefault;\n  e.preventDefault = function() {\n    inEvent.preventDefault();\n    pd();\n  };\n\n  e.pointerId = POINTER_ID;\n  e.isPrimary = true;\n  e.pointerType = POINTER_TYPE;\n\n  return e;\n}\n\n\nexport default MouseSource;\n\n//# sourceMappingURL=MouseSource.js.map","/**\n * @module ol/pointer/MsSource\n */\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport EventSource from './EventSource.js';\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nvar POINTER_TYPES = [\n  '',\n  'unavailable',\n  'touch',\n  'pen',\n  'mouse'\n];\n\n/**\n * Handler for `msPointerDown`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerDown(inEvent) {\n  this.pointerMap[inEvent.pointerId.toString()] = inEvent;\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.down(e, inEvent);\n}\n\n/**\n * Handler for `msPointerMove`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerMove(inEvent) {\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.move(e, inEvent);\n}\n\n/**\n * Handler for `msPointerUp`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerUp(inEvent) {\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.up(e, inEvent);\n  this.cleanup(inEvent.pointerId);\n}\n\n/**\n * Handler for `msPointerOut`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerOut(inEvent) {\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.leaveOut(e, inEvent);\n}\n\n/**\n * Handler for `msPointerOver`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerOver(inEvent) {\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.enterOver(e, inEvent);\n}\n\n/**\n * Handler for `msPointerCancel`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerCancel(inEvent) {\n  var e = this.prepareEvent_(inEvent);\n  this.dispatcher.cancel(e, inEvent);\n  this.cleanup(inEvent.pointerId);\n}\n\n/**\n * Handler for `msLostPointerCapture`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msLostPointerCapture(inEvent) {\n  var e = this.dispatcher.makeEvent('lostpointercapture', inEvent, inEvent);\n  this.dispatcher.dispatchEvent(e);\n}\n\n/**\n * Handler for `msGotPointerCapture`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msGotPointerCapture(inEvent) {\n  var e = this.dispatcher.makeEvent('gotpointercapture', inEvent, inEvent);\n  this.dispatcher.dispatchEvent(e);\n}\n\nvar MsSource = /*@__PURE__*/(function (EventSource) {\n  function MsSource(dispatcher) {\n    var mapping = {\n      'MSPointerDown': msPointerDown,\n      'MSPointerMove': msPointerMove,\n      'MSPointerUp': msPointerUp,\n      'MSPointerOut': msPointerOut,\n      'MSPointerOver': msPointerOver,\n      'MSPointerCancel': msPointerCancel,\n      'MSGotPointerCapture': msGotPointerCapture,\n      'MSLostPointerCapture': msLostPointerCapture\n    };\n    EventSource.call(this, dispatcher, mapping);\n\n    /**\n     * @const\n     * @type {!Object<string, MSPointerEvent|Object>}\n     */\n    this.pointerMap = dispatcher.pointerMap;\n  }\n\n  if ( EventSource ) MsSource.__proto__ = EventSource;\n  MsSource.prototype = Object.create( EventSource && EventSource.prototype );\n  MsSource.prototype.constructor = MsSource;\n\n  /**\n   * Creates a copy of the original event that will be used\n   * for the fake pointer event.\n   *\n   * @private\n   * @param {MSPointerEvent} inEvent The in event.\n   * @return {Object} The copied event.\n   */\n  MsSource.prototype.prepareEvent_ = function prepareEvent_ (inEvent) {\n    /** @type {MSPointerEvent|Object} */\n    var e = inEvent;\n    if (typeof inEvent.pointerType === 'number') {\n      e = this.dispatcher.cloneEvent(inEvent, inEvent);\n      e.pointerType = POINTER_TYPES[inEvent.pointerType];\n    }\n\n    return e;\n  };\n\n  /**\n   * Remove this pointer from the list of active pointers.\n   * @param {number} pointerId Pointer identifier.\n   */\n  MsSource.prototype.cleanup = function cleanup (pointerId) {\n    delete this.pointerMap[pointerId.toString()];\n  };\n\n  return MsSource;\n}(EventSource));\n\nexport default MsSource;\n\n//# sourceMappingURL=MsSource.js.map","/**\n * @module ol/pointer/NativeSource\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport EventSource from './EventSource.js';\n\n/**\n * Handler for `pointerdown`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerDown(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointermove`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerMove(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointerup`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerUp(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointerout`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerOut(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointerover`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerOver(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointercancel`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerCancel(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `lostpointercapture`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction lostPointerCapture(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `gotpointercapture`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction gotPointerCapture(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\nvar NativeSource = /*@__PURE__*/(function (EventSource) {\n  function NativeSource(dispatcher) {\n    var mapping = {\n      'pointerdown': pointerDown,\n      'pointermove': pointerMove,\n      'pointerup': pointerUp,\n      'pointerout': pointerOut,\n      'pointerover': pointerOver,\n      'pointercancel': pointerCancel,\n      'gotpointercapture': gotPointerCapture,\n      'lostpointercapture': lostPointerCapture\n    };\n    EventSource.call(this, dispatcher, mapping);\n  }\n\n  if ( EventSource ) NativeSource.__proto__ = EventSource;\n  NativeSource.prototype = Object.create( EventSource && EventSource.prototype );\n  NativeSource.prototype.constructor = NativeSource;\n\n  return NativeSource;\n}(EventSource));\n\nexport default NativeSource;\n\n//# sourceMappingURL=NativeSource.js.map","/**\n * @module ol/pointer/PointerEvent\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport _Event from '../events/Event.js';\n\n\n/**\n * Is the `buttons` property supported?\n * @type {boolean}\n */\nvar HAS_BUTTONS = false;\n\n\nvar PointerEvent = /*@__PURE__*/(function (_Event) {\n  function PointerEvent(type, originalEvent, opt_eventDict) {\n    _Event.call(this, type);\n\n    /**\n     * @const\n     * @type {Event}\n     */\n    this.originalEvent = originalEvent;\n\n    var eventDict = opt_eventDict ? opt_eventDict : {};\n\n    /**\n     * @type {number}\n     */\n    this.buttons = getButtons(eventDict);\n\n    /**\n     * @type {number}\n     */\n    this.pressure = getPressure(eventDict, this.buttons);\n\n    // MouseEvent related properties\n\n    /**\n     * @type {boolean}\n     */\n    this.bubbles = 'bubbles' in eventDict ? eventDict['bubbles'] : false;\n\n    /**\n     * @type {boolean}\n     */\n    this.cancelable = 'cancelable' in eventDict ? eventDict['cancelable'] : false;\n\n    /**\n     * @type {Object}\n     */\n    this.view = 'view' in eventDict ? eventDict['view'] : null;\n\n    /**\n     * @type {number}\n     */\n    this.detail = 'detail' in eventDict ? eventDict['detail'] : null;\n\n    /**\n     * @type {number}\n     */\n    this.screenX = 'screenX' in eventDict ? eventDict['screenX'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.screenY = 'screenY' in eventDict ? eventDict['screenY'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.clientX = 'clientX' in eventDict ? eventDict['clientX'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.clientY = 'clientY' in eventDict ? eventDict['clientY'] : 0;\n\n    /**\n     * @type {boolean}\n     */\n    this.ctrlKey = 'ctrlKey' in eventDict ? eventDict['ctrlKey'] : false;\n\n    /**\n     * @type {boolean}\n     */\n    this.altKey = 'altKey' in eventDict ? eventDict['altKey'] : false;\n\n    /**\n     * @type {boolean}\n     */\n    this.shiftKey = 'shiftKey' in eventDict ? eventDict['shiftKey'] : false;\n\n    /**\n     * @type {boolean}\n     */\n    this.metaKey = 'metaKey' in eventDict ? eventDict['metaKey'] : false;\n\n    /**\n     * @type {number}\n     */\n    this.button = 'button' in eventDict ? eventDict['button'] : 0;\n\n    /**\n     * @type {Node}\n     */\n    this.relatedTarget = 'relatedTarget' in eventDict ?\n      eventDict['relatedTarget'] : null;\n\n    // PointerEvent related properties\n\n    /**\n     * @const\n     * @type {number}\n     */\n    this.pointerId = 'pointerId' in eventDict ? eventDict['pointerId'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.width = 'width' in eventDict ? eventDict['width'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.height = 'height' in eventDict ? eventDict['height'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.tiltX = 'tiltX' in eventDict ? eventDict['tiltX'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.tiltY = 'tiltY' in eventDict ? eventDict['tiltY'] : 0;\n\n    /**\n     * @type {string}\n     */\n    this.pointerType = 'pointerType' in eventDict ? eventDict['pointerType'] : '';\n\n    /**\n     * @type {number}\n     */\n    this.hwTimestamp = 'hwTimestamp' in eventDict ? eventDict['hwTimestamp'] : 0;\n\n    /**\n     * @type {boolean}\n     */\n    this.isPrimary = 'isPrimary' in eventDict ? eventDict['isPrimary'] : false;\n\n    // keep the semantics of preventDefault\n    if (originalEvent.preventDefault) {\n      this.preventDefault = function() {\n        originalEvent.preventDefault();\n      };\n    }\n  }\n\n  if ( _Event ) PointerEvent.__proto__ = _Event;\n  PointerEvent.prototype = Object.create( _Event && _Event.prototype );\n  PointerEvent.prototype.constructor = PointerEvent;\n\n  return PointerEvent;\n}(_Event));\n\n\n/**\n * @param {Object<string, ?>} eventDict The event dictionary.\n * @return {number} Button indicator.\n */\nfunction getButtons(eventDict) {\n  // According to the w3c spec,\n  // http://www.w3.org/TR/DOM-Level-3-Events/#events-MouseEvent-button\n  // MouseEvent.button == 0 can mean either no mouse button depressed, or the\n  // left mouse button depressed.\n  //\n  // As of now, the only way to distinguish between the two states of\n  // MouseEvent.button is by using the deprecated MouseEvent.which property, as\n  // this maps mouse buttons to positive integers > 0, and uses 0 to mean that\n  // no mouse button is held.\n  //\n  // MouseEvent.which is derived from MouseEvent.button at MouseEvent creation,\n  // but initMouseEvent does not expose an argument with which to set\n  // MouseEvent.which. Calling initMouseEvent with a buttonArg of 0 will set\n  // MouseEvent.button == 0 and MouseEvent.which == 1, breaking the expectations\n  // of app developers.\n  //\n  // The only way to propagate the correct state of MouseEvent.which and\n  // MouseEvent.button to a new MouseEvent.button == 0 and MouseEvent.which == 0\n  // is to call initMouseEvent with a buttonArg value of -1.\n  //\n  // This is fixed with DOM Level 4's use of buttons\n  var buttons;\n  if (eventDict.buttons || HAS_BUTTONS) {\n    buttons = eventDict.buttons;\n  } else {\n    switch (eventDict.which) {\n      case 1: buttons = 1; break;\n      case 2: buttons = 4; break;\n      case 3: buttons = 2; break;\n      default: buttons = 0;\n    }\n  }\n  return buttons;\n}\n\n\n/**\n * @param {Object<string, ?>} eventDict The event dictionary.\n * @param {number} buttons Button indicator.\n * @return {number} The pressure.\n */\nfunction getPressure(eventDict, buttons) {\n  // Spec requires that pointers without pressure specified use 0.5 for down\n  // state and 0 for up state.\n  var pressure = 0;\n  if (eventDict.pressure) {\n    pressure = eventDict.pressure;\n  } else {\n    pressure = buttons ? 0.5 : 0;\n  }\n  return pressure;\n}\n\n\n/**\n * Checks if the `buttons` property is supported.\n */\n(function() {\n  try {\n    var ev = new MouseEvent('click', {buttons: 1});\n    HAS_BUTTONS = ev.buttons === 1;\n  } catch (e) {\n    // pass\n  }\n})();\n\nexport default PointerEvent;\n\n//# sourceMappingURL=PointerEvent.js.map","/**\n * @module ol/pointer/TouchSource\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport {remove} from '../array.js';\nimport EventSource from './EventSource.js';\nimport {POINTER_ID} from './MouseSource.js';\n\n\n/**\n * @type {number}\n */\nvar CLICK_COUNT_TIMEOUT = 200;\n\n/**\n * @type {string}\n */\nvar POINTER_TYPE = 'touch';\n\n/**\n * Handler for `touchstart`, triggers `pointerover`,\n * `pointerenter` and `pointerdown` events.\n *\n * @this {TouchSource}\n * @param {TouchEvent} inEvent The in event.\n */\nfunction touchstart(inEvent) {\n  this.vacuumTouches_(inEvent);\n  this.setPrimaryTouch_(inEvent.changedTouches[0]);\n  this.dedupSynthMouse_(inEvent);\n  this.clickCount_++;\n  this.processTouches_(inEvent, this.overDown_);\n}\n\n/**\n * Handler for `touchmove`.\n *\n * @this {TouchSource}\n * @param {TouchEvent} inEvent The in event.\n */\nfunction touchmove(inEvent) {\n  this.processTouches_(inEvent, this.moveOverOut_);\n}\n\n/**\n * Handler for `touchend`, triggers `pointerup`,\n * `pointerout` and `pointerleave` events.\n *\n * @this {TouchSource}\n * @param {TouchEvent} inEvent The event.\n */\nfunction touchend(inEvent) {\n  this.dedupSynthMouse_(inEvent);\n  this.processTouches_(inEvent, this.upOut_);\n}\n\n/**\n * Handler for `touchcancel`, triggers `pointercancel`,\n * `pointerout` and `pointerleave` events.\n *\n * @this {TouchSource}\n * @param {TouchEvent} inEvent The in event.\n */\nfunction touchcancel(inEvent) {\n  this.processTouches_(inEvent, this.cancelOut_);\n}\n\n\nvar TouchSource = /*@__PURE__*/(function (EventSource) {\n  function TouchSource(dispatcher, mouseSource) {\n    var mapping = {\n      'touchstart': touchstart,\n      'touchmove': touchmove,\n      'touchend': touchend,\n      'touchcancel': touchcancel\n    };\n    EventSource.call(this, dispatcher, mapping);\n\n    /**\n     * @const\n     * @type {!Object<string, Event|Object>}\n     */\n    this.pointerMap = dispatcher.pointerMap;\n\n    /**\n     * @const\n     * @type {import(\"./MouseSource.js\").default}\n     */\n    this.mouseSource = mouseSource;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.firstTouchId_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.clickCount_ = 0;\n\n    /**\n     * @private\n     * @type {?}\n     */\n    this.resetId_;\n\n    /**\n     * Mouse event timeout: This should be long enough to\n     * ignore compat mouse events made by touch.\n     * @private\n     * @type {number}\n     */\n    this.dedupTimeout_ = 2500;\n  }\n\n  if ( EventSource ) TouchSource.__proto__ = EventSource;\n  TouchSource.prototype = Object.create( EventSource && EventSource.prototype );\n  TouchSource.prototype.constructor = TouchSource;\n\n  /**\n   * @private\n   * @param {Touch} inTouch The in touch.\n   * @return {boolean} True, if this is the primary touch.\n   */\n  TouchSource.prototype.isPrimaryTouch_ = function isPrimaryTouch_ (inTouch) {\n    return this.firstTouchId_ === inTouch.identifier;\n  };\n\n  /**\n   * Set primary touch if there are no pointers, or the only pointer is the mouse.\n   * @param {Touch} inTouch The in touch.\n   * @private\n   */\n  TouchSource.prototype.setPrimaryTouch_ = function setPrimaryTouch_ (inTouch) {\n    var count = Object.keys(this.pointerMap).length;\n    if (count === 0 || (count === 1 && POINTER_ID.toString() in this.pointerMap)) {\n      this.firstTouchId_ = inTouch.identifier;\n      this.cancelResetClickCount_();\n    }\n  };\n\n  /**\n   * @private\n   * @param {PointerEvent} inPointer The in pointer object.\n   */\n  TouchSource.prototype.removePrimaryPointer_ = function removePrimaryPointer_ (inPointer) {\n    if (inPointer.isPrimary) {\n      this.firstTouchId_ = undefined;\n      this.resetClickCount_();\n    }\n  };\n\n  /**\n   * @private\n   */\n  TouchSource.prototype.resetClickCount_ = function resetClickCount_ () {\n    this.resetId_ = setTimeout(\n      this.resetClickCountHandler_.bind(this),\n      CLICK_COUNT_TIMEOUT);\n  };\n\n  /**\n   * @private\n   */\n  TouchSource.prototype.resetClickCountHandler_ = function resetClickCountHandler_ () {\n    this.clickCount_ = 0;\n    this.resetId_ = undefined;\n  };\n\n  /**\n   * @private\n   */\n  TouchSource.prototype.cancelResetClickCount_ = function cancelResetClickCount_ () {\n    if (this.resetId_ !== undefined) {\n      clearTimeout(this.resetId_);\n    }\n  };\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent Browser event\n   * @param {Touch} inTouch Touch event\n   * @return {PointerEvent} A pointer object.\n   */\n  TouchSource.prototype.touchToPointer_ = function touchToPointer_ (browserEvent, inTouch) {\n    var e = this.dispatcher.cloneEvent(browserEvent, inTouch);\n    // Spec specifies that pointerId 1 is reserved for Mouse.\n    // Touch identifiers can start at 0.\n    // Add 2 to the touch identifier for compatibility.\n    e.pointerId = inTouch.identifier + 2;\n    // TODO: check if this is necessary?\n    //e.target = findTarget(e);\n    e.bubbles = true;\n    e.cancelable = true;\n    e.detail = this.clickCount_;\n    e.button = 0;\n    e.buttons = 1;\n    e.width = inTouch.radiusX || 0;\n    e.height = inTouch.radiusY || 0;\n    e.pressure = inTouch.force || 0.5;\n    e.isPrimary = this.isPrimaryTouch_(inTouch);\n    e.pointerType = POINTER_TYPE;\n\n    // make sure that the properties that are different for\n    // each `Touch` object are not copied from the BrowserEvent object\n    e.clientX = inTouch.clientX;\n    e.clientY = inTouch.clientY;\n    e.screenX = inTouch.screenX;\n    e.screenY = inTouch.screenY;\n\n    return e;\n  };\n\n  /**\n   * @private\n   * @param {TouchEvent} inEvent Touch event\n   * @param {function(TouchEvent, PointerEvent)} inFunction In function.\n   */\n  TouchSource.prototype.processTouches_ = function processTouches_ (inEvent, inFunction) {\n    var touches = Array.prototype.slice.call(inEvent.changedTouches);\n    var count = touches.length;\n    function preventDefault() {\n      inEvent.preventDefault();\n    }\n    for (var i = 0; i < count; ++i) {\n      var pointer = this.touchToPointer_(inEvent, touches[i]);\n      // forward touch preventDefaults\n      pointer.preventDefault = preventDefault;\n      inFunction.call(this, inEvent, pointer);\n    }\n  };\n\n  /**\n   * @private\n   * @param {TouchList} touchList The touch list.\n   * @param {number} searchId Search identifier.\n   * @return {boolean} True, if the `Touch` with the given id is in the list.\n   */\n  TouchSource.prototype.findTouch_ = function findTouch_ (touchList, searchId) {\n    var l = touchList.length;\n    for (var i = 0; i < l; i++) {\n      var touch = touchList[i];\n      if (touch.identifier === searchId) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  /**\n   * In some instances, a touchstart can happen without a touchend. This\n   * leaves the pointermap in a broken state.\n   * Therefore, on every touchstart, we remove the touches that did not fire a\n   * touchend event.\n   * To keep state globally consistent, we fire a pointercancel for\n   * this \"abandoned\" touch\n   *\n   * @private\n   * @param {TouchEvent} inEvent The in event.\n   */\n  TouchSource.prototype.vacuumTouches_ = function vacuumTouches_ (inEvent) {\n    var touchList = inEvent.touches;\n    // pointerMap.getCount() should be < touchList.length here,\n    // as the touchstart has not been processed yet.\n    var keys = Object.keys(this.pointerMap);\n    var count = keys.length;\n    if (count >= touchList.length) {\n      var d = [];\n      for (var i = 0; i < count; ++i) {\n        var key = Number(keys[i]);\n        var value = this.pointerMap[key];\n        // Never remove pointerId == 1, which is mouse.\n        // Touch identifiers are 2 smaller than their pointerId, which is the\n        // index in pointermap.\n        if (key != POINTER_ID && !this.findTouch_(touchList, key - 2)) {\n          d.push(value.out);\n        }\n      }\n      for (var i$1 = 0; i$1 < d.length; ++i$1) {\n        this.cancelOut_(inEvent, d[i$1]);\n      }\n    }\n  };\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent The event.\n   * @param {PointerEvent} inPointer The in pointer object.\n   */\n  TouchSource.prototype.overDown_ = function overDown_ (browserEvent, inPointer) {\n    this.pointerMap[inPointer.pointerId] = {\n      target: inPointer.target,\n      out: inPointer,\n      outTarget: inPointer.target\n    };\n    this.dispatcher.over(inPointer, browserEvent);\n    this.dispatcher.enter(inPointer, browserEvent);\n    this.dispatcher.down(inPointer, browserEvent);\n  };\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent The event.\n   * @param {PointerEvent} inPointer The in pointer.\n   */\n  TouchSource.prototype.moveOverOut_ = function moveOverOut_ (browserEvent, inPointer) {\n    var event = inPointer;\n    var pointer = this.pointerMap[event.pointerId];\n    // a finger drifted off the screen, ignore it\n    if (!pointer) {\n      return;\n    }\n    var outEvent = pointer.out;\n    var outTarget = pointer.outTarget;\n    this.dispatcher.move(event, browserEvent);\n    if (outEvent && outTarget !== event.target) {\n      outEvent.relatedTarget = event.target;\n      /** @type {Object} */ (event).relatedTarget = outTarget;\n      // recover from retargeting by shadow\n      outEvent.target = outTarget;\n      if (event.target) {\n        this.dispatcher.leaveOut(outEvent, browserEvent);\n        this.dispatcher.enterOver(event, browserEvent);\n      } else {\n        // clean up case when finger leaves the screen\n        /** @type {Object} */ (event).target = outTarget;\n        /** @type {Object} */ (event).relatedTarget = null;\n        this.cancelOut_(browserEvent, event);\n      }\n    }\n    pointer.out = event;\n    pointer.outTarget = event.target;\n  };\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent An event.\n   * @param {PointerEvent} inPointer The inPointer object.\n   */\n  TouchSource.prototype.upOut_ = function upOut_ (browserEvent, inPointer) {\n    this.dispatcher.up(inPointer, browserEvent);\n    this.dispatcher.out(inPointer, browserEvent);\n    this.dispatcher.leave(inPointer, browserEvent);\n    this.cleanUpPointer_(inPointer);\n  };\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent The event.\n   * @param {PointerEvent} inPointer The in pointer.\n   */\n  TouchSource.prototype.cancelOut_ = function cancelOut_ (browserEvent, inPointer) {\n    this.dispatcher.cancel(inPointer, browserEvent);\n    this.dispatcher.out(inPointer, browserEvent);\n    this.dispatcher.leave(inPointer, browserEvent);\n    this.cleanUpPointer_(inPointer);\n  };\n\n  /**\n   * @private\n   * @param {PointerEvent} inPointer The inPointer object.\n   */\n  TouchSource.prototype.cleanUpPointer_ = function cleanUpPointer_ (inPointer) {\n    delete this.pointerMap[inPointer.pointerId];\n    this.removePrimaryPointer_(inPointer);\n  };\n\n  /**\n   * Prevent synth mouse events from creating pointer events.\n   *\n   * @private\n   * @param {TouchEvent} inEvent The in event.\n   */\n  TouchSource.prototype.dedupSynthMouse_ = function dedupSynthMouse_ (inEvent) {\n    var lts = this.mouseSource.lastTouches;\n    var t = inEvent.changedTouches[0];\n    // only the primary finger will synth mouse events\n    if (this.isPrimaryTouch_(t)) {\n      // remember x/y of last touch\n      var lt = [t.clientX, t.clientY];\n      lts.push(lt);\n\n      setTimeout(function() {\n        // remove touch after timeout\n        remove(lts, lt);\n      }, this.dedupTimeout_);\n    }\n  };\n\n  return TouchSource;\n}(EventSource));\n\nexport default TouchSource;\n\n//# sourceMappingURL=TouchSource.js.map","/**\n * @module ol/pointer/PointerEventHandler\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport {listen, unlisten} from '../events.js';\nimport EventTarget from '../events/Target.js';\nimport {POINTER, MSPOINTER, TOUCH} from '../has.js';\nimport PointerEventType from './EventType.js';\nimport MouseSource, {prepareEvent as prepareMouseEvent} from './MouseSource.js';\nimport MsSource from './MsSource.js';\nimport NativeSource from './NativeSource.js';\nimport PointerEvent from './PointerEvent.js';\nimport TouchSource from './TouchSource.js';\n\n\n/**\n * Properties to copy when cloning an event, with default values.\n * @type {Array<Array>}\n */\nvar CLONE_PROPS = [\n  // MouseEvent\n  ['bubbles', false],\n  ['cancelable', false],\n  ['view', null],\n  ['detail', null],\n  ['screenX', 0],\n  ['screenY', 0],\n  ['clientX', 0],\n  ['clientY', 0],\n  ['ctrlKey', false],\n  ['altKey', false],\n  ['shiftKey', false],\n  ['metaKey', false],\n  ['button', 0],\n  ['relatedTarget', null],\n  // DOM Level 3\n  ['buttons', 0],\n  // PointerEvent\n  ['pointerId', 0],\n  ['width', 0],\n  ['height', 0],\n  ['pressure', 0],\n  ['tiltX', 0],\n  ['tiltY', 0],\n  ['pointerType', ''],\n  ['hwTimestamp', 0],\n  ['isPrimary', false],\n  // event instance\n  ['type', ''],\n  ['target', null],\n  ['currentTarget', null],\n  ['which', 0]\n];\n\n\nvar PointerEventHandler = /*@__PURE__*/(function (EventTarget) {\n  function PointerEventHandler(element) {\n    EventTarget.call(this);\n\n    /**\n     * @const\n     * @private\n     * @type {Element|HTMLDocument}\n     */\n    this.element_ = element;\n\n    /**\n     * @const\n     * @type {!Object<string, Event|Object>}\n     */\n    this.pointerMap = {};\n\n    /**\n     * @type {Object<string, function(Event)>}\n     * @private\n     */\n    this.eventMap_ = {};\n\n    /**\n     * @type {Array<import(\"./EventSource.js\").default>}\n     * @private\n     */\n    this.eventSourceList_ = [];\n\n    this.registerSources();\n  }\n\n  if ( EventTarget ) PointerEventHandler.__proto__ = EventTarget;\n  PointerEventHandler.prototype = Object.create( EventTarget && EventTarget.prototype );\n  PointerEventHandler.prototype.constructor = PointerEventHandler;\n\n  /**\n   * Set up the event sources (mouse, touch and native pointers)\n   * that generate pointer events.\n   */\n  PointerEventHandler.prototype.registerSources = function registerSources () {\n    if (POINTER) {\n      this.registerSource('native', new NativeSource(this));\n    } else if (MSPOINTER) {\n      this.registerSource('ms', new MsSource(this));\n    } else {\n      var mouseSource = new MouseSource(this);\n      this.registerSource('mouse', mouseSource);\n\n      if (TOUCH) {\n        this.registerSource('touch', new TouchSource(this, mouseSource));\n      }\n    }\n\n    // register events on the viewport element\n    this.register_();\n  };\n\n  /**\n   * Add a new event source that will generate pointer events.\n   *\n   * @param {string} name A name for the event source\n   * @param {import(\"./EventSource.js\").default} source The source event.\n   */\n  PointerEventHandler.prototype.registerSource = function registerSource (name, source) {\n    var s = source;\n    var newEvents = s.getEvents();\n\n    if (newEvents) {\n      newEvents.forEach(function(e) {\n        var handler = s.getHandlerForEvent(e);\n\n        if (handler) {\n          this.eventMap_[e] = handler.bind(s);\n        }\n      }.bind(this));\n      this.eventSourceList_.push(s);\n    }\n  };\n\n  /**\n   * Set up the events for all registered event sources.\n   * @private\n   */\n  PointerEventHandler.prototype.register_ = function register_ () {\n    var l = this.eventSourceList_.length;\n    for (var i = 0; i < l; i++) {\n      var eventSource = this.eventSourceList_[i];\n      this.addEvents_(eventSource.getEvents());\n    }\n  };\n\n  /**\n   * Remove all registered events.\n   * @private\n   */\n  PointerEventHandler.prototype.unregister_ = function unregister_ () {\n    var l = this.eventSourceList_.length;\n    for (var i = 0; i < l; i++) {\n      var eventSource = this.eventSourceList_[i];\n      this.removeEvents_(eventSource.getEvents());\n    }\n  };\n\n  /**\n   * Calls the right handler for a new event.\n   * @private\n   * @param {Event} inEvent Browser event.\n   */\n  PointerEventHandler.prototype.eventHandler_ = function eventHandler_ (inEvent) {\n    var type = inEvent.type;\n    var handler = this.eventMap_[type];\n    if (handler) {\n      handler(inEvent);\n    }\n  };\n\n  /**\n   * Setup listeners for the given events.\n   * @private\n   * @param {Array<string>} events List of events.\n   */\n  PointerEventHandler.prototype.addEvents_ = function addEvents_ (events) {\n    events.forEach(function(eventName) {\n      listen(this.element_, eventName, this.eventHandler_, this);\n    }.bind(this));\n  };\n\n  /**\n   * Unregister listeners for the given events.\n   * @private\n   * @param {Array<string>} events List of events.\n   */\n  PointerEventHandler.prototype.removeEvents_ = function removeEvents_ (events) {\n    events.forEach(function(e) {\n      unlisten(this.element_, e, this.eventHandler_, this);\n    }.bind(this));\n  };\n\n  /**\n   * Returns a snapshot of inEvent, with writable properties.\n   *\n   * @param {Event} event Browser event.\n   * @param {Event|Touch} inEvent An event that contains\n   *    properties to copy.\n   * @return {Object} An object containing shallow copies of\n   *    `inEvent`'s properties.\n   */\n  PointerEventHandler.prototype.cloneEvent = function cloneEvent (event, inEvent) {\n    var eventCopy = {};\n    for (var i = 0, ii = CLONE_PROPS.length; i < ii; i++) {\n      var p = CLONE_PROPS[i][0];\n      eventCopy[p] = event[p] || inEvent[p] || CLONE_PROPS[i][1];\n    }\n\n    return eventCopy;\n  };\n\n  // EVENTS\n\n\n  /**\n   * Triggers a 'pointerdown' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  PointerEventHandler.prototype.down = function down (data, event) {\n    this.fireEvent(PointerEventType.POINTERDOWN, data, event);\n  };\n\n  /**\n   * Triggers a 'pointermove' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  PointerEventHandler.prototype.move = function move (data, event) {\n    this.fireEvent(PointerEventType.POINTERMOVE, data, event);\n  };\n\n  /**\n   * Triggers a 'pointerup' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  PointerEventHandler.prototype.up = function up (data, event) {\n    this.fireEvent(PointerEventType.POINTERUP, data, event);\n  };\n\n  /**\n   * Triggers a 'pointerenter' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  PointerEventHandler.prototype.enter = function enter (data, event) {\n    data.bubbles = false;\n    this.fireEvent(PointerEventType.POINTERENTER, data, event);\n  };\n\n  /**\n   * Triggers a 'pointerleave' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  PointerEventHandler.prototype.leave = function leave (data, event) {\n    data.bubbles = false;\n    this.fireEvent(PointerEventType.POINTERLEAVE, data, event);\n  };\n\n  /**\n   * Triggers a 'pointerover' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  PointerEventHandler.prototype.over = function over (data, event) {\n    data.bubbles = true;\n    this.fireEvent(PointerEventType.POINTEROVER, data, event);\n  };\n\n  /**\n   * Triggers a 'pointerout' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  PointerEventHandler.prototype.out = function out (data, event) {\n    data.bubbles = true;\n    this.fireEvent(PointerEventType.POINTEROUT, data, event);\n  };\n\n  /**\n   * Triggers a 'pointercancel' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  PointerEventHandler.prototype.cancel = function cancel (data, event) {\n    this.fireEvent(PointerEventType.POINTERCANCEL, data, event);\n  };\n\n  /**\n   * Triggers a combination of 'pointerout' and 'pointerleave' events.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  PointerEventHandler.prototype.leaveOut = function leaveOut (data, event) {\n    this.out(data, event);\n    if (!this.contains_(data.target, data.relatedTarget)) {\n      this.leave(data, event);\n    }\n  };\n\n  /**\n   * Triggers a combination of 'pointerover' and 'pointerevents' events.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  PointerEventHandler.prototype.enterOver = function enterOver (data, event) {\n    this.over(data, event);\n    if (!this.contains_(data.target, data.relatedTarget)) {\n      this.enter(data, event);\n    }\n  };\n\n  /**\n   * @private\n   * @param {Element} container The container element.\n   * @param {Element} contained The contained element.\n   * @return {boolean} Returns true if the container element\n   *   contains the other element.\n   */\n  PointerEventHandler.prototype.contains_ = function contains_ (container, contained) {\n    if (!container || !contained) {\n      return false;\n    }\n    return container.contains(contained);\n  };\n\n  // EVENT CREATION AND TRACKING\n  /**\n   * Creates a new Event of type `inType`, based on the information in\n   * `data`.\n   *\n   * @param {string} inType A string representing the type of event to create.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   * @return {PointerEvent} A PointerEvent of type `inType`.\n   */\n  PointerEventHandler.prototype.makeEvent = function makeEvent (inType, data, event) {\n    return new PointerEvent(inType, event, data);\n  };\n\n  /**\n   * Make and dispatch an event in one call.\n   * @param {string} inType A string representing the type of event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  PointerEventHandler.prototype.fireEvent = function fireEvent (inType, data, event) {\n    var e = this.makeEvent(inType, data, event);\n    this.dispatchEvent(e);\n  };\n\n  /**\n   * Creates a pointer event from a native pointer event\n   * and dispatches this event.\n   * @param {Event} event A platform event with a target.\n   */\n  PointerEventHandler.prototype.fireNativeEvent = function fireNativeEvent (event) {\n    var e = this.makeEvent(event.type, event, event);\n    this.dispatchEvent(e);\n  };\n\n  /**\n   * Wrap a native mouse event into a pointer event.\n   * This proxy method is required for the legacy IE support.\n   * @param {string} eventType The pointer event type.\n   * @param {Event} event The event.\n   * @return {PointerEvent} The wrapped event.\n   */\n  PointerEventHandler.prototype.wrapMouseEvent = function wrapMouseEvent (eventType, event) {\n    var pointerEvent = this.makeEvent(\n      eventType, prepareMouseEvent(event, this), event);\n    return pointerEvent;\n  };\n\n  /**\n   * @inheritDoc\n   */\n  PointerEventHandler.prototype.disposeInternal = function disposeInternal () {\n    this.unregister_();\n    EventTarget.prototype.disposeInternal.call(this);\n  };\n\n  return PointerEventHandler;\n}(EventTarget));\n\nexport default PointerEventHandler;\n\n//# sourceMappingURL=PointerEventHandler.js.map","/**\n * @module ol/layer/Image\n */\nimport LayerType from '../LayerType.js';\nimport Layer from './Layer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {import(\"../source/Image.js\").default} [source] Source for this layer.\n */\n\n\n/**\n * @classdesc\n * Server-rendered images that are available for arbitrary extents and\n * resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @fires import(\"../render/Event.js\").RenderEvent\n * @api\n */\nvar ImageLayer = /*@__PURE__*/(function (Layer) {\n  function ImageLayer(opt_options) {\n    var options = opt_options ? opt_options : {};\n    Layer.call(this, options);\n\n    /**\n     * The layer type.\n     * @protected\n     * @type {import(\"../LayerType.js\").default}\n     */\n    this.type = LayerType.IMAGE;\n\n  }\n\n  if ( Layer ) ImageLayer.__proto__ = Layer;\n  ImageLayer.prototype = Object.create( Layer && Layer.prototype );\n  ImageLayer.prototype.constructor = ImageLayer;\n\n  return ImageLayer;\n}(Layer));\n\n\n/**\n * Return the associated {@link module:ol/source/Image source} of the image layer.\n * @function\n * @return {import(\"../source/Image.js\").default} Source.\n * @api\n */\nImageLayer.prototype.getSource;\nexport default ImageLayer;\n\n//# sourceMappingURL=Image.js.map","/**\n * @module ol/render/canvas/Immediate\n */\n// FIXME test, especially polygons with holes and multipolygons\n// FIXME need to handle large thick features (where pixel size matters)\n// FIXME add offset and end to ol/geom/flat/transform~transform2D?\n\nimport {equals} from '../../array.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {intersects} from '../../extent.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {transformGeom2D} from '../../geom/SimpleGeometry.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {CANVAS_LINE_DASH} from '../../has.js';\nimport VectorContext from '../VectorContext.js';\nimport {defaultTextAlign, defaultFillStyle, defaultLineCap, defaultLineDash, defaultLineDashOffset, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline, defaultFont} from '../canvas.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n/**\n * @classdesc\n * A concrete subclass of {@link module:ol/render/VectorContext} that implements\n * direct rendering of features and geometries to an HTML5 Canvas context.\n * Instances of this class are created internally by the library and\n * provided to application code as vectorContext member of the\n * {@link module:ol/render/Event~RenderEvent} object associated with postcompose, precompose and\n * render events emitted by layers and maps.\n */\nvar CanvasImmediateRenderer = /*@__PURE__*/(function (VectorContext) {\n  function CanvasImmediateRenderer(context, pixelRatio, extent, transform, viewRotation) {\n    VectorContext.call(this);\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context_ = context;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.extent_ = extent;\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.transform_ = transform;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.viewRotation_ = viewRotation;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.contextFillState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.contextStrokeState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").TextState}\n     */\n    this.contextTextState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.fillState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.strokeState_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageAnchorX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageAnchorY_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageHeight_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOpacity_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOriginX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOriginY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.imageRotateWithView_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageRotation_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageScale_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageWidth_ = 0;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.text_ = '';\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.textRotateWithView_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textRotation_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textScale_ = 0;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.textFillState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.textStrokeState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").TextState}\n     */\n    this.textState_ = null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.pixelCoordinates_ = [];\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.tmpLocalTransform_ = createTransform();\n\n  }\n\n  if ( VectorContext ) CanvasImmediateRenderer.__proto__ = VectorContext;\n  CanvasImmediateRenderer.prototype = Object.create( VectorContext && VectorContext.prototype );\n  CanvasImmediateRenderer.prototype.constructor = CanvasImmediateRenderer;\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   */\n  CanvasImmediateRenderer.prototype.drawImages_ = function drawImages_ (flatCoordinates, offset, end, stride) {\n    if (!this.image_) {\n      return;\n    }\n    var pixelCoordinates = transform2D(\n      flatCoordinates, offset, end, 2, this.transform_,\n      this.pixelCoordinates_);\n    var context = this.context_;\n    var localTransform = this.tmpLocalTransform_;\n    var alpha = context.globalAlpha;\n    if (this.imageOpacity_ != 1) {\n      context.globalAlpha = alpha * this.imageOpacity_;\n    }\n    var rotation = this.imageRotation_;\n    if (this.imageRotateWithView_) {\n      rotation += this.viewRotation_;\n    }\n    for (var i = 0, ii = pixelCoordinates.length; i < ii; i += 2) {\n      var x = pixelCoordinates[i] - this.imageAnchorX_;\n      var y = pixelCoordinates[i + 1] - this.imageAnchorY_;\n      if (rotation !== 0 || this.imageScale_ != 1) {\n        var centerX = x + this.imageAnchorX_;\n        var centerY = y + this.imageAnchorY_;\n        composeTransform(localTransform,\n          centerX, centerY,\n          this.imageScale_, this.imageScale_,\n          rotation,\n          -centerX, -centerY);\n        context.setTransform.apply(context, localTransform);\n      }\n      context.drawImage(this.image_, this.imageOriginX_, this.imageOriginY_,\n        this.imageWidth_, this.imageHeight_, x, y,\n        this.imageWidth_, this.imageHeight_);\n    }\n    if (rotation !== 0 || this.imageScale_ != 1) {\n      context.setTransform(1, 0, 0, 1, 0, 0);\n    }\n    if (this.imageOpacity_ != 1) {\n      context.globalAlpha = alpha;\n    }\n  };\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   */\n  CanvasImmediateRenderer.prototype.drawText_ = function drawText_ (flatCoordinates, offset, end, stride) {\n    if (!this.textState_ || this.text_ === '') {\n      return;\n    }\n    if (this.textFillState_) {\n      this.setContextFillState_(this.textFillState_);\n    }\n    if (this.textStrokeState_) {\n      this.setContextStrokeState_(this.textStrokeState_);\n    }\n    this.setContextTextState_(this.textState_);\n    var pixelCoordinates = transform2D(\n      flatCoordinates, offset, end, stride, this.transform_,\n      this.pixelCoordinates_);\n    var context = this.context_;\n    var rotation = this.textRotation_;\n    if (this.textRotateWithView_) {\n      rotation += this.viewRotation_;\n    }\n    for (; offset < end; offset += stride) {\n      var x = pixelCoordinates[offset] + this.textOffsetX_;\n      var y = pixelCoordinates[offset + 1] + this.textOffsetY_;\n      if (rotation !== 0 || this.textScale_ != 1) {\n        var localTransform = composeTransform(this.tmpLocalTransform_,\n          x, y,\n          this.textScale_, this.textScale_,\n          rotation,\n          -x, -y);\n        context.setTransform.apply(context, localTransform);\n      }\n      if (this.textStrokeState_) {\n        context.strokeText(this.text_, x, y);\n      }\n      if (this.textFillState_) {\n        context.fillText(this.text_, x, y);\n      }\n    }\n    if (rotation !== 0 || this.textScale_ != 1) {\n      context.setTransform(1, 0, 0, 1, 0, 0);\n    }\n  };\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @param {boolean} close Close.\n   * @private\n   * @return {number} end End.\n   */\n  CanvasImmediateRenderer.prototype.moveToLineTo_ = function moveToLineTo_ (flatCoordinates, offset, end, stride, close) {\n    var context = this.context_;\n    var pixelCoordinates = transform2D(\n      flatCoordinates, offset, end, stride, this.transform_,\n      this.pixelCoordinates_);\n    context.moveTo(pixelCoordinates[0], pixelCoordinates[1]);\n    var length = pixelCoordinates.length;\n    if (close) {\n      length -= 2;\n    }\n    for (var i = 2; i < length; i += 2) {\n      context.lineTo(pixelCoordinates[i], pixelCoordinates[i + 1]);\n    }\n    if (close) {\n      context.closePath();\n    }\n    return end;\n  };\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} End.\n   */\n  CanvasImmediateRenderer.prototype.drawRings_ = function drawRings_ (flatCoordinates, offset, ends, stride) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, true);\n    }\n    return offset;\n  };\n\n  /**\n   * Render a circle geometry into the canvas.  Rendering is immediate and uses\n   * the current fill and stroke styles.\n   *\n   * @param {import(\"../../geom/Circle.js\").default} geometry Circle geometry.\n   * @override\n   * @api\n   */\n  CanvasImmediateRenderer.prototype.drawCircle = function drawCircle (geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.fillState_ || this.strokeState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      var pixelCoordinates = transformGeom2D(\n        geometry, this.transform_, this.pixelCoordinates_);\n      var dx = pixelCoordinates[2] - pixelCoordinates[0];\n      var dy = pixelCoordinates[3] - pixelCoordinates[1];\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      var context = this.context_;\n      context.beginPath();\n      context.arc(\n        pixelCoordinates[0], pixelCoordinates[1], radius, 0, 2 * Math.PI);\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      this.drawText_(geometry.getCenter(), 0, 2, 2);\n    }\n  };\n\n  /**\n   * Set the rendering style.  Note that since this is an immediate rendering API,\n   * any `zIndex` on the provided style will be ignored.\n   *\n   * @param {import(\"../../style/Style.js\").default} style The rendering style.\n   * @override\n   * @api\n   */\n  CanvasImmediateRenderer.prototype.setStyle = function setStyle (style) {\n    this.setFillStrokeStyle(style.getFill(), style.getStroke());\n    this.setImageStyle(style.getImage());\n    this.setTextStyle(style.getText());\n  };\n\n  /**\n   * Render a geometry into the canvas.  Call\n   * {@link module:ol/render/canvas/Immediate#setStyle} first to set the rendering style.\n   *\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry The geometry to render.\n   * @override\n   * @api\n   */\n  CanvasImmediateRenderer.prototype.drawGeometry = function drawGeometry (geometry) {\n    var type = geometry.getType();\n    switch (type) {\n      case GeometryType.POINT:\n        this.drawPoint(/** @type {import(\"../../geom/Point.js\").default} */ (geometry));\n        break;\n      case GeometryType.LINE_STRING:\n        this.drawLineString(/** @type {import(\"../../geom/LineString.js\").default} */ (geometry));\n        break;\n      case GeometryType.POLYGON:\n        this.drawPolygon(/** @type {import(\"../../geom/Polygon.js\").default} */ (geometry));\n        break;\n      case GeometryType.MULTI_POINT:\n        this.drawMultiPoint(/** @type {import(\"../../geom/MultiPoint.js\").default} */ (geometry));\n        break;\n      case GeometryType.MULTI_LINE_STRING:\n        this.drawMultiLineString(/** @type {import(\"../../geom/MultiLineString.js\").default} */ (geometry));\n        break;\n      case GeometryType.MULTI_POLYGON:\n        this.drawMultiPolygon(/** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry));\n        break;\n      case GeometryType.GEOMETRY_COLLECTION:\n        this.drawGeometryCollection(/** @type {import(\"../../geom/GeometryCollection.js\").default} */ (geometry));\n        break;\n      case GeometryType.CIRCLE:\n        this.drawCircle(/** @type {import(\"../../geom/Circle.js\").default} */ (geometry));\n        break;\n      default:\n    }\n  };\n\n  /**\n   * Render a feature into the canvas.  Note that any `zIndex` on the provided\n   * style will be ignored - features are rendered immediately in the order that\n   * this method is called.  If you need `zIndex` support, you should be using an\n   * {@link module:ol/layer/Vector~VectorLayer} instead.\n   *\n   * @param {import(\"../../Feature.js\").default} feature Feature.\n   * @param {import(\"../../style/Style.js\").default} style Style.\n   * @override\n   * @api\n   */\n  CanvasImmediateRenderer.prototype.drawFeature = function drawFeature (feature, style) {\n    var geometry = style.getGeometryFunction()(feature);\n    if (!geometry || !intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    this.setStyle(style);\n    this.drawGeometry(geometry);\n  };\n\n  /**\n   * Render a GeometryCollection to the canvas.  Rendering is immediate and\n   * uses the current styles appropriate for each geometry in the collection.\n   *\n   * @param {import(\"../../geom/GeometryCollection.js\").default} geometry Geometry collection.\n   * @override\n   */\n  CanvasImmediateRenderer.prototype.drawGeometryCollection = function drawGeometryCollection (geometry) {\n    var geometries = geometry.getGeometriesArray();\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      this.drawGeometry(geometries[i]);\n    }\n  };\n\n  /**\n   * Render a Point geometry into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/Point.js\").default|import(\"../Feature.js\").default} geometry Point geometry.\n   * @override\n   */\n  CanvasImmediateRenderer.prototype.drawPoint = function drawPoint (geometry) {\n    var flatCoordinates = geometry.getFlatCoordinates();\n    var stride = geometry.getStride();\n    if (this.image_) {\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n    if (this.text_ !== '') {\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n  };\n\n  /**\n   * Render a MultiPoint geometry  into the canvas.  Rendering is immediate and\n   * uses the current style.\n   *\n   * @param {import(\"../../geom/MultiPoint.js\").default|import(\"../Feature.js\").default} geometry MultiPoint geometry.\n   * @override\n   */\n  CanvasImmediateRenderer.prototype.drawMultiPoint = function drawMultiPoint (geometry) {\n    var flatCoordinates = geometry.getFlatCoordinates();\n    var stride = geometry.getStride();\n    if (this.image_) {\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n    if (this.text_ !== '') {\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n  };\n\n  /**\n   * Render a LineString into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/LineString.js\").default|import(\"../Feature.js\").default} geometry LineString geometry.\n   * @override\n   */\n  CanvasImmediateRenderer.prototype.drawLineString = function drawLineString (geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n      var context = this.context_;\n      var flatCoordinates = geometry.getFlatCoordinates();\n      context.beginPath();\n      this.moveToLineTo_(flatCoordinates, 0, flatCoordinates.length,\n        geometry.getStride(), false);\n      context.stroke();\n    }\n    if (this.text_ !== '') {\n      var flatMidpoint = geometry.getFlatMidpoint();\n      this.drawText_(flatMidpoint, 0, 2, 2);\n    }\n  };\n\n  /**\n   * Render a MultiLineString geometry into the canvas.  Rendering is immediate\n   * and uses the current style.\n   *\n   * @param {import(\"../../geom/MultiLineString.js\").default|import(\"../Feature.js\").default} geometry MultiLineString geometry.\n   * @override\n   */\n  CanvasImmediateRenderer.prototype.drawMultiLineString = function drawMultiLineString (geometry) {\n    var geometryExtent = geometry.getExtent();\n    if (!intersects(this.extent_, geometryExtent)) {\n      return;\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n      var context = this.context_;\n      var flatCoordinates = geometry.getFlatCoordinates();\n      var offset = 0;\n      var ends = /** @type {Array<number>} */ (geometry.getEnds());\n      var stride = geometry.getStride();\n      context.beginPath();\n      for (var i = 0, ii = ends.length; i < ii; ++i) {\n        offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, false);\n      }\n      context.stroke();\n    }\n    if (this.text_ !== '') {\n      var flatMidpoints = geometry.getFlatMidpoints();\n      this.drawText_(flatMidpoints, 0, flatMidpoints.length, 2);\n    }\n  };\n\n  /**\n   * Render a Polygon geometry into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/Polygon.js\").default|import(\"../Feature.js\").default} geometry Polygon geometry.\n   * @override\n   */\n  CanvasImmediateRenderer.prototype.drawPolygon = function drawPolygon (geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_ || this.fillState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      var context = this.context_;\n      context.beginPath();\n      this.drawRings_(geometry.getOrientedFlatCoordinates(),\n        0, /** @type {Array<number>} */ (geometry.getEnds()), geometry.getStride());\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      var flatInteriorPoint = geometry.getFlatInteriorPoint();\n      this.drawText_(flatInteriorPoint, 0, 2, 2);\n    }\n  };\n\n  /**\n   * Render MultiPolygon geometry into the canvas.  Rendering is immediate and\n   * uses the current style.\n   * @param {import(\"../../geom/MultiPolygon.js\").default} geometry MultiPolygon geometry.\n   * @override\n   */\n  CanvasImmediateRenderer.prototype.drawMultiPolygon = function drawMultiPolygon (geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_ || this.fillState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      var context = this.context_;\n      var flatCoordinates = geometry.getOrientedFlatCoordinates();\n      var offset = 0;\n      var endss = geometry.getEndss();\n      var stride = geometry.getStride();\n      context.beginPath();\n      for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        offset = this.drawRings_(flatCoordinates, offset, ends, stride);\n      }\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      var flatInteriorPoints = geometry.getFlatInteriorPoints();\n      this.drawText_(flatInteriorPoints, 0, flatInteriorPoints.length, 2);\n    }\n  };\n\n  /**\n   * @param {import(\"../canvas.js\").FillState} fillState Fill state.\n   * @private\n   */\n  CanvasImmediateRenderer.prototype.setContextFillState_ = function setContextFillState_ (fillState) {\n    var context = this.context_;\n    var contextFillState = this.contextFillState_;\n    if (!contextFillState) {\n      context.fillStyle = fillState.fillStyle;\n      this.contextFillState_ = {\n        fillStyle: fillState.fillStyle\n      };\n    } else {\n      if (contextFillState.fillStyle != fillState.fillStyle) {\n        contextFillState.fillStyle = context.fillStyle = fillState.fillStyle;\n      }\n    }\n  };\n\n  /**\n   * @param {import(\"../canvas.js\").StrokeState} strokeState Stroke state.\n   * @private\n   */\n  CanvasImmediateRenderer.prototype.setContextStrokeState_ = function setContextStrokeState_ (strokeState) {\n    var context = this.context_;\n    var contextStrokeState = this.contextStrokeState_;\n    if (!contextStrokeState) {\n      context.lineCap = /** @type {CanvasLineCap} */ (strokeState.lineCap);\n      if (CANVAS_LINE_DASH) {\n        context.setLineDash(strokeState.lineDash);\n        context.lineDashOffset = strokeState.lineDashOffset;\n      }\n      context.lineJoin = /** @type {CanvasLineJoin} */ (strokeState.lineJoin);\n      context.lineWidth = strokeState.lineWidth;\n      context.miterLimit = strokeState.miterLimit;\n      context.strokeStyle = strokeState.strokeStyle;\n      this.contextStrokeState_ = {\n        lineCap: strokeState.lineCap,\n        lineDash: strokeState.lineDash,\n        lineDashOffset: strokeState.lineDashOffset,\n        lineJoin: strokeState.lineJoin,\n        lineWidth: strokeState.lineWidth,\n        miterLimit: strokeState.miterLimit,\n        strokeStyle: strokeState.strokeStyle\n      };\n    } else {\n      if (contextStrokeState.lineCap != strokeState.lineCap) {\n        contextStrokeState.lineCap = context.lineCap = /** @type {CanvasLineCap} */ (strokeState.lineCap);\n      }\n      if (CANVAS_LINE_DASH) {\n        if (!equals(contextStrokeState.lineDash, strokeState.lineDash)) {\n          context.setLineDash(contextStrokeState.lineDash = strokeState.lineDash);\n        }\n        if (contextStrokeState.lineDashOffset != strokeState.lineDashOffset) {\n          contextStrokeState.lineDashOffset = context.lineDashOffset =\n              strokeState.lineDashOffset;\n        }\n      }\n      if (contextStrokeState.lineJoin != strokeState.lineJoin) {\n        contextStrokeState.lineJoin = context.lineJoin = /** @type {CanvasLineJoin} */ (strokeState.lineJoin);\n      }\n      if (contextStrokeState.lineWidth != strokeState.lineWidth) {\n        contextStrokeState.lineWidth = context.lineWidth = strokeState.lineWidth;\n      }\n      if (contextStrokeState.miterLimit != strokeState.miterLimit) {\n        contextStrokeState.miterLimit = context.miterLimit =\n            strokeState.miterLimit;\n      }\n      if (contextStrokeState.strokeStyle != strokeState.strokeStyle) {\n        contextStrokeState.strokeStyle = context.strokeStyle =\n            strokeState.strokeStyle;\n      }\n    }\n  };\n\n  /**\n   * @param {import(\"../canvas.js\").TextState} textState Text state.\n   * @private\n   */\n  CanvasImmediateRenderer.prototype.setContextTextState_ = function setContextTextState_ (textState) {\n    var context = this.context_;\n    var contextTextState = this.contextTextState_;\n    var textAlign = textState.textAlign ?\n      textState.textAlign : defaultTextAlign;\n    if (!contextTextState) {\n      context.font = textState.font;\n      context.textAlign = /** @type {CanvasTextAlign} */ (textAlign);\n      context.textBaseline = /** @type {CanvasTextBaseline} */ (textState.textBaseline);\n      this.contextTextState_ = {\n        font: textState.font,\n        textAlign: textAlign,\n        textBaseline: textState.textBaseline\n      };\n    } else {\n      if (contextTextState.font != textState.font) {\n        contextTextState.font = context.font = textState.font;\n      }\n      if (contextTextState.textAlign != textAlign) {\n        contextTextState.textAlign = context.textAlign = /** @type {CanvasTextAlign} */ (textAlign);\n      }\n      if (contextTextState.textBaseline != textState.textBaseline) {\n        contextTextState.textBaseline = context.textBaseline =\n          /** @type {CanvasTextBaseline} */ (textState.textBaseline);\n      }\n    }\n  };\n\n  /**\n   * Set the fill and stroke style for subsequent draw operations.  To clear\n   * either fill or stroke styles, pass null for the appropriate parameter.\n   *\n   * @param {import(\"../../style/Fill.js\").default} fillStyle Fill style.\n   * @param {import(\"../../style/Stroke.js\").default} strokeStyle Stroke style.\n   * @override\n   */\n  CanvasImmediateRenderer.prototype.setFillStrokeStyle = function setFillStrokeStyle (fillStyle, strokeStyle) {\n    if (!fillStyle) {\n      this.fillState_ = null;\n    } else {\n      var fillStyleColor = fillStyle.getColor();\n      this.fillState_ = {\n        fillStyle: asColorLike(fillStyleColor ?\n          fillStyleColor : defaultFillStyle)\n      };\n    }\n    if (!strokeStyle) {\n      this.strokeState_ = null;\n    } else {\n      var strokeStyleColor = strokeStyle.getColor();\n      var strokeStyleLineCap = strokeStyle.getLineCap();\n      var strokeStyleLineDash = strokeStyle.getLineDash();\n      var strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n      var strokeStyleLineJoin = strokeStyle.getLineJoin();\n      var strokeStyleWidth = strokeStyle.getWidth();\n      var strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n      this.strokeState_ = {\n        lineCap: strokeStyleLineCap !== undefined ?\n          strokeStyleLineCap : defaultLineCap,\n        lineDash: strokeStyleLineDash ?\n          strokeStyleLineDash : defaultLineDash,\n        lineDashOffset: strokeStyleLineDashOffset ?\n          strokeStyleLineDashOffset : defaultLineDashOffset,\n        lineJoin: strokeStyleLineJoin !== undefined ?\n          strokeStyleLineJoin : defaultLineJoin,\n        lineWidth: this.pixelRatio_ * (strokeStyleWidth !== undefined ?\n          strokeStyleWidth : defaultLineWidth),\n        miterLimit: strokeStyleMiterLimit !== undefined ?\n          strokeStyleMiterLimit : defaultMiterLimit,\n        strokeStyle: asColorLike(strokeStyleColor ?\n          strokeStyleColor : defaultStrokeStyle)\n      };\n    }\n  };\n\n  /**\n   * Set the image style for subsequent draw operations.  Pass null to remove\n   * the image style.\n   *\n   * @param {import(\"../../style/Image.js\").default} imageStyle Image style.\n   * @override\n   */\n  CanvasImmediateRenderer.prototype.setImageStyle = function setImageStyle (imageStyle) {\n    if (!imageStyle) {\n      this.image_ = null;\n    } else {\n      var imageAnchor = imageStyle.getAnchor();\n      // FIXME pixel ratio\n      var imageImage = imageStyle.getImage(1);\n      var imageOrigin = imageStyle.getOrigin();\n      var imageSize = imageStyle.getSize();\n      this.imageAnchorX_ = imageAnchor[0];\n      this.imageAnchorY_ = imageAnchor[1];\n      this.imageHeight_ = imageSize[1];\n      this.image_ = imageImage;\n      this.imageOpacity_ = imageStyle.getOpacity();\n      this.imageOriginX_ = imageOrigin[0];\n      this.imageOriginY_ = imageOrigin[1];\n      this.imageRotateWithView_ = imageStyle.getRotateWithView();\n      this.imageRotation_ = imageStyle.getRotation();\n      this.imageScale_ = imageStyle.getScale() * this.pixelRatio_;\n      this.imageWidth_ = imageSize[0];\n    }\n  };\n\n  /**\n   * Set the text style for subsequent draw operations.  Pass null to\n   * remove the text style.\n   *\n   * @param {import(\"../../style/Text.js\").default} textStyle Text style.\n   * @override\n   */\n  CanvasImmediateRenderer.prototype.setTextStyle = function setTextStyle (textStyle) {\n    if (!textStyle) {\n      this.text_ = '';\n    } else {\n      var textFillStyle = textStyle.getFill();\n      if (!textFillStyle) {\n        this.textFillState_ = null;\n      } else {\n        var textFillStyleColor = textFillStyle.getColor();\n        this.textFillState_ = {\n          fillStyle: asColorLike(textFillStyleColor ?\n            textFillStyleColor : defaultFillStyle)\n        };\n      }\n      var textStrokeStyle = textStyle.getStroke();\n      if (!textStrokeStyle) {\n        this.textStrokeState_ = null;\n      } else {\n        var textStrokeStyleColor = textStrokeStyle.getColor();\n        var textStrokeStyleLineCap = textStrokeStyle.getLineCap();\n        var textStrokeStyleLineDash = textStrokeStyle.getLineDash();\n        var textStrokeStyleLineDashOffset = textStrokeStyle.getLineDashOffset();\n        var textStrokeStyleLineJoin = textStrokeStyle.getLineJoin();\n        var textStrokeStyleWidth = textStrokeStyle.getWidth();\n        var textStrokeStyleMiterLimit = textStrokeStyle.getMiterLimit();\n        this.textStrokeState_ = {\n          lineCap: textStrokeStyleLineCap !== undefined ?\n            textStrokeStyleLineCap : defaultLineCap,\n          lineDash: textStrokeStyleLineDash ?\n            textStrokeStyleLineDash : defaultLineDash,\n          lineDashOffset: textStrokeStyleLineDashOffset ?\n            textStrokeStyleLineDashOffset : defaultLineDashOffset,\n          lineJoin: textStrokeStyleLineJoin !== undefined ?\n            textStrokeStyleLineJoin : defaultLineJoin,\n          lineWidth: textStrokeStyleWidth !== undefined ?\n            textStrokeStyleWidth : defaultLineWidth,\n          miterLimit: textStrokeStyleMiterLimit !== undefined ?\n            textStrokeStyleMiterLimit : defaultMiterLimit,\n          strokeStyle: asColorLike(textStrokeStyleColor ?\n            textStrokeStyleColor : defaultStrokeStyle)\n        };\n      }\n      var textFont = textStyle.getFont();\n      var textOffsetX = textStyle.getOffsetX();\n      var textOffsetY = textStyle.getOffsetY();\n      var textRotateWithView = textStyle.getRotateWithView();\n      var textRotation = textStyle.getRotation();\n      var textScale = textStyle.getScale();\n      var textText = textStyle.getText();\n      var textTextAlign = textStyle.getTextAlign();\n      var textTextBaseline = textStyle.getTextBaseline();\n      this.textState_ = {\n        font: textFont !== undefined ?\n          textFont : defaultFont,\n        textAlign: textTextAlign !== undefined ?\n          textTextAlign : defaultTextAlign,\n        textBaseline: textTextBaseline !== undefined ?\n          textTextBaseline : defaultTextBaseline\n      };\n      this.text_ = textText !== undefined ? textText : '';\n      this.textOffsetX_ =\n          textOffsetX !== undefined ? (this.pixelRatio_ * textOffsetX) : 0;\n      this.textOffsetY_ =\n          textOffsetY !== undefined ? (this.pixelRatio_ * textOffsetY) : 0;\n      this.textRotateWithView_ = textRotateWithView !== undefined ? textRotateWithView : false;\n      this.textRotation_ = textRotation !== undefined ? textRotation : 0;\n      this.textScale_ = this.pixelRatio_ * (textScale !== undefined ?\n        textScale : 1);\n    }\n  };\n\n  return CanvasImmediateRenderer;\n}(VectorContext));\n\n\nexport default CanvasImmediateRenderer;\n\n//# sourceMappingURL=Immediate.js.map","/**\n * @module ol/pointer/EventType\n */\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n  POINTERMOVE: 'pointermove',\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel'\n};\n\n//# sourceMappingURL=EventType.js.map","/**\n * @module ol/render/canvas\n */\nimport {getFontFamilies} from '../css.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {clear} from '../obj.js';\nimport LRUCache from '../structs/LRUCache.js';\nimport {create as createTransform} from '../transform.js';\n\n\n/**\n * @typedef {Object} FillState\n * @property {import(\"../colorlike.js\").ColorLike} fillStyle\n */\n\n\n/**\n * @typedef {Object} FillStrokeState\n * @property {import(\"../colorlike.js\").ColorLike} [currentFillStyle]\n * @property {import(\"../colorlike.js\").ColorLike} [currentStrokeStyle]\n * @property {string} [currentLineCap]\n * @property {Array<number>} currentLineDash\n * @property {number} [currentLineDashOffset]\n * @property {string} [currentLineJoin]\n * @property {number} [currentLineWidth]\n * @property {number} [currentMiterLimit]\n * @property {number} [lastStroke]\n * @property {import(\"../colorlike.js\").ColorLike} [fillStyle]\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle]\n * @property {string} [lineCap]\n * @property {Array<number>} lineDash\n * @property {number} [lineDashOffset]\n * @property {string} [lineJoin]\n * @property {number} [lineWidth]\n * @property {number} [miterLimit]\n */\n\n\n/**\n * @typedef {Object} StrokeState\n * @property {string} lineCap\n * @property {Array<number>} lineDash\n * @property {number} lineDashOffset\n * @property {string} lineJoin\n * @property {number} lineWidth\n * @property {number} miterLimit\n * @property {import(\"../colorlike.js\").ColorLike} strokeStyle\n */\n\n\n/**\n * @typedef {Object} TextState\n * @property {string} font\n * @property {string} [textAlign]\n * @property {string} textBaseline\n * @property {string} [placement]\n * @property {number} [maxAngle]\n * @property {boolean} [overflow]\n * @property {import(\"../style/Fill.js\").default} [backgroundFill]\n * @property {import(\"../style/Stroke.js\").default} [backgroundStroke]\n * @property {number} [scale]\n * @property {Array<number>} [padding]\n */\n\n\n/**\n * Container for decluttered replay instructions that need to be rendered or\n * omitted together, i.e. when styles render both an image and text, or for the\n * characters that form text along lines. The basic elements of this array are\n * `[minX, minY, maxX, maxY, count]`, where the first four entries are the\n * rendered extent of the group in pixel space. `count` is the number of styles\n * in the group, i.e. 2 when an image and a text are grouped, or 1 otherwise.\n * In addition to these four elements, declutter instruction arrays (i.e. the\n * arguments to {@link module:ol/render/canvas~drawImage} are appended to the array.\n * @typedef {Array<*>} DeclutterGroup\n */\n\n\n/**\n * @const\n * @type {string}\n */\nexport var defaultFont = '10px sans-serif';\n\n\n/**\n * @const\n * @type {import(\"../color.js\").Color}\n */\nexport var defaultFillStyle = [0, 0, 0, 1];\n\n\n/**\n * @const\n * @type {string}\n */\nexport var defaultLineCap = 'round';\n\n\n/**\n * @const\n * @type {Array<number>}\n */\nexport var defaultLineDash = [];\n\n\n/**\n * @const\n * @type {number}\n */\nexport var defaultLineDashOffset = 0;\n\n\n/**\n * @const\n * @type {string}\n */\nexport var defaultLineJoin = 'round';\n\n\n/**\n * @const\n * @type {number}\n */\nexport var defaultMiterLimit = 10;\n\n\n/**\n * @const\n * @type {import(\"../color.js\").Color}\n */\nexport var defaultStrokeStyle = [0, 0, 0, 1];\n\n\n/**\n * @const\n * @type {string}\n */\nexport var defaultTextAlign = 'center';\n\n\n/**\n * @const\n * @type {string}\n */\nexport var defaultTextBaseline = 'middle';\n\n\n/**\n * @const\n * @type {Array<number>}\n */\nexport var defaultPadding = [0, 0, 0, 0];\n\n\n/**\n * @const\n * @type {number}\n */\nexport var defaultLineWidth = 1;\n\n\n/**\n * The label cache for text rendering. To change the default cache size of 2048\n * entries, use {@link module:ol/structs/LRUCache#setSize}.\n * @type {LRUCache<HTMLCanvasElement>}\n * @api\n */\nexport var labelCache = new LRUCache();\n\n\n/**\n * @type {!Object<string, number>}\n */\nexport var checkedFonts = {};\n\n\n/**\n * @type {CanvasRenderingContext2D}\n */\nvar measureContext = null;\n\n\n/**\n * @type {!Object<string, number>}\n */\nexport var textHeights = {};\n\n\n/**\n * Clears the label cache when a font becomes available.\n * @param {string} fontSpec CSS font spec.\n */\nexport var checkFont = (function() {\n  var retries = 60;\n  var checked = checkedFonts;\n  var size = '32px ';\n  var referenceFonts = ['monospace', 'serif'];\n  var len = referenceFonts.length;\n  var text = 'wmytzilWMYTZIL@#/&?$%10\\uF013';\n  var interval, referenceWidth;\n\n  function isAvailable(font) {\n    var context = getMeasureContext();\n    // Check weight ranges according to\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight#Fallback_weights\n    for (var weight = 100; weight <= 700; weight += 300) {\n      var fontWeight = weight + ' ';\n      var available = true;\n      for (var i = 0; i < len; ++i) {\n        var referenceFont = referenceFonts[i];\n        context.font = fontWeight + size + referenceFont;\n        referenceWidth = context.measureText(text).width;\n        if (font != referenceFont) {\n          context.font = fontWeight + size + font + ',' + referenceFont;\n          var width = context.measureText(text).width;\n          // If width and referenceWidth are the same, then the fallback was used\n          // instead of the font we wanted, so the font is not available.\n          available = available && width != referenceWidth;\n        }\n      }\n      if (available) {\n        // Consider font available when it is available in one weight range.\n        //FIXME With this we miss rare corner cases, so we should consider\n        //FIXME checking availability for each requested weight range.\n        return true;\n      }\n    }\n    return false;\n  }\n\n  function check() {\n    var done = true;\n    for (var font in checked) {\n      if (checked[font] < retries) {\n        if (isAvailable(font)) {\n          checked[font] = retries;\n          clear(textHeights);\n          // Make sure that loaded fonts are picked up by Safari\n          measureContext = null;\n          labelCache.clear();\n        } else {\n          ++checked[font];\n          done = false;\n        }\n      }\n    }\n    if (done) {\n      clearInterval(interval);\n      interval = undefined;\n    }\n  }\n\n  return function(fontSpec) {\n    var fontFamilies = getFontFamilies(fontSpec);\n    if (!fontFamilies) {\n      return;\n    }\n    for (var i = 0, ii = fontFamilies.length; i < ii; ++i) {\n      var fontFamily = fontFamilies[i];\n      if (!(fontFamily in checked)) {\n        checked[fontFamily] = retries;\n        if (!isAvailable(fontFamily)) {\n          checked[fontFamily] = 0;\n          if (interval === undefined) {\n            interval = setInterval(check, 32);\n          }\n        }\n      }\n    }\n  };\n})();\n\n\n/**\n * @return {CanvasRenderingContext2D} Measure context.\n */\nfunction getMeasureContext() {\n  if (!measureContext) {\n    measureContext = createCanvasContext2D(1, 1);\n  }\n  return measureContext;\n}\n\n\n/**\n * @param {string} font Font to use for measuring.\n * @return {import(\"../size.js\").Size} Measurement.\n */\nexport var measureTextHeight = (function() {\n  var span;\n  var heights = textHeights;\n  return function(font) {\n    var height = heights[font];\n    if (height == undefined) {\n      if (!span) {\n        span = document.createElement('span');\n        span.textContent = 'M';\n        span.style.margin = span.style.padding = '0 !important';\n        span.style.position = 'absolute !important';\n        span.style.left = '-99999px !important';\n      }\n      span.style.font = font;\n      document.body.appendChild(span);\n      height = heights[font] = span.offsetHeight;\n      document.body.removeChild(span);\n    }\n    return height;\n  };\n})();\n\n\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {number} Width.\n */\nexport function measureTextWidth(font, text) {\n  var measureContext = getMeasureContext();\n  if (font != measureContext.font) {\n    measureContext.font = font;\n  }\n  return measureContext.measureText(text).width;\n}\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} offsetX X offset.\n * @param {number} offsetY Y offset.\n */\nexport function rotateAtOffset(context, rotation, offsetX, offsetY) {\n  if (rotation !== 0) {\n    context.translate(offsetX, offsetY);\n    context.rotate(rotation);\n    context.translate(-offsetX, -offsetY);\n  }\n}\n\n\nexport var resetTransform = createTransform();\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {import(\"../transform.js\").Transform|null} transform Transform.\n * @param {number} opacity Opacity.\n * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image Image.\n * @param {number} originX Origin X.\n * @param {number} originY Origin Y.\n * @param {number} w Width.\n * @param {number} h Height.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} scale Scale.\n */\nexport function drawImage(context,\n  transform, opacity, image, originX, originY, w, h, x, y, scale) {\n  var alpha;\n  if (opacity != 1) {\n    alpha = context.globalAlpha;\n    context.globalAlpha = alpha * opacity;\n  }\n  if (transform) {\n    context.setTransform.apply(context, transform);\n  }\n\n  context.drawImage(image, originX, originY, w, h, x, y, w * scale, h * scale);\n\n  if (alpha) {\n    context.globalAlpha = alpha;\n  }\n  if (transform) {\n    context.setTransform.apply(context, resetTransform);\n  }\n}\n\n//# sourceMappingURL=canvas.js.map","/**\n * @module ol/layer/Property\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  OPACITY: 'opacity',\n  VISIBLE: 'visible',\n  EXTENT: 'extent',\n  Z_INDEX: 'zIndex',\n  MAX_RESOLUTION: 'maxResolution',\n  MIN_RESOLUTION: 'minResolution',\n  SOURCE: 'source'\n};\n\n//# sourceMappingURL=Property.js.map","/**\n * @module ol/net\n */\nimport {getUid} from './util.js';\n\n\n/**\n * Simple JSONP helper. Supports error callbacks and a custom callback param.\n * The error callback will be called when no JSONP is executed after 10 seconds.\n *\n * @param {string} url Request url. A 'callback' query parameter will be\n *     appended.\n * @param {Function} callback Callback on success.\n * @param {function()=} opt_errback Callback on error.\n * @param {string=} opt_callbackParam Custom query parameter for the JSONP\n *     callback. Default is 'callback'.\n */\nexport function jsonp(url, callback, opt_errback, opt_callbackParam) {\n  var script = document.createElement('script');\n  var key = 'olc_' + getUid(callback);\n  function cleanup() {\n    delete window[key];\n    script.parentNode.removeChild(script);\n  }\n  script.async = true;\n  script.src = url + (url.indexOf('?') == -1 ? '?' : '&') +\n      (opt_callbackParam || 'callback') + '=' + key;\n  var timer = setTimeout(function() {\n    cleanup();\n    if (opt_errback) {\n      opt_errback();\n    }\n  }, 10000);\n  window[key] = function(data) {\n    clearTimeout(timer);\n    cleanup();\n    callback(data);\n  };\n  document.getElementsByTagName('head')[0].appendChild(script);\n}\n\n//# sourceMappingURL=net.js.map","/**\n * @module ol/proj/Projection\n */\nimport {METERS_PER_UNIT} from './Units.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} code The SRS identifier code, e.g. `EPSG:4326`.\n * @property {import(\"./Units.js\").default|string} [units] Units. Required unless a\n * proj4 projection is defined for `code`.\n * @property {import(\"../extent.js\").Extent} [extent] The validity extent for the SRS.\n * @property {string} [axisOrientation='enu'] The axis orientation as specified in Proj4.\n * @property {boolean} [global=false] Whether the projection is valid for the whole globe.\n * @property {number} [metersPerUnit] The meters per unit for the SRS.\n * If not provided, the `units` are used to get the meters per unit from the {@link module:ol/proj/Units~METERS_PER_UNIT}\n * lookup table.\n * @property {import(\"../extent.js\").Extent} [worldExtent] The world extent for the SRS.\n * @property {function(number, import(\"../coordinate.js\").Coordinate):number} [getPointResolution]\n * Function to determine resolution at a point. The function is called with a\n * `{number}` view resolution and an `{import(\"../coordinate.js\").Coordinate}` as arguments, and returns\n * the `{number}` resolution at the passed coordinate. If this is `undefined`,\n * the default {@link module:ol/proj#getPointResolution} function will be used.\n */\n\n\n/**\n * @classdesc\n * Projection definition class. One of these is created for each projection\n * supported in the application and stored in the {@link module:ol/proj} namespace.\n * You can use these in applications, but this is not required, as API params\n * and options use {@link module:ol/proj~ProjectionLike} which means the simple string\n * code will suffice.\n *\n * You can use {@link module:ol/proj~get} to retrieve the object for a particular\n * projection.\n *\n * The library includes definitions for `EPSG:4326` and `EPSG:3857`, together\n * with the following aliases:\n * * `EPSG:4326`: CRS:84, urn:ogc:def:crs:EPSG:6.6:4326,\n *     urn:ogc:def:crs:OGC:1.3:CRS84, urn:ogc:def:crs:OGC:2:84,\n *     http://www.opengis.net/gml/srs/epsg.xml#4326,\n *     urn:x-ogc:def:crs:EPSG:4326\n * * `EPSG:3857`: EPSG:102100, EPSG:102113, EPSG:900913,\n *     urn:ogc:def:crs:EPSG:6.18:3:3857,\n *     http://www.opengis.net/gml/srs/epsg.xml#3857\n *\n * If you use [proj4js](https://github.com/proj4js/proj4js), aliases can\n * be added using `proj4.defs()`. After all required projection definitions are\n * added, call the {@link module:ol/proj/proj4~register} function.\n *\n * @api\n */\nvar Projection = function Projection(options) {\n  /**\n   * @private\n   * @type {string}\n   */\n  this.code_ = options.code;\n\n  /**\n   * Units of projected coordinates. When set to `TILE_PIXELS`, a\n   * `this.extent_` and `this.worldExtent_` must be configured properly for each\n   * tile.\n   * @private\n   * @type {import(\"./Units.js\").default}\n   */\n  this.units_ = /** @type {import(\"./Units.js\").default} */ (options.units);\n\n  /**\n   * Validity extent of the projection in projected coordinates. For projections\n   * with `TILE_PIXELS` units, this is the extent of the tile in\n   * tile pixel space.\n   * @private\n   * @type {import(\"../extent.js\").Extent}\n   */\n  this.extent_ = options.extent !== undefined ? options.extent : null;\n\n  /**\n   * Extent of the world in EPSG:4326. For projections with\n   * `TILE_PIXELS` units, this is the extent of the tile in\n   * projected coordinate space.\n   * @private\n   * @type {import(\"../extent.js\").Extent}\n   */\n  this.worldExtent_ = options.worldExtent !== undefined ?\n    options.worldExtent : null;\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.axisOrientation_ = options.axisOrientation !== undefined ?\n    options.axisOrientation : 'enu';\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.global_ = options.global !== undefined ? options.global : false;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.canWrapX_ = !!(this.global_ && this.extent_);\n\n  /**\n   * @private\n   * @type {function(number, import(\"../coordinate.js\").Coordinate):number|undefined}\n   */\n  this.getPointResolutionFunc_ = options.getPointResolution;\n\n  /**\n   * @private\n   * @type {import(\"../tilegrid/TileGrid.js\").default}\n   */\n  this.defaultTileGrid_ = null;\n\n  /**\n   * @private\n   * @type {number|undefined}\n   */\n  this.metersPerUnit_ = options.metersPerUnit;\n};\n\n/**\n * @return {boolean} The projection is suitable for wrapping the x-axis\n */\nProjection.prototype.canWrapX = function canWrapX () {\n  return this.canWrapX_;\n};\n\n/**\n * Get the code for this projection, e.g. 'EPSG:4326'.\n * @return {string} Code.\n * @api\n */\nProjection.prototype.getCode = function getCode () {\n  return this.code_;\n};\n\n/**\n * Get the validity extent for this projection.\n * @return {import(\"../extent.js\").Extent} Extent.\n * @api\n */\nProjection.prototype.getExtent = function getExtent () {\n  return this.extent_;\n};\n\n/**\n * Get the units of this projection.\n * @return {import(\"./Units.js\").default} Units.\n * @api\n */\nProjection.prototype.getUnits = function getUnits () {\n  return this.units_;\n};\n\n/**\n * Get the amount of meters per unit of this projection.If the projection is\n * not configured with `metersPerUnit` or a units identifier, the return is\n * `undefined`.\n * @return {number|undefined} Meters.\n * @api\n */\nProjection.prototype.getMetersPerUnit = function getMetersPerUnit () {\n  return this.metersPerUnit_ || METERS_PER_UNIT[this.units_];\n};\n\n/**\n * Get the world extent for this projection.\n * @return {import(\"../extent.js\").Extent} Extent.\n * @api\n */\nProjection.prototype.getWorldExtent = function getWorldExtent () {\n  return this.worldExtent_;\n};\n\n/**\n * Get the axis orientation of this projection.\n * Example values are:\n * enu - the default easting, northing, elevation.\n * neu - northing, easting, up - useful for \"lat/long\" geographic coordinates,\n *   or south orientated transverse mercator.\n * wnu - westing, northing, up - some planetary coordinate systems have\n *   \"west positive\" coordinate systems\n * @return {string} Axis orientation.\n * @api\n */\nProjection.prototype.getAxisOrientation = function getAxisOrientation () {\n  return this.axisOrientation_;\n};\n\n/**\n * Is this projection a global projection which spans the whole world?\n * @return {boolean} Whether the projection is global.\n * @api\n */\nProjection.prototype.isGlobal = function isGlobal () {\n  return this.global_;\n};\n\n/**\n * Set if the projection is a global projection which spans the whole world\n * @param {boolean} global Whether the projection is global.\n * @api\n */\nProjection.prototype.setGlobal = function setGlobal (global) {\n  this.global_ = global;\n  this.canWrapX_ = !!(global && this.extent_);\n};\n\n/**\n * @return {import(\"../tilegrid/TileGrid.js\").default} The default tile grid.\n */\nProjection.prototype.getDefaultTileGrid = function getDefaultTileGrid () {\n  return this.defaultTileGrid_;\n};\n\n/**\n * @param {import(\"../tilegrid/TileGrid.js\").default} tileGrid The default tile grid.\n */\nProjection.prototype.setDefaultTileGrid = function setDefaultTileGrid (tileGrid) {\n  this.defaultTileGrid_ = tileGrid;\n};\n\n/**\n * Set the validity extent for this projection.\n * @param {import(\"../extent.js\").Extent} extent Extent.\n * @api\n */\nProjection.prototype.setExtent = function setExtent (extent) {\n  this.extent_ = extent;\n  this.canWrapX_ = !!(this.global_ && extent);\n};\n\n/**\n * Set the world extent for this projection.\n * @param {import(\"../extent.js\").Extent} worldExtent World extent\n *   [minlon, minlat, maxlon, maxlat].\n * @api\n */\nProjection.prototype.setWorldExtent = function setWorldExtent (worldExtent) {\n  this.worldExtent_ = worldExtent;\n};\n\n/**\n * Set the getPointResolution function (see {@link module:ol/proj~getPointResolution}\n * for this projection.\n * @param {function(number, import(\"../coordinate.js\").Coordinate):number} func Function\n * @api\n */\nProjection.prototype.setGetPointResolution = function setGetPointResolution (func) {\n  this.getPointResolutionFunc_ = func;\n};\n\n/**\n * Get the custom point resolution function for this projection (if set).\n * @return {function(number, import(\"../coordinate.js\").Coordinate):number|undefined} The custom point\n * resolution function (if set).\n */\nProjection.prototype.getPointResolutionFunc = function getPointResolutionFunc () {\n  return this.getPointResolutionFunc_;\n};\n\nexport default Projection;\n\n//# sourceMappingURL=Projection.js.map","/**\n * @module ol/render/VectorContext\n */\n\n/**\n * @classdesc\n * Context for drawing geometries.  A vector context is available on render\n * events and does not need to be constructed directly.\n * @api\n */\nvar VectorContext = function VectorContext () {};\n\nVectorContext.prototype.drawCustom = function drawCustom (geometry, feature, renderer) {};\n\n/**\n * Render a geometry.\n *\n * @param {import(\"../geom/Geometry.js\").default} geometry The geometry to render.\n */\nVectorContext.prototype.drawGeometry = function drawGeometry (geometry) {};\n\n/**\n * Set the rendering style.\n *\n * @param {import(\"../style/Style.js\").default} style The rendering style.\n */\nVectorContext.prototype.setStyle = function setStyle (style) {};\n\n/**\n * @param {import(\"../geom/Circle.js\").default} circleGeometry Circle geometry.\n * @param {import(\"../Feature.js\").default} feature Feature.\n */\nVectorContext.prototype.drawCircle = function drawCircle (circleGeometry, feature) {};\n\n/**\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n */\nVectorContext.prototype.drawFeature = function drawFeature (feature, style) {};\n\n/**\n * @param {import(\"../geom/GeometryCollection.js\").default} geometryCollectionGeometry Geometry collection.\n * @param {import(\"../Feature.js\").default} feature Feature.\n */\nVectorContext.prototype.drawGeometryCollection = function drawGeometryCollection (geometryCollectionGeometry, feature) {};\n\n/**\n * @param {import(\"../geom/LineString.js\").default|import(\"./Feature.js\").default} lineStringGeometry Line string geometry.\n * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n */\nVectorContext.prototype.drawLineString = function drawLineString (lineStringGeometry, feature) {};\n\n/**\n * @param {import(\"../geom/MultiLineString.js\").default|import(\"./Feature.js\").default} multiLineStringGeometry MultiLineString geometry.\n * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n */\nVectorContext.prototype.drawMultiLineString = function drawMultiLineString (multiLineStringGeometry, feature) {};\n\n/**\n * @param {import(\"../geom/MultiPoint.js\").default|import(\"./Feature.js\").default} multiPointGeometry MultiPoint geometry.\n * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n */\nVectorContext.prototype.drawMultiPoint = function drawMultiPoint (multiPointGeometry, feature) {};\n\n/**\n * @param {import(\"../geom/MultiPolygon.js\").default} multiPolygonGeometry MultiPolygon geometry.\n * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n */\nVectorContext.prototype.drawMultiPolygon = function drawMultiPolygon (multiPolygonGeometry, feature) {};\n\n/**\n * @param {import(\"../geom/Point.js\").default|import(\"./Feature.js\").default} pointGeometry Point geometry.\n * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n */\nVectorContext.prototype.drawPoint = function drawPoint (pointGeometry, feature) {};\n\n/**\n * @param {import(\"../geom/Polygon.js\").default|import(\"./Feature.js\").default} polygonGeometry Polygon geometry.\n * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n */\nVectorContext.prototype.drawPolygon = function drawPolygon (polygonGeometry, feature) {};\n\n/**\n * @param {import(\"../geom/Geometry.js\").default|import(\"./Feature.js\").default} geometry Geometry.\n * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n */\nVectorContext.prototype.drawText = function drawText (geometry, feature) {};\n\n/**\n * @param {import(\"../style/Fill.js\").default} fillStyle Fill style.\n * @param {import(\"../style/Stroke.js\").default} strokeStyle Stroke style.\n */\nVectorContext.prototype.setFillStrokeStyle = function setFillStrokeStyle (fillStyle, strokeStyle) {};\n\n/**\n * @param {import(\"../style/Image.js\").default} imageStyle Image style.\n * @param {import(\"./canvas.js\").DeclutterGroup=} opt_declutterGroup Declutter.\n */\nVectorContext.prototype.setImageStyle = function setImageStyle (imageStyle, opt_declutterGroup) {};\n\n/**\n * @param {import(\"../style/Text.js\").default} textStyle Text style.\n * @param {import(\"./canvas.js\").DeclutterGroup=} opt_declutterGroup Declutter.\n */\nVectorContext.prototype.setTextStyle = function setTextStyle (textStyle, opt_declutterGroup) {};\n\nexport default VectorContext;\n\n//# sourceMappingURL=VectorContext.js.map","/**\n * @module ol/proj/Units\n */\n\n/**\n * Projection units: `'degrees'`, `'ft'`, `'m'`, `'pixels'`, `'tile-pixels'` or\n * `'us-ft'`.\n * @enum {string}\n */\nvar Units = {\n  DEGREES: 'degrees',\n  FEET: 'ft',\n  METERS: 'm',\n  PIXELS: 'pixels',\n  TILE_PIXELS: 'tile-pixels',\n  USFEET: 'us-ft'\n};\n\n\n/**\n * Meters per unit lookup table.\n * @const\n * @type {Object<Units, number>}\n * @api\n */\nexport var METERS_PER_UNIT = {};\n// use the radius of the Normal sphere\nMETERS_PER_UNIT[Units.DEGREES] = 2 * Math.PI * 6370997 / 360;\nMETERS_PER_UNIT[Units.FEET] = 0.3048;\nMETERS_PER_UNIT[Units.METERS] = 1;\nMETERS_PER_UNIT[Units.USFEET] = 1200 / 3937;\n\nexport default Units;\n\n//# sourceMappingURL=Units.js.map"],"sourceRoot":""}